/**
 * @license
 * Copyright (c) 2014, 2024, Oracle and/or its affiliates.
 * Licensed under The Universal Permissive License (UPL), Version 1.0
 * as shown at https://oss.oracle.com/licenses/upl/
 * @ignore
 */
!function(){"use strict";var e=/(^.*(^|\/)nls(\/|$))([^/]*)\/?([^/]*)/;function t(e,t,n,r,i,o,s){if(t[e]||(e=e.replace(/^zh-(Hans|Hant)-([^-]+)$/,"zh-$2")),t[e]){if(n.push(e),!0===t[e]||1===t[e]){var a=s?s+e:e;r.push(i+a+"/"+o)}return!0}return!1}function n(e){return"object"==typeof e}function r(e,t){for(var i=Object.keys(t),o=0;o<i.length;o++){var s=i[o];null==e[s]?e[s]=t[s]:n(t[s])&&n(e[s])&&r(e[s],t[s])}}define("ojL10n",["module"],function(n){var i=n.config?n.config():{};return{version:"2.0.1+",load:function(n,o,s,a){var l;(a=a||{}).locale&&(i.locale=a.locale);var c,u,d,h,p,f,_,m,g,v,y,E=e.exec(n),b=E[1],S=E[5],T=[],C={},P="";E[5]?(l=(b=E[1])+S,c=E[4]):(l=n,S=E[4],c=i.locale,"undefined"!=typeof document?(c||(c=a.isBuild?"root":document.documentElement.lang)||(c=void 0===navigator?"root":navigator.systemLanguage||navigator.language||navigator.userLanguage||"root"),i.locale=c):c="root"),u=function(e){var t,n=e.toLowerCase().split(/-|_/),r=[n[0]],i=1;for(t=1;t<n.length;t++){var o=n[t],s=o.length;if(1===s)break;switch(i){case 1:if(i=2,4===s){r.push(o.charAt(0).toUpperCase()+o.slice(1));break}case 2:i=3,r.push(o.toUpperCase());break;default:r.push(o)}}return function(e){if(!("zh"!==e[0]||e.length>1&&4===e[1].length)){var t="Hans",n=e.length>1?e[1]:null;"TW"!==n&&"MO"!==n&&"HK"!==n||(t="Hant"),e.splice(1,0,t)}}(r),r}(c),h=i.noOverlay,p=i.defaultNoOverlayLocale;var O=i.localePrefix;for((g=i.merge)&&(f=g[b+S])&&(E=e.exec(f),_=E[1],m=E[4]),v=[],d=0;d<u.length;d++)P+=(P?"-":"")+u[d],v.push(P);a.isBuild?(T.push(l),f&&T.push(f),o(T,function(){s()})):("query"===i.includeLocale&&(l=o.toUrl(l+".js"),l+=(-1===l.indexOf("?")?"?":"&")+"loc="+c),y=[l],f&&y.push(f),o(y,function(e,n){var i=[],a=function(e,n,r){for(var o=h||!0===e.__noOverlay,s=p||e.__defaultNoOverlayLocale,a=!1,l=v.length-1;l>=0&&(!a||!o);l--)a=t(v[l],e,i,T,n,r,O);var c=1===v.length&&"root"===v[0];o&&(c||!a)&&s&&t(s,e,i,T,n,r,O),c||t("root",e,i,T,n,r,O)};a(e,b,S);var l=i.length;n&&a(n,_,m),o(T,function(){var t=function(e,t,n,s,a){for(var l=t;l<n&&i[l];l++){var c=i[l],u=O?O+c:c,d=e[c];!0!==d&&1!==d||(d=o(s+u+"/"+a)),r(C,d||{})}};t(n,l,i.length,_,m),t(e,0,l,b,S),C._ojLocale_=u.join("-"),s(C)})}))}}})}(),define("ojtranslations/nls/ojtranslations",{root:{"oj-message":{fatal:"Fatal",error:"Error",warning:"Warning",info:"Info",confirmation:"Confirmation","compact-type-summary":"{0}: {1}"},"oj-converter":{summary:"Value is not in the expected format.",detail:"Enter a value in the expected format.","plural-separator":", ",hint:{summary:"Example: {exampleValue}",detail:"Try again using a format like this: {exampleValue}.","detail-plural":"Enter a value in these formats: {exampleValue}."},optionHint:{detail:"An accepted value for option '{propertyName}' is '{propertyValueValid}'.","detail-plural":"Accepted values for option '{propertyName}' are '{propertyValueValid}'."},optionTypesMismatch:{summary:"A value for the option '{requiredPropertyName}' is required when the option '{propertyName}' is set to '{propertyValue}'."},optionTypeInvalid:{summary:"A value of the expected type was not provided for option '{propertyName}'."},optionOutOfRange:{summary:"Value {propertyValue} is out of range for the option '{propertyName}'."},optionValueInvalid:{summary:"An invalid value '{propertyValue}' was specified for the option '{propertyName}'."},number:{decimalFormatMismatch:{summary:"The provided value is not in the expected number format."},shortLongUnsupportedParse:{summary:"'short' and 'long' are not supported for converter parsing.",detail:"Change component to readonly. readonly fields do not call the converter's parse function."},currencyFormatMismatch:{summary:"The provided value is not in the expected currency format."},percentFormatMismatch:{summary:"The provided value is not in the expected percent format."},invalidNumberFormat:{summary:"The provided value is not a valid number.",detail:"Please provide valid number."},parseError:{detail:"Enter a number."}},color:{invalidFormat:{summary:"Invalid color format.",detail:"Invalid color format option specification."},invalidSyntax:{summary:"Invalid color specification.",detail:"Enter a color value that conforms to the CSS3 standard."}},datetime:{datetimeOutOfRange:{summary:"Value '{value}' is out of range for the '{propertyName}'.",detail:"Enter a value between '{minValue}' and '{maxValue}'.",hour:"hour",minute:"minute",second:"second",millisec:"millisec",month:"month",day:"day",year:"year","month name":"month name",weekday:"weekday"},dateFormatMismatch:{summary:"The provided value is not in the expected date format."},invalidTimeZoneID:{summary:"Invalid timezone id {timeZoneID} provided."},nonExistingTime:{summary:"The input time does not exist because it falls during the transition to daylight saving time."},missingTimeZoneData:{summary:"TimeZone data is missing. Please call require 'ojs/ojtimezonedata' in order to load the TimeZone data."},timeFormatMismatch:{summary:"The provided value is not in the expected time format."},datetimeFormatMismatch:{summary:"The provided value is not in the expected date and time format."},dateToWeekdayMismatch:{summary:"Day '{date}' does not fall on a '{weekday}'.",detail:"Enter a weekday that corresponds with the date."},invalidISOString:{invalidRangeSummary:"The value '{value}' is out of range for the '{propertyName}' field in the ISO 8601 string '{isoStr}'.",summary:"The provided '{isoStr}' is not a valid ISO 8601 string.",detail:"Please provide valid ISO 8601 string."}}},"oj-validator":{length:{hint:{min:"Enter {min} or more characters.",max:"Enter {max} or fewer characters.",inRange:"Enter {min} to {max} characters.",exact:"Enter {length} characters."},messageDetail:{tooShort:"Enter {min} or more characters.",tooLong:"Enter no more than {max} characters."},messageSummary:{tooShort:"There are too few characters.",tooLong:"There are too many characters."}},range:{number:{hint:{min:"Enter a number greater than or equal to {min}.",max:"Enter a number less than or equal to {max}.",inRange:"Enter a number between {min} and {max}.",exact:"Enter the number {num}."},messageDetail:{rangeUnderflow:"Enter a number that's {min} or higher.",rangeOverflow:"Enter a number that's {max} or lower.",exact:"Enter the number {num}."},messageSummary:{rangeUnderflow:"The number is too low.",rangeOverflow:"The number is too high."}},datetime:{hint:{min:"Enter a date and time on or after {min}.",max:"Enter a date and time on or before {max}.",inRange:"Enter a date and time between {min} and {max}."},messageDetail:{rangeUnderflow:"Enter a date and time that's on or after {min}.",rangeOverflow:"Enter a date and time that's on or before {max}."},messageSummary:{rangeUnderflow:"Date and time is earlier than the minimum date and time.",rangeOverflow:"Date and time is later than the maximum date and time."}},date:{hint:{min:"Enter a date on or after {min}.",max:"Enter a date on or before {max}.",inRange:"Enter a date between {min} and {max}."},messageDetail:{rangeUnderflow:"Enter a date that's on or after {min}.",rangeOverflow:"Enter a date that's on or before {max}."},messageSummary:{rangeUnderflow:"Date is earlier than the minimum date.",rangeOverflow:"Date is later than the maximum date."}},time:{hint:{min:"Enter a time on or after {min}.",max:"Enter a time on or before {max}.",inRange:"Enter a time between {min} and {max}."},messageDetail:{rangeUnderflow:"Enter a time that's {min} or later.",rangeOverflow:"Enter a time that's {max} or earlier."},messageSummary:{rangeUnderflow:"Time is earlier than the minimum time.",rangeOverflow:"Time is later than the maximum time."}}},restriction:{date:{messageSummary:"Date {value} is of a disabled entry.",messageDetail:"The date you selected isn't available. Try another date."}},regExp:{summary:"Format is incorrect.",detail:"Enter allowable values described in this regular expression: '{pattern}'."},required:{summary:"Value is required.",detail:"Enter a value."}},"oj-ojEditableValue":{loading:"Loading",requiredText:"Required",helpSourceText:"Learn more..."},"oj-ojInputDate":{done:"Done",cancel:"Cancel",time:"Time",accessibleClearIconAltText:"Clear input",prevText:"Previous",nextText:"Next",currentText:"Today",weekHeader:"Wk",tooltipCalendar:"Select Date.",tooltipCalendarTime:"Select Date Time.",tooltipCalendarDisabled:"Select Date Disabled.",tooltipCalendarTimeDisabled:"Select Date Time Disabled.",picker:"Picker",weekText:"Week",datePicker:"Date Picker",inputHelp:"Press Key down or Key up for access to Calendar.",inputHelpBoth:"Press Key down or Key up for access to Calendar and Shift + Key down or Shift Key up for access to time drop down.",dateTimeRange:{hint:{min:"",max:"",inRange:""},messageDetail:{rangeUnderflow:"",rangeOverflow:""},messageSummary:{rangeUnderflow:"",rangeOverflow:""}},dateRestriction:{hint:"",messageSummary:"",messageDetail:""},accessibleMaxLengthExceeded:"Maximum length {len} exceeded.",accessibleMaxLengthRemaining:"{chars} characters left.",regexp:{messageSummary:"",messageDetail:""},required:{hint:""}},"oj-ojInputTime":{accessibleClearIconAltText:"Clear input",cancelText:"Cancel",okText:"OK",currentTimeText:"Now",hourWheelLabel:"Hour",minuteWheelLabel:"Minute",ampmWheelLabel:"AMPM",tooltipTime:"Select Time.",tooltipTimeDisabled:"Select Time Disabled.",inputHelp:"Press Key down or Key up for access to time drop down.",dateTimeRange:{hint:{min:"",max:"",inRange:""},messageDetail:{rangeUnderflow:"",rangeOverflow:""},messageSummary:{rangeUnderflow:"",rangeOverflow:""}}},"oj-inputBase":{required:{hint:"",messageSummary:"",messageDetail:""},regexp:{messageSummary:"",messageDetail:""},accessibleMaxLengthExceeded:"Maximum length {len} exceeded.",accessibleMaxLengthRemaining:"{chars} characters left."},"oj-ojInputText":{accessibleClearIcon:"Clear"},"oj-ojInputPassword":{regexp:{messageDetail:"Value must match this pattern: '{pattern}'."},accessibleShowPassword:"Show password.",accessibleHidePassword:"Hide password."},"oj-ojFilmStrip":{labelAccFilmStrip:"Displaying page {pageIndex} of {pageCount}",labelAccArrowNextPage:"Select Next to display next page",labelAccArrowPreviousPage:"Select Previous to display previous page",tipArrowNextPage:"Next",tipArrowPreviousPage:"Previous"},"oj-ojDataGrid":{accessibleSortAscending:"{id} sorted in ascending order",accessibleSortDescending:"{id} sorted in descending order",accessibleSortable:"{id} sortable",accessibleActionableMode:"Enter actionable mode.",accessibleNavigationMode:"Enter navigation mode, press F2 to enter edit or actionable mode.",accessibleEditableMode:"Enter editable mode, press escape to navigate outside the data grid.",accessibleSummaryExact:"This is a data grid with {rownum} rows and {colnum} columns",accessibleSummaryEstimate:"This is a data grid with unknown number of rows and columns",accessibleSummaryExpanded:"There are currently {num} rows expanded",accessibleRowExpanded:"Row expanded",accessibleExpanded:"Expanded",accessibleRowCollapsed:"Row collapsed",accessibleCollapsed:"Collapsed",accessibleRowSelected:"Row {row} selected",accessibleColumnSelected:"Column {column} selected",accessibleStateSelected:"selected",accessibleMultiCellSelected:"{num} cells selected",accessibleColumnSpanContext:"{extent} wide",accessibleRowSpanContext:"{extent} high",accessibleRowContext:"Row {index}",accessibleColumnContext:"Column {index}",accessibleRowHeaderContext:"Row Header {index}",accessibleColumnHeaderContext:"Column Header {index}",accessibleRowEndHeaderContext:"Row End Header {index}",accessibleColumnEndHeaderContext:"Column End Header {index}",accessibleRowHeaderLabelContext:"Row Header Label {level}",accessibleColumnHeaderLabelContext:"Column Header Label {level}",accessibleRowEndHeaderLabelContext:"Row End Header Label {level}",accessibleColumnEndHeaderLabelContext:"Column End Header Label {level}",accessibleLevelContext:"Level {level}",accessibleRangeSelectModeOn:"Add selected range of cells mode on.",accessibleRangeSelectModeOff:"Add selected range of cells mode off.",accessibleFirstRow:"You have reached the first row.",accessibleLastRow:"You have reached the last row.",accessibleFirstColumn:"You have reached the first column",accessibleLastColumn:"You have reached the last column.",accessibleSelectionAffordanceTop:"Top selection handle.",accessibleSelectionAffordanceBottom:"Bottom selection handle.",accessibleLevelHierarchicalContext:"Level {level}",accessibleRowHierarchicalFull:"Row {posInSet} of {setSize} rows",accessibleRowHierarchicalPartial:"Row {posInSet} of at least {setSize} rows",accessibleRowHierarchicalUnknown:"At least row {posInSet} of at least {setSize} rows",accessibleColumnHierarchicalFull:"Column {posInSet} of {setSize} columns",accessibleColumnHierarchicalPartial:"Column {posInSet} of at least {setSize} columns",accessibleColumnHierarchicalUnknown:"At least column {posInSet} of at least {setSize} columns",msgFetchingData:"Fetching Data...",msgNoData:"No items to display.",msgReadOnly:"This cell is read-only and can't be edited.",labelHideColumns:"Hide Columns",labelHideRows:"Hide Rows",labelUnhideColumns:"Unhide Columns",labelUnhideRows:"Unhide Rows",labelResize:"Resize",labelResizeWidth:"Resize Width",labelResizeHeight:"Resize Height",labelSortAsc:"Sort Ascending",labelSortDsc:"Sort Descending",labelSortRow:"Sort Row",labelSortRowAsc:"Sort Row Ascending",labelSortRowDsc:"Sort Row Descending",labelSortCol:"Sort Column",labelSortColAsc:"Sort Column Ascending",labelSortColDsc:"Sort Column Descending",labelFilter:"Filter",labelFilterCol:"Filter Column",labelCut:"Cut",labelPaste:"Paste",labelCutCells:"Cut",labelPasteCells:"Paste",labelCopyCells:"Copy",labelAutoFill:"Autofill",labelEnableNonContiguous:"Enable Non-Contiguous Selection",labelDisableNonContiguous:"Disable Non-Contiguous Selection",labelResizeDialogSubmit:"OK",labelResizeDialogCancel:"Cancel",accessibleContainsControls:"Contains Controls",labelSelectMultiple:"Select Multiple",labelResizeDialogApply:"Apply",labelResizeFitToContent:"Resize to Fit",columnWidth:"Width in Pixels",rowHeight:"Height in Pixels",labelResizeColumn:"Resize Column",labelResizeRow:"Resize Row",resizeColumnDialog:"Resize column",resizeRowDialog:"Resize row",labelFreezeRow:"Freeze Rows",labelFreezeCol:"Freeze Columns",labelUnfreezeRow:"Unfreeze Rows",labelUnfreezeCol:"Unfreeze Columns",collapsedText:"Collapse",expandedText:"Expand",tooltipRequired:"Required"},"oj-ojRowExpander":{accessibleLevelDescription:"Level {level}",accessibleRowDescription:"Level {level}, Row {num} of {total}",accessibleRowDescriptionAtLeast:"Level {level}, Row {num} of at least {total}",accessibleRowExpanded:"Row expanded",accessibleRowCollapsed:"Row collapsed",accessibleStateExpanded:"expanded",accessibleStateCollapsed:"collapsed"},"oj-ojStreamList":{msgFetchingData:"Fetching Data..."},"oj-ojListView":{msgFetchingData:"Fetching Data...",msgNoData:"No items to display.",msgItemsAppended:"{count} items appended to the end.",msgFetchCompleted:"All items are fetched.",indexerCharacters:"A|B|C|D|E|F|G|H|I|J|K|L|M|N|O|P|Q|R|S|T|U|V|W|X|Y|Z",accessibleExpandCollapseInstructionText:"Use arrow keys to expand and collapse.",accessibleGroupExpand:"Expanded",accessibleGroupCollapse:"Collapsed",accessibleReorderTouchInstructionText:"Double tap and hold.  Wait for the sound then drag to rearrange.",accessibleReorderBeforeItem:"Before {item}",accessibleReorderAfterItem:"After {item}",accessibleReorderInsideItem:"Into {item}",accessibleNavigateSkipItems:"Skipping {numSkip} items",accessibleSuggestion:"Suggestion",labelCut:"Cut",labelCopy:"Copy",labelPaste:"Paste",labelPasteBefore:"Paste Before",labelPasteAfter:"Paste After"},"oj-ojWaterfallLayout":{msgFetchingData:"Fetching Data..."},"oj-_ojLabel":{tooltipHelp:"Help",tooltipRequired:"Required"},"oj-ojLabel":{tooltipHelp:"Help",tooltipRequired:"Required"},"oj-ojInputNumber":{required:{hint:"",messageSummary:"",messageDetail:""},numberRange:{hint:{min:"",max:"",inRange:"",exact:""},messageDetail:{rangeUnderflow:"",rangeOverflow:"",exact:""},messageSummary:{rangeUnderflow:"",rangeOverflow:""}},tooltipDecrement:"Decrement",tooltipIncrement:"Increment"},"oj-ojTable":{accessibleAddRow:"Enter data to add a new row.",accessibleColumnContext:"Column {index}",accessibleColumnFooterContext:"Column Footer {index}",accessibleColumnHeaderContext:"Column Header {index}",accessibleContainsControls:"Contains Controls",accessibleColumnsSpan:"Spans {count} Columns",accessibleEditableSummary:"Press F2 to focus read only controls or enter to begin editing",accessibleRowContext:"Row {index}",accessibleSortable:"{id} sortable",accessibleSortAscending:"{id} sorted in ascending order",accessibleSortDescending:"{id} sorted in descending order",accessibleStateSelected:"selected",accessibleStateUnselected:"unselected",accessibleSummaryEstimate:"Table with {colnum} columns and more than {rownum} rows",accessibleSummaryExact:"Table with {colnum} columns and {rownum} rows",labelAccSelectionAffordanceTop:"Top selection handle",labelAccSelectionAffordanceBottom:"Bottom selection handle",labelEnableNonContiguousSelection:"Enable Non-Contiguous Selection",labelDisableNonContiguousSelection:"Disable Non-Contiguous Selection",labelResize:"Resize",labelResizeColumn:"Resize Column",labelResizePopupSubmit:"OK",labelResizePopupCancel:"Cancel",labelResizePopupSpinner:"Resize Column",labelResizeColumnDialog:"Resize column",labelColumnWidth:"Width in Pixels",labelResizeDialogApply:"Apply",labelSelectRow:"Select Row",labelSelectAllRows:"Select All Rows",labelEditRow:"Edit Row",labelSelectAndEditRow:"Select And Edit Row",labelSelectColumn:"Select Column",labelSort:"Sort",labelSortAsc:"Sort Ascending",labelSortDsc:"Sort Descending",msgFetchingData:"Fetching Data...",msgNoData:"No data to display.",msgInitializing:"Initializing...",msgColumnResizeWidthValidation:"Width value must be an integer.",msgScrollPolicyMaxCountSummary:"Exceeded maximum rows for table scrolling.",msgScrollPolicyMaxCountDetail:"Please reload with smaller data set.",msgStatusSortAscending:"{0} sorted in ascending order.",msgStatusSortDescending:"{0} sorted in descending order.",tooltipRequired:"Required"},"oj-ojTabs":{labelCut:"Cut",labelPasteBefore:"Paste Before",labelPasteAfter:"Paste After",labelRemove:"Remove",labelReorder:"Reorder",removeCueText:"Removable"},"oj-ojCheckboxset":{readonlyNoValue:"",required:{hint:"",messageSummary:"",messageDetail:"Select a value."}},"oj-ojRadioset":{readonlyNoValue:"",required:{hint:"",messageSummary:"",messageDetail:"Select a value."}},"oj-ojSelect":{required:{hint:"",messageSummary:"",messageDetail:"Select a value."},searchField:"Search field",noMatchesFound:"No matches found",noMoreResults:"No more results",oneMatchesFound:"One match found",moreMatchesFound:"{num} matches found",filterFurther:"More results available, please filter further."},"oj-ojSwitch":{SwitchON:"On",SwitchOFF:"Off"},"oj-ojCombobox":{required:{hint:"",messageSummary:"",messageDetail:""},noMatchesFound:"No matches found",noMoreResults:"No more results",oneMatchesFound:"One match found",moreMatchesFound:"{num} matches found",filterFurther:"More results available, please filter further."},"oj-ojSelectSingle":{required:{hint:"",messageSummary:"",messageDetail:"Select a value."},noMatchesFound:"No matches found",oneMatchFound:"One match found",multipleMatchesFound:"{num} matches found",nOrMoreMatchesFound:"{num} or more matches found",cancel:"Cancel",labelAccOpenDropdown:"expand",labelAccClearValue:"clear value",noResultsLine1:"No results found",noResultsLine2:"We can't find anything matching your search."},"oj-ojInputSearch2":{cancel:"Cancel",noSuggestionsFound:"No suggestions found"},"oj-ojInputSearch":{required:{hint:"",messageSummary:"",messageDetail:""},noMatchesFound:"No matches found",oneMatchesFound:"One match found",moreMatchesFound:"{num} matches found"},"oj-ojTreeView":{treeViewSelectorAria:"TreeView Selector {rowKey}",retrievingDataAria:"Retrieving data for node: {nodeText}",receivedDataAria:"Received data for node: {nodeText}"},"oj-ojTree":{stateLoading:"Loading...",labelNewNode:"New Node",labelMultiSelection:"Multiple Selection",labelEdit:"Edit",labelCreate:"Create",labelCut:"Cut",labelCopy:"Copy",labelPaste:"Paste",labelPasteAfter:"Paste After",labelPasteBefore:"Paste Before",labelRemove:"Remove",labelRename:"Rename",labelNoData:"No data"},"oj-ojPagingControl":{labelAccPaging:"Pagination",labelAccPageNumber:"Page {pageNum} content loaded",labelAccNavFirstPage:"First Page",labelAccNavLastPage:"Last Page",labelAccNavNextPage:"Next Page",labelAccNavPreviousPage:"Previous Page",labelAccNavPage:"Page",labelLoadMore:"Show More...",labelLoadMoreMaxRows:"Reached Maximum Limit of {maxRows} rows",labelNavInputPage:"Page",labelNavInputPageMax:"of {pageMax}",fullMsgItemRange:"{pageFrom}-{pageTo} of {pageMax} items",fullMsgItemRangeAtLeast:"{pageFrom}-{pageTo} of at least {pageMax} items",fullMsgItemRangeApprox:"{pageFrom}-{pageTo} of approx {pageMax} items",msgItemRangeNoTotal:"{pageFrom}-{pageTo} items",fullMsgItem:"{pageTo} of {pageMax} items",fullMsgItemAtLeast:"{pageTo} of at least {pageMax} items",fullMsgItemApprox:"{pageTo} of approx {pageMax} items",msgItemNoTotal:"{pageTo} items",msgItemRangeCurrent:"{pageFrom}-{pageTo}",msgItemRangeCurrentSingle:"{pageFrom}",msgItemRangeOf:"of",msgItemRangeOfAtLeast:"of at least",msgItemRangeOfApprox:"of approx.",msgItemRangeItems:"items",tipNavInputPage:"Go To Page",tipNavPageLink:"Go To Page {pageNum}",tipNavNextPage:"Next",tipNavPreviousPage:"Previous",tipNavFirstPage:"First",tipNavLastPage:"Last",pageInvalid:{summary:"The page value entered is invalid.",detail:"Please enter a value greater than 0."},maxPageLinksInvalid:{summary:"Value for maxPageLinks is invalid.",detail:"Please enter a value greater than 4."}},"oj-ojMasonryLayout":{labelCut:"Cut",labelPasteBefore:"Paste Before",labelPasteAfter:"Paste After"},"oj-panel":{labelAccButtonExpand:"Expand",labelAccButtonCollapse:"Collapse",labelAccButtonRemove:"Remove",labelAccFlipForward:"Flip forward",labelAccFlipBack:"Flip back",tipDragToReorder:"Drag to reorder",labelAccDragToReorder:"Drag to reorder, context menu available"},"oj-ojChart":{labelDefaultGroupName:"Group {0}",labelSeries:"Series",labelGroup:"Group",labelDate:"Date",labelValue:"Value",labelTargetValue:"Target",labelX:"X",labelY:"Y",labelZ:"Z",labelPercentage:"Percentage",labelLow:"Low",labelHigh:"High",labelOpen:"Open",labelClose:"Close",labelVolume:"Volume",labelQ1:"Q1",labelQ2:"Q2",labelQ3:"Q3",labelMin:"Min",labelMax:"Max",labelOther:"Other",tooltipPan:"Pan",tooltipSelect:"Marquee select",tooltipZoom:"Marquee zoom",stateLoading:"Loading",stateLoaded:"Loaded",componentName:"Chart"},"oj-dvtBaseGauge":{componentName:"Gauge"},"oj-ojDiagram":{promotedLink:"{0} link",promotedLinks:"{0} links",promotedLinkAriaDesc:"Indirect",componentName:"Diagram"},"oj-ojGantt":{componentName:"Gantt",accessibleDurationDays:"{0} days",accessibleDurationHours:"{0} hours",accessibleTaskInfo:"Start time is {0}, end time is {1}, duration is {2}",accessibleMilestoneInfo:"Time is {0}",accessibleRowInfo:"Row {0}",accessibleTaskTypeMilestone:"Milestone",accessibleTaskTypeSummary:"Summary",accessiblePredecessorInfo:"{0} predecessors",accessibleSuccessorInfo:"{0} successors",accessibleDependencyInfo:"Dependency type {0}, connects {1} to {2}",startStartDependencyAriaDesc:"start to start",startFinishDependencyAriaDesc:"start to finish",finishStartDependencyAriaDesc:"finish to start",finishFinishDependencyAriaDesc:"finish to finish",tooltipZoomIn:"Zoom In",tooltipZoomOut:"Zoom Out",labelLevel:"Level",labelRow:"Row",labelStart:"Start",labelEnd:"End",labelDate:"Date",labelBaselineStart:"Baseline Start",labelBaselineEnd:"Baseline End",labelBaselineDate:"Baseline Date",labelDowntimeStart:"Downtime Start",labelDowntimeEnd:"Downtime End",labelOvertimeStart:"Overtime Start",labelOvertimeEnd:"Overtime End",labelAttribute:"Attribute",labelLabel:"Label",labelProgress:"Progress",labelMoveBy:"Move By",labelResizeBy:"Resize By",taskMoveInitiated:"Task move initiated",taskResizeEndInitiated:"Task resize end initiated",taskResizeStartInitiated:"Task resize start initiated",taskMoveSelectionInfo:"{0} others selected",taskResizeSelectionInfo:"{0} others selected",taskMoveInitiatedInstruction:"Use the arrow keys to move",taskResizeInitiatedInstruction:"Use the arrow keys to resize",taskMoveFinalized:"Task move finalized",taskResizeFinalized:"Task resize finalized",taskMoveCancelled:"Task move cancelled",taskResizeCancelled:"Task resize cancelled",taskResizeStartHandle:"Task resize start handle",taskResizeEndHandle:"Task resize end handle"},"oj-ojLegend":{componentName:"Legend",tooltipExpand:"Expand",tooltipCollapse:"Collapse",labelInvalidData:"Invalid data",labelNoData:"No data to display",labelClearSelection:"Clear Selection",stateSelected:"Selected",stateUnselected:"Unselected",stateMaximized:"Maximized",stateMinimized:"Minimized",stateIsolated:"Isolated",labelCountWithTotal:"{0} of {1}",accessibleContainsControls:"Contains Controls"},"oj-ojNBox":{highlightedCount:"{0}/{1}",labelOther:"Other",labelGroup:"Group",labelSize:"Size",labelAdditionalData:"Additional Data",componentName:"{0} Box"},"oj-ojPictoChart":{componentName:"Picture Chart"},"oj-ojSparkChart":{componentName:"Chart"},"oj-ojSunburst":{labelColor:"Color",labelSize:"Size",tooltipExpand:"Expand",tooltipCollapse:"Collapse",stateLoading:"Loading",stateLoaded:"Loaded",componentName:"Sunburst"},"oj-ojTagCloud":{componentName:"Tag Cloud",accessibleContainsControls:"Contains Controls",labelCountWithTotal:"{0} of {1}",labelInvalidData:"Invalid data",stateCollapsed:"Collapsed",stateDrillable:"Drillable",stateExpanded:"Expanded",stateIsolated:"Isolated",stateHidden:"Hidden",stateMaximized:"Maximized",stateMinimized:"Minimized",stateVisible:"Visible"},"oj-ojThematicMap":{componentName:"Thematic Map",areasRegion:"Areas",linksRegion:"Links",markersRegion:"Markers"},"oj-ojTimeAxis":{componentName:"Time Axis"},"oj-ojTimeline":{componentName:"Timeline",stateMinimized:"Minimized",stateMaximized:"Maximized",stateIsolated:"Isolated",stateHidden:"Hidden",stateExpanded:"Expanded",stateVisible:"Visible",stateDrillable:"Drillable",stateCollapsed:"Collapsed",labelCountWithTotal:"{0} of {1}",accessibleItemDesc:"Description is {0}.",accessibleItemEnd:"End time is {0}.",accessibleItemStart:"Start time is {0}.",accessibleItemTitle:"Title is {0}.",labelSeries:"Series",tooltipZoomIn:"Zoom In",tooltipZoomOut:"Zoom Out",labelStart:"Start",labelEnd:"End",labelAccNavNextPage:"Next Page",labelAccNavPreviousPage:"Previous Page",tipArrowNextPage:"Next",tipArrowPreviousPage:"Previous",navArrowDisabledState:"Disabled",labelDate:"Date",labelTitle:"Title",labelDescription:"Description",labelMoveBy:"Move By",labelResizeBy:"Resize By",itemMoveInitiated:"Event move initiated",itemResizeEndInitiated:"Event resize end initiated",itemResizeStartInitiated:"Event resize start initiated",itemMoveSelectionInfo:"{0} others selected",itemResizeSelectionInfo:"{0} others selected",itemMoveInitiatedInstruction:"Use the arrow keys to move",itemResizeInitiatedInstruction:"Use the arrow keys to resize",itemMoveFinalized:"Event move finalized",itemResizeFinalized:"Event resize finalized",itemMoveCancelled:"Event move cancelled",itemResizeCancelled:"Event resize cancelled",itemResizeStartHandle:"Event resize start handle",itemResizeEndHandle:"Event resize end handle"},"oj-ojTreemap":{labelColor:"Color",labelSize:"Size",tooltipIsolate:"Isolate",tooltipRestore:"Restore",stateLoading:"Loading",stateLoaded:"Loaded",componentName:"Treemap"},"oj-dvtBaseComponent":{labelScalingSuffixThousand:"K",labelScalingSuffixMillion:"M",labelScalingSuffixBillion:"B",labelScalingSuffixTrillion:"T",labelScalingSuffixQuadrillion:"Q",labelInvalidData:"Invalid data",labelNoData:"No data to display",labelClearSelection:"Clear Selection",labelDataVisualization:"Data Visualization",stateSelected:"Selected",stateUnselected:"Unselected",stateMaximized:"Maximized",stateMinimized:"Minimized",stateExpanded:"Expanded",stateCollapsed:"Collapsed",stateIsolated:"Isolated",stateHidden:"Hidden",stateVisible:"Visible",stateDrillable:"Drillable",labelAndValue:"{0}: {1}",labelCountWithTotal:"{0} of {1}",accessibleContainsControls:"Contains Controls"},"oj-ojRatingGauge":{labelClearSelection:"Clear Selection",stateSelected:"Selected",stateUnselected:"Unselected",stateMaximized:"Maximized",stateMinimized:"Minimized",stateExpanded:"Expanded",stateCollapsed:"Collapsed",stateIsolated:"Isolated",stateHidden:"Hidden",stateVisible:"Visible",stateDrillable:"Drillable",labelCountWithTotal:"{0} of {1}",accessibleContainsControls:"Contains Controls"},"oj-ojStatusMeterGauge":{labelClearSelection:"Clear Selection",stateSelected:"Selected",stateUnselected:"Unselected",stateMaximized:"Maximized",stateMinimized:"Minimized",stateExpanded:"Expanded",stateCollapsed:"Collapsed",stateIsolated:"Isolated",stateHidden:"Hidden",stateVisible:"Visible",stateDrillable:"Drillable",labelCountWithTotal:"{0} of {1}",accessibleContainsControls:"Contains Controls"},"oj-ojNavigationList":{defaultRootLabel:"Navigation List",hierMenuBtnLabel:"Hierarchical Menu button",selectedLabel:"selected",previousIcon:"Previous",msgFetchingData:"Fetching Data...",msgNoData:"",overflowItemLabel:"More Tabs",accessibleReorderTouchInstructionText:"Double tap and hold.  Wait for the sound then drag to rearrange.",accessibleReorderBeforeItem:"Before {item}",accessibleReorderAfterItem:"After {item}",labelCut:"Cut",labelPasteBefore:"Paste Before",labelPasteAfter:"Paste After",labelRemove:"Remove",removeCueText:"Removable",accessibleExpandCollapseInstructionText:"Use arrow keys to expand and collapse."},"oj-ojSlider":{noValue:"ojSlider has no value",maxMin:"Max must not be less than or equal to min",startEnd:"value.start must not be greater than value.end",valueRange:"Value must be within min to max range",optionNum:"{option} option is not a number",invalidStep:"Invalid step; step must be > 0",lowerValueThumb:"lower value thumb",higherValueThumb:"higher value thumb"},"oj-ojDialog":{labelCloseIcon:"Close"},"oj-ojPopup":{ariaLiveRegionInitialFocusFirstFocusable:"Entering pop-up. Press F6 to navigate between the pop-up and associated control.",ariaLiveRegionInitialFocusNone:"Pop-up opened. Press F6 to navigate between the pop-up and associated control.",ariaLiveRegionInitialFocusFirstFocusableTouch:"Entering pop-up. Pop-up can be closed by navigating to the last link within the pop-up.",ariaLiveRegionInitialFocusNoneTouch:"Pop-up opened. Navigate to the next link to establish focus within the pop-up.",ariaFocusSkipLink:"Double tap to navigate to the open pop-up.",ariaCloseSkipLink:"Double tap to close the open pop-up."},"oj-ojRefresher":{ariaRefreshLink:"Activate link to refresh content",ariaRefreshingLink:"Refreshing content",ariaRefreshCompleteLink:"Refresh complete"},"oj-ojSwipeActions":{ariaShowStartActionsDescription:"Show start actions",ariaShowEndActionsDescription:"Show end actions",ariaHideActionsDescription:"Hide actions"},"oj-ojIndexer":{indexerCharacters:"A|B|C|D|E|F|G|H|I|J|K|L|M|N|O|P|Q|R|S|T|U|V|W|X|Y|Z",indexerOthers:"#",ariaDisabledLabel:"No matching group header",ariaOthersLabel:"number",ariaInBetweenText:"Between {first} and {second}",ariaKeyboardInstructionText:"Press enter to select value.",ariaTouchInstructionText:"Double tap and hold to enter gesture mode, then drag up or down to adjust value."},"oj-ojMenu":{labelCancel:"Cancel",ariaFocusSkipLink:"Focus is within the menu, double tap or swipe to move focus to the first menu item."},"oj-ojColorSpectrum":{labelHue:"Hue",labelOpacity:"Opacity",labelSatLum:"Saturation/Luminance",labelThumbDesc:"Color spectrum four way slider."},"oj-ojColorPalette":{labelNone:"None"},"oj-ojColorPicker":{labelSwatches:"Swatches",labelCustomColors:"Custom Colors",labelPrevColor:"Previous Color",labelDefColor:"Default Color",labelDelete:"Delete",labelDeleteQ:"Delete?",labelAdd:"Add",labelAddColor:"Add color",labelMenuHex:"HEX",labelMenuRgba:"RGBa",labelMenuHsla:"HSLa",labelSliderHue:"Hue",labelSliderSaturation:"Saturation",labelSliderSat:"Sat",labelSliderLightness:"Lightness",labelSliderLum:"Luminosity",labelSliderAlpha:"Alpha",labelOpacity:"Opacity",labelSliderRed:"Red",labelSliderGreen:"Green",labelSliderBlue:"Blue"},"oj-ojFilePicker":{dropzoneText:"Drop files here or click to upload",singleFileUploadError:"Upload one file at a time.",singleFileTypeUploadError:"You can't upload files of type {fileType}.",multipleFileTypeUploadError:"You can't upload files of type: {fileTypes}.",dropzonePrimaryText:"Drag and Drop",secondaryDropzoneText:"Select a file or drop one here.",secondaryDropzoneTextMultiple:"Select or drop files here.",unknownFileType:"unknown"},"oj-ojProgressbar":{ariaIndeterminateProgressText:"In Progress"},"oj-ojMessage":{labelCloseIcon:"Close",categories:{error:"Error",warning:"Warning",info:"Information",confirmation:"Confirmation",none:"None"}},"oj-ojMessages":{labelLandmark:"Messages",ariaLiveRegion:{navigationFromKeyboard:"Entering messages region. Press F6 to navigate back to prior focused element.",navigationToTouch:"Messages region has new messages. Use the voice-over rotor to navigate to the messages landmark.",navigationToKeyboard:"Messages region has new messages.  Press F6 to navigate to the most recent message region.",newMessage:"Message category {category}. {summary}. {detail}.",noDetail:"Detail is not available"}},"oj-ojMessageBanner":{close:"Close",navigationFromMessagesRegion:"Entering messages region. Press F6 to navigate back to prior focused element.",navigationToMessagesRegion:"Messages region has new messages. Press F6 to navigate to the most recent message region.",error:"Error",warning:"Warning",info:"Information",confirmation:"Confirmation"},"oj-ojConveyorBelt":{tipArrowNext:"Next",tipArrowPrevious:"Previous"},"oj-ojTrain":{stepInfo:"Step {index} out of {count}.",stepStatus:"Status: {status}.",stepCurrent:"Current",stepVisited:"Visited",stepNotVisited:"Not visited",stepDisabled:"Disabled",stepMessageType:"Message type: {messageType}.",stepMessageConfirmation:"Confirmed",stepMessageInfo:"Info",stepMessageWarning:"Warning",stepMessageError:"Error"}},ar:1,"ar-XB":1,bg:1,bs:1,"bs-Cyrl":1,cs:1,da:1,de:1,el:1,"en-XA":1,"en-XC":1,es:1,et:1,fi:1,fr:1,"fr-CA":1,he:1,hr:1,hu:1,is:1,it:1,ja:1,ko:1,lt:1,lv:1,ms:1,nl:1,no:1,pl:1,pseudo:1,pt:1,"pt-PT":1,ro:1,ru:1,sk:1,sl:1,sr:1,"sr-Latn":1,sv:1,th:1,tr:1,uk:1,vi:1,"zh-Hans":1,"zh-Hant":1}),define("ojs/ojlogger",["exports","@oracle/oraclejet-preact/utils/UNSAFE_logger"],function(e,t){"use strict";const n={LEVEL_NONE:0,LEVEL_ERROR:1,LEVEL_WARN:2,LEVEL_INFO:3,LEVEL_LOG:4};n._defaultOptions={level:n.LEVEL_ERROR,writer:null},n._options=n._defaultOptions,n.error=t.error.bind(t),n.info=t.info.bind(t),n.warn=t.warn.bind(t),n.log=t.log.bind(t),n.option=function(e,r){var i,o,s={};if(0===arguments.length){for(o=Object.keys(n._options),i=0;i<o.length;i++)s[o[i]]="level"===o[i]?t.getLogLevel():n._options[o[i]];return s}if("string"==typeof e&&void 0===r){let r;switch(e){case"level":r=t.getLogLevel();break;case"writer":r=n._options.writer;break;default:r=null}return r}if("string"==typeof e)"level"===e?t.setLogLevel(r):"writer"===e&&(t.setLogWriter(r),n._options[e]=r);else{var a=e;for(o=Object.keys(a),i=0;i<o.length;i++)n.option(o[i],a[o[i]])}};const r=n.info,i=n.error,o=n.warn,s=n.log,a=n.option,l=n.LEVEL_ERROR,c=n.LEVEL_INFO,u=n.LEVEL_LOG,d=n.LEVEL_NONE,h=n.LEVEL_WARN;e.LEVEL_ERROR=l,e.LEVEL_INFO=c,e.LEVEL_LOG=u,e.LEVEL_NONE=d,e.LEVEL_WARN=h,e.error=i,e.info=r,e.log=s,e.option=a,e.warn=o,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojwebdrivertest-proxy",["require","exports"],function(e,t){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};return e&&Object.keys(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}),t.default=e,t}const r={BusyContext:()=>new Promise(function(t,r){e(["ojs/ojcontext"],function(e){t(n(e))},r)}).then(({default:e})=>e.getPageContext().getBusyContext()),Chai:()=>new Promise(function(t,r){e(["chai"],function(e){t(n(e))},r)}).then(({default:e})=>e),CspExpressionEvaluator:()=>new Promise(function(t,r){e(["ojs/ojcspexpressionevaluator"],function(e){t(n(e))},r)}).then(({default:e})=>e),CustomElementUtils:()=>new Promise(function(t,r){e(["ojs/ojcustomelement-utils"],function(e){t(n(e))},r)}).then(({CustomElementUtils:e})=>e),KeySet:()=>new Promise(function(t,r){e(["ojs/ojkeyset"],function(e){t(n(e))},r)}),KeyUtils:()=>new Promise(function(t,r){e(["ojs/ojcore-base"],function(e){t(n(e))},r)}).then(({default:{KeyUtils:e}})=>e),Knockout:()=>new Promise(function(t,r){e(["knockout"],function(e){t(n(e))},r)})},i={};function o(...e){return Promise.all(e.map(e=>{if(!r[e])throw Error(`module "${e}" does not exist in test proxy`);console.log(`getProxy importing ${e}`);const t=i[e];return t?Promise.resolve(t):r[e]().then(t=>(i[e]=t,t))}))}function s(...e){return e.map(e=>i[e])}"undefined"!=typeof window&&(window.__ojwebdrivertest_proxy={getProxy:o,getCachedModules:s}),t.getCachedModules=s,t.getProxy=o,Object.defineProperty(t,"__esModule",{value:!0})}),define("ojs/ojcore-base",["ojs/ojlogger","ojs/ojwebdrivertest-proxy"],function(e,t){"use strict";let n={};"undefined"!=typeof window?n=window:"undefined"!=typeof self&&(n=self);var r=n.oj;const i={version:"17.0.4",revision:"2024-10-03_14-13-05",noConflict:function(){n.oj=r},_registerLegacyNamespaceProp:function(e,t){this[e]=t}};n.oj=i;const o={};i._registerLegacyNamespaceProp("StringUtils",o),o._TRIM_ALL_RE=/^\s*|\s*$/g,o.isEmpty=function(e){return null===e||0===o.trim(e).length},o.isEmptyOrUndefined=function(e){return!(void 0!==e&&!o.isEmpty(e))},o.isString=function(e){return null!==e&&("string"==typeof e||e instanceof String)},o.trim=function(e){return o.isString(e)?e.replace(o._TRIM_ALL_RE,""):e},o.hashCode=function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t};const s=function(){};i._registerLegacyNamespaceProp("AgentUtils",s),s.BROWSER={IE:"ie",FIREFOX:"firefox",SAFARI:"safari",CHROME:"chrome",EDGE:"edge",EDGE_CHROMIUM:"edge-chromium",UNKNOWN:"unknown"},s.ENGINE={TRIDENT:"trident",WEBKIT:"webkit",GECKO:"gecko",BLINK:"blink",EDGE_HTML:"edgehtml",UNKNOWN:"unknown"},s.OS={WINDOWS:"Windows",SOLARIS:"Solaris",MAC:"Mac",UNKNOWN:"Unknown",ANDROID:"Android",IOS:"IOS",WINDOWSPHONE:"WindowsPhone",LINUX:"Linux"},s.DEVICETYPE={PHONE:"phone",TABLET:"tablet",OTHERS:"others"},s.getAgentInfo=function(e){o.isEmptyOrUndefined(e)&&(e=navigator.userAgent),e=e.toLowerCase();var t=o.hashCode(e),n=s._currAgentInfo;if(n&&n.hashCode===t)return{os:n.os,browser:n.browser,browserVersion:n.browserVersion,deviceType:n.deviceType,engine:n.engine,engineVersion:n.engineVersion,hashCode:n.hashCode};var r=s.OS.UNKNOWN,i=s.BROWSER.UNKNOWN,a=0,l=s.DEVICETYPE.OTHERS,c=s.ENGINE.UNKNOWN,u=0;return e.indexOf("iphone")>-1||e.indexOf("ipad")>-1||e.indexOf("macintosh")>-1&&navigator.maxTouchPoints>0?r=s.OS.IOS:e.indexOf("mac")>-1?r=s.OS.MAC:e.indexOf("sunos")>-1?r=s.OS.SOLARIS:e.indexOf("android")>-1?r=s.OS.ANDROID:e.indexOf("linux")>-1?r=s.OS.LINUX:e.indexOf("windows phone")>-1?r=s.OS.WINDOWSPHONE:e.indexOf("win")>-1&&(r=s.OS.WINDOWS),r===s.OS.ANDROID?l=e.indexOf("mobile")>-1?s.DEVICETYPE.PHONE:s.DEVICETYPE.TABLET:r===s.OS.IOS&&(l=e.indexOf("iphone")>-1?s.DEVICETYPE.PHONE:s.DEVICETYPE.TABLET),e.indexOf("msie")>-1?(i=s.BROWSER.IE,a=s._parseFloatVersion(e,/msie (\d+[.]\d+)/),e.indexOf("trident")&&(c=s.ENGINE.TRIDENT,u=s._parseFloatVersion(e,/trident\/(\d+[.]\d+)/))):e.indexOf("trident")>-1?(i=s.BROWSER.IE,a=s._parseFloatVersion(e,/rv:(\d+[.]\d+)/),e.indexOf("trident")&&(c=s.ENGINE.TRIDENT,u=s._parseFloatVersion(e,/trident\/(\d+[.]\d+)/))):e.indexOf("edge")>-1?(i=s.BROWSER.EDGE,a=u=s._parseFloatVersion(e,/edge\/(\d+[.]\d+)/),c=s.ENGINE.EDGE_HTML):e.indexOf("edg")>-1?(i=s.BROWSER.EDGE_CHROMIUM,a=s._parseFloatVersion(e,/edg\/(\d+[.]\d+)/),c=s.ENGINE.BLINK,u=a):e.indexOf("chrome")>-1?(i=s.BROWSER.CHROME,(a=s._parseFloatVersion(e,/chrome\/(\d+[.]\d+)/))>=28?(c=s.ENGINE.BLINK,u=a):(c=s.ENGINE.WEBKIT,u=s._parseFloatVersion(e,/applewebkit\/(\d+[.]\d+)/))):e.indexOf("safari")>-1?(i=s.BROWSER.SAFARI,a=s._parseFloatVersion(e,/version\/(\d+[.]\d+)/),c=s.ENGINE.WEBKIT,u=s._parseFloatVersion(e,/applewebkit\/(\d+[.]\d+)/)):e.indexOf("firefox")>-1&&(i=s.BROWSER.FIREFOX,a=s._parseFloatVersion(e,/rv:(\d+[.]\d+)/),c=s.ENGINE.GECKO,u=s._parseFloatVersion(e,/gecko\/(\d+)/)),s._currAgentInfo=n={hashCode:t,os:r,browser:i,browserVersion:a,deviceType:l,engine:c,engineVersion:u},{os:n.os,browser:n.browser,browserVersion:n.browserVersion,deviceType:n.deviceType,engine:n.engine,engineVersion:n.engineVersion,hashCode:n.hashCode}},s._parseFloatVersion=function(e,t){var n=e.match(t);if(n){var r=n[1];if(r)return parseFloat(r)}return 0};const a={};i._registerLegacyNamespaceProp("Assert",a);var l="DEBUG";const c="' doesn't match prototype ";a.forceDebug=function(){a[l]=!0},a.clearDebug=function(){a[l]=!1},a.isDebug=function(){return!0===a[l]},a.assert=function(e,t){if(a[l]&&!e){var n=t||"";if(arguments.length>2){n+="(";for(var r=2;r<arguments.length;r+=1)n+=arguments[r];n+=")"}a.assertionFailed(n,1)}},a.failedInAbstractFunction=function(){a[l]&&a.assertionFailed("Abstract function called",1)},a.assertPrototype=function(e,t,n){if(a[l]){var r=t.prototype;if(null!=e)a.assertType(t,"function",null,1,!1),Object.prototype.isPrototypeOf.call(r,e)||a.assertionFailed("object '"+e+c+r,1,n);else a.assertionFailed("null object doesn't match prototype "+r,1,n)}},a.assertPrototypeOrNull=function(e,t,n){if(a[l]&&null!=e){a.assertType(t,"function",null,1,!1);var r=t.prototype;Object.prototype.isPrototypeOf.call(r,e)||a.assertionFailed("object '"+e+c+r,1,n)}},a.assertPrototypes=function(e,t,n,r){if(a[l]){var i=t.prototype,o=n.prototype,s=Object.prototype.isPrototypeOf;s.call(i,e)||s.call(o,e)||a.assertionFailed("object '"+e+c+i+" or "+o,1,r)}},a.assertDomNodeOrNull=function(e,t){a[l]&&e&&void 0===e.nodeType&&a.assertionFailed(e+" is not a DOM Node",t+1)},a.assertDomNode=function(e,t){a[l]&&(e&&void 0!==e.nodeType||a.assertionFailed(e+" is not a DOM Node",t+1))},a.assertDomElement=function(e,t){a[l]&&(a.assertDomNode(e,1),1!==e.nodeType?a.assertionFailed(e+" is not a DOM Element",1):t&&e.nodeName!==t&&a.assertionFailed(e+" is not a "+t+" Element",1))},a.assertDomElementOrNull=function(e,t){a[l]&&null!=e&&(a.assertDomNode(e,1),1!==e.nodeType?a.assertionFailed(e+" is not a DOM Element",1):t&&e.nodeName!==t&&a.assertionFailed(e+" is not a "+t+" Element",1))},a.assertType=function(e,t,n,r,i){if(a[l]&&!(null==e&&i||typeof e===t)){var o=e+" is not of type "+t;n&&(o=n+o),r||(r=0),a.assertionFailed(o,r+1)}},a.assertObject=function(e,t){a[l]&&a.assertType(e,"object",t,1,!1)},a.assertObjectOrNull=function(e,t){a[l]&&a.assertType(e,"object",t,1,!0)},a.assertNonEmptyString=function(e,t){a[l]&&(a.assertType(e,"string",t,1,!1),a.assert(e.length>0,"empty string"))},a.assertString=function(e,t){a[l]&&a.assertType(e,"string",t,1,!1)},a.assertStringOrNull=function(e,t){a[l]&&a.assertType(e,"string",t,1,!0)},a.assertFunction=function(e,t){a[l]&&a.assertType(e,"function",t,1,!1)},a.assertFunctionOrNull=function(e,t){a[l]&&a.assertType(e,"function",t,1,!0)},a.assertBoolean=function(e,t){a[l]&&a.assertType(e,"boolean",t,1,!1)},a.assertNumber=function(e,t){a[l]&&a.assertType(e,"number",t,1,!1)},a.assertNumberOrNull=function(e,t){a[l]&&a.assertType(e,"number",t,1,!0)},a.assertArray=function(e,t){a[l]&&(Array.isArray(e)||(void 0===t&&(t=e+" is not an array"),a.assertionFailed(t,1)))},a.assertArrayOrNull=function(e,t){a[l]&&null!=e&&(Array.isArray(e)||(void 0===t&&(t=e+" is not an array"),a.assertionFailed(t,1)))},a.assertNonNumeric=function(e,t){a[l]&&(isNaN(e)||(void 0===t&&(t=e+" is convertible to a number"),a.assertionFailed(t,1)))},a.assertNumeric=function(e,t){a[l]&&isNaN(e)&&(void 0===t&&(t=e+" is not convertible to a number"),a.assertionFailed(t,1))},a.assertInSet=function(e,t,n){if(null==e||void 0===t[e.toString()]){if(void 0===n){for(var r=" is not in set: {",i=Object.keys(t),o=0;o<i.length;o++){r+=i[o],r+=","}n=e+(r+="}")}a.assertionFailed(n,1)}},a.assertionFailed=function(e,t,n){t||(t=0);var r="Assertion";throw n&&(r+=" ("+n+")"),r+=" failed: ",void 0!==e&&(r+=e),new Error(r)};var u=n.__oj_Assert_DEBUG;void 0!==u&&(a[l]=u),s.getAgentInfo().browser===s.BROWSER.IE&&e.error("Internet Explorer is not supported with this version of JET.");const d={};i._registerLegacyNamespaceProp("CollectionUtils",d),d.copyInto=function(e,t,n,r,i){return d._copyIntoImpl(e,t,n,r,i,0)},d.mergeDeep=function(e,...t){if(!t.length)return e;const n=d.isPlainObject,r=d.mergeDeep,i=t.shift();return n(e)&&n(i)&&Object.keys(i).forEach(t=>{n(i[t])?(e[t]||Object.assign(e,{[t]:{}}),r(e[t],i[t])):Object.assign(e,{[t]:i[t]})}),r(e,...t)},d.isPlainObject=function(e){if(null!==e&&"object"==typeof e)try{var t=Object.prototype.hasOwnProperty;if(e.constructor&&t.call(e.constructor.prototype,"isPrototypeOf"))return!0}catch(e){}return!1},d._copyIntoImpl=function(e,t,n,r,i,o){var s;if(null==i&&(i=Number.MAX_VALUE),e&&t&&e!==t)for(var a=Object.keys(t),l=0;l<a.length;l++){var c=a[l];s=n?n(c):c;var u=t[c],h=!1;if(r&&o<i){var p=e[s];d.isPlainObject(u)&&(null==p||d.isPlainObject(p))&&(h=!0,e[s]=p||{},d._copyIntoImpl(e[s],u,n,!0,i,o+1))}h||(e[s]=u)}return e},"undefined"!=typeof window&&window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(e){var t,n=(this.document||this.ownerDocument).querySelectorAll(e),r=this;do{for(t=n.length;--t>=0&&n.item(t)!==r;);}while(t<0&&(r=r.parentElement));return r}),function(){function e(e){return function(t,n,r){return e.call(this,t,n,function(e){return"boolean"==typeof e?e:!!e&&e.capture}(r))}}if("undefined"!=typeof window&&!function(){let e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){return e=!0,e}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(e){}return e}()){let t;window.EventTarget?t=EventTarget.prototype:window.Node&&(t=Node.prototype),t&&(t.addEventListener=e(t.addEventListener),t.removeEventListener=e(t.removeEventListener))}}(),
/**
     * @license
     * Code taken from
     * https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/queueMicrotask
     * under "When queueMicrotask() isn't available".
     * @ignore
     */
"undefined"!=typeof window&&"function"!=typeof window.queueMicrotask&&(window.queueMicrotask=function(e){Promise.resolve().then(e).catch(function(e){setTimeout(function(){throw e})})}),function(){if("undefined"!=typeof window){var e;if(!((e=document.createEvent("Event")).initEvent("foo",!0,!0),e.preventDefault(),e.defaultPrevented)){var t=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(t.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}"function"!=typeof window.CustomEvent&&(n.prototype=Object.getPrototypeOf(new n("bogusEvent")),window.CustomEvent=n)}function n(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}}(),function(){function e(e){var t=document.createEvent("FocusEvent");return t.initEvent(e,!1,!1),t}"undefined"!=typeof window&&"function"!=typeof window.FocusEvent&&(e.prototype=Object.getPrototypeOf(new e("focus")),window.FocusEvent=e)}(),function(){var e,t;"undefined"!=typeof window&&!window.setImmediate&&window.postMessage&&(window.setImmediate=function(){var r=arguments[0],i=Array.prototype.slice.call(arguments,1);a.assertFunction(r);var o=(isNaN(t)&&(t=0),t+=1);return e||(e=new Map),e.set(o,{callback:r,args:i}),1===e.size&&window.addEventListener("message",n),window.postMessage({id:o,message:"oj-setImmediate"},"*"),o},window.clearImmediate=r);function n(t){var n=t.data;if(n&&"oj-setImmediate"===n.message){var i=n.id,o=e.get(i);if(r(i),o){var s=o.callback,a=o.args;s.apply(window,a)}}}function r(t){e&&(e.delete(t),e.size<1&&(window.removeEventListener("message",n),e=null))}}(),"undefined"!=typeof window&&(window.Symbol?(window.Symbol.asyncIterator||(window.Symbol.asyncIterator="asyncIterator"),window.Symbol.iterator||(window.Symbol.iterator="iterator")):(window.Symbol={},window.Symbol.asyncIterator="asyncIterator",window.Symbol.iterator="iterator")),function(){if("undefined"!=typeof window&&0===new window.Set([0]).size){var e=window.Set;function t(t){var n=new e;return t&&t.forEach(n.add,n),n}t.prototype=e.prototype,t.prototype.constructor=t,window.Set=t}}(),"undefined"!=typeof window&&(window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),window.DOMTokenList&&!DOMTokenList.prototype.forEach&&(DOMTokenList.prototype.forEach=Array.prototype.forEach)),"undefined"!=typeof window&&"undefined"!==window.Node&&("isConnected"in Node.prototype||Object.defineProperty(Node.prototype,"isConnected",{get(){return!(this.ownerDocument&&this.ownerDocument.compareDocumentPosition(this)&this.DOCUMENT_POSITION_DISCONNECTED)}}));const h=function(){this.Init()};i._registerLegacyNamespaceProp("Object",h),h.superclass=null,h._typeName="oj.Object",h._GET_FUNCTION_NAME_REGEXP=/function\s+([\w$][\w$\d]*)\s*\(/,h.prototype={},h.prototype.constructor=h,h.createSubclass=function(e,t,n){a.assertFunction(e),a.assertFunctionOrNull(t),a.assertStringOrNull(n),void 0===t&&(t=h),a.assert(e!==t,"Class can't extend itself");var r=h._tempSubclassConstructor;r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.superclass=t.prototype,n&&(e._typeName=n)},h.copyPropertiesForClass=function(e,t){a.assertFunction(e),a.assert(null!=t,"source object cannot be null");for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r];e.prototype[i]=t[i]}},h._tempSubclassConstructor=function(){},h.prototype.getClass=function(e){if(void 0===e)e=this;else if(null===e)return null;return e.constructor},h.prototype.clone=function(){var e=new this.constructor;return d.copyInto(e,this),e},h.prototype.toString=function(){return this.toDebugString()},h.prototype.toDebugString=function(){return this.getTypeName()+" Object"},h.getTypeName=function(e){a.assertFunction(e);var t=e._typeName;if(null==t){var n=e.toString(),r=h._GET_FUNCTION_NAME_REGEXP.exec(n);t=r?r[1]:"anonymous",e._typeName=t}return t},h.prototype.getTypeName=function(){return h.getTypeName(this.constructor)},h.prototype.Init=function(){a.isDebug()&&a.assert(this.getTypeName,"Not an oj.Object");var e=this.constructor;e._initialized||h._initClasses(e)},h.ensureClassInitialization=function(e){a.assertFunction(e),e._initialized||h._initClasses(e)},h.prototype.equals=function(e){return this===e},h.createCallback=function(e,t){return a.assertFunction(t),t.bind(e)},h._initClasses=function(e){a.isDebug()&&(a.assertFunction(e),a.assert(!e._initialized)),e._initialized=!0;var t=e.superclass;if(t){var n=t.constructor;n&&!n._initialized&&h._initClasses(n)}var r=e.InitClass;r&&r.call(e)},h.compareValues=function(t,n){if(t===n)return!0;if(typeof t!==typeof n)return!1;if(null===t||null===n)return!1;try{if(t.constructor===n.constructor){if(Array.isArray(t))return h._compareArrayValues(t,n);if(t.constructor===Object){const e=arguments[2]||new Set;return h.__innerEquals(t,n,e)}if(t.valueOf&&"function"==typeof t.valueOf)return t.valueOf()===n.valueOf()}}catch(t){e.log("Object.compareValues() exception",t)}return!1},h._compareArrayValues=function(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(!h.compareValues(e[n],t[n]))return!1;return!0},h._compareIdIndexObject=function(e,t){if("number"==typeof e&&"number"==typeof t||"string"==typeof e&&"string"==typeof t)return e===t;if("object"==typeof e&&"object"==typeof t){if(e.id&&t.id)return e.id===t.id&&(!e.index||!t.index||e.index===t.index);if(e.index&&t.index)return e.index===t.index}return!1},h._compareArrayIdIndexObject=function(e,t){if(!e)return!t||0===t.length;if(!t)return!e||0===e.length;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++){for(var r=!1,i=0;i<t.length;i++)if(h._compareIdIndexObject(e[n],t[i])){r=!0;break}if(!r)return!1}return!0},h.__innerEquals=function(t,n,r=new Set){if(t===n)return!0;if(r.has(t)||r.has(n))return e.warn("cyclic dependency detected",t,n),!1;if(r.add(t),r.add(n),!(t instanceof Object&&n instanceof Object))return!1;if(t.constructor!==n.constructor)return!1;var i,o,s=Object.prototype.hasOwnProperty,a=Object.keys(t);for(o=0;o<a.length;o++)if(i=a[o],s.call(t,i)){if(!s.call(n,i))return!1;if(t[i]!==n[i]){if("object"!=typeof t[i])return!1;if(!h.compareValues(t[i],n[i],r))return!1}}var l=Object.keys(n);for(o=0;o<l.length;o++)if(i=l[o],s.call(n,i)&&!s.call(t,i))return!1;return 0!==a.length||0!==l.length||JSON.stringify(t)===JSON.stringify(n)},h.isEmpty=function(e){var t;if(null==e)return!0;for(t in e)if(e.hasOwnProperty(t))return!1;return!0};const p=function(){this.Init()};h.createSubclass(p,h,"oj.EventSource"),i._registerLegacyNamespaceProp("EventSource",p),p.prototype.Init=function(){this._eventHandlers=[],p.superclass.Init.call(this)},p.prototype.on=function(e,t){for(var n=!1,r=0;r<this._eventHandlers.length;r++)if(this._eventHandlers[r].eventType===e&&this._eventHandlers[r].eventHandlerFunc===t){n=!0;break}n||this._eventHandlers.push({eventType:e,eventHandlerFunc:t})},p.prototype.off=function(e,t){for(var n=this._eventHandlers.length-1;n>=0;n--)if(this._eventHandlers[n].eventType===e&&this._eventHandlers[n].eventHandlerFunc===t){this._eventHandlers.splice(n,1);break}},p.prototype.handleEvent=function(e,t){for(var n=0;n<this._eventHandlers.length;n++){var r=this._eventHandlers[n];if(r.eventType===e&&!1===r.eventHandlerFunc.apply(this,Array.prototype.slice.call(arguments).slice(1)))return!1}return!0};const f={};i._registerLegacyNamespaceProp("KeyUtils",f),f.equals=function(e,t){return h.compareValues(e,t)};var _=n.__ojCheckpointManager;const m={};return i._registerLegacyNamespaceProp("CHECKPOINT_MANAGER",m),m.startCheckpoint=function(e,t){_&&_.startCheckpoint(e,t)},m.endCheckpoint=function(e){_&&_.endCheckpoint(e)},m.getRecord=function(e){return _?_.getRecord(e):void 0},m.matchRecords=function(e){return _?_.matchRecords(e):[]},m.dump=function(t){e.info(function(){for(var e="Checkpoint Records:",n=m.matchRecords(t),r=0;r<n.length;r++){var i=n[r];e=e+"\n"+i.name;var o=i.description;null!=o&&(e=e+" ("+o+")"),e=(e+=":\n")+"start: "+i.start+"\tduration: "+i.duration}return e})},i}),define("ojs/ojcustomelement-registry",["exports"],function(e){"use strict";const t={};function n(e){return e.toLowerCase().match(/-(?<match>.*)/)[0].replace(/-(.)/g,(e,t)=>t.toUpperCase())+"Element"}function r(e){return t[e]??null}function i(e){return r(e)?.descriptor||{}}function o(e){const t=i(e);return t._metadata??t.metadata??{}}function s(e){return o(e).properties??{}}e.getElementDescriptor=i,e.getElementProperties=function(e){return s(e.tagName)},e.getElementRegistration=r,e.getMetadata=o,e.getPropertiesForElementTag=s,e.isComposite=function(e){return r(e)?.composite??!1},e.isElementRegistered=function(e){return null!=t[e]},e.isVComponent=function(e){return r(e)?.vcomp??!1},e.registerElement=function(e,r,i){const o=e.toUpperCase();if(!t[o]){if(!r.descriptor)throw new Error(`Custom element ${e} must be registered with a descriptor.`);t[e]=r,t[o]=r,Object.defineProperty(i,"name",{value:n(e)}),customElements.define(e,i)}},e.tagNameToElementClassName=n,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojcontext",["ojs/ojcore-base","ojs/ojlogger","ojs/ojcustomelement-registry"],function(e,t,n){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;const r=function(e){this._description=e,this._addedWaitTs=r._getTs(),this._id=this._addedWaitTs.toString(36)+"_"+Math.random().toString(36)};e._registerLegacyNamespaceProp("BusyState",r),Object.defineProperties(r.prototype,{id:{get:function(){return this._id},enumerable:!0},description:{get:function(){if(this._description)return this._description instanceof Function?this._description():this._description.toString()},enumerable:!0}}),r.prototype.toString=function(){var e="Busy state: [description=",t=this.description;return null!==t&&(e+=t),e+=", elapsed="+(r._getTs()-this._addedWaitTs)+"]"},r._getTs=function(){return window.performance?window.performance.now():(new Date).getTime()};const i=function(e,t){this.Init(e,t)};let o;function s(){return o||(o=new Promise(function(e){window.setImmediate(function(){o=null,e(!0)})})),o}e.Object.createSubclass(i,e.Object,"oj.BusyContext"),e._registerLegacyNamespaceProp("BusyContext",i),i._defaultTimeout=Number.NaN,i.__preactPromisesMap=new Map,i.setDefaultTimeout=function(e){isNaN(e)||(i._defaultTimeout=e)},i.prototype.Init=function(e,t){i.superclass.Init.call(this),this._hostNode=e,this._context=t,this._statesMap=new Map,this._preactSet=new Set,this._mediator={getMasterWhenReadyPromise:function(){return this._masterWhenReadyPromise||(this._masterWhenReadyPromise=new Promise(this._captureWhenReadyPromiseResolver.bind(this))),this._masterWhenReadyPromise},resolveMasterWhenReadyPromise:function(){this._masterWhenReadyPromiseResolver&&this._masterWhenReadyPromiseResolver(!0),this._masterWhenReadyPromise=null,this._masterWhenReadyPromiseResolver=null,this._masterWhenReadyPromiseRejecter=null},rejectMasterWhenReadyPromise:function(e){this._masterWhenReadyPromiseRejecter&&this._masterWhenReadyPromiseRejecter(e),this._masterWhenReadyPromise=null,this._masterWhenReadyPromiseRejecter=null,this._masterWhenReadyPromiseResolver=null},getSlaveTimeoutPromise:function(e,t,n){var r,i=new Promise(function(e,i){r=window.setTimeout(function(){i(t())},n)});return this._slaveTimeoutPromiseTimers.push(r),Promise.race([e,i]).finally(this._clearAllSlaveTimeouts.bind(this))},_clearAllSlaveTimeouts:function(){var e=this._slaveTimeoutPromiseTimers;this._slaveTimeoutPromiseTimers=[];for(var t=0;t<e.length;t++)window.clearTimeout(e[t]);return!0},_captureWhenReadyPromiseResolver:function(e,t){this._masterWhenReadyPromiseResolver=e,this._masterWhenReadyPromiseRejecter=t},_slaveTimeoutPromiseTimers:[]}},i._log=function(e){if(t.option("level")===t.LEVEL_LOG){t.log(">> Busy states: %d",e.size);var n=i._values(e);n.length>0&&t.log(n.join("\n"))}},i._values=function(e){var t=[];return e.forEach(function(e){t.push(e)}),t},i.prototype.addBusyState=function(e){t.log("BusyContext.addBusyState: start scope='%s'",this._getDebugScope());var n=new r(e[i._DESCRIPTION]);return t.log(">> "+n),this._statesMap.set(n.id,n),this._addBusyStateToParent(),t.log("BusyContext.addBusyState: end scope='%s'",this._getDebugScope()),this._removeBusyState.bind(this,n)},i.prototype.dump=function(e){t.info("BusyContext.dump: start scope='%s' %s",this._getDebugScope(),e||"");var n=this._statesMap;t.info(">> Busy states: %d",n.size);var r=i._values(n);r.length>0&&t.info(r.join("\n")),t.info("BusyContext.dump: start scope='%s' %s",this._getDebugScope(),e||"")},i.prototype.getBusyStates=function(){return i._values(this._statesMap)},i.prototype.clear=function(){t.log("BusyContext.clear: start scope='%s'",this._getDebugScope());for(var e=i._values(this._statesMap),n=0;n<e.length;n++){var r=e[n];try{this._removeBusyState(r)}catch(e){t.log("BusyContext.clear: %o",e)}Object.defineProperty(r,i._OJ_RIP,{value:!0,enumerable:!1})}t.log("BusyContext.clear: end scope='%s'",this._getDebugScope())},i.prototype.whenReady=function(e){var n=this._getDebugScope();t.log("BusyContext.whenReady: start, scope='%s', timeout=%d",n,e);var r=this._statesMap,o=this._mediator,s=i._BOOTSTRAP_MEDIATOR.whenReady();const a=o.getMasterWhenReadyPromise();var l=s.then(function(){return t.log("BusyContext.whenReady: bootstrap mediator ready scope=%s",n),this._evalBusyness(),t.log("BusyContext.whenReady: busy states returning master scope=%s",n),a}.bind(this));if(isNaN(e)&&!isNaN(i._defaultTimeout)&&(e=i._defaultTimeout),!isNaN(e)){l=o.getSlaveTimeoutPromise(l,function(){var o,s="whenReady timeout of "+e+"ms expired ";i._log(r);var a=i._values(r);return(o=i._BOOTSTRAP_MEDIATOR.isReady()?new Error(s+"with the following busy states: "+a.join(", ")):new Error(s+'while the application is loading. Busy state enabled by setting the "window.oj_whenReady = true;" global variable. Application bootstrap busy state is released by calling "oj.Context.getPageContext().getBusyContext().applicationBootstrapComplete();".')).busyStates=a,t.log("BusyContext.whenReady: rejected scope='%s'\n%s",n,o.message),o},e)}return t.log("BusyContext.whenReady: end scope='%s'",this._getDebugScope()),l},i.prototype.isReady=function(){t.log("BusyContext.isReady: start scope='%s'",this._getDebugScope());var e=!1;return i._BOOTSTRAP_MEDIATOR.isReady()&&!this._doubleCheckPend&&(e=this._hasNoBusyStates(),i._log(this._statesMap)),t.log("BusyContext.isReady: end scope='%s'",this._getDebugScope()),e},i.prototype._removeBusyState=function(e){var n=this._getDebugScope();if(t.log("BusyContext._removeBusyState: start scope='%s'",n),e[i._OJ_RIP])t.log("Busy state has been forcefully resolved via clear:\n"+e);else{if(!this._statesMap.delete(e.id))throw new Error("Busy state has already been resolved:\n"+e);t.log("BusyContext._removeBusyState: resolving busy state:\n"+e),this._evalBusyness(),t.log("BusyContext._removeBusyState: end scope='%s'",n)}},i.prototype._evalBusyness=function(){var e=this._getDebugScope();t.log("BusyContext._evalBusyness: begin scope='%s'",e),this._hasNoBusyStates()&&!this._doubleCheckPend&&(t.log("BusyContext._evalBusyness: macrotask to double-check busyness, scope='%s'",e),this._doubleCheckPend=!0,s().then(this._doubleCheckBusyness.bind(this))),t.log("BusyContext._evalBusyness: end scope='%s'",e)},i.prototype._hasNoBusyStates=function(){return this._syncDebounceBusyness(),0===this._statesMap.size},i.prototype._syncDebounceBusyness=function(){i.__preactPromisesMap.forEach((e,t)=>{if(t&&!this._preactSet.has(t)){this._preactSet.add(t);const n=this.addBusyState({description:e});t.then(()=>{this._preactSet.delete(t),n()})}})},i.prototype._doubleCheckBusyness=function(){var e=this._getDebugScope();t.log("BusyContext._doubleCheckBusyness: begin scope='%s'",e);try{i._deliverThrottledUpdates()}catch(e){return t.error("Fatal exception delivering binding updates: %o",e),this._doubleCheckPend=!1,void this._rejectWhenReadyPromises(e)}this._doubleCheckPend=!1,this._hasNoBusyStates()?(t.log("BusyContext._doubleCheckBusyness: resolving whenReady promises"),this._mediator.resolveMasterWhenReadyPromise(),this._resolveBusyStateForParent()):i._log(this._statesMap),t.log("BusyContext._doubleCheckBusyness: end scope='%s'",e)},i.prototype.applicationBootstrapComplete=function(){var e=this._getDebugScope();t.log("BusyContext.applicationBootstrapComplete: begin scope='%s'",e),i._BOOTSTRAP_MEDIATOR.notifyComplete(),t.log("BusyContext.applicationBootstrapComplete: end scope='%s'",e)},i.prototype._getParentBusyContext=function(){var e=this._context.getParentContext();return e?e.getBusyContext():null},i.prototype._addBusyStateToParent=function(){if(!this._parentNotified){this._parentNotified=!0;var e=this._getParentBusyContext();if(e){var t={};t[i._DESCRIPTION]=this.toString.bind(this),this._parentResolveCallback=e.addBusyState(t)}}},i.prototype._resolveBusyStateForParent=function(){this._parentNotified=!1,this._parentResolveCallback&&(this._parentResolveCallback(),this._parentResolveCallback=null)},i.prototype._rejectWhenReadyPromises=function(e){this._mediator.rejectMasterWhenReadyPromise(e);const t=this._getParentBusyContext();t&&(t._rejectWhenReadyPromises(e),this._resolveBusyStateForParent())},i.prototype._getCompoundDescription=function(){return"["+i._values(this._statesMap).join(", ")+"]"},i.prototype._getDebugScope=function(){function e(e){var t="undefined";if(e)if(e.id&&e.id.length>0)t="#"+e.id;else{t=e.nodeName,e.hasAttribute("data-oj-context")&&(t+="[data-oj-context]");var n=e.getAttribute("class");n&&(t+="."+n.split(" ").join("."))}return t}return this._debugScope||(this._hostNode?this._debugScope=e(this._hostNode.parentElement)+" > "+e(this._hostNode):this._debugScope="page"),this._debugScope},i.prototype.toString=function(){var e="Busy Context: [scope=";return e+=this._getDebugScope(),e+=" states="+this._getCompoundDescription()+"]"},i._deliverThrottledUpdates=function(){e.ComponentBinding&&e.ComponentBinding.deliverChanges()},i._DESCRIPTION="description",i._OJ_RIP="__ojRip",i._BOOTSTRAP_MEDIATOR=new function(){var e,t,n;"undefined"!=typeof window&&(e=window.oj_whenReady),this.whenReady=function(){return t||(t=e?new Promise(function(e){n=e}):Promise.resolve(!0))},this.isReady=function(){return!e},this.notifyComplete=function(){n?s().then(function(){e=!1,"function"==typeof n&&n(!0),n=null}):e=!1}};const a=Symbol(),l=function(e){this.Init(e)};return e.Object.createSubclass(l,e.Object,"oj.Context"),l.prototype.Init=function(e){l.superclass.Init.call(this),this._node=e},l.prototype.getParentContext=function(){return this._node?l.getContext(l.getParentElement(this._node)):null},l.getContext=function(e){let t=e;for(;t;){let e=t[a];if(e)return e;if(t.hasAttribute(l._OJ_CONTEXT_ATTRIBUTE))return l._createContext(t);const n=l.getParentElement(t);if(l._hasImplicitSlotContext(n,t))return l._createContext(t);t=n}return l.getPageContext()},l.getPageContext=function(){return l._pageContext||(l._pageContext=new l),l._pageContext},l.prototype.getBusyContext=function(){return this._busyContext||(this._busyContext=new i(this._node,this)),this._busyContext},l.setBusyContextDefaultTimeout=function(e){i.setDefaultTimeout(e)},l._OJ_CONTEXT_ATTRIBUTE="data-oj-context",l._OJ_SURROGATE_ATTR="data-oj-surrogate-id",l.getParentElement=function(e){if(e&&e.hasAttribute(l._OJ_SURROGATE_ATTR)){var t=document.getElementById(e.getAttribute(l._OJ_SURROGATE_ATTR));if(t)return t.parentElement}return e._ojReportBusy||e.parentElement},l._hasImplicitSlotContext=function(e,t){if(t&&t.nodeType===Node.ELEMENT_NODE){const r=e&&!e.classList.contains("oj-complete")?n.getMetadata(e.localName):null;if(r){const e=t.getAttribute("slot")||"",n=r.slots,i=n?n[e]:null;return i&&i.implicitBusyContext}}return!1},l._createContext=function(e){const t=new l(e);return e[a]=t,t},l.__addPreactPromise=function(e,t){i.__preactPromisesMap.set(e,t)},l.__removePreactPromise=function(e){i.__preactPromisesMap.delete(e)},l}),define("ojs/ojthemeutils",["exports","ojs/ojcore-base","ojs/ojlogger"],function(e,t,n){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;const r="oj-theme-json",i={getThemeName:function(){return(i.parseJSONFromFontFamily(r)||{}).name},getThemeTargetPlatform:function(){return(i.parseJSONFromFontFamily(r)||{}).targetPlatform},clearCache:function(){i._cache=null,i._cssVarCache=null},parseJSONFromFontFamily:function(e){null==i._cache&&(i._cache={},i._null_cache_value={},i._headfontstring=window.getComputedStyle(document.head).getPropertyValue("font-family"));var t=i._cache[e];if(t===i._null_cache_value)return null;if(null!=t)return t;if("undefined"==typeof document)return null;var r=document.createElement("meta");r.className=e,document.head.appendChild(r);var o=window.getComputedStyle(r).getPropertyValue("font-family");if(null!=o)if(o===i._headfontstring)n.warn("parseJSONFromFontFamily: When the selector ",e," is applied the font-family read off the dom element is ",o,". The parent dom elment has the same font-family value."," This is interpreted to mean that no value was sent down for selector ",e,". Null will be returned.");else{var s=o.replace(/^['"]+|\s+|\\|(;\s?})+|['"]$/g,"");if(s)try{t=JSON.parse(s)}catch(i){var a=s.indexOf(","),l=!1;if(a>-1){s=s.substring(a+2);try{t=JSON.parse(s),l=!0}catch(e){}}if(!1===l)throw n.error("Error parsing json for selector "+e+".\nString being parsed is "+s+". Error is:\n",i),document.head.removeChild(r),i}}return document.head.removeChild(r),i._cache[e]=null==t?i._null_cache_value:t,t}};var o=e=>(i._cssVarCache||(i._cssVarCache=new Map),i._cssVarCache.has(e)||i._cssVarCache.set(e,(e=>(i._rootCSSStyles||(i._rootCSSStyles=window.getComputedStyle(document.documentElement)),i._rootCSSStyles.getPropertyValue(e).replace(/^['"\s]+|\s+|\\|(;\s?})+|['"\s]$/g,"")))(e)),i._cssVarCache.get(e));i.getCachedCSSVarValues=e=>e.map(e=>o(e)),i.verifyThemeVersion=(()=>{let e=!1;return()=>{if(!e&&"undefined"!=typeof window){e=!0;const o=t.version.split(".");let s;try{s=(i.parseJSONFromFontFamily(r)||{}).jetReleaseVersion}catch(e){s=void 0}const a=(s||"").replace(/^v/,"").split("."),l=`Your CSS file is incompatible with this version of JET (${t.version}).\n  Please see the Migration section of the Developer's Guide for how to update it.\n      `;o[0]!==a[0]||o[1]!==a[1]?n.error(l):o[2]!==a[2]&&n.warn(l)}}})();const s=i.clearCache,a=i.getThemeName,l=i.getThemeTargetPlatform,c=i.parseJSONFromFontFamily,u=i.verifyThemeVersion,d=i.getCachedCSSVarValues;e.clearCache=s,e.getCachedCSSVarValues=d,e.getThemeName=a,e.getThemeTargetPlatform=l,e.parseJSONFromFontFamily=c,e.verifyThemeVersion=u,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojcustomelement-utils",["exports","ojs/ojcore-base","ojs/ojcustomelement-registry","ojs/ojcontext","ojs/ojlogger","ojs/ojthemeutils"],function(e,t,n,r,i,o){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;const s={};class a{static isValidCustomElementName(e){const t=a._RESERVED_TAGS.has(e),n=a._ELEMENT_NAME_REGEXP.test(e);return!t&&n&&!e.startsWith("oj-bind-",0)}static getSupportedTypes(e){if(!e)return{};let t=s[e];if(!t){t={};const n=e.toLowerCase(),r=n.match(/(?=[^|])(?:[^|]*<[^>]+>)*[^|]*/g);let i=0;r.forEach(e=>{const n=e.trim();"any"===n||"boolean"===n||"number"===n||"string"===n||"array"===n||"object"===n||"null"===n?t[n]=1:0===n.indexOf("array<")?t.array=1:0===n.indexOf("object<")?t.object=1:t.other=1,i++}),t.typeCount=i,s[n]=t}return t}static getUniqueId(e){if(e)return e;const t=a._UNIQUE+a._UNIQUE_INCR;return a._UNIQUE_INCR+=1,t}static comparePropertyValues(e,n,r){return e?t.Object.compareValues(n,r):n===r}}a._UNIQUE_INCR=0,a._UNIQUE="_oj",a._RESERVED_TAGS=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]),a._ELEMENT_NAME_REGEXP=/^[a-z][.0-9_a-z]*-[-.0-9_a-z]*$/;const l={accessKey:"accesskey",autocapitalize:"autocapitalize",autofocus:"autofocus",class:"class",contentEditable:"contenteditable",dir:"dir",draggable:"draggable",enterKeyHint:"enterkeyhint",hidden:"hidden",id:"id",inputMode:"inputmode",lang:"lang",role:"role",slot:"slot",spellcheck:"spellcheck",style:"style",tabIndex:"tabindex",translate:"translate",title:"title"};class c extends Error{constructor(e,t){super(`${e.localName} with id '${e.id||""}': ${t}`),Error.captureStackTrace&&Error.captureStackTrace(this,c),this.name="JetElementError"}}const u=/^\s*\[[^]*\]\s*$/,d=/^\s*\{[^]*\}\s*$/,h=/^(?:\{\{)([^]+)(?:\}\})$/,p=/^(?:\[\[)([^]+)(?:\]\])$/,f={};Object.keys(l).forEach(function(e){const t=l[e];e!==t&&(f[t]=e)});class _{static getExpressionInfo(e){let t,n=!1;if(e){const r=e.trim();let i=h.exec(r);t=i?.[1],t||(n=!0,i=p.exec(r),t=i?.[1])}return{downstreamOnly:n,expr:t}}static attributeToPropertyValue(e,t,n,r){if(null!=n)try{return _.coerceValue(e,t,n,r.type)}catch(n){throw new c(e,`Error while parsing parsing attribute ${t}. ${n.stack||n}`)}}static parseAttributeValue(e,t,n,r,i=null){if(!r)throw new Error(`Unable to parse ${t}='${n}' for ${e} with id '${i}'.         This attribute only supports data bound values. Check the API doc for supported types`);const o=a.getSupportedTypes(r),s=u.test(n),l=d.test(n);if(o.array&&s||o.object&&l||o.any&&(s||l))try{return JSON.parse(n)}catch(r){throw new Error(`Unable to parse ${t}='${n}' for ${e} with id '${i}'           to a JSON Object. Check the value for correct JSON syntax, e.g. double quoted strings. ${r}`)}else{if(o.string||o.any)return n;if(o.boolean)return _.parseBooleanValue(e,t,n,r,i);if(o.number&&!isNaN(n))return Number(n)}throw new Error(`Unable to parse ${t}='${n}' for ${e} with id '${i}'       to a ${r}.`)}static parseBooleanValue(e,t,n,r,i){if(null==n||"true"===n||""===n||n.toLowerCase()===t)return!0;if("false"===n)return!1;throw new Error(`Unable to parse ${t}='${n}' for ${e} with id '${i}' to a ${r}.`)}static coerceValue(e,t,n,r){const i=e.tagName.toLowerCase();return _.parseAttributeValue(i,t,n,r,e.id)}static coerceBooleanValue(e,t,n,r){return _.parseBooleanValue(e.tagName.toLowerCase(),t,n,r,e.id)}static isGlobalOrData(e){return Object.prototype.hasOwnProperty.call(l,e)||e.startsWith("data-")||e.startsWith("aria-")}static getGlobalAttrForProp(e){return l[e]||e}static getGlobalPropForAttr(e){return f[e]||e}static getGlobalValuePropForAttr(e){return"contenteditable"===e.toLowerCase()?"isContentEditable":_.getGlobalPropForAttr(e)}}function m(e,t){let n=e.cache;return n||(n=new Map,e.cache=n),n.has(t)||n.set(t,e(t)),n.get(t)}_.attributeToPropertyName=m.bind(null,e=>e.toLowerCase().replace(/-(.)/g,(e,t)=>t.toUpperCase())),_.propertyNameToAttribute=m.bind(null,e=>e.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)),_.eventTypeToEventListenerProperty=m.bind(null,e=>"on"+e.substr(0,1).toUpperCase()+e.substr(1)),_.isEventListenerProperty=m.bind(null,e=>/^on[A-Z]/.test(e)),_.isEventListenerAttr=m.bind(null,e=>/^on-[a-z]/.test(e)),_.eventListenerPropertyToEventType=m.bind(null,e=>e.substr(2,1).toLowerCase()+e.substr(3)),_.propertyNameToChangeEventType=m.bind(null,e=>`${e}Changed`),_.propertyNameToChangedCallback=m.bind(null,e=>`on${e[0].toUpperCase()}${e.substr(1)}Changed`),_.eventTriggerToEventType=m.bind(null,e=>`oj${e.substr(0,1).toUpperCase()}${e.substr(1)}`),_.eventAttrToPreactPropertyName=m.bind(null,e=>e.toLowerCase().split("-").reduce((e,t,n)=>{return n>1?e+((r=t).charAt(0).toUpperCase()+r.substr(1)):e+t;var r},""));const g=Symbol("childBindingProvider"),v=Symbol("cachedBindingProvider"),y=new Set,E="oj-subtree-hidden",b="oj-pending-subtree-hidden",S=Symbol("ojSlotWhitespace");class T{static subtreeShown(e,t,n){T._legacySubtreeShownOnceCB?.(e,t),e.classList.remove(E);const r=T._legacySubtreeShownInstanceCB,i=r?O(e=>r(e,t)):null;A(e,i,n?null:P)}static getElementInfo(e){return e?`${e.tagName.toLowerCase()} with id '${e.id}'`:""}static getElementState(e){let t=e[T._ELEMENT_STATE_KEY];if(!t&&n.isElementRegistered(e.tagName)){t=new(0,n.getElementRegistration(e.tagName).stateClass)(e),Object.defineProperty(e,T._ELEMENT_STATE_KEY,{value:t})}return t??null}static getElementBridge(e){let t=e[T._ELEMENT_BRIDGE_KEY];if(void 0===t&&n.isElementRegistered(e.tagName)){t=null;const r=n.getElementRegistration(e.tagName).bridgeProto;if(void 0!==r){t=Object.create(r);const i=n.getElementDescriptor(e.tagName);t.initializeBridge(e,i)}Object.defineProperty(e,T._ELEMENT_BRIDGE_KEY,{value:t})}return t??null}static getSlotMap(e){const t={},r=e.childNodes,i=r.length>0?n.getMetadata(e.localName):null;for(let n=0;n<r.length;n++){const o=r[n];if(T.isSlotable(o)){const n=T.getSlotAssignment(o);t[n]||(t[n]=[]),T._possiblyApplyImplicitContext(o,n,i),t[n].push(o),o[v]=T._getBindingProviderTypeForSlot(e,o)}}return t}static getSlotAssignment(e){const t=null!=e.__oj_slots?e.__oj_slots:e.getAttribute&&e.getAttribute("slot");return t||""}static isSlotable(e){const t=1===e.nodeType||3===e.nodeType&&!!e.nodeValue.trim();return t||(e[S]=!0),t}static getElementProperty(e,t){if(n.isElementRegistered(e.tagName)){let n=e[T.VCOMP_INSTANCE];return n?T.getPropertyValue(n.props,t):e.getProperty(t)}return e[t]}static getPropertyValue(e,t){let n=e;const r=t.split(".");try{r.forEach(e=>n=n[e])}catch{return}return n}static allowSlotRelocation(e){T._ALLOW_RELOCATION_COUNT+=e?1:-1}static canRelocateNode(e,t){const n=T.getElementState(e);if(!n.getSlotMap()||T._ALLOW_RELOCATION_COUNT>0)return!0;const r=n.getSlotSet();if(n.isPostCreateCallbackOrComplete()&&(r.has(t)||t[S])){if(e.hasAttribute("data-oj-preact"))throw new c(e,`${t.localName} cannot be relocated as a child of this element.`);if("preact"===n.getBindingProviderType())return!1}return!0}static cleanComponentBindings(e){T.getElementState(e)?.getBindingProviderCleanNode()(e)}static getClassSet(e){if(e){const t=e.split(/\s+/).filter(e=>e.length>0);if(t.length>0)return new Set(t)}return y}static _possiblyApplyImplicitContext(e,t,n){e?.nodeType===Node.ELEMENT_NODE&&n.slots?.[t]?.implicitBusyContext&&e.setAttribute("data-oj-context","")}static _getBindingProviderTypeForSlot(e,t){return t[v]||1===t.nodeType&&t.getAttribute("data-oj-binding-provider")||T.getElementState(e)?.getBindingProviderType()}static markPendingSubtreeHidden(e){e.classList.add(b)}static unmarkPendingSubtreeHidden(e){e.classList.remove(b)}static registerLegacySubtreeCallbacks(e,t,n){T._legacySubtreeShownInstanceCB=e,T._legacySubtreeShownOnceCB=t,T._legacySubtreeHiddenInstanceCB=n}static parseAttrValue(e,t,r,i,o){if(null==i)return i;function s(n){return _.attributeToPropertyValue(e,t,n,o)}var a=n.getElementDescriptor(e.tagName).parseFunction;return a?a(i,r,o,function(e){return s(e)}):s(i)}}T._ELEMENT_STATE_KEY="_ojElementState",T._ELEMENT_BRIDGE_KEY="_ojBridge",T._ALLOW_RELOCATION_COUNT=0,T.VCOMP_INSTANCE=Symbol("vcompInstance"),T.subtreeHidden=function(e){const t=T._legacySubtreeHiddenInstanceCB;A(e,t?O(t):null,null),e.classList.add(E)};const C="oj-defer";function P(e){if(e.localName===C){if(!e._activate)throw new Error("subtreeShown called before module ojs/ojdefer was loaded");e._activate()}}function O(e){return t=>{T.allowSlotRelocation(!0);try{e(t)}finally{T.allowSlotRelocation(!1)}}}function A(e,t,n){if((t||n)&&!function(e){let t=e;for(;t;){if(t.nodeType===Node.DOCUMENT_NODE)return!1;if(t.nodeType===Node.ELEMENT_NODE&&t.classList.contains(E))return!0;t=t.parentNode}return!0}(e)){i(e);const t=[".oj-component-initnode"];n&&t.push(C);const o=[];t.forEach(function(e){o.push(`.${E} ${e}`),o.push(`.${b} ${e}`)}),n&&o.push(`${C}.${E}`);const s=t.join(","),a=o.join(",");var r=function(e,t){const n=[];let r=0;for(var i=0;i<t.length;i++){for(var o=t[i];r<e.length&&e[r]!==o;)n.push(e[r]),r+=1;r+=1}for(;r<e.length;)n.push(e[r]),r+=1;return n}(e.querySelectorAll(s),e.querySelectorAll(a));r.forEach(e=>i(e))}function i(e){t?.(e),n?.(e)}}class I{constructor(e){this.dirtyProps=new Set,this._componentState=R.WaitingToCreate,this._outerClasses=new Set,this.Element=e}startCreationCycle(){this._isInErrorState()||(null!=this._preCreatedPromise&&this._componentState!==R.WaitingToCreate||this._updateComponentState(R.Creating),this._registerBusyState())}pauseCreationCycle(){this._resolveBusyState()}resetCreationCycle(){this._updateComponentState(R.WaitingToCreate),this._bindingProviderPromise=null,this._preCreatedPromise=null,this._createdPromise=null}isComplete(){return this._componentState===R.Complete}isCreating(){return this._componentState===R.Creating}isPostCreateCallbackOrComplete(){return this._componentState===R.PostCreateCallback||this.isComplete()}canHandleAttributes(){return!this._isInErrorState()&&this._componentState!==R.WaitingToCreate}beginApplyingBindings(){this.isComplete()||(this._bindingProviderType="knockout",this._updateComponentState(R.ApplyingBindings))}allowPropertySets(){return this._componentState===R.Creating||this._componentState===R.ApplyingBindings||this._componentState===R.BindingsApplied||this._componentState===R.PostCreateCallback||this._componentState===R.Complete}allowPropertyChangedEvents(){return this._componentState===R.BindingsApplied||this._componentState===R.PostCreateCallback||this._componentState===R.Complete}getTrackChildrenOption(){const e=n.getElementDescriptor(this.Element.tagName).metadata;return e?.extension?._TRACK_CHILDREN??"none"}setCreateCallback(e){this._isInErrorState()||(this._updateComponentState(R.WaitingForBindings),this._preCreatedPromise||(this._preCreatedPromise=this.GetPreCreatedPromise()),this._createdPromise=this._preCreatedPromise.then(()=>{if(!this._isInErrorState()){const t=e();return this._updateComponentState(R.PostCreateCallback),t}return Promise.reject()}),this._createdPromise.then(()=>{this._updateComponentState(R.Complete)},e=>{if(this._updateComponentState(R.Incomplete),e)throw e}))}setBindingsDisposedCallback(e){this._disposedCallback=e}resolveBindingProvider(e){this._bpClean=e.__CleanNode,this._resolveBindingProviderCallback&&(this._bindingsApplied(),this._resolveBindingProviderCallback(e),this._resolveBindingProviderCallback=null,this._rejectBindingProviderCallback=null),this._bindingProvider=e}rejectBindingProvider(e){this._rejectBindingProviderCallback&&(this._rejectBindingProviderCallback(e),this._resolveBindingProviderCallback=null,this._rejectBindingProviderCallback=null)}disposeBindingProvider(){this.isComplete()?this._disposedCallback?.():(this.rejectBindingProvider(),this._updateComponentState(R.BindingsDisposed))}setBindingProviderCallback(e){this._bindingProviderCallback=e}getBindingProviderPromise(){const e=this.getBindingProviderType();if(!this._bindingProviderPromise)if(o.verifyThemeVersion(),"none"===e||"preact"===e)this._bindingsApplied(),this._bindingProviderPromise=Promise.resolve(null);else{if("knockout"!==e)throw new c(this.Element,`Unknown binding provider '${e}'.`);this._bindingProvider?(this._bindingsApplied(),this._bindingProviderPromise=Promise.resolve(this._bindingProvider)):this._bindingProviderPromise=new Promise((e,t)=>{this._resolveBindingProviderCallback=e,this._rejectBindingProviderCallback=t})}return this._bindingProviderPromise}getBindingProvider(){return this._bindingProvider}getBindingProviderType(){return this._bindingProviderType||(this._bindingProviderType=I._walkBindingProviders(this.Element)),this._bindingProviderType}getUseKoFlag(){return void 0===this._useKoFlag&&(this._useKoFlag=I._findKoUseFlag(this.Element)),this._useKoFlag}getBindingProviderCleanNode(){return this._bpClean||I._NOOP}getDescriptiveText(){let e=this.GetDescriptiveValue("aria-label")||this.GetDescriptiveValue("title")||this.GetDescriptiveLabelByValue("labelled-by")||this.GetDescriptiveValue("label-hint")||this.GetDescriptiveLabelByValue("aria-labelledby");return e=e?e.trim().replace(/\s+/g," "):"",e}getSlotMap(e){return!this._slotMap&&e&&(this._slotMap=T.getSlotMap(this.Element)),this._slotMap}getSlotSet(){if(!this._slotSet){const e=Object.keys(this._slotMap);let t=[];e.forEach(e=>t=t.concat(this._slotMap[e])),this._slotSet=new Set(t)}return this._slotSet}setOuterClasses(e){this.PatchClasses(this._outerClasses,e),this._outerClasses=e}PatchClasses(e,t){e.forEach(e=>{t.has(e)||this.Element.classList.remove(e)}),t.forEach(t=>{e.has(t)||this.Element.classList.add(t)})}GetCreatedPromise(){return this._createdPromise}GetPreCreatedPromise(){let e=this.getBindingProviderPromise();return"none"!==this.getTrackChildrenOption()&&(e=e.then(e=>this._getTrackedChildrenPromises(e))),e}IsTransferAttribute(e){return!1}GetDescriptiveValue(e){const t=_.attributeToPropertyName(e),r=n.getElementProperties(this.Element);let i;return i=r&&r[t]?this.Element[t]:this.IsTransferAttribute(e)?this.GetDescriptiveTransferAttributeValue(e):this.Element.getAttribute(e),i}GetDescriptiveTransferAttributeValue(e){return""}GetDescriptiveLabelByValue(e){const t=this.GetDescriptiveValue(e);if(t){const e=document.getElementById(t);if(e)return e.textContent}return null}_updateComponentState(e){if(this._componentState!==R.BindingsDisposed){switch(e){case R.WaitingToCreate:this.Element.classList.remove("oj-complete"),this._createdPromise=null;break;case R.Complete:this.Element.classList.add("oj-complete"),this._resolveBusyState();break;case R.BindingsDisposed:case R.Incomplete:this.Element.classList.add("oj-incomplete"),this._resolveBusyState()}this._componentState=e}}_bindingsApplied(){this._updateComponentState(R.BindingsApplied),this._bindingProviderCallback?.()}_registerBusyState(){const e=r.getContext(this.Element).getBusyContext();if(this._resolveCreatedBusyState)throw new c(this.Element,"Registering busy state before previous state is resolved.");this._resolveCreatedBusyState=e.addBusyState({description:T.getElementInfo(this.Element)+" is being upgraded."})}_resolveBusyState(){this._resolveCreatedBusyState&&(this._resolveCreatedBusyState(),this._resolveCreatedBusyState=null)}static _findKoUseFlag(e){return!!e.querySelector(":scope > template[data-oj-use-ko]")}static _walkBindingProviders(e,t=e){let n=e[v];if(n)return n;if(n=e.getAttribute("data-oj-binding-provider"),!n){const r=e.parentElement;if(null==r){if(e!==document.documentElement)throw new c(t,"Cannot determine binding provider for a disconnected subtree.");n="knockout"}else n=r[g]??I._walkBindingProviders(r,t)}return e[v]=n,n}_getTrackedChildrenPromises(e){const t=this.getTrackChildrenOption(),o=r.getContext(this.Element).getBusyContext(),s=this._getChildrenToTrack(this.Element,t,[]).map(t=>{if(!e){const e=o.addBusyState({description:`Waiting for element ${t.localName} to be defined.`}),r=setInterval(()=>{i.warn(`Waiting for element ${t.localName} to be defined.`)},2e4);return customElements.whenDefined(t.localName).then(()=>(e(),clearInterval(r),n.isElementRegistered(t.tagName)?T.getElementState(t).GetCreatedPromise():null)).catch(n=>{throw e(),clearInterval(r),new Error(`Error defining element ${t.localName} : ${n}`)})}return n.isElementRegistered(t.tagName)?T.getElementState(t).GetCreatedPromise():null});return Promise.all(s)}_getChildrenToTrack(e,t,n){const r=e.childNodes;for(let e=0;e<r.length;e++){const i=r[e];a.isValidCustomElementName(i.localName)?n.push(i):"nearestCustomElement"===t&&this._getChildrenToTrack(i,t,n)}return n}_isInErrorState(){return this._componentState===R.Incomplete||this._componentState===R.BindingsDisposed}}var R;I._NOOP=()=>{},function(e){e[e.WaitingToCreate=0]="WaitingToCreate",e[e.Creating=1]="Creating",e[e.WaitingForBindings=2]="WaitingForBindings",e[e.ApplyingBindings=3]="ApplyingBindings",e[e.BindingsApplied=4]="BindingsApplied",e[e.PostCreateCallback=5]="PostCreateCallback",e[e.Complete=6]="Complete",e[e.Incomplete=7]="Incomplete",e[e.BindingsDisposed=8]="BindingsDisposed"}(R||(R={}));const w=Symbol("custom element null"),N=Symbol("custom element empty string"),j=Symbol("custom element undefined"),x="__oj_private_do_not_use_value",D="__oj_private_do_not_use_checked",L=new Map([["value",x],["checked",D]]),M=e=>e===w?null:e===N?"":e!==j&&""!==e?e:void 0,k=Symbol("ojBindConvertedNode");e.AttributeUtils=_,e.CACHED_BINDING_PROVIDER=v,e.CHILD_BINDING_PROVIDER=g,e.CustomElementUtils=T,e.ElementState=I,e.ElementUtils=a,e.JetElementError=c,e.LifecycleElementState=class extends I{constructor(){super(...arguments),this._connectCallbacks=[],this._disconnectCallbacks=[]}addLifecycleCallbacks(e,t){e&&this._connectCallbacks.push(e),t&&this._disconnectCallbacks.push(t)}removeLifecycleCallbacks(e,t){e&&(this._connectCallbacks=this._connectCallbacks.filter(t=>t!=e)),t&&(this._disconnectCallbacks=this._disconnectCallbacks.filter(e=>e!=t))}executeLifecycleCallbacks(e){(e?this._connectCallbacks:this._disconnectCallbacks).forEach(e=>e())}},e.OJ_BIND_CONVERTED_NODE=k,e.addPrivatePropGetterSetters=(e,t)=>{"value"!==t&&"checked"!==t||Object.defineProperty(e,L.get(t),{get(){return this[t]},set(e){this[t]=M(e)}})},e.convertPrivatePropFromPreact=(e,t)=>e===x?{prop:"value",value:M(t)}:e===D?{prop:"checked",value:M(t)}:{prop:e,value:t},e.publicToPrivateName=L,e.toSymbolizedValue=e=>null===e?w:""===e?N:void 0===e?j:e,e.transformPreactValue=(e,t,n,r)=>{let i=r;return"value"!==t&&"checked"!==t&&""===i&&(i=((e,t,n)=>{if((!e||"preact"===T.getElementState(e).getBindingProviderType())&&(!a.getSupportedTypes(t.type).string||t.enumValues))return;return n})(e,n,i)),i},Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojconfig",["require","exports","ojs/ojcore-base","ojL10n!ojtranslations/nls/ojtranslations","ojs/ojcustomelement-utils"],function(e,t,n,r,i){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};return e&&Object.keys(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}),t.default=e,t}n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;const s={},a=Symbol(),l=Symbol(),c=Symbol();let u=r,d="production";s.getDeviceRenderMode=function(){return document.body.getAttribute("data-oj-device-render-mode")||s.getDeviceType()},s.getDeviceType=function(){return n.AgentUtils.getAgentInfo().deviceType},s.getLocale=function(){const e=u._ojLocale_;return"root"===e?"en":e},s.setLocale=function(t,r){var i="ojL10n!ojtranslations/nls/",s=i+t+"/ojtranslations";var a=[new Promise(function(t,n){e([s],function(e){t(o(e))},n)}).then(e=>{u=e})];if(n.LocaleData){var l=i+t+"/localeElements";const r=new Promise(function(t,n){e([l],function(e){t(o(e))},n)}).then(e=>{e&&n.LocaleData.__updateBundle(Object.assign({},e.default))});if(a.push(r),n.TimezoneData){var c=n.TimezoneData.__getBundleNames().map(n=>new Promise(function(r,s){e([`${i}${t}${n}`],function(e){r(o(e))},s)}));a.push(Promise.all(c).then(e=>{e.forEach(n.TimezoneData.__mergeIntoLocaleElements)}))}}Promise.all(a).then(()=>{r&&r()})},s.getResourceUrl=function(e){if(null==e||/^\/|:/.test(e))return e;var t=s._resourceBaseUrl;null==t&&(t=s._getOjBaseUrl()||"");var n=t.length;return t+(0===n||"/"===t.charAt(n-1)?"":"/")+e},s.setResourceBaseUrl=function(e){s._resourceBaseUrl=e},s.setAutomationMode=function(e){s._automationMode=e},s.getAutomationMode=function(){return s._automationMode},s.getVersionInfo=function(){var e="Oracle JET Version: "+n.version+"\n";e+="Oracle JET Revision: "+n.revision+"\n";var t="undefined"!=typeof window;return t&&window.navigator&&(e+="Browser: "+window.navigator.userAgent+"\n",e+="Browser Platform: "+window.navigator.platform+"\n"),$&&($.fn&&(e+="jQuery Version: "+$.fn.jquery+"\n"),$.ui&&$.ui.version&&(e+="jQuery UI Version: "+$.ui.version+"\n")),n.ComponentBinding&&(e+="Knockout Version: "+n.ComponentBinding.__getKnockoutVersion()+"\n"),t&&window.require&&(e+="Require Version: "+window.require.version+"\n"),e},s.logVersionInfo=function(){},s._getOjBaseUrl=function(){var t=null;void 0!==e&&e.toUrl&&(t=e.toUrl("ojs/_foo_").replace(/[^/]*$/,"../"));return t},s._getEngineByType=function(t){if(!s[t]){let n;switch(t){case l:n=new Promise(function(t,n){e(["ojs/ojtemplateengine-preact-ko"],function(e){t(o(e))},n)});break;case c:n=new Promise(function(t,n){e(["ojs/ojtemplateengine-preact"],function(e){t(o(e))},n)});break;default:n=new Promise(function(t,n){e(["ojs/ojtemplateengine-ko"],function(e){t(o(e))},n)})}s[t]=n.then(e=>e.default)}return s[t]},s.__getTemplateEngine=function(e){let t;const n=i.CustomElementUtils.getElementState(e.customElement);return t="preact"!==n.getBindingProviderType()?s._getEngineByType(a):e.needsTrackableProperties||n.getUseKoFlag()?s._getEngineByType(l):s._getEngineByType(c),t},s.getConfigBundle=function(){return u},s.getExpressionEvaluator=function(){return s._expressionEvaluator},s.setExpressionEvaluator=function(e){if(s._expressionEvaluator)throw new Error("JET Expression evaluator can't be set more than once.");s._expressionEvaluator=e},s.setDeploymentMode=function(e){if("production"!==e&&"development"!==e)throw new Error("Expected values for deployment mode are 'production' or 'development'.");d=e},s.getDeploymentMode=function(){return d};const h=s.getDeviceRenderMode,p=s.getDeviceType,f=s.getLocale,_=s.setLocale,m=s.getResourceUrl,g=s.setResourceBaseUrl,v=s.setAutomationMode,y=s.getAutomationMode,E=s.getVersionInfo,b=s.logVersionInfo,S=s.setExpressionEvaluator,T=s.getExpressionEvaluator,C=s.getConfigBundle,P=s.__getTemplateEngine,O=s.setDeploymentMode,A=s.getDeploymentMode;t.__getTemplateEngine=P,t.getAutomationMode=y,t.getConfigBundle=C,t.getDeploymentMode=A,t.getDeviceRenderMode=h,t.getDeviceType=p,t.getExpressionEvaluator=T,t.getLocale=f,t.getResourceUrl=m,t.getVersionInfo=E,t.logVersionInfo=b,t.setAutomationMode=v,t.setDeploymentMode=O,t.setExpressionEvaluator=S,t.setLocale=_,t.setResourceBaseUrl=g,Object.defineProperty(t,"__esModule",{value:!0})}),define("ojs/ojresponsiveutils",["exports","ojs/ojcore-base","ojs/ojlogger"],function(e,t,n){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;const r={};t._registerLegacyNamespaceProp("ResponsiveUtils",r),r.SCREEN_RANGE={SM:"sm",MD:"md",LG:"lg",XL:"xl",XXL:"xxl"},r.FRAMEWORK_QUERY_KEY={SM_UP:"sm-up",MD_UP:"md-up",LG_UP:"lg-up",XL_UP:"xl-up",XXL_UP:"xxl-up",SM_ONLY:"sm-only",MD_ONLY:"md-only",LG_ONLY:"lg-only",XL_ONLY:"xl-only",MD_DOWN:"md-down",LG_DOWN:"lg-down",XL_DOWN:"xl-down",HIGH_RESOLUTION:"high-resolution"},r._RANGE={},r._RANGE[r.SCREEN_RANGE.SM]=0,r._RANGE[r.SCREEN_RANGE.MD]=1,r._RANGE[r.SCREEN_RANGE.LG]=2,r._RANGE[r.SCREEN_RANGE.XL]=3,r._RANGE[r.SCREEN_RANGE.XXL]=4,r._getMediaQueryFromClass=function(e){var t=document.getElementsByClassName(e).item(0);return null===t&&((t=document.createElement("meta")).className=e,document.head.appendChild(t)),window.getComputedStyle(t).getPropertyValue("font-family").replace(/^[/\\'"]+|(;\s?})+|[/\\'"]+$/g,"")},r.getFrameworkQuery=function(e){var t="oj-mq-"+e,i=r._getMediaQueryFromClass(t);return"null"===i?(n.warn("Framework query not found. Please check that the value of the theming variable$includeResponsiveMediaQueryClasses is set to true, if itis set to false the media queries are not sent down to the browser."),null):i},r.compare=function(e,t){var n=r._RANGE[e],i=r._RANGE[t];if(null==n)throw new Error("size1 param "+e+" illegal, please use one of the screen size constants like oj.ResponsiveUtils.SCREEN_RANGE.MD");if(null==i)throw new Error("size2 param "+t+" illegal, please use one of the screen size constants like oj.ResponsiveUtils.SCREEN_RANGE.MD");return n-i};const i=r.compare,o=r.getFrameworkQuery,s=r.SCREEN_RANGE,a=r.FRAMEWORK_QUERY_KEY;e.FRAMEWORK_QUERY_KEY=a,e.SCREEN_RANGE=s,e.compare=i,e.getFrameworkQuery=o,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojtimerutils",["exports"],function(e){"use strict";const t={};function n(){}n.prototype.getPromise=function(){},n.prototype.clear=function(){},t.getTimer=function(e){return new t._TimerImpl(e)},t._TimerImpl=function(e){var t,n,r;function i(e){r=null,n(e)}this.getPromise=function(){return t},this.clear=function(){window.clearTimeout(r),r=null,i(!1)},t="undefined"==typeof window?Promise.reject():new Promise(function(t){n=t,r=window.setTimeout(i.bind(null,!0),e)})};const r=t.getTimer;e.getTimer=r,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojtranslation",["exports","ojs/ojcore-base","ojs/ojconfig"],function(e,t,n){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;const r={setBundle:function(e){r._bundle=e},getResource:function(e){return r._getResourceString(e)},applyParameters:function(e,t){return null==e?"":r._format(e,t)},getTranslatedString:function(e,t){var n=r._getResourceString(e);if(null==n)return e;var i={};return arguments.length>2?i=Array.prototype.slice.call(arguments,1):2===arguments.length&&("object"==typeof(i=arguments[1])||i instanceof Array||(i=[i])),r.applyParameters(n,i)},getComponentTranslations:function(e){var t=r._getBundle()[e];if(null==t)return{};for(var n={},i=Object.keys(t),o=0;o<i.length;o++){var s=i[o];n[s]=t[s]}return n},_getResourceString:function(e){var n=e?e.split("."):[],i=r._getBundle();t.Assert.assertObject(i);for(var o=0;o<n.length&&null!=i;o++){i=i[n[o]]}return null!=i?i:null},_format:function(e,t){var n,r,i=e.length,o=[],s=null,a=!1,l=!1,c=!1,u=!1;for(r=0;r<i;r++){var d=e.charAt(r),h=!1;if(a)h=!0,a=!1;else switch(d){case"$":a=!0;break;case"{":u||(l||(n=!1,s=[]),l=!0);break;case"}":if(l&&s.length>0){var p=t[s.join("")];o.push(void 0===p?"null":p)}l=!1;break;case"[":l||(c?u=!0:c=!0);break;case"]":u?u=!1:c=!1;break;default:h=!0}h&&(l?","===d||" "===d?n=!0:n||s.push(d):u||o.push(d))}return o.join("")},_getBundle:function(){var e=r._bundle;return e||n.getConfigBundle()}},i=r.setBundle,o=r.getResource,s=r.applyParameters,a=r.getTranslatedString,l=r.getComponentTranslations;e.applyParameters=s,e.getComponentTranslations=l,e.getResource=o,e.getTranslatedString=a,e.setBundle=i,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojcore",["ojs/ojcore-base","ojs/ojlogger","ojs/ojcontext","ojs/ojconfig","ojs/ojresponsiveutils","ojs/ojthemeutils","ojs/ojtimerutils","ojs/ojtranslation"],function(e,t,n,r,i,o,s,a){"use strict";return e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,e._registerLegacyNamespaceProp("Logger",t),e._registerLegacyNamespaceProp("Context",n),e._registerLegacyNamespaceProp("Config",r),e._registerLegacyNamespaceProp("ResponsiveUtils",i),e._registerLegacyNamespaceProp("ThemeUtils",o),e._registerLegacyNamespaceProp("TimerUtils",s),e._registerLegacyNamespaceProp("Translations",a),e}),define("ojs/ojmessaging",["ojs/ojcore-base","jquery"],function(e,t){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;const n=function(e,t,n){this.Init(e,t,n)};e._registerLegacyNamespaceProp("Message",n),n.SEVERITY_TYPE={CONFIRMATION:"confirmation",INFO:"info",WARNING:"warning",ERROR:"error",FATAL:"fatal"},n.SEVERITY_LEVEL={FATAL:5,ERROR:4,WARNING:3,INFO:2,CONFIRMATION:1},e.Object.createSubclass(n,e.Object,"Message"),n.prototype.Init=function(e,t,r){n.superclass.Init.call(this),this.summary=e,this.detail=t,this.severity=r||n.SEVERITY_TYPE.ERROR},n.getSeverityLevel=function(e){var t=e;if(t)if("string"==typeof e){var r=n._LEVEL_TO_TYPE.indexOf(t,1);t=-1===r?n.SEVERITY_LEVEL.ERROR:r}else"number"==typeof t&&(t<n.SEVERITY_LEVEL.CONFIRMATION||t>n.SEVERITY_LEVEL.FATAL)&&(t=n.SEVERITY_LEVEL.ERROR);return t||n.SEVERITY_LEVEL.ERROR},n.getSeverityType=function(e){var t=e;t&&("string"==typeof t?-1===n._LEVEL_TO_TYPE.indexOf(t,1)&&(t=n.SEVERITY_TYPE.ERROR):"number"==typeof t&&(t=t<n.SEVERITY_LEVEL.CONFIRMATION||t>n.SEVERITY_LEVEL.FATAL?n.SEVERITY_TYPE.ERROR:n._LEVEL_TO_TYPE[e]));return t||n.SEVERITY_TYPE.ERROR},n.getMaxSeverity=function(e){var r=-1;return e&&e.length>0&&t.each(e,function(e,t){var i=n.getSeverityLevel(t.severity);r=r<i?i:r}),r},n.isValid=function(e){return!(n.getMaxSeverity(e)>=n.SEVERITY_LEVEL.ERROR)},n._LEVEL_TO_TYPE=["none",n.SEVERITY_TYPE.CONFIRMATION,n.SEVERITY_TYPE.INFO,n.SEVERITY_TYPE.WARNING,n.SEVERITY_TYPE.ERROR,n.SEVERITY_TYPE.FATAL];const r=function(e,t,n,r){this.Init(e,t,n,r)};return e.Object.createSubclass(r,n,"ComponentMessage"),r._DEFAULT_OPTIONS={display:(r.DISPLAY={SHOWN:"shown",HIDDEN:"hidden"}).SHOWN,context:""},r.prototype.Init=function(e,n,i,o){r.superclass.Init.call(this,e,n,i),this._options=t.extend({},r._DEFAULT_OPTIONS,o)},r.prototype.clone=function(){return new r(this.summary,this.detail,this.severity,this._options)},r.prototype.canDisplay=function(){return!(this._options&&this._options.display&&this._options.display===r.DISPLAY.HIDDEN)},r.prototype._forceDisplayToShown=function(){return!(!this._options||r.DISPLAY.HIDDEN!==this._options.display)&&(this._options.display=r.DISPLAY.SHOWN,!0)},r.prototype._isMessageAddedByComponent=function(){return!(!this._options||!this._options.context)},n.ComponentMessage=r,n}),define("ojs/ojmetadatautils",["exports","ojs/ojcore-base","ojs/ojcustomelement-utils"],function(e,t,n){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;const r={};r.getDefaultValue=function(e,n){let i=e.value;if(void 0===i){const t=e.properties;if(t){const n={},o=Object.keys(t);for(let e=0;e<o.length;e++){const i=r.getDefaultValue(t[o[e]]);void 0!==i&&(n[o[e]]=i)}Object.keys(n).length>0&&(e.value=n,i=n)}}return void 0!==i&&(Array.isArray(i)?i=n?r.deepFreeze(i):i.slice():null!==i&&"object"==typeof i&&(i=n?r.deepFreeze(i):t.CollectionUtils.copyInto({},i,void 0,!0))),i},r.getDefaultValues=function(e,t){const n={},i=Object.keys(e);let o=!1;return i.forEach(function(i){const s=r.getDefaultValue(e[i],t);void 0!==s&&(n[i]=s,o=!0)}),o?n:null},r.deepFreeze=function(e){if(Object.isFrozen(e))return e;if(Array.isArray(e))e=e.map(e=>r.deepFreeze(e)),Object.freeze(e);else if(null!==e&&"object"==typeof e){const n=Object.getPrototypeOf(e);null!==n&&n!==Object.prototype||(t=e,Object.prototype.hasOwnProperty.call(t,"$$typeof"))||(Object.keys(e).forEach(function(t){e[t]=r.deepFreeze(e[t])}),Object.freeze(e))}var t;return e},r.getPropertyMetadata=function(e,t){const{subProp:n}=r.getComplexPropertyMetadata(e,t);return n},r.getComplexPropertyMetadata=function(e,t){let n=t,r=t;if(n){const t=e.split(".");for(let e=0;e<t.length&&(n=n[t[e]],0===e&&(r=n),n&&1!==t.length&&e!==t.length-1&&n.properties);e++)n=n.properties}return{prop:r,subProp:n}},r.checkEnumValues=function(e,t,n,r){if("string"==typeof n&&r){const e=r.enumValues;if(e&&-1===e.indexOf(n))throw new Error(`Invalid value '${n}' found for property '${t}'.Expected one of the following '${e.toString()}'.`)}},r.getFlattenedAttributes=function(e){const t=[];return r._getAttributesFromProperties("",e,t),t},r._getAttributesFromProperties=function(e,t,i){if(t){Object.keys(t).forEach(o=>{const s=t[o],a=e+o;i.push(n.AttributeUtils.propertyNameToAttribute(a)),s.properties&&r._getAttributesFromProperties(a+".",s.properties,i)})}};const i=r.getDefaultValue,o=r.getDefaultValues,s=r.deepFreeze,a=r.getPropertyMetadata,l=r.getComplexPropertyMetadata,c=r.checkEnumValues,u=r.getFlattenedAttributes;e.checkEnumValues=c,e.deepFreeze=s,e.getComplexPropertyMetadata=l,e.getDefaultValue=i,e.getDefaultValues=o,e.getFlattenedAttributes=u,e.getPropertyMetadata=a,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojdefaultsutils",["exports","ojs/ojmetadatautils"],function(e,t){"use strict";function n(e,t,n){let o=e._defaults;if(void 0===o){const s=r(e,t,n);o=Object.create(s),i(e,o),e._defaults=o}return o}function r(e,n,r){let i=e._staticDefaults;if(void 0===i){if(i=null,n){const e=n.properties,o=n.extension?._DEFAULTS;if(o){const e=new o;i=Object.create(e)}else e&&(i=Object.create(t.getDefaultValues(e,r)))}e._staticDefaults=i}return i}function i(e,t){if(e.getDynamicDefaults){const n=e.getDynamicDefaults();if(n)for(let e in n)void 0===t[e]&&(t[e]=n[e])}}var o=Object.freeze({__proto__:null,getFrozenDefault:function(e,r,i){const o=n(r,i,!0);return t.deepFreeze(o[e])},getDefaults:n,getStaticDefaults:r,applyDynamicDefaults:i});e.DefaultsUtils=o,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojbootstrap",["exports"],function(e){"use strict";var t;const n={whenDocumentReady:function(){return t||(t="loading"===document.readyState?new Promise(function(e){var t=function(){document.removeEventListener("DOMContentLoaded",t),e()};document.addEventListener("DOMContentLoaded",t)}):Promise.resolve()),t}}.whenDocumentReady;e.whenDocumentReady=n,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojcustomelement",["ojs/ojcore","ojs/ojlogger","ojs/ojcustomelement-utils","ojs/ojcustomelement-registry","ojs/ojmetadatautils","ojs/ojbootstrap","ojs/ojcore-base"],function(e,t,n,r,i,o,s){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,s=s&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s;const a={};a.proto={getClass:function(e){var r=Object.create(HTMLElement.prototype);this.InitializePrototype(r);var i=this.GetMetadata(e);a._enumerateMetadataForKey(r,i,"properties",this.DefinePropertyCallback.bind(this)),a._enumerateMetadataForKey(r,i,"methods",this.DefineMethodCallback.bind(this)),this.AddComponentMethods(r),r.setProperties=function(e){n.CustomElementUtils.getElementBridge(this).SetProperties(this,e)},Object.defineProperty(r,"set",{value:function(e,t){this.setProperty(e,t)}}),Object.defineProperty(r,"unset",{value:function(e){this.setProperty(e,void 0)}}),r.attributeChangedCallback=this.AttributeChangedCallback,r.connectedCallback=this._connectedCallback,r.disconnectedCallback=this._detachedCallback;const o=r.appendChild;r.appendChild=function(e){return n.CustomElementUtils.canRelocateNode(this,e)?o.call(this,e):e};const s=r.insertBefore;r.insertBefore=function(e,r){return n.CustomElementUtils.canRelocateNode(this,e)?(r&&r.parentNode!==this&&t.info(`Using insertBefore where ${this.tagName} is not a parent of ${r.tagName}`),r&&r.parentNode?s.call(r.parentNode,e,r):s.call(this,e,r)):e},r.setAttribute=function(e,t){if("class"===e){const e=n.CustomElementUtils.getClassSet(t);n.CustomElementUtils.getElementState(this).setOuterClasses(e)}else HTMLElement.prototype.setAttribute.call(this,e,t)},r.removeAttribute=function(e){"class"===e?this.setAttribute("class",""):HTMLElement.prototype.removeAttribute.call(this,e)};var l=function(){var e=window.Reflect;return void 0!==e?e.construct(HTMLElement,[],this.constructor):HTMLElement.call(this)},c=this;return Object.defineProperty(l,"observedAttributes",{get:function(){return c.GetAttributes(i)}}),Object.defineProperty(r,"constructor",{value:l,writable:!0,configurable:!0}),l.prototype=r,Object.setPrototypeOf(l,HTMLElement),l},initializeBridge:function(e,t){this.METADATA=this.GetMetadata(t),this._eventListeners={},this.State=n.CustomElementUtils.getElementState(e)},AddComponentMethods:function(e){},AttributeChangedCallback:function(e,o,s){const l=n.AttributeUtils.attributeToPropertyName(e),c=n.CustomElementUtils.getElementBridge(this);if(o!==s||c.State.dirtyProps.has(l)){if(c.State.dirtyProps.delete(l.split(".")[0]),"disabled"===e&&c.ShouldRemoveDisabled()&&c._isDisabledAttributeRemoved())return void(null!=s&&(t.warn("Ignoring 'disabled' attribute change after component initialization. Use element property setter instead."),c._removeDisabledAttribute(this)));if(c.ShouldHandleAttributeChanged(this)){a.__CheckOverlappingAttribute(this,e),null===s&&(s=void 0);var u={detail:{attribute:e,value:s,previousValue:o}};if(this.dispatchEvent(new CustomEvent("attribute-changed",u)),!n.AttributeUtils.getExpressionInfo(s).expr){const t=i.getPropertyMetadata(l,r.getElementProperties(this));t&&this.setProperty(l,n.CustomElementUtils.parseAttrValue(this,e,l,s,t)),c.HandleAttributeChanged(this,e,o,s)}}}},CreateComponent:function(e){},DefineMethodCallback:function(e,t,n){},DefinePropertyCallback:function(e,t,n){},GetAttributes:function(e){return e?i.getFlattenedAttributes(e.properties):[]},GetMetadata:function(e){return e[a.DESC_KEY_META]||{}},GetAliasForProperty:function(e){return e},ShouldHandleAttributeChanged:function(e){return this.State.canHandleAttributes()},ShouldCallHandleAttributeChanged:function(e){return this.ShouldHandleAttributeChanged()},HandleAttributeChanged:function(e,t,n,r){},HandleBindingsApplied:function(e,t){},HandleDetached:function(e){},HandleAttached:function(e){},HandleReattached:function(e){},InitializeElement:function(e){},InitializePrototype:function(e){},BatchedPropertySet:function(e,t){for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r];e.setProperty(i,t[i])}},GetEventListenerProperty:function(e){var t=n.AttributeUtils.eventListenerPropertyToEventType(e),r=this._eventListeners[t];if(r)return r.getListener()},GetProperty:function(e,t,o){var s=i.getPropertyMetadata(t,r.getElementProperties(e));return n.AttributeUtils.isEventListenerProperty(t)||!s||-1===t.indexOf(".")?o[t]:n.CustomElementUtils.getPropertyValue(o,t)},HandlePropertyChanged:function(e,t,n,r,i,o){var s=i?"external":"internal";a.__FirePropertyChangeEvent(e,t,n,r,s,o)},PlaybackEarlyPropertySets:function(e){if(this._earlySets){const t=r.getElementDescriptor(e.tagName),i=this.GetMetadata(t);for(;this._earlySets.length;){const t=this._earlySets.shift(),r=n.transformPreactValue(e,t.property,i.properties[t.property],t.value);e.setProperty(t.property,r)}}},SaveEarlyPropertySet:function(e,t,n){return!this.State.allowPropertySets()&&(this._earlySets||(this._earlySets=[]),this._earlySets.push({property:t,value:n}),!0)},SetEventListenerProperty:function(e,t,r){var i=n.AttributeUtils.eventListenerPropertyToEventType(t),o=this._eventListeners[i];o||(o=this._createEventListenerWrapper(),this._eventListeners[i]=o,e.addEventListener(i,o)),null==r||r instanceof Function?o.setListener(r):a.__ThrowTypeError(e,t,r,"function")},SetProperty:function(t,o,s,l,c){var u=i.getPropertyMetadata(o,r.getElementProperties(t));if(n.AttributeUtils.isEventListenerProperty(o)||!u)t[o]=s;else{var d=t.getProperty(o),h=o.split("."),p=h[0],f=l[p];e.CollectionUtils.isPlainObject(f)&&(f=e.CollectionUtils.copyInto({},f,void 0,!0));var _=void 0===s&&1===h.length?u.value:s;if(!n.ElementUtils.comparePropertyValues(u.writeback,_,d)){var m=-1!==o.indexOf(".");if(m&&(this._SKIP_PROP_CHANGE_EVENT=!0),c?this.ValidateAndSetProperty(this.GetAliasForProperty.bind(this),l,o,s,t):a.__SetProperty(this.GetAliasForProperty.bind(this),l,o,s),this._SKIP_PROP_CHANGE_EVENT=!1,m){var g={path:o,value:s,previousValue:d};this.HandlePropertyChanged(t,p,l[p],f,c,g)}return this.State.dirtyProps.add(p),{property:p,propertySet:!0,isSubproperty:m}}}return{property:null,propertySet:!1,isSubproperty:!1}},ShouldRemoveDisabled:function(){return!0},ValidateAndSetProperty:function(e,t,n,r,i){var o=this.ValidatePropertySet(i,n,r);a.__SetProperty(e,t,n,o)},ValidatePropertySet:function(e,o,s){var l=r.getElementProperties(e),c=i.getPropertyMetadata(o,l),u=o.split(".");if(c){if(l[u[0]].readOnly)throw new n.JetElementError(e,`Read-only property '${o}' cannot be set.`);try{i.checkEnumValues(e,o,s,c)}catch(t){throw new n.JetElementError(e,t.message)}return null!=s?a.checkType(e,o,s,c):s}t.warn(n.CustomElementUtils.getElementInfo(e)+": Ignoring property set for undefined property '"+o+"'.")},PostCreate:function(e){e.hasAttribute("disabled")&&this.ShouldRemoveDisabled()&&!this._isDisabledAttributeRemoved()&&this._removeDisabledAttribute(e)},_connected:function(e){const t=this.State;if(t.isComplete())this.HandleReattached(e);else if(t.startCreationCycle(),t.isCreating()){this.InitializeElement(e),t.setBindingProviderCallback(this.PlaybackEarlyPropertySets.bind(this,e));const n=()=>{try{t.getSlotMap(!0);return(this.CreateComponent(e)||Promise.resolve()).then(this.PostCreate.bind(this,e))}catch(e){return Promise.reject(e)}};t.setCreateCallback(n),this.HandleAttached(e)}},_connectedCallback:function(){n.CustomElementUtils.getElementBridge(this)._connected(this)},_detachedCallback:function(){const e=n.CustomElementUtils.getElementBridge(this),t=e.State;t.isComplete()?e.HandleDetached(this):t.pauseCreationCycle()},_createEventListenerWrapper:function(){var e,t=function(t){e&&e(t)};return t.setListener=function(t){e=t},t.getListener=function(){return e},t},SetProperties:function(e,t,n){for(var o=[],s={},a=!1,l=Object.keys(t),c=0;c<l.length;c++){var u=l[c];if(u.indexOf(".")>=0)o.push(u);else{let o=t[u];if(n&&void 0===o){const t=i.getPropertyMetadata(u,r.getElementProperties(e));o=i.getDefaultValue(t)}s[u]=o,a=!0}}a&&this.BatchedPropertySet(e,s);for(var d=0;d<o.length;d++){var h=o[d];e.setProperty(h,t[h])}},_isDisabledAttributeRemoved:function(){return!0===this._disabledProcessed},_removeDisabledAttribute:function(e){this._disabledProcessed=!0,e.removeAttribute("disabled")}},a._enumerateMetadataForKey=function(e,t,n,r){if(t&&t[n]){var i=t[n];Object.keys(i).forEach(function(t){r(e,t,i[t])})}},a.checkType=function(e,t,r,i){const o=i.type,s=n.ElementUtils.getSupportedTypes(o);if(1===s.typeCount&&!s.any&&!s.other){const n=typeof r;if(s.array&&!Array.isArray(r)||s.object&&"object"!==n||s.string&&"string"!==n||s.number&&("number"!==n||!isFinite(r)))a.__ThrowTypeError(e,t,r,o);else if(s.boolean)return!!r}return r},a.__ThrowTypeError=function(e,t,r,i){throw new n.JetElementError(e,`Invalid type '${typeof r}' found for property '${t}'. Expected value of type '${i}'.`)},a.__CheckOverlappingAttribute=function(e,t){var r=t.split(".");if(r.length>1)for(r.pop();r.length;){var i=r.join(".");if(e.hasAttribute(i))throw new n.JetElementError(e,`Cannot set overlapping attributes '${t}' and '${i}'.`);r.pop()}},a.__InitProperties=function(e,t){const o=n.CustomElementUtils.getElementBridge(e);var s=r.getElementProperties(e);if(s)for(var l=e.attributes,c=0;c<l.length;c++){var u=l[c],d=n.AttributeUtils.attributeToPropertyName(u.nodeName),h=i.getPropertyMetadata(d,s);if(h&&!h.readOnly)if(a.__CheckOverlappingAttribute(e,u.nodeName),!n.AttributeUtils.getExpressionInfo(u.value).expr){var p=n.CustomElementUtils.parseAttrValue(e,u.nodeName,d,u.value,h);o.ValidateAndSetProperty(o.GetAliasForProperty.bind(o),t,d,p,e)}}},a.__SetProperty=function(e,t,n,r){var i,o=t,s=n.split("."),a=e(s[0]);s.length>1&&!t[a]&&(o=i={});for(var l=0;l<s.length;l++){var c=e(s[l]);l===s.length-1?o[c]=r:o[c]||(o[c]={}),o=o[c]}i&&(t[a]=i[a])},a.__ProcessEventListeners=function(t){var r=e.CollectionUtils.copyInto({},t,void 0,!0,1);return r.properties=r.properties||{},a._enumerateMetadataForKey(null,r,"properties",function(e,t){var i=n.AttributeUtils.propertyNameToChangeEventType(t),o=n.AttributeUtils.eventTypeToEventListenerProperty(i);r.properties[o]={_derived:!0,_eventListener:!0}}),a._enumerateMetadataForKey(null,r,"events",function(e,t){var i=n.AttributeUtils.eventTypeToEventListenerProperty(t);r.properties[i]={_derived:!0,_eventListener:!0}}),r},a.__FirePropertyChangeEvent=function(e,t,r,i,o,s){var a=n.CustomElementUtils.getElementBridge(e);if(!a._SKIP_PROP_CHANGE_EVENT){var l={};s&&(l.subproperty=s),l.value=r,l.previousValue=i,l.updatedFrom=o,a.beforePropertyChangedEvent&&a.beforePropertyChangedEvent(e,t,l),("external"!==o||a.State.isComplete())&&e.dispatchEvent(new CustomEvent(t+"Changed",{detail:l}))}},a.__DefineDynamicObjectProperty=function(e,t,n,r){Object.defineProperty(e,t,{enumerable:!0,get:n,set:r})},a.DESC_KEY_META="metadata",e._registerLegacyNamespaceProp("BaseCustomElementBridge",a),o.whenDocumentReady().then(function(){!function(){var e=document.createElement("div");e.style.border="1px solid",e.style.borderColor="red green",e.style.position="absolute",e.style.top="-999px",e.style.backgroundImage="url(data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACwAAAAAAQABAAACAkQBADs=)";var t=document.body;t.appendChild(e);var n=window.getComputedStyle(e),r=n.backgroundImage;n.borderTopColor!==n.borderRightColor&&(null==r||"none"!==r&&"url (invalid-url:)"!==r)||t.classList.add("oj-hicontrast"),t.removeChild(e)}()}),o.whenDocumentReady().then(function(){!function(){let e=[];const t=s.AgentUtils.getAgentInfo();e.push(`oj-agent-os-${t.os.toLowerCase()}`),e.push(`oj-agent-browser-${t.browser.toLowerCase()}`),document.documentElement.classList.add(...e)}()})}),define("ojs/ojdomutils",["exports","ojs/ojthemeutils","ojs/ojcore-base","jquery"],function(e,t,n,r){"use strict";n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;const i={_HTML_START_TAG:"<html>",_HTML_END_TAG:"</html>",_LEGAL_ELEMENTS:{SPAN:1,B:1,I:1,EM:1,BR:1,HR:1,LI:1,OL:1,UL:1,P:1,TT:1,BIG:1,SMALL:1,PRE:1},_LEGAL_ATTRIBUTES:{class:1,style:1},isHTMLContent:function(e){return 0===e.indexOf(i._HTML_START_TAG)&&e.lastIndexOf(i._HTML_END_TAG)===e.length-7},cleanHtml:function(e){var t=r(document.createElement("span")).get(0);return t.innerHTML=e,e&&e.indexOf("<")>=0&&i._cleanElementHtml(t),t},_cleanElementHtml:function(e){for(var t=e.childNodes,n=t.length-1;n>=0;n--){var o=t.item(n);if(o&&1===o.nodeType)if(i._LEGAL_ELEMENTS[o.nodeName]){for(var s=o.attributes,a=s.length-1;a>=0;a--){var l=s[a];void 0!==r(o).attr(l.name)&&(i._LEGAL_ATTRIBUTES[l.name]||o.removeAttribute(l.nodeName))}i._cleanElementHtml(o)}else o&&e.removeChild(o)}},isAncestor:function(e,t){for(var n=t.parentNode;n;){if(n===e)return!0;n=n.parentNode}return!1},isAncestorOrSelf:function(e,t){return t===e||i.isAncestor(e,t)},addResizeListener:function(e,t,n,r){let o=i._RSZ_TRKR;r&&(o=i._RSZ_TRKR_OBS,i._OBS_BASED.set(t,!0));let s=o.get(e);null==s&&(s=new i._ResizeTracker(e,r),o.set(e,s),s.start()),s.addListener(t,n)},removeResizeListener:function(e,t){const n=i._OBS_BASED.get(t)?i._RSZ_TRKR_OBS:i._RSZ_TRKR,r=n.get(e);null!=r&&(r.removeListener(t),r.isEmpty()&&(r.stop(),n.delete(e)))},fixResizeListeners:function(e){r(e).find(".oj-helper-detect-expansion").parent().each(function(e,t){var n=i._RSZ_TRKR.get(t);null!=n&&n.init(!0)})},isMetaKeyPressed:function(e){var t=n.AgentUtils.getAgentInfo();return n.AgentUtils.OS.MAC===t.os?e.metaKey:e.ctrlKey},dispatchEvent:function(e,t){var n="disabled",r=e[n];try{e[n]=!1,e.dispatchEvent(t)}finally{e[n]=r}}};i._invokeAfterPaint=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,0)}).bind(window),i._cancelInvokeAfterPaint=(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||function(e){return window.clearTimeout(e)}).bind(window),i._ResizeTracker=function(e,t){e instanceof r&&(e=e[0]);var n=e.hasAttribute("data-oj-resize-notify"),o=r.Callbacks(),s=[],a=[],l=2,c=0,u=null,d=null,h=null,p=null,f=null,_=null,m=null;function g(e){var t=!1;if(null!=p.offsetParent){var n=p.offsetWidth,r=p.offsetHeight;d===n&&h===r||(c=l,b(n,r),t=!0,e&&y(!0))}return t}function v(t){const n=t[0].borderBoxSize;y(!1,[n?(n[0]||n).inlineSize:e.offsetWidth,n?(n[0]||n).blockSize:e.offsetHeight])}function y(t,r){var a=r?r[0]:e.offsetWidth,l=r?r[1]:e.offsetHeight,c=(t,r)=>{o.fire(t,r),n&&e.dispatchEvent(new Event("oj-resize"))};o.has()&&(t?(null!==u&&i._cancelInvokeAfterPaint(u),u=i._invokeAfterPaint(function(){u=null,c(a,l)})):c(a,l));for(var d=0;d<s.length;d++)s[d].getCallback()(a,l)}function E(e){e.stopPropagation(),g(!0)||c>0&&null!=p.offsetParent&&(0===p.scrollLeft||0===p.scrollTop)&&(c-=1,b(d,h))}function b(e,t){d=e,h=t;var n=p.firstChild.style,r=1;do{n.width=e+r+"px",n.height=t+r+"px",p.scrollLeft=r,p.scrollTop=r,r+=1}while((0===p.scrollTop||0===p.scrollLeft)&&r<=5);f.scrollLeft=e,f.scrollTop=t}this.addListener=function(t,r){if(void 0===r||isNaN(r)||0===r)o.add(t);else{s.push(new i._collapsingListenerManager(n?()=>{t.apply(null,arguments),e.dispatchEvent(new Event("oj-resize"))}:t,r)),a.push(t)}},this.removeListener=function(e){var t=a.indexOf(e);t>=0?(a.splice(t,1),s.splice(t,1)[0].stop()):o.remove(e)},this.isEmpty=function(){return!o.has()&&0===a.length},this.start=function(){if(t&&window.ResizeObserver instanceof Function)(m=new ResizeObserver(v)).observe(e,{box:"border-box"});else{_=E;var n=e.childNodes[0];(p=document.createElement("div")).className="oj-helper-detect-expansion";var r=document.createElement("div");p.appendChild(r),null!=n?e.insertBefore(p,n):e.appendChild(p),p.addEventListener("scroll",_,!1),(f=document.createElement("div")).className="oj-helper-detect-contraction";var i=document.createElement("div");i.style.width="200%",i.style.height="200%",f.appendChild(i),e.insertBefore(f,p),f.addEventListener("scroll",_,!1),this.init(!1)}},this.stop=function(){null!=u&&(i._cancelInvokeAfterPaint(u),u=null),null!=m?(m.disconnect(),m=null):null!=p&&(p.removeEventListener("scroll",_),f.removeEventListener("scroll",_),p.parentNode&&e.removeChild(p),f.parentNode&&e.removeChild(f))},this.init=function(e){if(p){var t=g(e);e&&!t&&null!=p.offsetParent&&b(d,h)}}},i._RSZ_TRKR=new WeakMap,i._RSZ_TRKR_OBS=new WeakMap,i._OBS_BASED=new WeakMap,i.isValidIdentifier=function(e){return/^[A-Za-z][0-9A-Z_a-z-]*$/.test(e)},i._collapsingListenerManager=function(e,t){var n=null,r=null,i=function(){e.apply(null,n),r=null},o=function(){n=Array.prototype.slice.call(arguments),null==r&&(r=window.setTimeout(i,t))};this.getCallback=function(){return o},this.stop=function(){null!=r&&(window.clearTimeout(r),r=null)}},i.isTouchSupported=function(){return"ontouchstart"in window||navigator.msMaxTouchPoints>0||navigator.maxTouchPoints>0},i.setInKoCleanExternal=function(e){i._koCleanNode=e},i.unwrap=function(e,t){var n=i._koCleanNode;n&&e.get(0)===n||(t?t.replaceWith(e):e.unwrap())},i.isChromeEvent=function(e){if(!("clientX"in e)||!("clientY"in e))return!1;var t=n.AgentUtils.getAgentInfo();if(n.AgentUtils.OS.ANDROID===t.os||n.AgentUtils.OS.IOS===t.os)return!1;if(t.engine!==n.AgentUtils.ENGINE.GECKO&&t.engine!==n.AgentUtils.ENGINE.WEBKIT&&t.engine!==n.AgentUtils.ENGINE.BLINK&&t.browser!==n.AgentUtils.BROWSER.IE)return!1;var o="ltr"===i.getReadingDirection(),s=!o&&t.browser===n.AgentUtils.BROWSER.SAFARI,a=e.target,l=r(a),c=a.getBoundingClientRect(),u=i.getScrollBarWidth();return!(!o||"HTML"!==a.nodeName&&"visible"===l.css("overflow-x")||!(e.clientX>c.right-u))||(!o&&!s&&"HTML"===a.nodeName&&e.clientX>c.right-u||(!o&&"visible"!==l.css("overflow-x")&&e.clientX<c.left+u||("HTML"===a.nodeName||"visible"!==l.css("overflow-y"))&&e.clientY>c.bottom-u))},i.getScrollBarWidth=function(){return r.position.scrollbarWidth()},i.getReadingDirection=function(){var e=document.documentElement.getAttribute("dir");return e&&(e=e.toLowerCase()),"rtl"===e?"rtl":"ltr"},i.setScrollLeft=function(e,t){e.scrollLeft=i.calculateScrollLeft(t)},i.calculateScrollLeft=function(e){var t=e;if("rtl"===i.getReadingDirection()){var r=n.AgentUtils.getAgentInfo().browser;r!==n.AgentUtils.BROWSER.IE&&r!==n.AgentUtils.BROWSER.EDGE&&(t=-e)}return t},i.getCSSLengthAsInt=function(e){if(!isNaN(e))return parseInt(e,10);if(e&&e.length>0&&"auto"!==e){var t=parseInt(e,10);return isNaN(t)&&(t=0),t}return 0},i.getCSSLengthAsFloat=function(e){if(!isNaN(e))return parseFloat(e);if(e&&e.length>0){var t=parseFloat(e);return isNaN(t)&&(t=0),t}return 0},i.getCSSTimeUnitAsMillis=function(e){if(!isNaN(e))return parseInt(e,10);if(e&&e.length>0){var t=parseFloat(e);if(isNaN(t))t=0;else{var n,r=e+"";r.length>2&&r.endsWith("ms")?n=r.slice(-3,-2):r.length>1&&r.endsWith("s")&&(n=r.slice(-2,-1)),isNaN(n)?t=0:!r.endsWith("ms")&&r.endsWith("s")&&(t*=1e3)}return t}return 0},i._LOGICAL_PARENT_DATA="oj-logical-parent";const o=Symbol.for("oj-logical-parent");var s,a,l,c,u,d,h,p;i.getLogicalParent=function(e){if(e)return e.data(i._LOGICAL_PARENT_DATA)},i.setLogicalParent=function(e,t){if(e){var n=e[0];n&&(null===t?(e.removeData(i._LOGICAL_PARENT_DATA),delete n[o]):(e.data(i._LOGICAL_PARENT_DATA,t),n[o]=t[0]))}},i.isLogicalAncestorOrSelf=function(e,t){n.Assert.assertDomElement(e),n.Assert.assertDomElement(t);for(var o=t;o;){if(o===e)return!0;var s=i.getLogicalParent(r(o));o=s?s[0]:o.parentNode}return!1},i.validateURL=function(e,t){var n=t||["http:","https:"],r=document.createElement("a");r.href=e;var i=r.protocol;if(null!=i&&(i=i.toLowerCase()),n.indexOf(i)<0&&""!==i)throw new Error(i+" is not a valid URL protocol")},i._suppressNativeContextMenu=function(){r(document.body).hasClass("oj-hybrid")&&!r(document.body).hasClass("oj-hybrid-show-context-menu")&&document.body.addEventListener("contextmenu",function(e){"INPUT"!==e.target.nodeName&&"TEXTAREA"!==e.target.nodeName&&e.preventDefault()},!0)},i._suppressNativeContextMenu(),i.PRESS_HOLD_THRESHOLD=750,i.recentTouchEnd=function(){var e=0;function t(){e=Date.now()}return document.addEventListener("touchend",t,!0),document.addEventListener("touchcancel",t,!0),function(){return Date.now()-e<500}}(),i.recentTouchStart=(s=0,a=i.PRESS_HOLD_THRESHOLD+50,document.addEventListener("touchstart",function(){s=Date.now()},{passive:!0,capture:!0}),function(){return Date.now()-s<a}),i.recentPointer=(c=0,u=i.PRESS_HOLD_THRESHOLD+600,document.addEventListener("mousedown",function(){var e=Date.now();(!l||e>c+i.PRESS_HOLD_THRESHOLD)&&(c=e,l=!1)},!0),document.addEventListener("touchstart",function(){c=Date.now(),l=!0},{passive:!0,capture:!0}),document.addEventListener("mouseup",function(){c=Date.now(),l=!1},!0),document.addEventListener("touchend",function(){c=Date.now(),l=!1},!0),function(){return Date.now()-c<(l?u:600)}),i.makeFocusable=(d=0,h=(t.parseJSONFromFontFamily("oj-focus-config")||{}).focusHighlightPolicy,p=function(e,t){switch(e?e():h){case"all":return!0;case"none":return!1;default:return!(i.recentPointer()||t&&t())}},function(e){var t=e.element,n="ojFocusable",i="."+n,o=" "+i;if(e.remove){t.removeClass("oj-focus oj-focus-highlight");var s=t.data(n);if(null==s)return;var a=i+(""+s).split(",").join(o);t.off(a).removeData(n)}else{var l=e.afterToggle||r.noop,c=e.applyHighlight?function(t){t.addClass("oj-focus"),p(e.getFocusHighlightPolicy,e.recentPointer)&&t.addClass("oj-focus-highlight"),l("focusin")}:function(e){e.addClass("oj-focus"),l("focusin")},u=!1;(e.setupHandlers||function(o,s){var a=e.component,l=function(e){o(r(e.currentTarget)),u=!0},c=function(e){u&&(s(r(e.currentTarget)),u=!1)};if(a)a._on(t,{focusin:l,focusout:c});else{var h=d;d+=1;var p=t.data(n);t.data(n,null==p?h:p+","+h);var f={},_=i+h;f["focusin"+_]=l,f["focusout"+_]=c,t.on(f)}})(c,function(e){e.removeClass("oj-focus oj-focus-highlight"),l("focusout")})}}),i.getNoJQFocusHandlers=function(e,t){return{focusIn:function(t){return e(r(t))},focusOut:function(e){return t(r(e))}}};const f=i.isHTMLContent,_=i.cleanHtml,m=i.isAncestor,g=i.isAncestorOrSelf,v=i.addResizeListener,y=i.removeResizeListener,E=i.fixResizeListeners,b=i.isMetaKeyPressed,S=i.dispatchEvent,T=i.isValidIdentifier,C=i.isTouchSupported,P=i.setInKoCleanExternal,O=i.unwrap,A=i.isChromeEvent,I=i.getScrollBarWidth,R=i.getReadingDirection,w=i.setScrollLeft,N=i.calculateScrollLeft,j=i.getCSSLengthAsInt,x=i.getCSSLengthAsFloat,D=i.getCSSTimeUnitAsMillis,L=i.getLogicalParent,M=i.setLogicalParent,k=i.isLogicalAncestorOrSelf,F=i.validateURL,B=i.PRESS_HOLD_THRESHOLD,U=i.recentTouchEnd,V=i.recentTouchStart,H=i.recentPointer,G=i.getNoJQFocusHandlers,K=i.makeFocusable;e.PRESS_HOLD_THRESHOLD=B,e.addResizeListener=v,e.calculateScrollLeft=N,e.cleanHtml=_,e.dispatchEvent=S,e.fixResizeListeners=E,e.getCSSLengthAsFloat=x,e.getCSSLengthAsInt=j,e.getCSSTimeUnitAsMillis=D,e.getLogicalParent=L,e.getNoJQFocusHandlers=G,e.getReadingDirection=R,e.getScrollBarWidth=I,e.isAncestor=m,e.isAncestorOrSelf=g,e.isChromeEvent=A,e.isHTMLContent=f,e.isLogicalAncestorOrSelf=k,e.isMetaKeyPressed=b,e.isTouchSupported=C,e.isValidIdentifier=T,e.makeFocusable=K,e.recentPointer=H,e.recentTouchEnd=U,e.recentTouchStart=V,e.removeResizeListener=y,e.setInKoCleanExternal=P,e.setLogicalParent=M,e.setScrollLeft=w,e.unwrap=O,e.validateURL=F,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojfocusutils",["jquery","ojs/ojcore-base","ojs/ojdomutils"],function(e,t,n){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;const r={_TABBABLE:":tabbable,iframe",containsFocus:function(e){var t=document.activeElement;return!(!e||!t)&&n.isAncestorOrSelf(e,t)},focusElement:function(e){e.focus()},focusFirstTabStop:function(e){var t=r.getFirstTabStop(e);return t&&r.focusElement(t),t},isFirstActiveElement:function(t){var n=e(t).find(r._TABBABLE);if(null==n||0===n.length)return!1;var i=n[0];return document.activeElement===i||i.name===document.activeElement.name&&"radio"===i.type&&"radio"===document.activeElement.type},isLastActiveElement:function(t){var n=e(t).find(r._TABBABLE);if(null==n||0===n.length)return!1;var i=n[n.length-1];return document.activeElement===i||i.name===document.activeElement.name&&"radio"===i.type&&"radio"===document.activeElement.type},getFirstTabStop:function(t){var n=e(t);if(n.is(r._TABBABLE))return t;var i=n.find(r._TABBABLE);if(i&&i.length>0){if(i[0].classList.contains("oj-radio")){var o=i.filter(".oj-selected.oj-radio");return o&&o.length?o[0]:i[0]}return i[0]}return null},getLastTabStop:function(t){var n=e(t).find(r._TABBABLE);if(n&&n.length>0){if(n[n.length-1].classList.contains("oj-radio")){var i=n.filter(".oj-selected.oj-radio");return i&&i.length?i[i.length-1]:n[n.length-1]}return n[n.length-1]}return null},isFocusable:function(n){return!!e(n).is(":focusable")&&!("A"===n.nodeName&&!n.hasAttribute("tabindex")&&t.AgentUtils.getAgentInfo().browser===t.AgentUtils.BROWSER.SAFARI)}};return r}),define("ojs/ojgestureutils",["exports","jquery","ojs/ojdomutils","ojs/ojcore-base"],function(e,t,n,r){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;const i={_EVENT_NAMESPACE:".contextMenu",stopDetectContextMenuGesture:function(e){const n=r.AgentUtils.getAgentInfo().os===r.AgentUtils.OS.IOS,o=e._allowBrowserContextMenu;e._touchStartListener&&(document.removeEventListener("touchstart",e._touchStartListener,{passive:!0}),delete e._touchStartListener),e._touchCancelListener&&(document.removeEventListener("touchcancel",e._touchCancelListener,{passive:!0}),delete e._touchCancelListener),e._touchEndListener&&(document.removeEventListener("touchend",e._touchEndListener,{passive:!1}),delete e._touchEndListener),e._browserSelectionChangeListener&&(document.removeEventListener("selectionchange",e._browserSelectionChangeListener,{passive:!0}),delete e._browserSelectionChangeListener),e._touchMoveListener&&(o&&n?document.removeEventListener("touchmove",e._touchMoveListener,{passive:!0}):e.removeEventListener("touchmove",e._touchMoveListener,{passive:!0}),delete e._touchMoveListener),e._clickListener&&(t(e).off(i._EVENT_NAMESPACE).removeClass("oj-menu-context-menu-launcher")[0].removeEventListener("click",e._clickListener,!0),clearTimeout(e._contextMenuPressHoldTimer),delete e._clickListener,delete e._contextMenuPressHoldTimer),e._touchStartAndMouseDownListener&&(e.removeEventListener("touchstart",e._touchStartAndMouseDownListener,{passive:!1}),delete e._touchStartAndMouseDownListener),e._browserSelectStartListener&&(document.removeEventListener("selectstart",e._browserSelectStartListener,{passive:!0}),delete e._browserSelectStartListener,delete e._webKitUserSelectValue,delete e._userSelectValue)},startDetectContextMenuGesture:function(e,o,s){var a,l,c,u,d,h=n.PRESS_HOLD_THRESHOLD;n.isTouchSupported()&&t(e).addClass("oj-menu-context-menu-launcher");var p,f,_=!1,m=!1,g=null,v=i._EVENT_NAMESPACE,y=!1;const E=function(n,r,i){if((_=i)&&t(e).one("touchend"+v,function(){y=!0,setTimeout(function(){y=!1},50)}),"touchstart"===g&&"contextmenu"===n.type||"contextmenu"===g&&"touchstart"===n.type||"keydown"===g&&"contextmenu"===n.type)return"keydown"===g&&"contextmenu"===n.type&&n.preventDefault(),g=null,void clearTimeout(f);n.isDefaultPrevented&&n.isDefaultPrevented()||n.originalEvent&&n.originalEvent.defaultPrevented||n.defaultPrevented||("touchstart"!==n.type&&"touchmove"!==n.type||(n.originalEvent=n),s?.allowBrowserContextMenu&&d()||(o(n,r),(n.isDefaultPrevented&&n.isDefaultPrevented()||n.defaultPrevented)&&("touchstart"!==n.type&&"contextmenu"!==n.type&&"keydown"!==n.type||(g=n.type,f=setTimeout(function(){g=null},300)))))};t(e).on("keydown"+v+" contextmenu"+v,function(e){var t;("contextmenu"===e.type||("F10"===e.key||121===e.keyCode)&&e.shiftKey)&&(t=m?"touch":"keydown"===e.type?"keyboard":"mouse",E(e,t,!1));return!0});const b=r.AgentUtils.getAgentInfo().os===r.AgentUtils.OS.IOS,S=s?.allowBrowserContextMenu;if(S){e._allowBrowserContextMenu=!0,e.classList.add("oj-menu-allow-browser-context-menu"),u=!1,d=function(){if(u)return!0;const e=document.getSelection();return!("None"===e.type||e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset)};const t=function(e){"#text"===e.target.nodeName?(u=!0,setTimeout(()=>{u=!1},10)):u=!1};if(e._browserSelectStartListener=t,document.addEventListener("selectstart",t,{passive:!0}),b){let t,n,r,i,s;const u=function(n){n.preventDefault(),t=!0,e._webKitUserSelectValue=document.body.style["-webkit-user-select"],document.body.style["-webkit-user-select"]="none",e._userSelectValue=document.body.style.userSelect,document.body.style.userSelect="none",document.getSelection().empty(),o(n,"touch")},d=function(e){const t=e.touches[0];a=t.pageX,l=t.pageY;let o=2*h;null==n?(r=Date.now(),i=e):o=n+h,s=setTimeout(u.bind(null,e),o)};e._touchStartListener=d,document.addEventListener("touchstart",d,{passive:!0});const p=function(n){clearTimeout(s),t&&(n.preventDefault(),setTimeout(()=>{document.body.style["-webkit-user-select"]=e._webKitUserSelectValue,document.body.style.userSelect=e._userSelectValue,t=!1},500))};e._touchEndListener=p,document.addEventListener("touchend",p,{passive:!1});const f=function(){clearTimeout(s),t&&(document.body.style["-webkit-user-select"]=e._webKitUserSelectValue,document.body.style.userSelect=e._userSelectValue,t=!1)};e._touchCancelListener=f,document.addEventListener("touchcancel",f,{passive:!0}),c=function(e){const t=e.touches[0];(Math.abs(a-t.pageX)>5||Math.abs(l-t.pageY)>5)&&clearTimeout(s)},e._touchMoveListener=c,document.addEventListener("touchmove",c,{passive:!0});const _=function(){null!=r&&null==n&&"Range"===document.getSelection().type&&(clearTimeout(s),n=Date.now()-r,s=setTimeout(u.bind(null,i),h))};return e._browserSelectionChangeListener=_,void document.addEventListener("selectionchange",_,{passive:!0})}}var T=function(e){_&&(e.preventDefault(),e.stopPropagation(),_=!1)};e._clickListener=T,e.addEventListener("click",T,!0);var C=function(t){if("mousedown"!==t.type||!y){if(_=!1,"touchstart"===t.type&&1===t.touches.length){var n=t.touches[0];a=n.pageX,l=n.pageY,m=!0,p=setTimeout(E.bind(void 0,t,"touch",!0),h),e._contextMenuPressHoldTimer=p}return!0}};e._touchStartAndMouseDownListener=C,e.addEventListener("touchstart",C,{passive:!1}),c=function(e){var t=e.touches[0];return(Math.abs(a-t.pageX)>5||Math.abs(l-t.pageY)>5)&&(m=!1,clearTimeout(p)),!0},e._touchMoveListener=c,e.addEventListener("touchmove",c,{passive:!0}),t(e).on("touchend"+v+" touchcancel"+v,function(){return m=!1,clearTimeout(p),!0}).on("mousedown"+v,C)}},o=i.startDetectContextMenuGesture,s=i.stopDetectContextMenuGesture;e.startDetectContextMenuGesture=o,e.stopDetectContextMenuGesture=s,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojcomponentcore",["exports","jqueryui-amd/widget","jqueryui-amd/unique-id","jqueryui-amd/keycode","jqueryui-amd/focusable","jqueryui-amd/tabbable","ojs/ojcore","jquery","ojs/ojmessaging","ojs/ojmetadatautils","ojs/ojcore-base","ojs/ojdomutils","ojs/ojcustomelement","ojs/ojcustomelement-utils","ojs/ojcustomelement-registry","ojs/ojlogger","ojs/ojdefaultsutils","ojs/ojtranslation","ojs/ojfocusutils","ojs/ojgestureutils"],function(e,t,n,r,i,o,s,a,l,c,u,d,h,p,f,_,m,g,v,y){"use strict";s=s&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s,a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a,l=l&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l,u=u&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u;
/**
   * @preserve Copyright 2013 jQuery Foundation and other contributors
   * Released under the MIT license.
   * http://jquery.org/license
   */
const E=function(e){this.Init(e)};s.Object.createSubclass(E,s.Object,"oj.ComponentMessaging"),s._registerLegacyNamespaceProp("ComponentMessaging",E),E._STRATEGY_TYPE={NONE:"none",NOTEWINDOW:"notewindow",PLACEHOLDER:"placeholder",INLINE:"inline",LABEL_EDGE_INSIDE:"inside",LABEL_EDGE_INSIDE_FORM_CNTRL:"insideformcontrol",USER_ASSISTANCE_INLINE:"userassistanceinline"},E._STRATEGY_TYPE_TO_CALLBACK={};const b="aria-describedby";E.registerMessagingStrategy=function(e,t){e&&"function"==typeof t&&(E._STRATEGY_TYPE_TO_CALLBACK[e]=t)},E.prototype.Init=function(e){E.superclass.Init.call(this),this._component=e,this._activated=!1,this._initializeMessagingStrategies()},E.prototype.activate=function(e,t,n){var r=this;s.Assert.assertObject(n),this._launcher=e,this._contentElement=t,this._messagingContent=s.CollectionUtils.copyInto(this._messagingContent||{},n),this._isActive()?this._reactivate():(a.each(this._strategies,function(e,t){t.activate(r)}),this._activated=!0)},E.prototype.update=function(e){s.Assert.assertObject(e),s.Assert.assertBoolean(this._activated),this._messagingContent=s.CollectionUtils.copyInto(this._messagingContent||{},e),this._activated&&a.each(this._strategies,function(t,n){n.shouldUpdate(e)&&n.update()})},E.prototype.deactivate=function(){a.each(this._strategies,function(e,t){t.deactivate()}),this._activated=!1,this._component=null,this._launcher=null,this._contentElement=null,this._strategies={}},E.prototype.close=function(){this._activated&&a.each(this._strategies,function(e,t){t.close()})},E.prototype.releaseResources=function(){this._activated&&a.each(this._strategies,function(e,t){t.releaseResources()})},E.prototype.setupResources=function(){this._activated&&a.each(this._strategies,function(e,t){t.setupResources()})},E.prototype._createMessagingStrategy=function(e,t){return new(E._STRATEGY_TYPE_TO_CALLBACK[e]||E._STRATEGY_TYPE_TO_CALLBACK[E._STRATEGY_TYPE.NONE])(t)},E.prototype._getComponent=function(){return this._component||null},E.prototype._getLauncher=function(){return this._launcher||null},E.prototype._getContentElement=function(){return this._contentElement||null},E.prototype._getMessagingContent=function(){return this._messagingContent||{}},E.prototype._setMessagingContent=function(e){s.Assert.assertObject(e),this._messagingContent=s.CollectionUtils.copyInto(this._messagingContent||{},e)},E.prototype._isActive=function(){return this._activated},E.prototype._getResolvedMessagingDisplayOptions=function(e){for(var t={},n=!1,r=this._component.options,i={},o=this,s=Object.keys(e),l=0;l<s.length;l++){var c=s[l],u=e[c];n=!1;var d=c+"";if(Array.isArray(u))for(var h=0;h<u.length;h++){var p=u[h];n||(n=o._resolveStrategyTypeForArtifact(d,p,r,i))}else"string"==typeof u&&(n||(n=o._resolveStrategyTypeForArtifact(d,u,r,i)));n||(i[d]=E._STRATEGY_TYPE.NONE)}return o._addLabelStrategy(i),a.each(E._STRATEGY_TYPE,function(e,n){t[n]=[]}),a.each(i,function(e,n){t[n].push(e)}),t},E.prototype._getUserAssistanceStrategyToArtifactsObj=function(){var e={},t=this._component.options.displayOptions||{},n={},r=Object.keys(t);for(let e=0;e<r.length;e++){let i=r[e],o=t[i],s=i+"";n[s]="string"==typeof o&&"none"===o?E._STRATEGY_TYPE.NONE:E._STRATEGY_TYPE.USER_ASSISTANCE_INLINE}return this._addLabelStrategy(n),Object.keys(E._STRATEGY_TYPE).forEach(function(t){let n=E._STRATEGY_TYPE[t];e[n]=[]}),Object.keys(n).forEach(function(t){let r=n[t];e[r].push(t)}),e},E.prototype._addLabelStrategy=function(e){var t="labelEdge",n=this._component._ResolveLabelEdgeStrategyType();this._resolveStrategyTypeForArtifact(t,n,this._component.options,e)||(e[t]=E._STRATEGY_TYPE.NONE)},E.prototype._resolveStrategyTypeForArtifact=function(e,t,n,r){var i=!1,o=n.placeholder;switch(t){case E._STRATEGY_TYPE.PLACEHOLDER:"converterHint"===e&&(i||o||(r[e]=t,i=!0));break;case E._STRATEGY_TYPE.INLINE:"messages"===e&&(i||(r[e]=t,i=!0));break;case E._STRATEGY_TYPE.LABEL_EDGE_INSIDE:case E._STRATEGY_TYPE.LABEL_EDGE_INSIDE_FORM_CNTRL:"labelEdge"!==e||i||s.StringUtils.isEmptyOrUndefined(n.labelHint)||(r[e]=t,i=!0);break;default:i||"labelEdge"===e||(r[e]=t,i=!0)}return i},E.prototype._initializeMessagingStrategies=function(){var e=this._strategyToArtifacts(),t=e[E._STRATEGY_TYPE.NOTEWINDOW],n=e[E._STRATEGY_TYPE.NONE],r=e[E._STRATEGY_TYPE.PLACEHOLDER],i=e[E._STRATEGY_TYPE.INLINE],o=e[E._STRATEGY_TYPE.LABEL_EDGE_INSIDE],s=e[E._STRATEGY_TYPE.LABEL_EDGE_INSIDE_FORM_CNTRL],a=e[E._STRATEGY_TYPE.USER_ASSISTANCE_INLINE],l={};t.length>0&&(l[E._STRATEGY_TYPE.NOTEWINDOW]=this._createMessagingStrategy(E._STRATEGY_TYPE.NOTEWINDOW,t)),r.length>0&&0===o.length&&(l[E._STRATEGY_TYPE.PLACEHOLDER]=this._createMessagingStrategy(E._STRATEGY_TYPE.PLACEHOLDER,r)),i.length>0&&(l[E._STRATEGY_TYPE.INLINE]=this._createMessagingStrategy(E._STRATEGY_TYPE.INLINE,i)),a.length>0&&(l[E._STRATEGY_TYPE.USER_ASSISTANCE_INLINE]=this._createMessagingStrategy(E._STRATEGY_TYPE.USER_ASSISTANCE_INLINE,a)),o.length>0?l[E._STRATEGY_TYPE.LABEL_EDGE_INSIDE]=this._createMessagingStrategy(E._STRATEGY_TYPE.LABEL_EDGE_INSIDE,o):s.length>0&&(l[E._STRATEGY_TYPE.LABEL_EDGE_INSIDE_FORM_CNTRL]=this._createMessagingStrategy(E._STRATEGY_TYPE.LABEL_EDGE_INSIDE_FORM_CNTRL,s)),l[E._STRATEGY_TYPE.NONE]=this._createMessagingStrategy(E._STRATEGY_TYPE.NONE,n),this._strategies=l},E.prototype._reactivate=function(){var e,t=this._strategyToArtifacts(),n=this;a.each(t,function(t,r){t+="",e=n._strategies[t],r&&r.length>0?e?e&&e.reactivate(r):(e=n._createMessagingStrategy(t,r),n._strategies[t]=e,e.activate(n)):e&&E._STRATEGY_TYPE.NONE!==t&&(e.deactivate(),delete n._strategies[t])})},E.prototype._strategyToArtifacts=function(){let e,t=this._component._getResolvedUserAssistance();if("compact"!==t&&"displayOptions"!==t)e=this._getUserAssistanceStrategyToArtifactsObj();else{let n=this._component.options,r=n.displayOptions?{...n.displayOptions}:{};"compact"===t?(r.messages="none"===r.messages?"none":"notewindow",r.validatorHint="none"===r.validatorHint?"none":"notewindow",r.converterHint="none"===r.converterHint?"none":"notewindow",e=this._getResolvedMessagingDisplayOptions(r)):e=this._getResolvedMessagingDisplayOptions(r)}return e};const S=function(e){this.Init(e)};s.Object.createSubclass(S,s.Object,"oj.MessagingStrategy"),s._registerLegacyNamespaceProp("MessagingStrategy",S),S.prototype.Init=function(e){s.Assert.assertArray(e),S.superclass.Init.call(this),this._displayOptions=e},S.prototype.activate=function(e){this._componentMessaging=e},S.prototype.deactivate=function(){},S.prototype.close=function(){},S.prototype.setupResources=function(){},S.prototype.releaseResources=function(){},S.prototype.reactivate=function(e){this.Init(e)},S.prototype.shouldUpdate=function(e){return!0},S.prototype.update=function(){},S.prototype.GetLauncher=function(){return this._componentMessaging._getLauncher()},S.prototype.GetContentElement=function(){return this._componentMessaging._getContentElement()},S.prototype.GetComponent=function(){return this._componentMessaging._getComponent()},S.prototype.setHasValidatorHints=function(e){this._hasValidatorHints=e},S.prototype.getHasValidatorHints=function(){return!0===this._hasValidatorHints},S.prototype.GenerateIdIfNeeded=function(e){isNaN(S._uidCounter)&&(S._uidCounter=0);var t=e;t.id||(t.id="ojms_"+S._uidCounter,S._uidCounter+=1)},S.prototype.GetMessages=function(){return this.GetValidityState().getMessages()},S.prototype.GetMaxSeverity=function(){return this.GetValidityState().getMaxSeverity()},S.prototype.GetConverterHint=function(){var e=[],t=this._getMessagingContent(),n=t&&t.converterHint;return n&&e.push(n),e},S.prototype.GetValidatorHints=function(){if(!this.getHasValidatorHints()){this.setHasValidatorHints(!0);let e=this.GetComponent();this._setMessagingContent(e._getValidatorHintsMC()),e._initAsyncValidatorMessagingHint()}var e=this._getMessagingContent();return e&&e.validatorHint||[]},S.prototype.GetTitle=function(){var e=this._getMessagingContent();return e&&e.title||""},S.prototype.GetValidityState=function(){var e=this._getMessagingContent();return e&&e.validityState||null},S.prototype.HasMessages=function(){var e=this.GetMessages();return!!(e&&e.length>0)},S.prototype.ShowMessages=function(){return-1!==this._displayOptions.indexOf("messages")},S.prototype.ShowConverterHint=function(){return-1!==this._displayOptions.indexOf("converterHint")},S.prototype.ShowValidatorHint=function(){return-1!==this._displayOptions.indexOf("validatorHint")},S.prototype.ShowTitle=function(){return-1!==this._displayOptions.indexOf("title")||-1!==this._displayOptions.indexOf("helpInstruction")},S.prototype.IsInvalid=function(){return this.GetValidityState().isInvalid()},S.prototype.AddAriaDescribedByForInlineMessaging=function(e){let t=this.GetContentElement();s.Assert.assertPrototype(t,a);let n=a(e).uniqueId()[0].getAttribute("id");t.each(function(){let e=this.getAttribute(b),t=e?e.split(/\s+/):[];-1===t.indexOf(n)&&t.push(n);let r=t.join(" ").trim();this.setAttribute(b,r)})},S.prototype.AddDescribedByToElement=function(e,t){const n="described-by",r=e.getAttribute(n);let i,o=r?r.split(/\s+/):[];-1===o.indexOf(t)&&o.push(t),i=o.join(" ").trim(),e.setAttribute(n,i)},S.prototype.RemoveDescribedByFromElement=function(e,t){const n="described-by",r=e.getAttribute(n);let i=(r?r.split(/\s+/):[]).filter(e=>e!==t).join(" ").trim();i?e.setAttribute(n,i):e.removeAttribute(n)},S.prototype.RemoveAriaDescribedByForInlineMessaging=function(e){let t=this.GetContentElement();s.Assert.assertPrototype(t,a);let n=e.getAttribute("id");t.each(function(){let e=this.getAttribute(b),t=e?e.split(/\s+/):[],r=t.indexOf(n);-1!==r&&t.splice(r,1);let i=t.join(" ").trim();i?this.setAttribute(b,i):this.removeAttribute(b)})},S.prototype._getMessagingContent=function(){return this._componentMessaging?this._componentMessaging._getMessagingContent():{}},S.prototype._setMessagingContent=function(e){return this._componentMessaging?this._componentMessaging._setMessagingContent(e):{}};const T=function(e){this.Init(e)};E.registerMessagingStrategy(E._STRATEGY_TYPE.NONE,T),T._SELECTOR_STATE_INVALID="oj-invalid",T._SELECTOR_STATE_WARNING="oj-warning",s.Object.createSubclass(T,S,"oj.DefaultMessagingStrategy"),s._registerLegacyNamespaceProp("DefaultMessagingStrategy",T),T.prototype.update=function(){T.superclass.update.call(this);var e=this.GetLauncher(),t=this.GetMaxSeverity(),n=[],r=[],i=!1,o=this.GetComponent().widget();e&&(this.IsInvalid()?(n.push(T._SELECTOR_STATE_WARNING),r.push(T._SELECTOR_STATE_INVALID),i=!0):this.HasMessages()&&t===l.SEVERITY_LEVEL.WARNING?(n.push(T._SELECTOR_STATE_INVALID),r.push(T._SELECTOR_STATE_WARNING)):(n.push(T._SELECTOR_STATE_INVALID),n.push(T._SELECTOR_STATE_WARNING)),o.removeClass(n.join(" ")).addClass(r.join(" ")),this.GetContentElement().attr({"aria-invalid":i}))},T.prototype.deactivate=function(){this.GetComponent().widget().removeClass(T._SELECTOR_STATE_INVALID).removeClass(T._SELECTOR_STATE_WARNING),this.GetContentElement().removeAttr("aria-invalid"),T.superclass.deactivate.call(this)};const C=function(e){this.Init(e)};E.registerMessagingStrategy(E._STRATEGY_TYPE.PLACEHOLDER,C),s.Object.createSubclass(C,S,"oj.PlaceholderMessagingStrategy"),s._registerLegacyNamespaceProp("PlaceholderMessagingStrategy",C),C.prototype.Init=function(e){C.superclass.Init.call(this,e)},C.prototype.activate=function(e){C.superclass.activate.call(this,e),this._refreshPlaceholder()},C.prototype.reactivate=function(e){C.superclass.reactivate.call(this,e),this._refreshPlaceholder()},C.prototype.shouldUpdate=function(e){return!(!e||void 0===e.converterHint)},C.prototype.update=function(){C.superclass.update.call(this),this._refreshPlaceholder()},C.prototype._refreshPlaceholder=function(){var e=this.GetLauncher();if(this.ShowPlaceholderContent()&&e){var t=this.GetConverterHint(),n=t.length?t[0]:"";if(s.StringUtils.isEmptyOrUndefined(n))return;this.GetComponent().option({placeholder:n},{_context:{internalMessagingSet:!0}})}},C.prototype.ShowPlaceholderContent=function(){return this.ShowConverterHint()};const P=function(e,t){this.Init(e,t)};P.isInvalid=function(e){return l.getMaxSeverity(e)>=l.SEVERITY_LEVEL.ERROR},s.Object.createSubclass(P,s.Object,"oj.ComponentValidity"),s._registerLegacyNamespaceProp("ComponentValidity",P),P.prototype.Init=function(e,t){P.superclass.Init.call(this),this._initialize(e,t)},P.prototype.isInvalid=function(){return this._invalid},P.prototype.getMessages=function(){return this._messages},P.prototype.getMaxSeverity=function(){return this._maxSeverity},P.prototype.update=function(e,t){this._initialize(e,t)},P.prototype._initialize=function(e,t){this._compValid=e,this._compMessages=t,this._messages=this._getImmediateMessages(),this._maxSeverity=l.getMaxSeverity(this._messages),this._invalid=P.isInvalid(this._messages)},P.prototype._getImmediateMessages=function(){for(var e=this._compMessages||[],t=[],n=0;n<e.length;n++){var r=e[n];r instanceof l.ComponentMessage&&!r.canDisplay()||t.push(r)}return t};const O={};u._registerLegacyNamespaceProp("Components",O),O._OJ_CONTAINER_ATTR="data-oj-container";const A="oj-component-names",I="oj-component-initnode",R="node is not a component element";function w(e,t){if(null==e)return null;var n=1===e.nodeType,r=u.Composite&&!t?u.Composite.getContainingComposite(e):null;if(r)return r;if(n&&e.hasAttribute("data-oj-internal"))return e.parentNode instanceof Element&&e.parentNode.hasAttribute("data-oj-surrogate-id")?w(e=document.querySelector("[data-oj-popup-"+e.id+"-parent]"),t):w(e.parentNode,t);if(k(e))return e;if(n&&e.classList.contains("oj-component")){if(M(e=e.querySelector(".oj-component-initnode:not([data-oj-internal])")||e))return e}else if(n&&e.hasAttribute("data-oj-containerid"))return w(e=document.getElementById(e.getAttribute("data-oj-containerid")),t);return w(e.parentNode,t)}function N(e){var t=e.data(A);if(null!=t)for(var n=0;n<t.length;n++){var r=e.data("oj-"+t[n]);if(null!=r)return r}return null}function j(e,t){var n=function(){const e=N(a(this));e&&t(e)},r=a(e);r.hasClass(I)&&n.call(e),r.find("."+I).each(n)}function x(e){this.getCallback=function(){return e}}function D(e,t,n){return Object.keys(t).forEach(function(r){var i=e[r]||[],o=t[r];n?i=i.concat(o):i.push(o),e[r]=i}),e}function L(e){return f.isElementRegistered(e.tagName)}function M(e){return!!O.__GetWidgetConstructor(e)}function k(e){return L(e)||M(e)}O.setDefaultOptions=function(e){var t=O._defaultProperties||{};Object.keys(e).forEach(function(n){var r=e[n];if(!u.CollectionUtils.isPlainObject(r))throw new Error("Invalid default options");t[n]=D(t[n]||{},r,!1)}),O._defaultProperties=t},O.getDefaultOptions=function(){return O._defaultProperties||{}},O.createDynamicPropertyGetter=function(e){return new x(e)},O.getWidgetConstructor=function(e,t){return e&&!f.isElementRegistered(e.tagName)?O.__GetWidgetConstructor(e,t):null},O.__GetWidgetConstructor=function(e,t){var n=a(e),r=n.data(A);if(r&&(null==t?t=r[0]:r.indexOf(t)<0&&(t=void 0),null!=t)){var i=n[t];if("function"==typeof i)return i.bind(n)}return null},O.subtreeAttached=function(e){d.fixResizeListeners(e),j(e,function(e){e.__handleSubtreeAttached()})},O.subtreeDetached=function(e){j(e,function(e){e.__handleSubtreeDetached()})},O.subtreeShown=function(e,t){const n=a(e)[0];if(n.nodeType!==Node.ELEMENT_NODE)return;const r=!!t?.initialRender;p.CustomElementUtils.subtreeShown(n,r)},O.subtreeHidden=function(e){const t=a(e)[0];t.nodeType===Node.ELEMENT_NODE&&p.CustomElementUtils.subtreeHidden(t)},O.markPendingSubtreeHidden=function(e){p.CustomElementUtils.markPendingSubtreeHidden(e)},O.unmarkPendingSubtreeHidden=function(e){p.CustomElementUtils.unmarkPendingSubtreeHidden(e)},O.isComponentInitialized=function(e,t){var n=e.data(A);return!!(a.isArray(n)&&n.indexOf(t)>-1&&e.is("."+I))},O.__getDefaultOptions=function(e){for(var t={},n=O.getDefaultOptions(),r=e.length-1;r>=0;r--){var i=n[e[r]];void 0!==i&&(t=D(t,i,!0))}return t},O.getComponentElementByNode=function(e){return w(e,!!(arguments.length>1&&arguments[1]))},O.getSubIdByNode=function(e,t){return O.callComponentMethod(e,"getSubIdByNode",t)},O.getNodeBySubId=function(e,t){return O.callComponentMethod(e,"getNodeBySubId",t)},O.getComponentOption=function(e,t){if(!k(e))throw new Error(R);return L(e)?e.getProperty?e.getProperty.call(e,t):void 0:O.__GetWidgetConstructor(e)("option",t)},O.setComponentOption=function(e,t,n){if(!k(e))throw new Error(R);L(e)?e.setProperty&&e.setProperty.call(e,t,n):O.__GetWidgetConstructor(e)("option",t,n)},O.callComponentMethod=function(e,t,n){if(!k(e))throw new Error(R);return L(e)?e[t]?e[t].apply(e,[].slice.call(arguments,2)):void 0:O.__GetWidgetConstructor(e).apply(a(e),[].slice.call(arguments,1))},p.CustomElementUtils.registerLegacySubtreeCallbacks((e,t)=>{const n=N(a(e));n&&(t?n._NotifyInitShown():n._NotifyShown())},(e,t)=>{t||d.fixResizeListeners(e)},e=>{const t=N(a(e));t&&t._NotifyHidden()});const F={};F.proto=Object.create(s.BaseCustomElementBridge.proto),s.CollectionUtils.copyInto(F.proto,{beforePropertyChangedEvent:function(e,t,n){var r=t,i=n.value;n.subproperty&&(r=n.subproperty.path,i=n.subproperty.value),this._partialRender(e,r,i)},AddComponentMethods:function(e){e.refresh=function(){p.CustomElementUtils.getElementBridge(this)._fullRender(this)},e.setProperty=function(e,t){var n=p.CustomElementUtils.getElementBridge(this);n.SaveEarlyPropertySet(this,e,t)||n.SetProperty(this,e,t,this,!0)},e.getProperty=function(e){return p.CustomElementUtils.getElementBridge(this).GetProperty(this,e,this)},e._propsProto.setProperty=function(e,t){this._BRIDGE.SetProperty(this._ELEMENT,e,t,this,!1)},e._propsProto.getProperty=function(e){return this._BRIDGE.GetProperty(this,e,this)}},CreateComponent:function(e){if(p.CustomElementUtils.unmarkPendingSubtreeHidden(e),!this._INSTANCE&&this._EXTENSION._CONSTRUCTOR){var t=p.ElementUtils.getUniqueId();if(this._CONTEXT={element:e,props:this._PROPS_PROXY,unique:t},this._CONTEXT.uniqueId=e.id?e.id:t,this._INSTANCE=new this._EXTENSION._CONSTRUCTOR(this._CONTEXT),this._INSTANCE.createDOM&&this._INSTANCE.createDOM(),this._INSTANCE.updateDOM){p.CustomElementUtils.allowSlotRelocation(!0);try{this._INSTANCE.updateDOM()}finally{p.CustomElementUtils.allowSlotRelocation(!1)}}}},DefineMethodCallback:function(e,t,n){e[t]=function(){var e=p.CustomElementUtils.getElementBridge(this);if(e._INSTANCE){var r=n.internalName||t;return e._INSTANCE[r].apply(e._INSTANCE,arguments)}}},DefinePropertyCallback:function(e,t,n){function r(e,r){if(!this._BRIDGE.SaveEarlyPropertySet(this._ELEMENT,t,e)){r&&(e=p.transformPreactValue(this._ELEMENT,t,n,e));var i=this._BRIDGE._PROPS[t];p.ElementUtils.comparePropertyValues(n.writeback,e,i)?_.info(p.CustomElementUtils.getElementInfo(this._ELEMENT)+": Ignoring property set for property '"+t+"' with same value."):(r&&(e=this._BRIDGE.ValidatePropertySet(this._ELEMENT,t,e)),n._eventListener?(this._BRIDGE.SetEventListenerProperty(this._ELEMENT,t,e),this._BRIDGE._PROPS[t]=e):(this._BRIDGE._PROPS[t]=e,s.BaseCustomElementBridge.__FirePropertyChangeEvent(this._ELEMENT,t,e,i,r?"external":"internal"),this._BRIDGE.State.dirtyProps.add(t)))}}function i(){var e=this._BRIDGE._PROPS[t];return void 0===e&&(e=this._BRIDGE._getDefaultValue(t,n),this._BRIDGE._PROPS[t]=e),e}n._derived||s.BaseCustomElementBridge.__DefineDynamicObjectProperty(e._propsProto,t,function(){return i.bind(this)()},function(e){r.bind(this)(e,!1)}),s.BaseCustomElementBridge.__DefineDynamicObjectProperty(e,t,function(){var e=p.CustomElementUtils.getElementBridge(this);return i.bind(e._PROPS_PROXY)()},function(e){var t=p.CustomElementUtils.getElementBridge(this);r.bind(t._PROPS_PROXY)(e,!0)}),p.addPrivatePropGetterSetters(e,t)},InitializeElement:function(e){s.BaseCustomElementBridge.proto.InitializeElement.call(this,e),this._EXTENSION._CONTROLS_SUBTREE_HIDDEN&&p.CustomElementUtils.markPendingSubtreeHidden(e),s.BaseCustomElementBridge.__InitProperties(e,e)},InitializePrototype:function(e){s.BaseCustomElementBridge.proto.InitializePrototype.call(this,e),Object.defineProperty(e,"_propsProto",{value:{}})},initializeBridge:function(e,t){s.BaseCustomElementBridge.proto.initializeBridge.call(this,e,t),this._EXTENSION=this.METADATA.extension||{},this._PROPS={},e._propsProto&&(this._PROPS_PROXY=Object.create(e._propsProto),this._PROPS_PROXY._BRIDGE=this,this._PROPS_PROXY._ELEMENT=e)},ShouldRemoveDisabled:function(){return!0===this._EXTENSION._SHOULD_REMOVE_DISABLED},_fullRender:function(e){if(this._INSTANCE&&this._INSTANCE.updateDOM){p.CustomElementUtils.allowSlotRelocation(!0);try{this._INSTANCE.updateDOM()}finally{p.CustomElementUtils.allowSlotRelocation(!1)}}},_partialRender:function(e,t,n){if(this._INSTANCE){var r=this._INSTANCE.handlePropertyChanged;if((!r||!r(t,n))&&this._INSTANCE.updateDOM){p.CustomElementUtils.allowSlotRelocation(!0);try{this._INSTANCE.updateDOM()}finally{p.CustomElementUtils.allowSlotRelocation(!1)}}}},_getDefaultValue:function(e,t){return this._EXTENSION._CONSTRUCTOR?m.DefaultsUtils.getDefaults(this._EXTENSION._CONSTRUCTOR,this.METADATA,!1)[e]:c.getDefaultValue(t)}}),s._registerLegacyNamespaceProp("DefinitionElementBridge",F);class B extends p.ElementState{IsTransferAttribute(e){const t=p.CustomElementUtils.getElementBridge(this.Element),n=t._EXTENSION._GLOBAL_TRANSFER_ATTRS;return t._WIDGET_ELEM&&n&&n.includes(e)}GetDescriptiveTransferAttributeValue(e){return p.CustomElementUtils.getElementBridge(this.Element)._WIDGET_ELEM.getAttribute(e)}}const U={};U.proto=Object.create(s.BaseCustomElementBridge.proto),s._registerLegacyNamespaceProp("CustomElementBridge",U);const V=function(e,t){return function(n){e.dispatchEvent(new FocusEvent(t,{relatedTarget:n.relatedTarget}))}};s.CollectionUtils.copyInto(U.proto,{getThrottlePromise:function(){var e=this.State.getBindingProviderPromise();return e=e.then(function(e){return e?e.__GetThrottlePromise():null})},AddComponentMethods:function(e){e.setProperty=function(e,t){var n=p.CustomElementUtils.getElementBridge(this);if(!n.SaveEarlyPropertySet(this,e,t)&&!n._setEventProperty(this,e,t)&&!n._validateAndSetCopyProperty(this,e,t,null)){var r=c.getPropertyMetadata(e,f.getElementProperties(this));r?(n._setOption(e,t,r,this),n.State.dirtyProps.add(e.split(".")[0])):this[e]=t}},e.getProperty=function(e){var t=p.CustomElementUtils.getElementBridge(this),n=c.getPropertyMetadata(e,f.getElementProperties(this));if(t._deliverPropertyUpdates(this),p.AttributeUtils.isEventListenerProperty(e)||!n)return this[e];var r=n?n.extension:null;return r&&r._COPY_TO_INNER_ELEM?t._getCopyProperty(this,e,n):U._getPropertyAccessor(this,e)()},e.focus=function(){var e=p.CustomElementUtils.getElementBridge(this);if(e._WIDGET_INSTANCE){var t=e._WIDGET_INSTANCE.__getFocusElement();t&&(t!==this?t.focus():HTMLElement.prototype.focus.call(this))}else HTMLElement.prototype.focus.call(this)},e.blur=function(){var e=p.CustomElementUtils.getElementBridge(this);if(e._WIDGET_INSTANCE){var t=e._WIDGET_INSTANCE.__getFocusElement();t&&(t!==this?t.blur():HTMLElement.prototype.blur.call(this))}else HTMLElement.prototype.blur.call(this)}},BatchedPropertySet:function(e,t){var n,r=Object.keys(t),i={};for(n=0;n<r.length;n++){var o=r[n],s=t[o];this._setEventProperty(e,o,s)||this._validateAndSetCopyProperty(e,o,s,null)||(s=this.ValidatePropertySet(e,o,s),i[o=this.GetAliasForProperty(o)]=s)}var a=O.__GetWidgetConstructor(this._WIDGET_ELEM);if(a)this._WIDGET_INSTANCE&&(i=this._WIDGET_INSTANCE._MergeOptionsWithDefaults(i)),a("option",i);else for(n=0;n<r.length;n++){var l=r[n];e.setProperty(l,t[l])}},CreateComponent:function(e){var t=this._INNER_DOM_FUNCTION;if(this._WIDGET_ELEM=U._getWidgetElement(e,t?t(e):this._EXTENSION._INNER_ELEM),this._WIDGET_ELEM!==e){for(var n=this._EXTENSION._GLOBAL_TRANSFER_ATTRS||[],r=0;r<n.length;r++){var i=n[r];e.hasAttribute(i)&&(this._WIDGET_ELEM.setAttribute(i,e.getAttribute(i)),this._removingTransfer=!0,e.removeAttribute(i))}this._copyProperties()}p.CustomElementUtils.unmarkPendingSubtreeHidden(e);var o=a(this._WIDGET_ELEM),s=a(this._WIDGET_ELEM)[this._EXTENSION._WIDGET_NAME].bind(o);s(this._PROPS),this._WIDGET=s,this._WIDGET_INSTANCE=s("instance"),this._WRITEBACK_PROPS&&this._WIDGET_INSTANCE.__saveWritebackOptions(this._WRITEBACK_PROPS),this._setupFocusPropagation(e)},DefineMethodCallback:function(e,t,n){e[t]=function(){var e=p.CustomElementUtils.getElementBridge(this),r=n.internalName||t;e._deliverPropertyUpdates(this),p.CustomElementUtils.allowSlotRelocation(!0);try{return e._WIDGET.apply(null,[r].concat([].slice.call(arguments)))}finally{p.CustomElementUtils.allowSlotRelocation(!1)}}},DefinePropertyCallback:function(e,t,n){var r=n.extension;Object.defineProperty(e,t,{enumerable:!0,get:function(){var e=p.CustomElementUtils.getElementBridge(this);return e._deliverPropertyUpdates(this),n._eventListener?e.GetEventListenerProperty(t):r&&r._COPY_TO_INNER_ELEM?e._getCopyProperty(this,t,n):U._getPropertyAccessor(this,t)()},set:function(e){const r=p.CustomElementUtils.getElementBridge(this);if(!r.SaveEarlyPropertySet(this,t,e)){e=p.transformPreactValue(this,t,n,e);"preact"===p.CustomElementUtils.getElementState(this).getBindingProviderType()?this._isUpdateQueued?this._propertyUpdates[t]=e:(this._isUpdateQueued=!0,this._propertyUpdates={},this._propertyUpdates[t]=e,window.queueMicrotask(()=>{r._deliverPropertyUpdates(this)})):n._eventListener?r.SetEventListenerProperty(this,t,e):r._validateAndSetCopyProperty(this,t,e,n)||(r._setOption(t,e,n,this),r.State.dirtyProps.add(t))}}}),p.addPrivatePropGetterSetters(e,t)},GetAttributes:function(e){var t=c.getFlattenedAttributes(e.properties);return e.extension._GLOBAL_TRANSFER_ATTRS&&(t=t.concat(e.extension._GLOBAL_TRANSFER_ATTRS)),e.extension._WATCHED_ATTRS&&(t=t.concat(e.extension._WATCHED_ATTRS)),t},GetAliasForProperty:function(e){var t=this._EXTENSION._ALIASED_PROPS;return t&&t[e]?t[e]:e},InitializeElement:function(e){s.BaseCustomElementBridge.proto.InitializeElement.call(this,e),this._EXTENSION._CONTROLS_SUBTREE_HIDDEN&&p.CustomElementUtils.markPendingSubtreeHidden(e),s.BaseCustomElementBridge.__InitProperties(e,this._PROPS)},HandleAttributeChanged:function(e,t,n,r){var i=this._EXTENSION._GLOBAL_TRANSFER_ATTRS,o=i&&-1!==i.indexOf(t),s=this._EXTENSION._WATCHED_ATTRS,a=s&&-1!==s.indexOf(t);o&&this._WIDGET_ELEM?this._removingTransfer?this._removingTransfer&&(this._removingTransfer=!1):(this._WIDGET_ELEM.setAttribute(t,r),this._removingTransfer=!0,e.removeAttribute(t)):a&&n!==r&&this._WIDGET_INSTANCE&&this._WIDGET_INSTANCE.__handleWatchedAttribute(t,n,r)},HandleDetached:function(e){s.BaseCustomElementBridge.proto.HandleDetached.call(this,e),O.__GetWidgetConstructor(this._WIDGET_ELEM)&&this._WIDGET_INSTANCE&&this._WIDGET_INSTANCE.__handleDisconnected(),this._teardownFocusPropagation(e)},HandleReattached:function(e){s.BaseCustomElementBridge.proto.HandleReattached.call(this,e),this._setupFocusPropagation(e),this._WIDGET_INSTANCE&&this._WIDGET_INSTANCE.__handleConnected()},initializeBridge:function(e,t){s.BaseCustomElementBridge.proto.initializeBridge.call(this,e,t),this._INNER_DOM_FUNCTION=t.innerDomFunction,this._EXTENSION=this.METADATA.extension||{},this._PROPS=this._EXTENSION._INNER_ELEM||this._INNER_DOM_FUNCTION?{_wrapper:e}:{},this._setupPropertyAccumulator(e,this._PROPS),this._processProperties(e)},_setOption:function(e,t,n,r){let i={};if(void 0===t&&-1===e.indexOf(".")&&(i={_context:{skipEvent:!0}},t=c.getDefaultValue(n),this.State.isComplete())){const t=r[e];s.BaseCustomElementBridge.__FirePropertyChangeEvent(r,e,void 0,t,"external")}U._getPropertyAccessor(r,e,i)(t)},_copyProperties:function(){if(this._COPY_ATTRS)for(var e=0;e<this._COPY_ATTRS.length;e++){var t=this._COPY_ATTRS[e],n=p.AttributeUtils.attributeToPropertyName(t);if(Object.prototype.hasOwnProperty.call(this._PROPS,n)){var r=this._PROPS[n];this._setCopyProperty(t,r),delete this._PROPS[n]}}},_deliverPropertyUpdates:function(e){if(e._isUpdateQueued){e._isUpdateQueued=!1;try{this.SetProperties(e,e._propertyUpdates,!0)}finally{e._propertyUpdates=void 0}}},_getCopyProperty:function(e,t,n){var r=p.AttributeUtils.propertyNameToAttribute(t);if(n.extension._ATTRIBUTE_ONLY){if(this._WIDGET_ELEM.hasAttribute(r)){var i=this._WIDGET_ELEM.getAttribute(r);return p.AttributeUtils.attributeToPropertyValue(e,r,i,n)}return null}return this._WIDGET_ELEM[t]},_processProperties:function(e){var t=f.getElementProperties(e);if(t)for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r],o=t[i];o.writeback&&(this._WRITEBACK_PROPS||(this._WRITEBACK_PROPS={}),this._WRITEBACK_PROPS[i]=!0);var s=o.extension;s&&s._COPY_TO_INNER_ELEM&&(this._COPY_ATTRS||(this._COPY_ATTRS=[]),this._COPY_ATTRS.push(i))}},_setCopyProperty:function(e,t){null==t||!1===t?this._WIDGET_ELEM.removeAttribute(e):!0===t?this._WIDGET_ELEM.setAttribute(e,""):this._WIDGET_ELEM.setAttribute(e,t)},_setupPropertyAccumulator:function(e,t){this._WIDGET=function(n,r,i){if("option"===n)return s.BaseCustomElementBridge.__SetProperty(this.GetAliasForProperty.bind(this),t,r,i),t[r];throw new p.JetElementError(e,"Cannot access methods before element is upgraded.")}},_validateAndSetCopyProperty:function(e,t,n,r){var i=p.AttributeUtils.propertyNameToAttribute(t),o=this._COPY_ATTRS&&-1!==this._COPY_ATTRS.indexOf(i);if(o)if(n=this.ValidatePropertySet(e,t,n),this._WIDGET_ELEM){r||(r=c.getPropertyMetadata(t,f.getElementProperties(e)));var a=this._getCopyProperty(e,t,r);this._setCopyProperty(i,n),s.BaseCustomElementBridge.__FirePropertyChangeEvent(e,t,this._getCopyProperty(e,t,r),a,"external")}else this._PROPS[i]=n;return o},_setEventProperty:function(e,t,n){var r=p.AttributeUtils.isEventListenerProperty(t);return r&&(e[t]=n),r},_setupFocusPropagation:function(e){const t=this._WIDGET_INSTANCE.__getFocusElement();if(t&&t!==e){const n=V(e,"focus"),r=V(e,"blur");t.addEventListener("focus",n),t.addEventListener("blur",r),this._teardownFocus=function(e,t,n){return function(){e.removeEventListener("focus",t),e.removeEventListener("blur",n)}}(t,n,r)}},_teardownFocusPropagation:function(){this._teardownFocus&&(this._teardownFocus(),this._teardownFocus=null)}}),U.getMetadata=function(e){return U._METADATA_MAP[e.toLowerCase()]},U.isKnownEvent=function(e,t){var n=p.CustomElementUtils.getElementBridge(e);return null!=(n.METADATA.events&&n.METADATA.events[t])},U.isKnownProperty=function(e,t){var n=p.CustomElementUtils.getElementBridge(e);return null!=(n.METADATA.properties&&n.METADATA.properties[t])},U.getPropertyForAlias=function(e,t){var n=p.CustomElementUtils.getElementBridge(e)._EXTENSION._COMPONENT_TO_ELEMENT_ALIASES;return n&&n[t]?n[t]:t},U.register=function(e,t){var n=t[s.BaseCustomElementBridge.DESC_KEY_META];n=s.BaseCustomElementBridge.__ProcessEventListeners(n),t[s.BaseCustomElementBridge.DESC_KEY_META]=n,U._METADATA_MAP[e.toLowerCase()]=n;var r=n.extension,i=r&&r._WIDGET_NAME?U.proto:F.proto;const o=r&&r._WIDGET_NAME?B:p.ElementState;var a=r._ALIASED_PROPS;a&&(r._COMPONENT_TO_ELEMENT_ALIASES={},Object.keys(a).forEach(function(e){r._COMPONENT_TO_ELEMENT_ALIASES[a[e]]=e}));const l={descriptor:t,bridgeProto:i,stateClass:o};f.registerElement(e,l,i.getClass(t))},U._getPropertyAccessor=function(e,t,n){return function(r){var i=p.CustomElementUtils.getElementBridge(e);return 1===arguments.length?(r=i.ValidatePropertySet(e,t,r),t=i.GetAliasForProperty(t),void i._WIDGET("option",t,r,n)):(t=i.GetAliasForProperty(t),i._WIDGET("option",t))}.bind(e)},U._getWidgetElement=function(e,t){var n=e;if(t){var r=e.firstElementChild;if(r&&r.tagName.toLowerCase()===t)n=r;else{n=document.createElement(t);for(var i=[],o=e.childNodes,s=0;s<o.length;s++)i.push(o[s]);for(e.appendChild(n);i.length;){var a=i.shift();p.CustomElementUtils.getSlotAssignment(a)||n.appendChild(a)}}n.setAttribute("data-oj-internal","")}return n},U._METADATA_MAP={};class H{static isDataProvider(e){return!(!e||!e.fetchFirst)}static isTreeDataProvider(e){return!(!e||!e.getChildDataProvider)}}u._registerLegacyNamespaceProp("DataProviderFeatureChecker",H);var G="translations",K=G+".";const z="oj-disabled",W="start bottom";var Y,$,q,X={isDefaultPrevented:function(){return!1},preventDefault:function(){this.isDefaultPrevented=te},stopPropagation:function(){this.isPropagationStopped=te},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=te}};function J(e,t,n,r,i,o,s){var a=n,l=!1,c={};delete r[i],Object.defineProperty(r,i,{get:function(){if(l)return a;if(null!=e._settingNestedKey)return a;var n=o(s?s():i);return Z([t,n,a],c)},set:function(t){a=t,null!=e._settingNestedKey?c[e._settingNestedKey]=!0:l=!0},enumerable:!0})}function Q(e){if(1===e.length){var t=e[0];return t instanceof x?t.getCallback():null}for(var n=!1,r=0;r<e.length&&!n;r++){var i=e[r];null!=i&&i instanceof x&&(n=!0)}return n?function(t){var n=[];return e.forEach(function(e){null!=e&&e instanceof x?n.push(e.getCallback()(t)):n.push(e)}),Z(n)}:null}function Z(e,t,n){for(var r,i=0;i<e.length;i++){var o=e[i];if(void 0!==o)if(a.isPlainObject(o)){const s=a.isPlainObject(r);if(!s&&n)r=o;else r=ee({},s?[r,o]:[o],i===e.length-1?null:t,null,n)}else r=o}return r}function ee(e,t,n,r,i){for(var o=t.length,s=0;s<o;s++)for(var l=t[s],c=Object.keys(l),u=0;u<c.length;u++){var d,h=c[u];if(d=null==n?null:null==r?h:r+"."+h,null==n||!n[d]){var p=l[h];if(void 0!==p)if(a.isPlainObject(p)){const t=a.isPlainObject(e[h]);if(!t&&i)e[h]=p;else{var f=t?[e[h],p]:[p];e[h]=ee({},f,n,d,i)}}else e[h]=p}}return e}function te(){return!0}function ne(e){return e.getAttribute&&e.getAttribute("class")||""}$="baseComponent",a.widget("oj."+$,{options:{contextMenu:null,rootAttributes:null,optionChange:void 0,destroy:void 0},refresh:function(){this._propertyContext=null,this._SetupContextMenu()},_createWidget:function(e,t){e&&(this.OuterWrapper=e._wrapper),this._originalDefaults=this.options||{},this._constructorOptions=e||{},this._super(e,t),this._AfterCreateEvent()},_SetRootAttributes:function(){var e=this.options.rootAttributes;if(e){var t=this.widget();if(null==t)return;var n=e.class;n&&t.addClass(n),e.style&&_.error("The rootAttributes.style option violates the recommended\n          Content Security Policy which disallows inline styles and is therefore ignored.\n          Use the rootAttributes.class option instead."),delete(e=a.extend({},e)).class,delete e.style,t.attr(e),delete e.id;var r=Object.keys(e);if(r.length)throw new Error("Unsupported values passed to rootAttributes option: "+r.toString())}},_create:function(){this._SaveAttributes(this.element),this._InitOptions(this._originalDefaults,this._constructorOptions),delete this._constructorOptions,this._ComponentCreate(),this._AfterCreate(),this._SetupResources(),this.element.addClass(I)},_InitOptions:function(e,t){this._setupDefaultOptions(e,t),this._initContextMenuOption(t)},_ComponentCreate:function(){var e,t,n;e=this.element,t=this.widgetName,(n=e.data(A))||(n=[],e.data(A,n)),n.indexOf(t)<0&&n.push(t),this.activeableEventNamespace=this.eventNamespace+"activeable",this.hoverableEventNamespace=this.eventNamespace+"hoverable"},_AfterCreate:function(){this._SetRootAttributes(),this.contextMenuEventNamespace=this.eventNamespace+"contextMenu",this.activeableEventNamespace=this.eventNamespace+"activeable",this.hoverableEventNamespace=this.eventNamespace+"hoverable"},_AfterCreateEvent:a.noop,_setOptionClasses:function(){},_setOptionDisabled:function(){},_classes:function(){return""},_removeClass:function(){return this},_addClass:function(){return this},_toggleClass:function(){return this},_SaveAttributes:function(e){},_SaveAllAttributes:function(e){var t=this;this._savedAttributes=[],a.each(e,function(e,n){var r={},i={element:n,attributes:r},o=n.attributes;t._savedAttributes.push(i),a.each(o,function(e,t){var n=t.name;r[n]={attr:t.value}})})},_GetSavedAttributes:function(e){var t=this._savedAttributes;if(void 0===t)return null;for(var n=e[0],r=0,i=t.length;r<i;r++){var o=t[r];if(o.element===n)return o.attributes}return{}},_RestoreAttributes:function(){},_RestoreAllAttributes:function(){a.each(this._savedAttributes,function(e,t){var n=a(t.element),r=t.attributes;if(1===n.length){var i,o,s=t.element.attributes,l=[];for(i=0,o=s.length;i<o;i++)s[i].name in r||l.push(s[i].name);for(i=0,o=l.length;i<o;i++)"style"===l[i]?n[0].style=null:n.removeAttr(l[i]);var c=Object.keys(r);for(i=0;i<c.length;i++){var u=c[i];"style"===u&&""===r[u].attr?n[0].style=null:n.attr(u,r[u].attr)}}})},_GetTranslationsSectionName:function(){return this.widgetFullName},_CompareOptionValues:function(e,t,n){return this._IsCustomElement()&&this._getWritebackOption(e)?s.Object.compareValues(t,n):t===n},getTranslatedString:function(e,t){var n={};arguments.length>2?n=Array.prototype.slice.call(arguments,1):2===arguments.length&&("object"==typeof(n=arguments[1])||n instanceof Array||(n=[n]));var r=this.option(K+e);return null==r?e:g.applyParameters(r.toString(),n)},getNodeBySubId:function(e){return null!=e&&null!=e.subId||!this.element?null:this.element[0]},getSubIdByNode:function(e){return null},destroy:function(){if(this._IsCustomElement())throw new Error("destroy cannot be called on a custom element");this._trigger("destroy"),d.dispatchEvent(this.element[0],new CustomEvent("_ojDestroy")),this._ReleaseResources(),this._super(),this.element.removeClass(I),this.widget().removeClass(z),this._removeStateClasses(this.element),function(e,t){var n=e.data(A);if(n){var r=n.indexOf(t);r>=0&&(n.splice(r,1),0===n.length&&e.removeData(A))}}(this.element,this.widgetName),this._RestoreAttributes(),this._initialCmDomAttr?this.element.attr("contextmenu",this._initialCmDomAttr):this.element.removeAttr("contextmenu"),this._propertyContext=null},option:function(e,t){if(0===arguments.length)return a.widget.extend({},this.options);var n,r=arguments[0],i=r,o=null,s={};if("string"==typeof r){i={};var l=r.split(".");if(r=l.shift(),l.length){var c;o=l.join(".");try{arguments.length>1&&(this._settingNestedKey=o),c=a.widget.extend({},this.options[r]),i[r]=c}finally{this._settingNestedKey=null}for(n=0;n<l.length-1;n++)c[l[n]]=c[l[n]]||{},c=c[l[n]];if(r=l.pop(),1===arguments.length)return void 0===c[r]?null:c[r];c[r]=t}else{if(1===arguments.length)return void 0===this.options[r]?null:this.options[r];i[r]=t}s=arguments[2]||s}else s=arguments[1]||s;if(null!=o){var u={path:e,value:t};s=a.widget.extend({},s,{subkey:o,subproperty:u})}var d=s?s._context:null,h=!!d&&d.internalSet,f={},m=Object.keys(i);for(n=0;n<m.length;n++){var g=m[n],v=i[g],y=this.options[g];s&&s.changed||!this._CompareOptionValues(g,y,v)?f[g]=v:this._IsCustomElement()&&_.info(p.CustomElementUtils.getElementInfo(this.element[0])+": Ignoring property set for property '"+g+"' with same value.")}if(Object.keys(f).length>0){p.CustomElementUtils.allowSlotRelocation(!0);try{h?this._internalSetOptions(f,s):this._setOptions(f,s)}finally{p.CustomElementUtils.allowSlotRelocation(!1)}}return this},_internalSetOptions:function(e,t){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r],o=e[i],s=this.options[i];this.options[i]=o,this._optionChanged(i,o,s,t)}},_setOptions:function(e,t){p.CustomElementUtils.allowSlotRelocation(!0);try{for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r],o=e[i];this._setOption(i,o,t)}}finally{p.CustomElementUtils.allowSlotRelocation(!1)}return this},_setOption:function(e,t,n){var r=this.options[e];if("disabled"===e)this.options[e]=t,this.widget().toggleClass(z,!!t).attr("aria-disabled",t),t&&this._removeStateClasses(this.widget());else{try{var i=null==n?null:n.subkey;null!=i&&(this._settingNestedKey=i),this._super(e,t)}finally{this._settingNestedKey=null}"contextMenu"===e&&this._SetupContextMenu()}return this._optionChanged(e,t,r,n),this},_optionChanged:function(e,t,n,r){var i,o=null,s=!1,l=!1,c=null,u="external",d=null;if(r&&(o=r._context)){if(o.skipEvent)return;c=o.originalEvent,s=void 0===o.writeback?null!=c:o.writeback,l=o.readOnly,d=o.optionMetadata,i=o.extraData,o.internalSet&&(u="internal")}(d=d||{}).writeback=s?"shouldWrite":"shouldNotWrite",l&&(d.readOnly=!0);var h={option:e,previousValue:n,value:t,optionMetadata:d,updatedFrom:u},p=null==r?null:r.subkey;if(p){var f=p.split("."),_=n;f.forEach(function(e){_&&(_=_[e])});var m=r.subproperty;m.previousValue=_,h.subproperty=m}null!=i&&(h=a.extend({},i,h)),this._trigger("optionChange",c,h)},_SetupResources:function(){this._SetupContextMenu()},_ReleaseResources:function(){this._ReleaseContextMenu()},_trigger:function(e,t,n){return this._trigger2(e,t,n).proceed},_trigger2:function(e,t,n){var r=n||{};if(this._IsCustomElement())return this._triggerCustomEvent(e,t,r);var i=this.options[e],o=a.Event(t,X);return o.type=(this.widgetEventPrefix+e).toLowerCase(),o.target=this.element[0],this.element.trigger(o,r),{proceed:!(a.isFunction(i)&&!1===i.apply(this.element[0],[o].concat(r))||o.isDefaultPrevented()),event:o}},_triggerCustomEvent:function(e,t,n){var r,i,o,s={},l=this._getRootElement();if("optionChange"===e){var c=U.getPropertyForAlias(l,n.option);if(!U.isKnownProperty(l,c))return{proceed:!0,event:null};r=p.AttributeUtils.propertyNameToChangeEventType(c);for(var u=Object.keys(n),d=0;d<u.length;d++){var h=u[d];if("option"!==h)if("optionMetadata"===h)for(var f=Object.keys(n[h]),_=0;_<f.length;_++){var m=f[_];"writeback"!==m&&"component"!==m&&(s[m]=n[h][m])}else s[h]=n[h]}}else{if(r=p.AttributeUtils.eventTriggerToEventType(e),!U.isKnownEvent(l,r))return{proceed:!0,event:null};i=!0,o=!0,s=this._resolveJQueryObjects(n)}t&&(s.originalEvent=t instanceof a.Event?t.originalEvent:t);var g={detail:s};i&&(g.bubbles=!0),o&&(g.cancelable=!0);var v=new CustomEvent(r,g);return l.dispatchEvent(v),{proceed:!v.defaultPrevented,event:v}},_resolveJQueryObjects:function(e){for(var t=s.CollectionUtils.copyInto({},e),n=Object.keys(t),r=0;r<n.length;r++){var i=n[r],o=t[i];o&&o instanceof a&&(0===o.length?t[i]=null:1===o.length?t[i]=o[0]:t=o.toArray())}return t},_initContextMenuOption:function(e){var t=this.element.attr("contextmenu");this._initialCmDomAttr=t,t&&!("contextMenu"in e)&&this.option("contextMenu",document.getElementById(t),{_context:{internalSet:!0}})},_handleContextMenuGesture:function(e,t,n){if(!this._IsEffectivelyDisabled()){var r;if("OJ-MENU"===e.tagName)r=e;else{var i=O.__GetWidgetConstructor(e,"ojMenu");if(!(r=i&&i("instance")))throw new Error("Invalid JET Menu.")}this._NotifyContextMenuGesture(r,t,n),a(e).is(":visible")&&t.preventDefault()}},_SetupContextMenu:function(e){var t=this._GetContextMenu();if(t||(t=this._GetDefaultContextMenu()),t&&void 0===this._contextMenuGestureInit){this._contextMenuGestureInit=t;var n=this;y.startDetectContextMenuGesture(this.widget()[0],function(e,r){n._handleContextMenuGesture(t,e,r)},e)}},_ReleaseContextMenu:function(){this._contextMenuGestureInit=void 0,y.stopDetectContextMenuGesture(this.widget()[0])},_GetContextMenu:function(){if(this._IsCustomElement()){var e=p.CustomElementUtils.getSlotMap(this._getRootElement()).contextMenu;if(e&&e.length>0)return e[0]}else if(this.options.contextMenu)return a(this.options.contextMenu).first()[0];return null},_NotifyContextMenuGesture:function(e,t,n){this._OpenContextMenu(t,n)},_OpenContextMenu:function(e,t,n,r,i){var o=this._GetContextMenu();if(o||(o=this._contextMenuGestureInit&&a(this._contextMenuGestureInit).is(":visible")?this._contextMenuGestureInit:this._GetDefaultContextMenu()),o){var s={mouse:{my:"start top",at:W,of:e,collision:"flipfit"},touch:{my:"start>40 center",at:W,of:e,collision:"flipfit"},keyboard:{my:"start top",at:W,of:"launcher",collision:"flipfit"}},l={launcher:this.element,position:s[t]},c={initialFocus:"menu"},u=i?a.extend(l,n,c):a.extend(!0,l,n,c);if(o.__openingContextMenu=!0,"OJ-MENU"===o.tagName)o.open(e,u,r);else{var d=O.__GetWidgetConstructor(o,"ojMenu");(d&&d("instance")).open(e,u,r);var h=function(e){e.preventDefault()};o.addEventListener("contextmenu",h),window.setTimeout(function(){o.removeEventListener("contextmenu",h)},50)}o.__openingContextMenu=!1}},_GetDefaultContextMenu:function(){return null},_removeStateClasses:function(e){e.removeClass("oj-hover oj-focus oj-focus-highlight oj-active"),e.find(".oj-hover").removeClass("oj-hover"),e.find(".oj-focus").removeClass("oj-focus"),e.find(".oj-focus-highlight").removeClass("oj-focus-highlight"),e.find(".oj-active").removeClass("oj-active")},_isRealMouseEvent:function(){return!d.recentTouchEnd()},_AddHoverable:function(e){var t;a.isPlainObject(e)?t=e.element:(t=e,e={});var n=e.afterToggle||a.noop;t.on("mouseenter"+this.hoverableEventNamespace,this._hoverStartHandler.bind(this,n)).on("mouseleave"+this.hoverableEventNamespace,this._hoverAndActiveEndHandler.bind(this,"oj-hover",n))},_RemoveHoverable:function(e){e&&e.off(this.hoverableEventNamespace)},_AddActiveable:function(e){var t;a.isPlainObject(e)?t=e.element:(t=e,e={});var n=e.afterToggle||a.noop,r="oj-active";d.isTouchSupported()&&(t[0]&&(this._touchstartListener=this._activeStartHandler.bind(this,n),t[0].addEventListener("touchstart",this._touchstartListener,{passive:!0})),t.on("touchend"+this.activeableEventNamespace+" touchcancel"+this.activeableEventNamespace,this._hoverAndActiveEndHandler.bind(this,r,n))),t.on("mousedown"+this.activeableEventNamespace,this._activeStartHandler.bind(this,n)).on("mouseup"+this.activeableEventNamespace,this._hoverAndActiveEndHandler.bind(this,r,n)).on("mouseenter"+this.activeableEventNamespace,this._activeStartHandler.bind(this,n)).on("mouseleave"+this.activeableEventNamespace,this._hoverAndActiveEndHandler.bind(this,r,n))},_RemoveActiveable:function(e){e&&(e[0]&&(e[0].removeEventListener("touchstart",this._touchstartListener,{passive:!0}),delete this._touchstartListener),e.off(this.activeableEventNamespace),Y=null)},_activeStartHandler:function(e,t){var n=a(t.currentTarget);("mouseenter"!==t.type||this._isTargetInActiveElement(t.currentTarget))&&(n.hasClass(z)||"touchstart"!==t.type&&!this._isRealMouseEvent(t)||(n.addClass("oj-active"),e(t.type),"mousedown"===t.type&&(Y=t.currentTarget,this.document.one("mouseup",function(){Y=null}))))},_hoverStartHandler:function(e,t){var n=a(t.currentTarget);!n.hasClass(z)&&this._isRealMouseEvent(t)&&(n.addClass("oj-hover"),e(t.type))},_hoverAndActiveEndHandler:function(e,t,n){("oj-active"!==e||"mouseleave"!==n.type||this._isTargetInActiveElement(n.currentTarget))&&(a(n.currentTarget).removeClass(e),t(n.type))},_isTargetInActiveElement:function(e){return Y===e||null!=Y&&a.contains(Y,e)},_hoverable:function(){},_focusable:function(e){a.isPlainObject(e)||(e={element:e}),e.component=this,d.makeFocusable(e)},_UnregisterChildNode:function(e){if(e){a(e).off(this.eventNamespace);var t=this.bindings;t&&(this.bindings=a(t.not(e)))}},_GetReadingDirection:function(){return d.getReadingDirection()},_NotifyAttached:function(){this._propertyContext=null},_NotifyDetached:function(){this._propertyContext=null,this._removeStateClasses(this.widget())},_NotifyInitShown:function(){},_NotifyShown:function(){},_NotifyHidden:function(){},_IsEffectivelyDisabled:function(){return!(!this.options.disabled&&!this._ancestorDisabled)},__setAncestorComponentDisabled:function(e){this._ancestorDisabled=e},_getTranslationSectionLoader:function(){var e=[],t=this,n=0;this._traverseWidgetHierarchy(function(r){var i=0===n?t._GetTranslationsSectionName():r.widgetFullName;n+=1;var o=g.getComponentTranslations(i);null==o||a.isEmptyObject(o)||e.push(i)});var r=e.length;return r>0?function(){if(1===r)return g.getComponentTranslations(e[0]);for(var t={},n=r-1;n>=0;n--)a.widget.extend(t,g.getComponentTranslations(e[n]));return t}:null},_getDynamicPropertyContext:function(){if(!this._propertyContext){var e={};this._propertyContext=e;var t=this.element[0];e.containers=function(e){for(var t=e,n=[];t;){var r=t.getAttribute,i=r?r.call(t,O._OJ_CONTAINER_ATTR):null;null!=i&&n.push(i),t=t.parentNode}return n}(t),e.element=t,e.isCustomElement=this._IsCustomElement(),e.isCustomElement&&(e.customElement=this._getRootElement())}return this._propertyContext},_setupDefaultOptions:function(e,t){var n=this.options,r=this._getTranslationSectionLoader(),i=t[G];null==r||void 0!==i&&!a.isPlainObject(i)||J(this,void 0,t[G],n,G,r),this._loadGlobalDefaultOptions(e,t)},_loadGlobalDefaultOptions:function(e,t){var n=this.options,r=[];this._traverseWidgetHierarchy(function(e){r.push(e.widgetName)}),r.push("default");var i=O.__getDefaultOptions(r);if(this._globalDefaults=i,!a.isEmptyObject(i))for(var o=this,s=function(){return o._getDynamicPropertyContext()},l=Object.keys(i),c=0;c<l.length;c++){var u=l[c],d=t[u];if(void 0===d||a.isPlainObject(d)){var h=i[u];if(h){var p=Q(h);if(p)J(this,e[u],d,n,u,p,s);else{var f=[e[u]].concat(h);f.push(d),n[u]=Z(f)}}}}},_MergeOptionsWithDefaults:function(e){let t;return Object.keys(e).reduce((n,r)=>{const i=e[r],o=this._originalDefaults[r];let s=this._globalDefaults[r]?.map(e=>null!=e&&e instanceof x?(t||(t=this._getDynamicPropertyContext()),e.getCallback()(t)):e);return n[r]=Z([o,...s||[],i],null,!0),n},{})},_traverseWidgetHierarchy:function(e){for(var t=this.constructor.prototype;null!=t&&"oj"===t.namespace;)e(t),t=Object.getPrototypeOf(t)},_getRootElement:function(){return this.OuterWrapper||this.element[0]},_IsCustomElement:function(){return f.isElementRegistered(this._getRootElement().tagName)},_GetThrottlePromise:function(){if(this._IsCustomElement()){var e=this._getRootElement();return p.CustomElementUtils.getElementBridge(e).getThrottlePromise()}return Promise.resolve(null)},_FixRendererContext:function(e){if(this._IsCustomElement()){var t=s.CollectionUtils.copyInto({},e);return delete t.component,t.componentElement=this._getRootElement(),t}return e},_GetCustomElement:function(){return this._getRootElement()},_WrapCustomElementRenderer:function(e){return this._IsCustomElement()&&"function"==typeof e?function(t){var n=e(t);return n&&n.insert?n.insert:null}:e},__saveWritebackOptions:function(e){this._writebackOptions=e},_getWritebackOption:function(e){return!(!this._writebackOptions||!this._writebackOptions[e])},__handleSubtreeAttached:function(){this._IsCustomElement()||this._NotifyAttached()},__handleSubtreeDetached:function(){this._IsCustomElement()||this._NotifyDetached()},_VerifyConnectedForSetup:function(){return!1},_AllowConnectedSuspension:function(){return!1},__handleConnected:function(){if(this._AllowConnectedSuspension()){const e=this._getRootElement();if(e?.closest("[data-oj-suspend]"))return void(this._suspendedConnect=!0)}this._NotifyAttached(),this.__delayConnectDisconnect(0)||this._SetupResources()},__handleDisconnected:function(){this._suspendedConnect?this._suspendedConnect=!1:(this.__delayConnectDisconnect(1)||this._ReleaseResources(),this._NotifyDetached())},__delayConnectDisconnect:function(e){return!!this._VerifyConnectedForSetup()&&(void 0===this.connectedState&&window.queueMicrotask(function(){this.connectedState===e&&(0===e?this._SetupResources():this._ReleaseResources()),this.connectedState=void 0}.bind(this)),this.connectedState=e,!0)},__handleWatchedAttribute:function(e,t,n){this._WatchedAttributeChanged(e,t,n)},_WatchedAttributeChanged:function(e,t,n){},__getFocusElement:function(){return this.GetFocusElement()},GetFocusElement:function(){return this.element[0]}}),delete a.fn[$],s.__registerWidget=function(e,t,n,r){if(a.widget(e,t,n),r){var i=e.split(".")[1];delete a.fn[i]}if("oj.oj"===e.substring(0,5)||"oj._oj"===e.substring(0,6)){var o,s=e.split("."),l=s[0],c=s[1],u=l+"-"+c;o="_"===c.substring(0,1)?"_"+l+"-"+c.substring(3):l+"-"+c.substring(2),a.expr.pseudos[o.toLowerCase()]=function(e){return!!a.data(e,u)}}},a.cleanData=(q=a.cleanData,function(e){const t=[],n=[];for(var r=0;r<e.length;r++){var i=e[r];if(null==i)break;var o=!1,s=O.__GetWidgetConstructor(i);if(s&&!(o=s("instance")._IsCustomElement())){var a=O.getComponentElementByNode(i);o=a&&f.isElementRegistered(a.tagName)}o?i.$$cleanElement&&n.push(i):t.push(i)}t.length>0&&q(t),n.forEach(e=>e.$$cleanElement())}),a.fn.addClass=function(e){if("function"==typeof e)return this.each(function(t){a(this).addClass(e.call(this,t,ne(this)))});const t=Array.isArray(e)?e:p.CustomElementUtils.getClassSet(e);return this.each(function(){1===this.nodeType&&this.classList.add(...t)}),this},a.fn.removeClass=function(e){if("function"==typeof e)return this.each(function(t){a(this).removeClass(e.call(this,t,ne(this)))});if(!arguments.length)return this.attr("class","");const t=Array.isArray(e)?e:p.CustomElementUtils.getClassSet(e);return this.each(function(){1===this.nodeType&&this.classList.remove(...t)}),this};const re={};s._registerLegacyNamespaceProp("Test",re),re.ready=!1,re.domNodeForLocator=function(e){var t=e;if(s.StringUtils.isString(e)){var n=e;try{t=JSON.parse(n)}catch(e){return null}}if(t&&t.element){var r=a(t.element);if(r&&r.length>0){delete t.element;var i=t;return O.getNodeBySubId(r[0],i)}}return null},re.getOpenPopupCount=function(){return s.ZOrderUtils.getOpenPopupCount()},re.findOpenPopups=function(){return s.ZOrderUtils.findOpenPopups()},re.compareStackingContexts=function(e,t){return s.ZOrderUtils.compareStackingContexts(e,t)};const ie=O.subtreeAttached,oe=O.subtreeDetached,se=O.subtreeHidden,ae=O.subtreeShown,le=O.createDynamicPropertyGetter,ce=O.setDefaultOptions,ue=O.getDefaultOptions,de=O.__GetWidgetConstructor,he=O.setComponentOption,pe=O.getComponentOption,fe=O.getWidgetConstructor,_e=O.isComponentInitialized,me=O.markPendingSubtreeHidden,ge=O.unmarkPendingSubtreeHidden,ve=O.__getDefaultOptions,ye=O.getComponentElementByNode,Ee=O.getSubIdByNode,be=O.getNodeBySubId,Se=O.callComponentMethod,Te=O._OJ_CONTAINER_ATTR;e.DataProviderFeatureChecker=H,e._OJ_CONTAINER_ATTR=Te,e.__GetWidgetConstructor=de,e.__getDefaultOptions=ve,e.callComponentMethod=Se,e.createDynamicPropertyGetter=le,e.getComponentElementByNode=ye,e.getComponentOption=pe,e.getDefaultOptions=ue,e.getNodeBySubId=be,e.getSubIdByNode=Ee,e.getWidgetConstructor=fe,e.isComponentInitialized=_e,e.markPendingSubtreeHidden=me,e.setComponentOption=he,e.setDefaultOptions=ce,e.subtreeAttached=ie,e.subtreeDetached=oe,e.subtreeHidden=se,e.subtreeShown=ae,e.unmarkPendingSubtreeHidden=ge,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojhtmlutils",["exports"],function(e){"use strict";const t={};function n(e){for(var t=e.childNodes,r=t.length,i=0;i<r;i++){var o=t[i];n(o);var s,a,l,c=o.nodeName.toLowerCase();const r="oj-bind-replace-";if(c.substr(0,16)===r){var u=c.substr(16);for(l=document.createElement(u),s=0;s<o.attributes.length;s++)a=o.attributes[s],l.setAttribute(a.name,a.value);var d=l.content?l.content:l;for(s=0;o.childNodes.length>0;)d.appendChild(o.childNodes[0]);e.replaceChild(l,o)}else if("script"===c||"style"===c){for(l=document.createElement(c),s=0;s<o.attributes.length;s++)a=o.attributes[s],l.setAttribute(a.name,a.value);var h=o.innerHTML;l.innerHTML=h.replace(new RegExp(r,"g"),""),e.replaceChild(l,o)}else if(8===o.nodeType){var p=o.nodeValue;o.nodeValue=p.replace(new RegExp(r,"g"),"")}}}t.stringToNodeArray=function(e){var t,r,i,o,s,a=["table","caption","colgroup","col","thead","tfoot","th","tbody","tr","td","template","p"];for(t=0;t<a.length;t++)r=a[t],i=e,o=void 0,s=void 0,o=new RegExp("<"+r+"(?=\\s|>)","gi"),s=new RegExp("</"+r+"(?=\\s|>)","gi"),e=i.replace(o,"<oj-bind-replace-"+r).replace(s,"</oj-bind-replace-"+r);var l=document.createElement("div");l.innerHTML=e,-1!==e.indexOf("<oj-bind-replace-")&&n(l);for(var c=[];l.firstChild;)c.push(l.firstChild),l.removeChild(l.firstChild);return c},t.getTemplateContent=function(e){var t=[];if(1!==e.nodeType||"template"!==e.tagName.toLowerCase())throw new Error("Invalid template node "+e);var n=e.content;return n?t.push(document.importNode(n,!0)):Array.prototype.forEach.call(e.childNodes,function(e){t.push(e.cloneNode(!0))}),t};const r=t.stringToNodeArray,i=t.getTemplateContent;e.getTemplateContent=i,e.stringToNodeArray=r,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojkoshared",["ojs/ojcore-base","knockout","ojs/ojconfig","ojs/ojlogger","ojs/ojhtmlutils"],function(e,t,n,r,i){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;const o=function(){this.Init()};function s(e,r){return function(i,o,s,a){var l=n.getExpressionEvaluator();if(!l)return e(i,o,s,a);var c=function(e,n,r,i){var o=i[e];if(!o){var s=t.expressionRewriting.preProcessBindings(e,n);o=r.createEvaluator("{"+s+"}").evaluate,i[e]=o}return o}(i,a,l,r);return c([o.$data||{},o,{$element:s}])}}e.Object.createSubclass(o,e.Object,"ComponentBinding.GlobalChangeQueue"),o.prototype.Init=function(){o.superclass.Init.call(this),this._trackers=[],this._queue=[]},o.prototype.registerComponentChanges=function(t){-1===this._trackers.indexOf(t)&&(this._trackers.push(t),this._delayTimer||(this._delayTimer=setTimeout(e.Object.createCallback(this,this._deliverChangesImpl),1),this._delayPromise=new Promise(function(e){this._delayPromiseResolver=e}.bind(this))))},o.prototype.deliverChanges=function(){this._delayTimer&&clearTimeout(this._delayTimer),this._deliverChangesImpl()},o.prototype.getThrottlePromise=function(){return this._delayPromise||Promise.resolve()},o.prototype._deliverChangesImpl=function(){this._delayTimer=null,this._resolveDelayPromise();var e=this._trackers;this._trackers=[];for(var t=0;t<e.length;t++){var n=e[t];this._queue.push({tracker:n,changes:n.flushChanges()})}for(;this._queue.length>0;){var r=this._queue.shift();r.tracker.applyChanges(r.changes)}},o.prototype._resolveDelayPromise=function(){this._delayPromise&&(this._delayPromiseResolver(),this._delayPromiseResolver=null,this._delayPromise=null)};const a=(new function(){var e=new WeakMap,a={},l={},c={},u="_ojExtended",d="_ojCacheScope",h=new o;function p(e){var t,r=n.getExpressionEvaluator();if(r){var i=r.createEvaluator(e).evaluate;return function(e,t){return i([e,e.$data||{},{$element:t}])}}try{t=new Function("$context","$element","with($context.$data||{}){with($context){return "+e+"}}")}catch(t){throw new Error(t.message+' in expression "'+e+'"')}return t}function f(t,n,r){if(!r)return t(n,r);var i,o=e,s=r[d]||r;(i=o.get(s))||(i={},o.set(s,i));var a=i[n];return a||(a=t(n,r),i[n]=a),a}function _(e,t,n){var r=t.getBindingsString;if(r)return r.call(t,e,n);switch(e.nodeType){case 1:return e.getAttribute("data-bind");case 8:var i=e.nodeValue.match(/^\s*ko(?:\s+([\s\S]+))?\s*$/);return i?i[1]:null;default:return null}}this.install=function(){var e=t.bindingProvider,n="instance",o=e[n],d="getBindingAccessors";if(!o[d])return r.error("JET's Knockout bindings are not compatible with the current binding provider since it does not implement getBindingAccessors()"),this;var h={getWrapped:function(){return o}};e[n]=h;var m,g,v,y=[];return y.push(d,"nodeHasBindings","getBindings"),y.forEach(function(e){h[e]=function(e,n,r){var i="nodeHasBindings"===n;return function(o){if(i){var s=o.nodeType;if(1!==s&&8!==s)return!1}var l=r(n,e[n]),c=l?l.apply(e,arguments):null,u=a[n];if(null!=u){var d=arguments;u.forEach(function(n){var r=Array.prototype.slice.call(d);r.push(c,e),c=t.ignoreDependencies(n,null,r)})}return c}}(o,e,function(e,n){return e!==d?n:function(e,n){return function(r,i){if(i[u]){var o=_(r,n,i),s=o?function(e,n){return f(function(e){return p("{"+t.expressionRewriting.preProcessBindings(e,{valueAccessors:!0})+"}")},e,n)}(o,i)(i,r):null;if(1===r.nodeType&&t.components.isRegistered(r.tagName.toLowerCase())){var a=e.call(n,r,i).component;a&&((s=s||{}).component=a)}return s}return e.call(n,r,i)}}(n,o)})}),h.preprocessNode=function(e){var n=e.preprocessNode;return function(r){var i,o,s=null;return 1===r.nodeType&&(i=l[r.nodeName.toLowerCase()]),i||(i=n,s=e),i&&(o=t.ignoreDependencies(i,s,[r])),Array.isArray(o)&&(o=function(e,n){var r=t.bindingProvider.instance,i=n.slice(0),o=n[0],s=0,a=0;for(;s>=0;){var l=t.virtualElements.nextSibling(o);if(o!==e){var c=r.preprocessNode(o);Array.isArray(c)&&(i.splice.apply(i,[a,1].concat(c)),a+=c.length-1)}a+=1;var u=s+1;a+=(s=(o=l)?n.indexOf(o,u):-1)-u}return i}(r,o)),o}}(o),m=t.nativeTemplateEngine.prototype,v=m[g="renderTemplateSource"],m[g]=function(e,t,n,r){return v.call(this,e,t,n,r||document)},function(){const e=t.templateSources.domElement.prototype,n="nodes",r=e[n];e[n]=function(){const e=r.apply(this,arguments);return e&&11===e.nodeType?document.importNode(e,!0):e}}(),t.components.loaders.unshift({loadTemplate:function(e,n,r){var o;if("string"==typeof n)o=t.utils.parseHtmlFragment(n,document);else if(n.element){var s=n.element;if(s instanceof HTMLElement)o=i.getTemplateContent(s);else{if("string"!=typeof s)throw new Error(`Unknown element type: ${s}`);var a=document.getElementById(s);if(!a)throw new Error(`Cannot find element with ID ${s}`);o=i.getTemplateContent(a)}}o?t.components.defaultLoader.loadTemplate(e,o,r):r(null)}}),function(e){var n,i=t.bindingProvider.instance,o="parseBindingsString";for(;i&&!n;){var a=i[o];a?(n=!0,i[o]=s(a.bind(i),e)):i=i.getWrapped?i.getWrapped():null}n||r.error("Unable to patch KO expression evaluation implementation. If you have a custom binding provider, make sure it implements the getWrapped() method that returns the default binding provider instance.")}(c),this},this.addPostprocessor=function(e){Object.keys(e).forEach(function(t){a[t]=a[t]||[],a[t].push(e[t])})},this.registerPreprocessor=function(e,t){l[e]=t},this.getBindingsString=function(e,t,n){return _(e,t,n)},this.extendBindingContext=function(e,t,n,r,i){var o={$current:t,$root:void 0,$parent:void 0,$parents:void 0};return n&&(o[n]=t),r&&(o[r]=t),e?o=e.extend(o):o.$data={},Object.defineProperty(o,d,{value:i}),Object.defineProperty(o,u,{value:!0}),o},this.createBindingExpressionEvaluator=function(e,t){if(t[u])return p(e);var r,i=n.getExpressionEvaluator();if(i){var o=i.createEvaluator(e).evaluate;return function(e){return o([e.$data||{},e])}}try{r=new Function("$context","with($context){with($data||{}){return "+e+";}}")}catch(t){throw new Error(t.message+' in expression "'+e+'"')}return r},this.createEvaluator=function(e,t){return f(this.createBindingExpressionEvaluator,e,t)},this.getGlobalChangeQueue=function(){return h}}).install();return a}),define("ojs/ojtemplateengine-utils",["exports","preact/jsx-runtime","preact","ojs/ojcore-base","ojs/ojcustomelement-utils","ojs/ojcustomelement-registry","ojs/ojmetadatautils","ojs/ojlogger"],function(e,t,n,r,i,o,s,a){"use strict";r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;const l=Symbol("row");class c{static renderNodes(e,r,o,s){const a=o.parentStub;let u=()=>Array.from(a.childNodes);o.nodes&&(u=c._getRetrieveNodesFunction(o.nodes));const d=console.error;console.error=(e,t)=>{-1===e.indexOf("Improper nesting of table.")&&d.apply(console,arguments)};try{const e=s?Array.from(s).reduce((e,[n,r])=>t.jsx(n.Provider,{value:r,children:e}),r):r;n.render(e,a)}finally{console.error=d}let h=!0;const p=u();p.forEach(e=>{e.setAttribute?(e.setAttribute("data-oj-vdom-template-root",""),h=!1):e._oj_vdom_template_root=!0,e[l]=o,e[i.CACHED_BINDING_PROVIDER]="preact"}),o.vnode=r,o.nodes=p,h&&e.setAttribute("data-oj-vdom-template-text-roots","")}static clean(e){const t=e[l];if(!t.cleaned){t.cleaned=!0;const e=c._getInsertNodesFunction(t.nodes);n.render(null,t.parentStub),e(t.nodes),t.computedVNode?.dispose();const r=t.template,i=r._cachedRows.indexOf(t);r._cachedRows.splice(i,1)}}static findTemplateRoots(e,t){let n=e&&e.querySelectorAll?Array.from(e.querySelectorAll('[data-oj-vdom-template-root=""]')):[];e&&e.hasAttribute&&e.hasAttribute("data-oj-vdom-template-root")&&n.push(e);let r=t?.hasAttribute("data-oj-vdom-template-text-roots");if(!r){r=(e&&e.querySelectorAll?e.querySelectorAll('[data-oj-vdom-template-text-roots=""]'):[]).length>0}if(r){const t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT);let r=t.currentNode;for(;r;)r._oj_vdom_template_root&&n.push(r),r=t.nextNode()}return n}static _getInsertNodesFunction(e){const t=e[e.length-1],n=t.parentNode,r=t.nextSibling;return e=>{e.forEach(e=>n.insertBefore(e,r))}}static _getRetrieveNodesFunction(e){const t=e[0],n=e[e.length-1],r=t.parentNode,i=t.previousSibling,o=n.nextSibling;return()=>{const e=[];for(let t=i?i.nextSibling:r.firstChild;t!==o;t=t.nextSibling)e.push(t);return e}}static resolveVDomTemplateProps(e,t,n,r,i,s,a){const l=o.getPropertiesForElementTag(n),[d,h]=c.extendTemplate(e,c._COMPUTED_PROPS_CACHE_FACTORY,e=>{for(const t of d)t.recalculateValue(e)}),p=new u(e=>c._computeProps(e,n,l,r,i,a),t,s,h);return d.add(p),p}static _computeProps(e,t,n,r,o,a){const l=e(o),c=(Array.isArray(l)?l:[l]).find(e=>e.type===t);if(!c)throw new Error("Item template must contain an element named {elementTagName}");const u={},d=c.props;return Object.keys(d).forEach(e=>{const{prop:t,value:o}=i.convertPrivatePropFromPreact(e,c.props[e]);r.has(t)&&(u[t]=i.transformPreactValue(null,t,s.getPropertyMetadata(t,n),o))}),u}static extendTemplate(e,t,n){if(!e._cachedRows){let r=e.render;Object.defineProperties(e,{_cachedRows:{writable:!0,value:t()},render:{enumerable:!0,get:()=>r,set(e){r=e,e&&n(e)}}})}return e._cachedRows}}c._COMPUTED_PROPS_CACHE_FACTORY=()=>{const e=new Set;return[e,e.delete.bind(e)]},c._ROW_CACHE_FACTORY=()=>[];class u{constructor(e,t,n,r){this._calculate=e,this._defaultProps=n,this._disposeCallback=r,this._value=e(t),this._merged=this._getMergedValue(this._value)}peek(){return this._merged}subscribe(e){if(this._sub)throw new Error("Resolved property observable does not support multiple subscribers");this._sub=e}dispose(){this._disposeCallback(this)}recalculateValue(e){const t=this._calculate(e),n=this._value;this._value=t,this._sub&&!r.Object.compareValues(t,n)&&(this._merged=this._getMergedValue(t),this._sub(this._merged))}_getMergedValue(e){return Object.assign({},this._defaultProps,e)}}class d{static getContext(e,t,n,r,i,o,s){if(e){let l=n.__ojBindingContext?n.__ojBindingContext:e.__ContextFor(n);l||(a.info("Binding context not found when processing template for element with id: "+t.id+". Using binding context for element instead."),l=e.__ContextFor(t));const c=e.__ExtendBindingContext(l,r,i,o,t);if(c.$provided&&s){const e=new Map([...c.$provided,...s]);c.$provided=e}else s&&(c.$provided=s);return c}const l={$current:r};return o&&(l[o]=r),l}static getResolvedDefaultProps(e,t,n){let r=e.get(t);if(!r){const i=document.createElement(t);r=d.getStaticPropertyMap(i,n,document.body),e.set(t,r)}return r}static getStaticPropertyMap(e,t,n){const r={};if(e){const i=e.style;i.display="none",i.position="absolute",e.setAttribute("data-oj-binding-provider","none"),n.appendChild(e),t.forEach(function(t){void 0!==e[t]&&(r[t]=e[t])}),n.removeChild(e)}return r}static createPropertyBackedByObservable(e,t,n,r,i){const o=e.__Observable(r);Object.defineProperty(t,n,{get:()=>o(),set:e=>{o(e),i&&i(e)},enumerable:!0})}}e.PreactTemplate=c,e.TemplateEngineUtils=d,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojtemplateengine-ko",["knockout","ojs/ojcore","ojs/ojkoshared","ojs/ojcustomelement-utils","ojs/ojhtmlutils","ojs/ojtemplateengine-utils"],function(e,t,n,r,i,o){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;const s=new WeakMap;return new class{constructor(){this._bindingProvider={__ContextFor:e.contextFor,__ExtendBindingContext:n.extendBindingContext,__KoComputed:e.computed,__Observable:e.observable}}execute(t,n,i,s,a,l){const c=n.getAttribute("data-oj-as"),u=o.TemplateEngineUtils.getContext(this._bindingProvider,t,n,i,s,c,l);if(n.render)throw new Error(`The render property is not expected on the template for component ${t.id}`);const d=this._createAndPopulateContainer(n,a);let h=d.childNodes;for(let e=0;e<h.length;e++){h[e][r.CACHED_BINDING_PROVIDER]="knockout"}return e.applyBindingsToDescendants(u,d),Array.prototype.slice.call(h,0)}clean(t,n){return e.cleanNode(t)}resolveProperties(e,t,n,r,i,s,a,l){if(t.render)throw new Error(`The render property is not expected on the template for component ${e.id}`);const c=t.getAttribute("data-oj-as"),u=o.TemplateEngineUtils.getContext(this._bindingProvider,e,t,i,s,c),d=this._getPropertyContributorsViaCache(t,u,n,r,l||e);return this._createComputed(d,u,a)}defineTrackableProperty(e,t,n,r){o.TemplateEngineUtils.createPropertyBackedByObservable(this._bindingProvider,e,t,n,r)}_createComputed(n,r,i){const o=e.pureComputed(()=>{const o={};n.evalMap.forEach((t,n)=>{var s=e.utils.unwrapObservable(t(r));i&&i(n,s),o[n[0]]=this._getMergedValue(o,n,s)});const s=t.CollectionUtils.copyInto;let a=s({},n.staticMap,null,!0);return a=s(a,o,null,!0),a});return this._wrap(o,["peek","subscribe","dispose"])}_wrap(e,t){const n={};return t.forEach(t=>{n[t]=e[t].bind(e)}),n}_createAndPopulateContainer(e,t){var n=document.createElement("div");t&&(n._ojReportBusy=t);for(var r=i.getTemplateContent(e),o=0;o<r.length;o++)n.appendChild(r[o]);return n}_getPropertyContributorsViaCache(e,t,n,r,i){let o=s.get(e);if(!o){o={},s.set(e,o);const a=this._createAndPopulateContainer(e).querySelector(n);o.evalMap=this._getPropertyEvaluatorMap(a,r,t),o.staticMap=this._getStaticPropertyMap(a,r,i)}return o}_getStaticPropertyMap(e,t,n){const r={};if(e){var i=e.style;i.display="none",i.position="absolute",e.setAttribute("data-oj-binding-provider","none"),n.appendChild(e),t.forEach(function(t){void 0!==e[t]&&(r[t]=e[t])}),n.removeChild(e)}return r}_getMergedValue(e,t,n){if(t.length<2)return n;const r=e[t[0]]||{};let i=r;const o=t.length-1;for(let e=1;e<o;e++){const n=t[e],r=i[n]||{};i[n]=r,i=r}return i[t[o]]=n,r}_getPropertyEvaluatorMap(e,t,i){for(var o=new Map,s=e?e.attributes:[],a=0;a<s.length;a++){var l=s[a],c=r.AttributeUtils.attributeToPropertyName(l.name).split(".");if(t.has(c[0])){var u=r.AttributeUtils.getExpressionInfo(l.value).expr;u&&o.set(c,n.createBindingExpressionEvaluator(u,i))}}return o}}}),define("ojs/ojtemplateengine-preact",["ojs/ojtemplateengine-utils"],function(e){"use strict";return new class{constructor(){this._defaultProps=new Map}execute(t,n,r,i,o,s){const a=n.getAttribute("data-oj-as"),l=e.TemplateEngineUtils.getContext(null,t,n,r,i,a,s);if(n.render)return this._executeVDomTemplate(t,n,l,s);throw new Error(`The render property is expected on the template for component ${t.id}`)}clean(t,n){return e.PreactTemplate.findTemplateRoots(t,n).forEach(t=>{e.PreactTemplate.clean(t)}),null}resolveProperties(t,n,r,i,o,s,a,l){const c=n.render;if(c){const t=e.TemplateEngineUtils.getResolvedDefaultProps(this._defaultProps,r,i);return e.PreactTemplate.resolveVDomTemplateProps(n,c,r,i,o,t,a)}throw new Error(`The render property is expected on the template for component ${t.id}`)}defineTrackableProperty(e,t,n,r){throw new Error("This template engine does not support trackable property")}_executeVDomTemplate(t,n,r,i){const o=n.render(r.$current);e.PreactTemplate.extendTemplate(n,e.PreactTemplate._ROW_CACHE_FACTORY,r=>{n._cachedRows.forEach(n=>{let o=r(n.currentContext);e.PreactTemplate.renderNodes(t,o,n,i)})});const s=document.createElement("div"),a={currentContext:r.$current,template:n,parentStub:s,computedVNode:null,vnode:void 0,nodes:void 0};return e.PreactTemplate.renderNodes(t,o,a,i),n._cachedRows.push(a),a.nodes}}}),define("ojs/ojtemplateengine-preact-ko",["knockout","ojs/ojkoshared","ojs/ojcontext","ojs/ojtemplateengine-utils","ojs/ojlogger"],function(e,t,n,r,i){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;return new class{constructor(){this._defaultProps=new Map,this._bindingProvider={__ContextFor:e.contextFor,__ExtendBindingContext:t.extendBindingContext,__KoComputed:e.computed,__Observable:e.observable}}execute(e,t,n,i,o,s){const a=t.getAttribute("data-oj-as"),l=r.TemplateEngineUtils.getContext(this._bindingProvider,e,t,n,i,a,s);if(t.render)return this._executeVDomTemplate(e,t,l,s);throw new Error(`The render property is expected on the template for component ${e.id}`)}clean(t,n){let i=r.PreactTemplate.findTemplateRoots(t,n);return i.forEach(e=>{r.PreactTemplate.clean(e)}),0===i.length?e.cleanNode(t):null}resolveProperties(e,t,n,i,o,s,a,l){const c=t.render;if(c){const e=r.TemplateEngineUtils.getResolvedDefaultProps(this._defaultProps,n,i);return r.PreactTemplate.resolveVDomTemplateProps(t,c,n,i,o,e,a)}throw new Error(`The render property is expected on the template for component ${e.id}`)}defineTrackableProperty(e,t,n,i){r.TemplateEngineUtils.createPropertyBackedByObservable(this._bindingProvider,e,t,n,i)}_executeVDomTemplate(t,o,s,a){const l=n.getContext(o).getBusyContext(),c=e.pureComputed({read:()=>o.render(s.$current,a)}).extend({rateLimit:{timeout:0,method:(e,t)=>{let n;return()=>{if(!n){const r=l.addBusyState({description:"pending changes for the template element"});n=setTimeout(()=>{n=void 0,e(),r()},t)}}}}}),u=c();r.PreactTemplate.extendTemplate(o,r.PreactTemplate._ROW_CACHE_FACTORY,e=>{o._cachedRows.forEach(n=>{let i=e(n.currentContext,a);r.PreactTemplate.renderNodes(t,i,n,a)})});const d=document.createElement("div"),h={currentContext:s.$current,template:o,parentStub:d,computedVNode:c,vnode:void 0,nodes:void 0};return r.PreactTemplate.renderNodes(t,u,h,a),o._cachedRows.push(h),c.subscribe(e=>{const n=o._cachedRows.find(e=>e.computedVNode===c);n&&(n.nodes[0].isConnected||i.warn(`PreactTemplateEngineKo subscription is called to replace disconnected row for the template slot '${o.slot}' on ${t.tagName}`),r.PreactTemplate.renderNodes(t,e,n,a))}),h.nodes}}}),define("ojs/ojcomposite-knockout",["ojs/ojcore-base","knockout","ojs/ojcustomelement","ojs/ojcustomelement-utils","ojs/ojkoshared","ojs/ojlogger","ojs/ojtemplateengine-ko","ojs/ojtemplateengine-preact-ko"],function(e,t,n,r,i,o,s,a){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i,s=s&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s,a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a;const l={};e._registerLegacyNamespaceProp("CompositeTemplateRenderer",l),l.renderTemplate=function(n,r,i){var o=l._storeNodes(r,i);t.virtualElements.setDomNodeChildren(r,i),l.invokeViewModelMethod(r,n.viewModel,"attached",[n.viewModelContext]),l.invokeViewModelMethod(r,n.viewModel,"connected",[n.viewModelContext]);var s=l._getKoBindingContext().createChildContext(n.viewModel,void 0,function(t){t[e.Composite.__COMPOSITE_PROP]=r,t.__oj_slots=n.slotMap,t.__oj_nodestorage=o,t.$slotNodeCounts=n.slotNodeCounts,t.$slotCounts=n.slotNodeCounts,t.$props=n.props,t.$properties=n.props,t.$unique=n.unique,t.$uniqueId=n.uniqueId,t.$parent=null,t.$parentContext=null,t.$parents=null,t.$provided=null});t.applyBindingsToDescendants(s,r),l.invokeViewModelMethod(r,n.viewModel,"bindingsApplied",[n.viewModelContext])},l.getEnclosingComposite=function(n){for(var r=null,i=t.contextFor(n);i&&!r;i=i.$parentContext)r=i[e.Composite.__COMPOSITE_PROP];return r},l.createTracker=function(){return t.observable()},l.invokeViewModelMethod=function(e,n,r,i){if(null!=n){var o=n[r];if("function"==typeof o)try{return t.ignoreDependencies(o,n,i)}catch(t){throw new Error("Error while invoking "+r+" callback for "+e.tagName.toLowerCase()+" with id '"+e.id+"'.")}}},l._storeNodes=function(e,t){var n,i=e.childNodes;if(i){(n=document.createElement("div")).setAttribute("data-bind","_ojNodeStorage_"),n.style.display="none",t.push(n);for(var o=[],s=0;s<i.length;s++){var a=i[s];r.CustomElementUtils.isSlotable(a)&&o.push(a)}o.forEach(function(e){n.appendChild(e)}),r.CustomElementUtils.subtreeHidden(n)}return n},l._getKoBindingContext=function(){if(!l._BINDING_CONTEXT){var e=document.createElement("div");t.applyBindings(null,e),l._BINDING_CONTEXT=t.contextFor(e),t.cleanNode(e)}return l._BINDING_CONTEXT},l._BINDING_CONTEXT=null,function(){function e(e,n){var r,i,o=["name","slot"];n?(o.push("data"),o.push("as"),i="ko _ojBindTemplateSlot_:{"):(o.push("index"),i="ko _ojBindSlot_:{");for(var s=[],a=0;a<o.length;a++){var l=o[a],c=t(e.getAttribute(l));c&&s.push(l+":"+c)}i+=s.join(","),i+="}";var u=document.createComment(i),d=document.createComment("/ko");r=[u];var h=e.parentNode;for(h.insertBefore(u,e);e.childNodes.length>0;){var p=e.childNodes[0];h.insertBefore(p,e),r.push(p)}return r.push(d),h.replaceChild(d,e),r}function t(e){if(null!=e){var t=r.AttributeUtils.getExpressionInfo(e).expr;return null==t&&(t="'"+e+"'"),t}return null}i.registerPreprocessor("oj-bind-slot",e),i.registerPreprocessor("oj-slot",e),i.registerPreprocessor("oj-bind-template-slot",function(t){return e(t,!0)})}(),t.bindingHandlers._ojNodeStorage_={init:function(){return{controlsDescendantBindings:!0}}};const c={};e._registerLegacyNamespaceProp("SlotUtils",c),c.cleanup=function(e,n){var i=n.__oj_nodestorage;if(i)for(var o=t.virtualElements.firstChild(e);o;){var s=t.virtualElements.nextSibling(o);null!=o.__oj_slots&&(i.appendChild(o),1===o.nodeType&&r.CustomElementUtils.subtreeHidden(o)),o=s}},c.preactTemplateCleanup=function(e,t,n){n.forEach(n=>{try{e.clean(n,t)}catch(e){o.warn("Error during template cleanup "+e)}})},t.bindingHandlers._ojBindSlot_={init:function(e,n,i,o,s){t.utils.domNodeDisposal.addDisposeCallback(e,c.cleanup.bind(null,e,s));var a=s.__oj_slots,l=n(),u=t.utils.unwrapObservable,d=u(l.name)||"",h=u(l.slot)||"",p=u(l.index),f=null!=p?[a[d][p]]:a[d];if(f){var _;for(_=0;_<f.length;_++){f[_].__oj_slots=h}r.CustomElementUtils.allowSlotRelocation(!0);try{t.virtualElements.setDomNodeChildren(e,f)}finally{r.CustomElementUtils.allowSlotRelocation(!1)}for(_=0;_<f.length;_++){var m=f[_];1===m.nodeType&&r.CustomElementUtils.subtreeShown(m)}return{controlsDescendantBindings:!0}}t.virtualElements.childNodes(e).forEach(function(e){(function(e){return 1===e.nodeType||3===e.nodeType&&e.nodeValue.trim()})(e)&&(e.__oj_slots=h)})}},t.virtualElements.allowedBindings._ojBindSlot_=!0,t.bindingHandlers._ojBindTemplateSlot_={init:function(n,i,l,u,d){t.utils.domNodeDisposal.addDisposeCallback(n,c.cleanup.bind(null,n,d));var h=d.__oj_slots,p=i(),f=t.utils.unwrapObservable,_=f(p.name)||"",m=h[_],g=m&&m[m.length-1],v=!1;if(!g)for(var y=t.virtualElements.childNodes(n),E=0;E<y.length;E++)if("TEMPLATE"===y[E].tagName){v=!0,g=y[E];break}if(g){var b=d[e.Composite.__COMPOSITE_PROP];"TEMPLATE"!==g.tagName&&o.error("Slot content for slot '"+_+"' under "+b.tagName.toLowerCase()+" with id '"+b.id+"' should be wrapped inside a <template> node."),g.__oj_slots=f(p.slot)||"";const i=g.render?a:s,l=v?n:b;let u;if(t.computed(function(){g.render&&u&&c.preactTemplateCleanup(i,l,u);var e=f(p.data),r=f(p.as);u=i.execute(l,g,e,v?r:null),t.virtualElements.setDomNodeChildren(n,u)}),g.render){const e=r.CustomElementUtils.getElementState(b);e.addTemplateCleanCallback&&e.addTemplateCleanCallback(()=>{c.preactTemplateCleanup(i,l,u)}),t.utils.domNodeDisposal.addDisposeCallback(n,()=>{c.preactTemplateCleanup(i,l,u)})}}else t.virtualElements.setDomNodeChildren(n,[]);return{controlsDescendantBindings:!0}}},t.virtualElements.allowedBindings._ojBindTemplateSlot_=!0}),define("ojs/ojcomposite",["exports","ojs/ojcore-base","ojs/ojhtmlutils","ojs/ojlogger","ojs/ojmetadatautils","ojs/ojcomposite-knockout","ojs/ojcustomelement","ojs/ojcustomelement-utils","ojs/ojcustomelement-registry"],function(e,t,n,r,i,o,s,a,l){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;const c={getContainingComposite:function(e,n){for(var r=null,i=e;i;)if((i=t.CompositeTemplateRenderer.getEnclosingComposite(i))&&"oj-module"!==i.nodeName.toLowerCase()){if(n&&!(16&e.compareDocumentPosition(n)))break;r=i}return r}};class u extends a.LifecycleElementState{constructor(){super(...arguments),this._templateCleanCallbacks=[]}getTrackChildrenOption(){return"immediate"}addTemplateCleanCallback(e){this._templateCleanCallbacks.push(e)}cleanTemplates(){this._templateCleanCallbacks.forEach(e=>{e()}),this._templateCleanCallbacks=[]}}const d={};d.proto=Object.create(t.BaseCustomElementBridge.proto),d.DESC_KEY_CSS="css",d.DESC_KEY_PARSE_FUN="parseFunction",d.DESC_KEY_VIEW="view",d.DESC_KEY_VIEW_MODEL="viewModel",d.SUBID_MAP="data-oj-subid-map",d.DisconnectedState=0,d.ConnectedState=1,t.CollectionUtils.copyInto(d.proto,{beforePropertyChangedEvent:function(e,n,r){var i={property:n};t.CollectionUtils.copyInto(i,r),t.CompositeTemplateRenderer.invokeViewModelMethod(e,this._VIEW_MODEL,"propertyChanged",[i])},AddComponentMethods:function(e){var t=function(e,t,n,r,i,o){if(!t.SaveEarlyPropertySet(e,n,r)){var s=t.SetProperty(e,n,r,i,o);if(s.propertySet)if(s.isSubproperty)d._getPropertyTracker(t,s.property).valueHasMutated()}};e.setProperty=function(e,n){var r=a.CustomElementUtils.getElementBridge(this);t(this,r,e,n,this,!0)},e.getProperty=function(e){return a.CustomElementUtils.getElementBridge(this).GetProperty(this,e,this)},e._propsProto.setProperty=function(e,n){t(this._ELEMENT,this._BRIDGE,e,n,this,!1)},e._propsProto.getProperty=function(e){return this._BRIDGE.GetProperty(this._ELEMENT,e,this)},e.getNodeBySubId=function(e){var t=a.CustomElementUtils.getElementBridge(this),n=t._getViewModel();return n.getNodeBySubId?n.getNodeBySubId(e,t._getNodeBySubId.bind(this)):t._getNodeBySubId.bind(this)(e)},e.getSubIdByNode=function(e){var t=a.CustomElementUtils.getElementBridge(this),n=t._getViewModel();return n.getSubIdByNode?n.getSubIdByNode(e,t._getSubIdByNode.bind(this)):t._getSubIdByNode.bind(this)(e)}},CreateComponent:function(e){const n=a.CustomElementUtils.getElementState(e).getSlotMap();for(var r={},i=Object.keys(n),o=0;o<i.length;o++){var s=i[o];r[s]=n[s].length}var c=a.ElementUtils.getUniqueId(),u={element:e,props:Promise.resolve(this._PROPS),properties:this._PROPS,slotNodeCounts:Promise.resolve(r),slotCounts:r,unique:c};u.uniqueId=e.id?e.id:c,this._VM_CONTEXT=u;var h=l.getElementDescriptor(e.tagName)[d.DESC_KEY_VIEW_MODEL];return h="function"==typeof h?new h(u):t.CompositeTemplateRenderer.invokeViewModelMethod(e,h,"initialize",[u])||h,this._VIEW_MODEL=h,(t.CompositeTemplateRenderer.invokeViewModelMethod(e,h,"activated",[u])||Promise.resolve(!0)).then(()=>this._processCompositeTemplate(e))},DefineMethodCallback:function(e,t,n){e[t]=function(){var e=n.internalName||t,r=a.CustomElementUtils.getElementBridge(this)._getViewModel();return r[e].apply(r,arguments)}},DefinePropertyCallback:function(e,n,o){var s=function(e,i){if(!this._BRIDGE.SaveEarlyPropertySet(this._ELEMENT,n,e)){i&&(e=a.transformPreactValue(this._ELEMENT,n,o,e));var s=d._getPropertyTracker(this._BRIDGE,n),l=s.peek();if(a.ElementUtils.comparePropertyValues(o.writeback,e,l))r.info(a.CustomElementUtils.getElementInfo(this._ELEMENT)+": Ignoring property set for property '"+n+"' with same value.");else if(i&&(e=this._BRIDGE.ValidatePropertySet(this._ELEMENT,n,e)),o._eventListener&&this._BRIDGE.SetEventListenerProperty(this._ELEMENT,n,e),s(e),!o._derived){var c=i?"external":"internal";t.BaseCustomElementBridge.__FirePropertyChangeEvent(this._ELEMENT,n,e,l,c),this._BRIDGE.State.dirtyProps.add(n)}}},l=function(e){var t=d._getPropertyTracker(this._BRIDGE,n),r=e?t.peek():t();return void 0===r&&t(r=i.getDefaultValue(o)),r};o._derived||t.BaseCustomElementBridge.__DefineDynamicObjectProperty(e._propsProto,n,function(){return l.bind(this,!1)()},function(e){s.bind(this)(e,!1)}),t.BaseCustomElementBridge.__DefineDynamicObjectProperty(e,n,function(){var e=a.CustomElementUtils.getElementBridge(this);return l.bind(e._PROPS,!0)()},function(e){var t=a.CustomElementUtils.getElementBridge(this);s.bind(t._PROPS)(e,!0)}),a.addPrivatePropGetterSetters(e,n)},GetMetadata:function(e){return e._metadata||{}},HandleDetached:function(e){t.BaseCustomElementBridge.proto.HandleDetached.call(this,e),t.CompositeTemplateRenderer.invokeViewModelMethod(e,this._VIEW_MODEL,"detached",[e]),t.CompositeTemplateRenderer.invokeViewModelMethod(e,this._VIEW_MODEL,"disconnected",[e]),this._verifyConnectDisconnect(e,d.DisconnectedState)},HandleAttached:function(e){this._verifyConnectDisconnect(e,d.ConnectedState)},HandleReattached:function(e){t.BaseCustomElementBridge.proto.HandleReattached.call(this,e),this._delayedTemplateRender?(this._delayedTemplateRender=!1,this._processCompositeTemplate(e)):t.CompositeTemplateRenderer.invokeViewModelMethod(e,this._VIEW_MODEL,"connected",[this._VM_CONTEXT]),this._verifyConnectDisconnect(e,d.ConnectedState)},InitializeElement:function(e){var n;t.BaseCustomElementBridge.proto.InitializeElement.call(this,e),a.CustomElementUtils.markPendingSubtreeHidden(e);var r=l.getElementRegistration(e.tagName).cache;if(!r.view){var i=(n=l.getElementDescriptor(e.tagName))[d.DESC_KEY_VIEW];r.view||(r.view="string"==typeof i?d._getDomNodes(i,e):i)}if(!r.css){n||(n=l.getElementDescriptor(e.tagName));var o=n[d.DESC_KEY_CSS];if(o){var s=document.createElement("style");s.type="text/css",s.styleSheet?s.styleSheet.cssText=o:s.appendChild(document.createTextNode(o)),document.head.appendChild(s),r.css=!0}}t.BaseCustomElementBridge.__InitProperties(e,e)},InitializePrototype:function(e){t.BaseCustomElementBridge.proto.InitializePrototype.call(this,e),Object.defineProperty(e,"_propsProto",{value:{}})},initializeBridge:function(e,n){t.BaseCustomElementBridge.proto.initializeBridge.call(this,e,n),e._propsProto&&(this._PROPS=Object.create(e._propsProto),this._PROPS._BRIDGE=this,this._PROPS._ELEMENT=e)},ShouldRemoveDisabled:function(){var e=this.METADATA.extension;return!!e&&!0===e._SHOULD_REMOVE_DISABLED},_getNodeBySubId:function(e){var n=d.__GetSubIdMap(this)[e.subId];if(n){if(n.alias){var r=t.CollectionUtils.copyInto({},e,void 0,!0);r.subId=n.alias;var i=n.node;return i.getNodeBySubId?i.getNodeBySubId(r):t.Components.__GetWidgetConstructor(i)("getNodeBySubId",r)}return n.node}return null},_getSubIdByNode:function(e){if(!this.contains(e))return null;var n,r,i,o=d.__GetNodeMap(this),s=c.getContainingComposite(e,this);if(null!=s){if((r=o[n=s.node.getAttribute(d.SUBID_MAP)])&&s.getSubIdByNode&&(i=s.getSubIdByNode(e))){var a=r.map[i.subId];return i.subId=a,i}return null}for(var l=e;l!==this&&!(n=l.getAttribute(d.SUBID_MAP)||l.getAttribute("data-oj-subid"));)l=l.parentNode;if(r=o[n]){if(!r.map)return{subId:n};var u=r.node;if(i=u.getSubIdByNode?u.getSubIdByNode(e):t.Components.__GetWidgetConstructor(u)("getSubIdByNode",e))return i.subId=r.map[i.subId],i}return null},_getViewModel:function(){if(!this._VIEW_MODEL)throw new a.JetElementError(this._ELEMENT,"Cannot access methods before element is upgraded.");return this._VIEW_MODEL},_verifyConnectDisconnect:function(e,t){void 0===this._verifyingState&&window.queueMicrotask(()=>{this._verifyingState===t&&(this._verifyingState===d.ConnectedState?this._verifiedConnect(e):this._verifiedDisconnect(e),this._verifyingState=void 0)}),this._verifyingState=t},_verifiedConnect:function(e){a.CustomElementUtils.getElementState(e).executeLifecycleCallbacks(!0)},_verifiedDisconnect:function(e){const t=a.CustomElementUtils.getElementState(e);t.cleanTemplates(),t.executeLifecycleCallbacks(!1)},_processCompositeTemplate:function(e){if(!e.isConnected)return void(this._delayedTemplateRender=!0);const n=a.CustomElementUtils.getElementState(e).getSlotMap(),r={props:this._PROPS,slotMap:n,slotNodeCounts:this._VM_CONTEXT.slotCounts,unique:this._VM_CONTEXT.unique,uniqueId:this._VM_CONTEXT.uniqueId,viewModel:this._VIEW_MODEL,viewModelContext:this._VM_CONTEXT};e[a.CHILD_BINDING_PROVIDER]="knockout",a.CustomElementUtils.unmarkPendingSubtreeHidden(e);const i=l.getElementRegistration(e.tagName).cache,o=d._getDomNodes(i.view,e);t.CompositeTemplateRenderer.renderTemplate(r,e,o)}}),d.register=function(e,n){var i={};i[t.BaseCustomElementBridge.DESC_KEY_META]=d._getResource(e,n,t.BaseCustomElementBridge.DESC_KEY_META),i[d.DESC_KEY_VIEW]=d._getResource(e,n,d.DESC_KEY_VIEW),i[d.DESC_KEY_CSS]=d._getResource(e,n,d.DESC_KEY_CSS),i[d.DESC_KEY_VIEW_MODEL]=d._getResource(e,n,d.DESC_KEY_VIEW_MODEL),i[d.DESC_KEY_PARSE_FUN]=n[d.DESC_KEY_PARSE_FUN];const o={descriptor:i,bridgeProto:d.proto,stateClass:u,composite:!0,cache:{}};var s=i[t.BaseCustomElementBridge.DESC_KEY_META];if(s||(r.warn("Composite registered'"+e.toLowerCase()+"' without Metadata."),s={}),null==i[d.DESC_KEY_VIEW])throw new Error("Cannot register composite '"+e.toLowerCase()+"' without a View.");i._metadata=t.BaseCustomElementBridge.__ProcessEventListeners(s,!1),l.registerElement(e,o,d.proto.getClass(i))},d._getDomNodes=function(e,t){var r,i;if("string"==typeof e)return n.stringToNodeArray(e);if(d._isDocumentFragment(e)){i=e.cloneNode(!0);var o=[];for(r=0;r<i.childNodes.length;r++)o.push(i.childNodes[r]);return o}if(Array.isArray(e)){for(i=[],r=0;r<e.length;r++)i.push(e[r].cloneNode(!0));return i}throw new a.JetElementError(t,"The composite View is not one of the following supported types: string, Array of DOM nodes, DocumentFragment")},d._generateSubIdMap=function(e,t){if(!e._SUBID_MAP){for(var n={},r={},i=t.children,o=0;o<i.length;o++)d._walkSubtree(n,r,i[o]);e._NODE_MAP=r,e._SUBID_MAP=n}},d._walkSubtree=function(e,n,r){if(!r.hasAttribute("slot")&&(d._addNodeToSubIdMap(e,n,r),!l.isElementRegistered(r.tagName)&&!t.Components.__GetWidgetConstructor(r)))for(var i=r.children,o=0;o<i.length;o++)d._walkSubtree(e,n,i[o])},d._addNodeToSubIdMap=function(e,t,n){var r=n.getAttribute("data-oj-subid"),i=n.getAttribute(d.SUBID_MAP);if(i){var o=JSON.parse(i);if("object"==typeof o&&!(o instanceof Array)){for(var s=o,a={},l=Object.keys(s),c=0;c<l.length;c++){var u=l[c];e[u]={alias:s[u],node:n},a[s[u]]=u}t[i]={map:a,node:n}}}else r&&(e[r]={node:n},t[r]={node:n})},d.__GetSubIdMap=function(e){var t=a.CustomElementUtils.getElementBridge(e);return d._generateSubIdMap(t,e),t._SUBID_MAP},d.__GetNodeMap=function(e){var t=a.CustomElementUtils.getElementBridge(e);return d._generateSubIdMap(t,e),t._NODE_MAP},d._getPropertyTracker=function(e,n){return e._TRACKERS||(e._TRACKERS={}),e._TRACKERS[n]||(e._TRACKERS[n]=t.CompositeTemplateRenderer.createTracker()),e._TRACKERS[n]},d._getResource=function(e,t,n){var r=t[n];if(null!=r){var i=Object.prototype.hasOwnProperty;if(i.call(r,"inline"))return r.inline;if(i.call(r,"promise"))throw new Error("Error while registering "+e+". The resource type for descriptor key '"+n+"' is no longer supported. The resource should be passed directly as the value instead.");return r}},d._isDocumentFragment=function(e){return window.DocumentFragment?e instanceof DocumentFragment:e&&11===e.nodeType};const h={};t._registerLegacyNamespaceProp("Composite",h),h.getMetadata=function(e){var t=h.getComponentMetadata(e);return t?Promise.resolve(t):null},h.getComponentMetadata=function(e){return l.isComposite(e)?l.getElementDescriptor(e)[t.BaseCustomElementBridge.DESC_KEY_META]:null},h.register=function(e,t){d.register(e,t)},h.getContainingComposite=c.getContainingComposite,h.__COMPOSITE_PROP="__oj_composite";const p=h.register,f=h.getMetadata,_=h.getComponentMetadata,m=h.getContainingComposite,g=h.__COMPOSITE_PROP;e.__COMPOSITE_PROP=g,e.getComponentMetadata=_,e.getContainingComposite=m,e.getMetadata=f,e.register=p,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojbindingprovider",["exports","ojs/ojkoshared"],function(e,t){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;const n=function(){},r=n.registerPreprocessor=function(e,n){t.registerPreprocessor(e,n)},i=n.createBindingExpressionEvaluator=function(e,n){return t.createBindingExpressionEvaluator(e,n)};e.createBindingExpressionEvaluator=i,e.registerPreprocessor=r,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojknockouttemplateutils",["exports","jqueryui-amd/widget","jquery","knockout"],function(e,t,n,r){"use strict";(n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n).widget("oj._ojDetectCleanData",{options:{cleanParent:!1},_destroy:function(){var e=r.utils.domNodeDisposal,t="cleanExternalData",n=e[t];e[t]=function(){};try{this.options.cleanParent&&null!=this.element[0].parentNode?r.cleanNode(this.element[0].parentNode):r.cleanNode(this.element[0])}finally{e[t]=n}}});const i={getRenderer:function(e,t){var i=function(i){var o=i._parentElement||i.parentElement,s=r.contextFor(i.componentElement);if(s){var a=s.createChildContext(i.data,null,function(e){e.$context=i});r.renderTemplate(e,a,{afterRender:function(e){n(e)._ojDetectCleanData()}},o,t?"replaceNode":"replaceChildren")}return null};return function(t){if(t.componentElement.classList&&t.componentElement.classList.contains("oj-dvtbase")){var r=document.createElement("div");r.style.display="none",r._dvtcontext=t._dvtcontext,t.componentElement.appendChild(r),Object.defineProperty(t,"_parentElement",{value:r,enumerable:!1}),Object.defineProperty(t,"_templateCleanup",{value:function(){n(r).remove()},enumerable:!1}),Object.defineProperty(t,"_templateName",{value:e,enumerable:!1}),i(t);var o=r.children[0];return o?(r.removeChild(o),n(r).remove(),{insert:o}):{preventDefault:!0}}return i(t)}}},o=i.getRenderer;e.getRenderer=o,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojresponsiveknockoututils",["exports","ojs/ojcore-base","ojs/ojcustomelement-registry","knockout","jquery","ojs/ojresponsiveutils","ojs/ojcustomelement-utils"],function(e,t,n,r,i,o,s){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;const a=function(e,t){if(null==e)throw new Error("ResponsiveKnockoutUtils.createMediaQueryObservable: aborting, queryString is null");var n=window.matchMedia(e),o=r.observable(n.matches);const a=function(e){o(e.matches)};let l,c;if(t){l=()=>{n.addListener(a)},c=()=>{n.removeListener(a)};s.CustomElementUtils.getElementState(t).addLifecycleCallbacks(l,c)}return n.addListener(a),o.dispose=function(){if(n.removeListener(a),c&&l){s.CustomElementUtils.getElementState(t).removeLifecycleCallbacks(l,c)}},-1!==navigator.userAgent.indexOf("WebKit")&&-1===navigator.userAgent.indexOf("Chrome")&&i(window).resize(function(){var e="oj-webkit-bug-123293";0===i("body").has("."+e).length&&i("body").append('<div aria-hidden="true" class="oj-helper-hidden-accessible '+e+'">'),i("."+e).text((new Date).getMilliseconds().toString())}),o},l=function(e){var t=o.getFrameworkQuery(o.FRAMEWORK_QUERY_KEY.XXL_UP),n=o.getFrameworkQuery(o.FRAMEWORK_QUERY_KEY.XL_UP),i=o.getFrameworkQuery(o.FRAMEWORK_QUERY_KEY.LG_UP),s=o.getFrameworkQuery(o.FRAMEWORK_QUERY_KEY.MD_UP),l=o.getFrameworkQuery(o.FRAMEWORK_QUERY_KEY.SM_UP),c=null==t?null:a(t,e),u=null==n?null:a(n,e),d=null==i?null:a(i,e),h=null==s?null:a(s,e),p=null==l?null:a(l,e),f=r.pureComputed(function(){if(c&&c())return o.SCREEN_RANGE.XXL;if(u&&u())return o.SCREEN_RANGE.XL;if(d&&d())return o.SCREEN_RANGE.LG;if(h&&h())return o.SCREEN_RANGE.MD;if(p&&p())return o.SCREEN_RANGE.SM;throw new Error(" NO MATCH in ResponsiveKnockoutUtils.createScreenRangeObservable")});return f.subscribe(()=>{p&&p.dispose(),h&&h.dispose(),d&&d.dispose(),u&&u.dispose(),c&&c.dispose()},null,"asleep"),f},c={};t._registerLegacyNamespaceProp("ResponsiveKnockoutUtils",c),c.createMediaQueryObservable=function(e){return a(e)},c.createCompositeMediaQueryObservable=function(e,t){const r=t?.nodeName;if(!t||!n.isComposite(r))throw new Error(`Incorrect usage of createCompositeMediaQueryObservable for ${r} - the method should be used on the composite components and componentElement should be given as a method argument.`);return a(e,t)},c.createScreenRangeObservable=function(){return l()},c.createCompositeScreenRangeObservable=function(e){const t=e?.nodeName;if(!e||!n.isComposite(t))throw new Error(`Incorrect usage of createCompositeScreenRangeObservable for ${t} - the method should be used on the composite components and componentElement should be given as a method argument.`);return l(e)};const{createScreenRangeObservable:u,createMediaQueryObservable:d,createCompositeScreenRangeObservable:h,createCompositeMediaQueryObservable:p}=c;e.createCompositeMediaQueryObservable=p,e.createCompositeScreenRangeObservable=h,e.createMediaQueryObservable=d,e.createScreenRangeObservable=u,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojkeysetimpl",["ojs/ojcore-base"],function(e){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;return function(t){this.NOT_A_KEY={},this.has=function(e){return this.get(e)!==this.NOT_A_KEY},this.get=function(t){var n,r,i=this.NOT_A_KEY,o=this;if(this._keys.has(t))return t;if(t!==Object(t))return this.NOT_A_KEY;if("function"==typeof Symbol&&"function"==typeof Set.prototype[Symbol.iterator])for(r=(n=this._keys[Symbol.iterator]()).next();!r.done;){if(e.KeyUtils.equals(r.value,t))return r.value;r=n.next()}else this._keys.forEach(function(n){i===o.NOT_A_KEY&&e.KeyUtils.equals(n,t)&&(i=n)});return i},this.InitializeWithKeys=function(e){this._keys=new Set(e)},this.InitializeWithKeys(t)}}),define("ojs/ojmonitoring",["exports"],function(e){"use strict";const t={},n=Symbol();function r(){return t[n]}e.getWritebackMonitor=r,e.performMonitoredWriteback=function(e,t,n,i){if(t){const o=r();o?o(e,n,t.bind(null,i)):t(i)}},e.setWritebackMonitor=function(e){t[n]=e},Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojbindpropagation",["exports","ojs/ojcustomelement-registry"],function(e,t){"use strict";const n=Symbol("StaticContextPropagation"),r=Symbol("ConsumedContext");const i=new Map;e.CONSUMED_CONTEXT=r,e.STATIC_PROPAGATION=n,e.getPropagationMetadataViaCache=function(e,o){let s=i.get(e);if(void 0!==s)return s;s=null;const a=o.properties??{};Object.keys(a).forEach(e=>{const t=a[e],n=t?.binding?.provide,r=t?.binding?.consume;if(n||r){if(t.properties)throw new Error("Propagating complex properties is not supported!");s=s??new Map,s.set(e,[n,r])}});const l=o.extension?._BINDING?.provide;if(l){s=s??new Map;const e=new Map;l.forEach((t,n)=>{e.set(n,{name:n,default:t})}),s.set(n,[e,void 0])}const c=t.getElementRegistration(e)?.cache?.contexts;return c&&s.set(r,[void 0,c]),i.set(e,s),s},Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojknockout-base",["exports","ojs/ojkoshared","ojs/ojcore","ojs/ojcustomelement-registry","knockout","ojs/ojdomutils","ojs/ojlogger","ojs/ojcustomelement-utils","ojs/ojmonitoring","ojs/ojbindpropagation","ojs/ojkeysetimpl","ojs/ojcontext","ojs/ojtemplateengine-ko","ojs/ojcore-base","ojs/ojknockouttemplateutils","ojs/ojresponsiveknockoututils"],function(e,t,n,r,i,o,s,a,l,c,u,d,h,p,f,_){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,u=u&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u,d=d&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d,h=h&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h,p=p&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p,t.addPostprocessor({nodeHasBindings:function(e,t){return n.BaseCustomElementBridge?t||1===e.nodeType&&r.isElementRegistered(e.nodeName):t},getBindingAccessors:function(e,t,n){if(1===e.nodeType){var i=e.nodeName;r.isElementRegistered(i)&&((n=n||{})._ojCustomElement=function(){const e=r.isComposite(i),t=r.isVComponent(i);return{skipThrottling:e||t}})}return n}});const m=function(e,t){this.Init&&this.Init(e,t)};var g,v,y;n.Object.createSubclass(m,n.Object,"oj.ComponentBinding"),n._registerLegacyNamespaceProp("ComponentBinding",m),m.deliverChanges=function(){t.getGlobalChangeQueue().deliverChanges()},m.__cloneIfArray=function(e){return Array.isArray(e)&&(e=e.slice()),e},m.__getKnockoutVersion=function(){return i.version},g="cleanExternalData",v=i.utils.domNodeDisposal,y=v[g],v[g]=function(e){var t=o?o.setInKoCleanExternal:null;t&&t(e);try{y(e)}finally{t&&t(null)}};const E=function(e,t){this.Init(e,t)};n.Object.createSubclass(E,n.Object,"ComponentBinding.ComponentChangeTracker"),E.prototype.Init=function(e,t){E.superclass.Init.call(this),this._updateCallback=e,this._queue=t,this._changes={},this._suspendCountMap={}},E.prototype.addChange=function(e,t){this._isSuspended(e)||this._disposed||(this._changes[e]=t,this._queue.registerComponentChanges(this))},E.prototype.dispose=function(){this._disposed=!0},E.prototype.resume=function(e){var t=this._suspendCountMap[e]||0;(t-=1)<0?s.error("ComponentChangeTracker suspendCount underflow"):0===t?delete this._suspendCountMap[e]:this._suspendCountMap[e]=t},E.prototype.suspend=function(e){var t=this._suspendCountMap[e]||0;this._suspendCountMap[e]=t+1},E.prototype.applyChanges=function(e){this._disposed||this._updateCallback(e)},E.prototype.flushChanges=function(){var e=this._changes;return this._changes={},e},E.prototype._isSuspended=function(e){return(this._suspendCountMap[e]||0)>=1};const b={};var S,T;n._registerLegacyNamespaceProp("__ExpressionUtils",b),S=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,T="_ko_property_writers",b.getPropertyWriterExpression=function(e){if(null==e||["true","false","null","undefined"].indexOf(e)>=0)return null;var t=(e=e.trim()).match(S);if(null===t)return null;var n=t[1]?"Object("+t[1]+")"+t[2]:e;return"{"+T+": function(v){"+n+"=v;}}"},b.getWriter=function(e){return e[T]};const C=function(e,n,o){var c=function(){if(o)return null;return new E(function(t){for(var n=Object.keys(t),r=0;r<n.length;r++){v(n[r])}try{e.setProperties(t)}finally{for(var i=0;i<n.length;i++){y(n[i])}}},t.getGlobalChangeQueue())}(),u={},d={},h={},p={},f="Changed";function _(e){return e.$current||e.$data}function g(t,n,i){var o=u[n];if(o||(o=function(e){var t,n=_(e),r=function(r){t&&t(r,n,e)};return r.setListener=function(e){t=e},r}(t),u[n]=o,e.addEventListener(n,o)),!(null==i||i instanceof Function)){var s=a.AttributeUtils.eventTypeToEventListenerProperty(n),l=`Invalid type '${typeof i}' found for attribute '${a.AttributeUtils.propertyNameToAttribute(s)}'. Expected value of type 'function'."`;if(r.isElementRegistered(e.tagName)){a.CustomElementUtils.getElementState(e).rejectBindingProvider(l)}throw new a.JetElementError(e,l)}o.setListener(i)}function v(e){var t=p[e]||0;t+=1,p[e]=t}function y(e){var t=p[e];t?(t-=1,p[e]=0===t?null:t):s.error("Property count undefrlow")}this.setupPropertyBinding=function(r,o,u,E,S){if(!u)return;var T=function(e,t){var n=e.split("."),r=t;n.shift();for(var i=0;i<n.length&&(r=r.properties);i++)r=r[n[i]];return r}(o,u);if(!T)return;var C=d[o];C&&(C.dispose(),d[o]=null);var P=h[o];if(P&&(e.removeEventListener(o+f,P),h[o]=null),u._domListener){var O=a.AttributeUtils.eventListenerPropertyToEventType(o);g(n,O,null)}let A,I,R;if(void 0===r){let e;S?n.$provided&&(e=n.$provided.get(S)):e=null,e&&(A=()=>i.unwrap(e))}else{const e=a.AttributeUtils.getExpressionInfo(r);I=e.expr,I&&(A=t.createEvaluator(I,n),R=e.downstreamOnly)}if(A){if(!u.readOnly){var w=!0;i.ignoreDependencies(function(){d[o]=i.computed(function(){var t,r,s,l=A(n),d=i.utils.unwrapObservable(l);if(u._domListener){var h=a.AttributeUtils.eventListenerPropertyToEventType(o);g(n,h,d)}else Array.isArray(d)&&(d=d.slice()),u._eventListener&&d&&d instanceof Function&&(r=d,s=_(t=n),d=function(e){r(e,s,t)}),!w&&c?c.addChange(o,d):function(t,n){v(t);try{e.setProperty(t,n)}catch(t){throw a.CustomElementUtils.getElementState(e).rejectBindingProvider(t),t}finally{y(t)}}(o,d),w&&E&&E(d)})}),w=!1}void 0!==I&&u.writeback&&!R&&(h[o]=function(r,o,a){var c=r.split("."),u=c[0],d=function(e){if(!function(e){return p[e]}(u)){let u,d;i.ignoreDependencies(function(){for(var h=e.detail.value,p=1;p<c.length;p++){h=h[c[p]]}var f=a(n);if(i.isObservable(f))i.isWriteableObservable(f)?d=f:u="the observable is not writeable";else{var _=b.getPropertyWriterExpression(o);if(null!=_){const e=t.createEvaluator(_,n);d=b.getWriter(e(n))}else u="the expression is not a valid update target"}d?l.performMonitoredWriteback(r,d,e,m.__cloneIfArray(h)):u&&s.info("The expression '%s' for property '%s' was not updated because %s.",o,r,u)})}};return e.addEventListener(u+f,d),d}(o,I,A))}},this.teardown=function(){var t,n=Object.keys(d);for(t=0;t<n.length;t++){var r=d[n[t]];r&&r.dispose()}for(d={},n=Object.keys(h),t=0;t<n.length;t++){var i=n[t].split(".")[0];e.removeEventListener(i+f,h[i])}for(h={},n=Object.keys(u),t=0;t<n.length;t++){var o=n[t];e.removeEventListener(o,u[o])}u={},c&&c.dispose()}},P=function(){this._resolveWhenChildrenBindingsApplied=function(e,t){var n=this._getChildrenBindingsAppliedPromises(e);if("none"===t||0===n.length)a.CustomElementUtils.getElementState(e).resolveBindingProvider(this);else{for(var r=[];n.length>0;){var i=n.shift();("nearestCustomElement"===t||"immediate"===t&&!0===i.immediate)&&r.push(i.promiseCallback)}Promise.all(r).then(function(){this._resolveWhenChildrenBindingsApplied(e,t)}.bind(this))}},this._getChildrenBindingsAppliedPromises=function(e,t){return!e._whenChildrenBindingsApplied&&t&&Object.defineProperty(e,"_whenChildrenBindingsApplied",{value:[],enumerable:!1}),e._whenChildrenBindingsApplied||[]},this.__RegisterBindingAppliedPromiseForChildren=function(e,t){var n=null;if(e){var r=new Promise(function(e){n=e});this._getChildrenBindingsAppliedPromises(e,!0),e._whenChildrenBindingsApplied.push({immediate:t,promiseCallback:r})}return n},this.__NotifyBindingsApplied=function(e){var t=a.CustomElementUtils.getElementState(e).getTrackChildrenOption();this._resolveWhenChildrenBindingsApplied(e,t)},this.__NotifyBindingsDisposed=function(e){a.CustomElementUtils.getElementState(e).disposeBindingProvider(e)},this.__GetThrottlePromise=function(){return t.getGlobalChangeQueue().getThrottlePromise()},this.__ExtendBindingContext=function(e,n,r,i,o){return t.extendBindingContext(e,n,r,i,o)},this.__ContextFor=function(e){return e.__ojBindingContext?e.__ojBindingContext:i.contextFor(e)},this.__UnwrapObservable=function(e){return i.utils.unwrapObservable(e)},this.__IsObservable=function(e){return i.isObservable(e)},this.__KoComputed=function(e,t,n){return i.computed(e,t,n)},this.__KoIsInitial=function(){return i.computedContext.isInitial()},this.__CleanNode=function(e){i.cleanNode(e)}};P.getInstance=function(){return P._instance},P._instance=new P,oj._registerLegacyNamespaceProp("_KnockoutBindingProvider",P),function(){i.bindingHandlers._ojCustomElement={after:["attr"],init:function(l,u,d,h,p){var f,_;!p||!p.$provided||p.$provided instanceof Map||(p.$provided=new Map(Object.entries(p.$provided)));const m=r.getMetadata(l.tagName),g=m.properties||{},{provide:v,consume:y,cleanup:E}=function(e,r){const i=new Map,l=new Map,u=Object.create(null),d=c.getPropagationMetadataViaCache(e.localName,r);if(null!==d){const h=r.properties||{};for(const[r,[p,f]]of d){if(void 0!==p){const l=[],d=[];if(r===c.STATIC_PROPAGATION?p.forEach(e=>{i.set(e.name,e)}):p.forEach(e=>{const t=e.name;if(void 0===t)throw new Error("name attribute for the binding/provide metadata is required!");const n=e.default,r=o(e.transform,n);l.push(r),d.push({name:t,obs:r})}),d.length>0){const o=s(l);i.set(r,{set:o,vars:d});const c=n(o),p=r+t;e.addEventListener(p,c),u[p]=c;const f=a.AttributeUtils.propertyNameToAttribute(r);if(e.hasAttribute(f)){const t=e.getAttribute(f);a.AttributeUtils.getExpressionInfo(t).expr||o(a.AttributeUtils.attributeToPropertyValue(e,f,t,h[r]))}}}if(void 0!==f)if(r===c.CONSUMED_CONTEXT)l.set(r,f);else{const e=f.name;if(void 0===e)throw new Error("'name' property on the binding/consume metadata is required!");l.set(r,e)}}}function h(){Object.keys(u).forEach(t=>e.removeEventListener(t,u[t]))}return{provide:i,consume:l,cleanup:h}}(l,m);function b(){f&&(f.teardown(),f=null),_&&(l.removeEventListener(e,_),_=null),P.getInstance().__NotifyBindingsDisposed(l)}i.computed(function(){var t=u().skipThrottling;const n=i.computedContext.isInitial();n||b(),function(t,n){f=new C(l,p,t);var r={_domListener:!0};a.CustomElementUtils.getElementState(l).beginApplyingBindings();for(var o=l.attributes,s=0;s<o.length;s++){var u=o[s],d=a.AttributeUtils.attributeToPropertyName(u.nodeName);let e,t;const i=a.AttributeUtils.isEventListenerProperty(d)&&!g[d];if(!i){t=d.split(".")[0];const r=v.get(t);e=n&&r?r.set:void 0}f.setupPropertyBinding(u.value,d,i?r:g[t],e)}y.forEach((e,t)=>{if("string"!=typeof t||l.hasAttribute(a.AttributeUtils.propertyNameToAttribute(t))){if(t===c.CONSUMED_CONTEXT){const t=p.$provided,n=new Map;e.forEach(e=>{t&&t.has(e)&&n.set(e,i.unwrap(t.get(e)))}),l.setProperty("__oj_private_contexts",n)}}else{const r=v.get(t),i=n&&r?r.set:void 0;f.setupPropertyBinding(void 0,t,g[t],i,e)}}),_=function(e){var t=e.detail,n=t.attribute,i=a.AttributeUtils.attributeToPropertyName(n),o=a.AttributeUtils.isEventListenerProperty(i)&&!g[i]?r:g[i.split(".")[0]];f.setupPropertyBinding(t.value,i,o,void 0,y.get(i))},l.addEventListener(e,_)}(t,n)},null,{disposeWhenNodeIsRemoved:l}),i.utils.domNodeDisposal.addDisposeCallback(l,function(){b(),E()});const S=function(e,t){if(0===t.size)return e;const n=e.$provided,r=new Map(n);return t.forEach(e=>{if(e.vars){e.vars.forEach(e=>{const t=e.obs;r.set(e.name,t)})}else r.set(e.name,e.default)}),e.extend({$provided:r})}(p,v);return i.applyBindingsToDescendants(S,l),P.getInstance().__NotifyBindingsApplied(l),{controlsDescendantBindings:!0}}};const e="attribute-changed",t="Changed";function n(e){return t=>e(t.detail.value)}function o(e,t){const n=i.observable(t);return e?i.pureComputed({write:t=>n(e.hasOwnProperty(t)?e[t]:t),read:()=>n()}):n}function s(e){return t=>e.forEach(e=>e(t))}}(),function(){var e="_ojbindingsobj";function n(e,t,n,r){var i=s(e.getAttribute(n),r);if(i)return o(e,t,"ko "+t+":"+i)}function o(e,t,n){for(var r=e.tagName.toLowerCase(),i=r,o=e.attributes,s=0;s<o.length;s++){var l=o[s];i+=" ",i+=l.name,i+="='",i+=l.value,i+="'"}var c=e.parentNode,u=document.createComment(i),d=document.createComment("/"+r);c.insertBefore(u,e),e[a.OJ_BIND_CONVERTED_NODE]=u;var h=document.createComment(n),p=document.createComment("/ko");c.insertBefore(h,e);var f,_=[u,h];if("if"===t)for(;e.childNodes.length>0;)f=e.childNodes[0],c.insertBefore(f,e),_.push(f);else if("_ojBindForEach_"===t)for(;e.childNodes.length>0;)f=e.childNodes[0],c.insertBefore(f,e),_.push(f);return c.insertBefore(p,e),_.push(p),c.replaceChild(d,e),_.push(d),_}function s(e,t){if(null!=e){var n=a.AttributeUtils.getExpressionInfo(e).expr;return null==n&&(n=t?"'"+e+"'":e),n}return null}function l(e,n,r,o){var s,l=a.AttributeUtils.getExpressionInfo(r).expr;if(null==l){var c=a.AttributeUtils.coerceValue(n,"class",r,"any");s=function(){return Array.isArray(c)?c.join(" "):c}}else{var u=t.createEvaluator(l,o).bind(null,o);s=i.pureComputed(function(){var e=i.unwrap(u());return Array.isArray(e)?e.join(" "):e})}e.css=s}function c(e,n,r,i,o){var s=a.AttributeUtils.getExpressionInfo(r).expr;return null==s?function(){return"object"===o?a.AttributeUtils.coerceValue(e,n,r,o):r}:t.createEvaluator(s,i).bind(null,i)}function u(e){return function(){for(var t={},n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];t[i]=e[i]()}return t}}function d(t){if(1!==t.nodeType)return{};if(!t[e]){for(var n={},i=[],o=[],s=[],a=t.attributes,l=0;l<a.length;l++){var c=a[l],u=h(c.name);u&&("style"===u?n._STYLE_BIND=u:"style."===u.substring(0,6)?o.push(u):i.push(u)),r.isElementRegistered(t.nodeName)||"on-"!==c.name.substring(0,3)||s.push(c)}if(o.length){if(n._STYLE_BIND)throw new Error("Cannot have both style and style.* data bound attributes on "+t.tagName+" with id "+t.id);n._STYLE_BIND=o}i.length&&(n._ATTR_BIND=i),s.length&&(n._EVENT_BIND=s),Object.defineProperty(t,e,{value:n})}return t[e]}function h(e){return e&&":"===e.charAt(0)?e.slice(1):null}function p(e){return":"+e}t.registerPreprocessor("oj-bind-text",function(e){return n(e,"text","value",!0)}),t.registerPreprocessor("oj-bind-if",function(e){return n(e,"if","test",!1)}),t.registerPreprocessor("oj-bind-for-each",function(e){var t=e.getAttribute("data"),n=a.AttributeUtils.getExpressionInfo(t).expr;if(!n)try{var r=JSON.parse(t);if(!Array.isArray(r))throw new Error("got value "+t);n=t}catch(e){throw new Error("The value on the oj-bind-for-each data attribute should be either a JSON array or an expression : "+e)}var i=s(e.getAttribute("as"),!0);if(!n)return;var l="ko _ojBindForEach_:{data:"+n;return o(e,"_ojBindForEach_",l+=i?",as:"+i+"}":"}")}),t.addPostprocessor({nodeHasBindings:function(e,t){var n=d(e);return t||null!=n._ATTR_BIND||null!=n._STYLE_BIND||null!=n._EVENT_BIND},getBindingAccessors:function(e,t,n){if(1===e.nodeType){n=n||{};var r,o,s=d(e),h=s._STYLE_BIND;if(h){if(n.style)throw new Error("Cannot have both style data-bind and JET style binding on "+e.tagName+" with id "+e.id);if("style"===h)n[h]=c(e,h,e.getAttribute(p(h)),t,"object");else{var f={};for(r=0;r<h.length;r++){o=h[r],f[a.AttributeUtils.attributeToPropertyName(o.substring(6))]=c(e,o,e.getAttribute(p(o)),t,"string")}n.style=u(f)}}var _=s._ATTR_BIND;if(_){if(n.attr)throw new Error("Cannot have both attr data-bind and JET attribute binding on "+e.tagName+" with id "+e.id);var m={};for(r=0;r<_.length;r++)"class"===(o=_[r])?l(n,e,e.getAttribute(p(o)),t):m[o]=c(e,o,e.getAttribute(p(o)),t,"string");n.attr=u(m)}var g=s._EVENT_BIND;if(g){var v=new C(e,t,!0);for(r=0;r<g.length;r++){var y=g[r],E=a.AttributeUtils.attributeToPropertyName(y.nodeName);v.setupPropertyBinding(y.value,E,{_domListener:!0})}i.utils.domNodeDisposal.addDisposeCallback(e,function(){v&&(v.teardown(),v=null)})}}return n}})}(),function(){var e=document&&"function"==typeof document.createDocumentFragment;function t(e,t,n){return{status:"added",value:e,index:t,key:n}}function n(e){return{status:"deleted",value:{},index:e}}function r(e,t){var n;if(e){var r=e.length;n=new Array(r);for(var i=0;i<r;i++)n[i]=t(e[i],i,e)}return n}var o=function(e,t,n){if(Array.isArray(t)){var r=document.createDocumentFragment();for(let e=0,n=t.length;e!==n;++e)r.appendChild(t[e]);if(i.virtualElements.insertAfter(e,r,n),p.Components)for(let e=0,n=t.length;e!==n;++e)p.Components.subtreeAttached(t[e])}else i.virtualElements.insertAfter(e,t,n),p.Components&&p.Components.subtreeAttached(t)},l="_ko_ffe_pending_delete_index",c="oj-bind-for-each: abandoned promise";function f(e,n,o){this.element=n.element||e,i.applyBindingsToDescendants(o,this.element),function(e){for(var t,n,r=i.virtualElements.childNodes(e),o=0;o<r.length;o++){var s=r[o];if(1===s.nodeType&&"template"===s.nodeName.toLowerCase()){var l=a.CustomElementUtils.getSlotAssignment(s);if(t||l&&""!==l){if(n||"noData"!==l){var c;switch(l){case"":c="Multiple default templates found: oj-bind-for-each requires a single default template element as its direct child";break;case"noData":c="Multiple noData templates found: oj-bind-for-each requires a single noData template element as its direct child";break;default:c="Unknown template slot detected - "+l+": oj-bind-for-each supports a single default template and a single noData template"}throw new Error(c)}n=s}else t=s}}if(!t)throw new Error("Default template not found: oj-bind-for-each requires a single default template element as its direct child");e._templateNode=t,e._noDataTemplateNode=n}(this.element),this.element._templateNode.__ojBindingContext=i.contextFor(this.element._templateNode),this.data=n.data,this.as=n.as,this.changeQueue=[],this.firstLastNodesList=[],this.indexesToDelete=[],this.rendering_queued=!1,this.pendingDeletes=[],this.headDataPromise=null,this.tailDataPromise=null,i.virtualElements.emptyNode(this.element),this._initChildrenBindingsAppliedPromise();var s=i.unwrap(this.data);s.fetchFirst?(this.currentDataProvider=s,this.fetchData()):this.onArrayChange(r(s,t)),this.addSubscriptions()}f.PENDING_DELETE_INDEX_KEY=l,f.prototype.addSubscriptions=function(){var e=i.isObservable(this.data);this.currentDataProvider?(this.dataMutateHandler=this.handleDataMutateEvent.bind(this),this.dataRefreshHandler=this.handleDataRefreshEvent.bind(this),this.currentDataProvider.addEventListener("mutate",this.dataMutateHandler),this.currentDataProvider.addEventListener("refresh",this.dataRefreshHandler),e&&(this.changeSubs=this.data.subscribe(this.onDataChange,this,"change"))):e&&(this.data.indexOf||(this.data=this.data.extend({trackArrayChanges:!0})),this.changeArraySubs=this.data.subscribe(this.onArrayDataChange,this,"arrayChange"),this.changeSubs=this.data.subscribe(this.onDataChange,this,"change"))},f.prototype.removeSubscriptions=function(){this.changeSubs&&this.changeSubs.dispose(),this.changeArraySubs&&this.changeArraySubs.dispose(),this.currentDataProvider&&(this.currentDataProvider.removeEventListener("mutate",this.dataMutateHandler),this.currentDataProvider.removeEventListener("refresh",this.dataRefreshHandler))},f.prototype.onArrayDataChange=function(e){this.arrayChangeSet=e},f.prototype.onDataChange=function(e){this.arrayChangeSet?(this.onArrayChange(this.arrayChangeSet),this.arrayChangeSet=null):(this.setData({data:this.data,dataProvider:e.fetchFirst?e:null}),this.recreateContent(e))},f.prototype.recreateContent=function(e){this.changeQueue=[],this.firstLastNodesList=[],this.indexesToDelete=[],this.rendering_queued=!1,this.pendingDeletes=[],this._noDataNodes=null,i.virtualElements.emptyNode(this.element),e.fetchFirst?this.fetchData():this.onArrayChange(r(e,t))},f.prototype.registerBusyState=function(){var e=this.element.parentNode;return d.getContext(e).getBusyContext().addBusyState({description:"oj-bind-for-each binding on a node with the Id "+e.id+"is loading data."})},f.prototype._initChildrenBindingsAppliedPromise=function(){var e=this.element._templateNode.__ojBindingContext.$current,t=e?{_nearestCustomParent:e._nearestCustomParent,_immediate:e._immediate}:null,n=function(e,t){for(var n=e.parentNode;n&&!a.ElementUtils.isValidCustomElementName(n.localName);)n=n.parentNode;return n||(n=t?t._nearestCustomParent:null),n}(this.element,t),r=function(e,t,n){var r=!1,i=!!n;return e.parentNode===t?r=!0:i&&!e.parentNode.parentNode&&(r=n._immediate),r}(this.element,n,t);this.trackingContext={_nearestCustomParent:n,_immediate:r},this._childrenBindingsPromiseResolver=P.getInstance().__RegisterBindingAppliedPromiseForChildren(n,r)},f.prototype._resolveChildrenBindingsAppliedPromise=function(){this._childrenBindingsPromiseResolver&&(this._childrenBindingsPromiseResolver(),this._childrenBindingsPromiseResolver=null)},f.prototype.resetChainIfCompleted=function(e){e===this.tailDataPromise&&(this.headDataPromise=null,this.tailDataPromise=null)},f.prototype.promiseRejectHelper=function(e,t,n){if(t(),this.resetChainIfCompleted(n),!e._CAUGHT_PROMISE_REJECTION&&e.message!==c){if(e instanceof Error)throw e._CAUGHT_PROMISE_REJECTION=!0,e;throw new Error(e)}s.info(e)},f.prototype.fetchData=function(){var e,n,r,i=this.registerBusyState(),o=this.currentDataProvider.fetchFirst({size:-1})[Symbol.asyncIterator](),s=function(a,l,u){return function(d){if(u.headDataPromise===r){for(var h=d.value,p=a.length,f=0;f<h.metadata.length&&f<h.data.length;f++)a.push(t(h.data[f],p,h.metadata[f].key)),p+=1;d.done?(l.call(u,a),i(),e(),u.resetChainIfCompleted(r)):o.next().then(s(a,l,u),function(e){i(),n(e),u.resetChainIfCompleted(r)})}else i(),n(new Error(c))}};(r=new Promise(function(t,a){e=t,n=a,o.next().then(s([],this.onArrayChange,this),function(e){i(),n(e),this.resetChainIfCompleted(r)}.bind(this))}.bind(this))).catch(function(e){if(e.message!==c){if(e instanceof Error)throw e._CAUGHT_PROMISE_REJECTION=!0,e;throw new Error(e)}}),this.headDataPromise=r,this.tailDataPromise=r},f.prototype.getIndexesForEvent=function(e,t){var n,r=[];if(Array.isArray(e))for(n=0;n<e.length;n++)r.push(e[n]);else if(t){var i=Array.isArray(t)?t.length:t.size,o=new u(t),s=new Map,a=0;for(n=0;n<this.firstLastNodesList.length&&a<i;n++){var l=this.firstLastNodesList[n].key,c=o.get(l);c!==o.NOT_A_KEY&&(s.set(c,n),a+=1)}t.forEach(function(e){r.push(s.get(e))})}return r},f.prototype.handleDataMutateEvent=function(e){var t,n,r={},i=this;this.tailDataPromise?(t=this.registerBusyState(),(n=this.tailDataPromise.then(function(){return t(),i.getDataMutationHelper(e,r)})).catch(function(e){i.promiseRejectHelper(e,t,n)})):(n=this.getDataMutationHelper(e,r),this.headDataPromise=n),this.tailDataPromise=n,r.head=this.headDataPromise,r.current=n},f.prototype.getDataMutationHelper=function(e,r){var i,o,s=e.detail.add,a=e.detail.remove,l=e.detail.update,u=s&&s.data,d=l&&l.data,h=()=>{if(d){var e=0,r=[],i=this.getIndexesForEvent(l.indexes,l.keys);l.keys.forEach(function(o){if(void 0!==i[e]){var s=d[e];r.push(n(i[e])),r.push(t(s,i[e],o))}e+=1}),this.onArrayChange(r)}},p=()=>{if(a){var e=this.getIndexesForEvent(a.indexes,a.keys);e=e.filter(function(e){return void 0!==e}),this.onArrayChange(e.map(n))}},f=()=>{if(u){var e=this.getIndexesForEvent(s.indexes,s.addBeforeKeys?s.addBeforeKeys:s.afterKeys),n=[],r=0;s.keys.forEach(function(i){var o=u[r];n.push(t(o,function(t){var n=e.length>t?e[t]:this.firstLastNodesList.length+t;return void 0===n?this.firstLastNodesList.length:n}(r),i)),r+=1},this),this.onArrayChange(n)}};if(l&&!Array.isArray(d)||s&&!Array.isArray(u)){var _=l&&!Array.isArray(d)?this.currentDataProvider.fetchByKeys({keys:l.keys}):Promise.resolve(),m=s&&!Array.isArray(u)?this.currentDataProvider.fetchByKeys({keys:s.keys}):Promise.resolve();i=this.registerBusyState(),(o=Promise.all([_,m]).then(e=>{if(r.head!==this.headDataPromise)throw i(),new Error(c);var t=e[0];t&&t.results.size>0&&(d=[...l.keys].map(e=>t.results.get(e).data)),h(),p();var n=e[1];n&&n.results.size>0&&(u=[...s.keys].map(e=>n.results.get(e).data)),f(),i(),this.resetChainIfCompleted(r.current)})).catch(e=>{this.promiseRejectHelper(e,i,r.current)})}else h(),p(),f();return o},f.prototype.handleDataRefreshEvent=function(){this.recreateContent(this.currentDataProvider)},f.prototype._addNoData=function(){0===this.firstLastNodesList.length&&this.element._noDataTemplateNode&&(this._noDataNodes=h.execute(this.element,this.element._noDataTemplateNode,{},null),this.insertAllAfter(this._noDataNodes))},f.prototype._removeNoData=function(){this._noDataNodes&&(this._noDataNodes.forEach(e=>{h.clean(e,this.element),e.parentNode.removeChild(e)}),this._noDataNodes=null)},f.prototype.onArrayChange=function(e){this._removeNoData();for(var t={added:[],deleted:[]},n="added",r="deleted",i=0,o=e.length;i<o;i++)if(t[n].length&&e[i].status===n){var s=t[n][t[n].length-1];(s.isBatch?s.index+s.values.length-1:s.index)+1===e[i].index?(s.isBatch||(s={isBatch:!0,status:n,index:s.index,values:[s.value],keys:[s.key]},t[n].splice(t[n].length-1,1,s)),s.values.push(e[i].value),s.keys.push(e[i].key)):t[e[i].status].push(e[i])}else t[e[i].status].push(e[i]);t[r].length>0&&(this.changeQueue.push.apply(this.changeQueue,t[r]),this.changeQueue.push({status:"clearDeletedIndexes"})),this.changeQueue.push.apply(this.changeQueue,t[n]),this.changeQueue.length>0&&!this.rendering_queued&&(this.rendering_queued=!0,this.processQueue()),this._addNoData(),this._resolveChildrenBindingsAppliedPromise()},f.prototype.processQueue=function(){var e=this,t=9007199254740991;i.utils.arrayForEach(this.changeQueue,function(n){"number"==typeof n.index&&(t=Math.min(t,n.index)),e[n.status](n)}),this.flushPendingDeletes(),this.rendering_queued=!1,this.updateIndexes(t),this.changeQueue=[]},f.prototype.added=function(e){for(var t=e.index,n=e.isBatch?e.values:[e.value],r=e.isBatch?e.keys:[e.key],o=this.getLastNodeBeforeIndex(t),s=[],a=0,l=n.length;a<l;++a){var c,u,d=this.getPendingDeleteFor(n[a]);d&&d.nodesets.length?(c=d.nodesets.pop(),u=d.currentChildContext):(u={data:n[a],index:t+a,observableIndex:i.observable()},Object.defineProperties(u,{_nearestCustomParent:{value:this.trackingContext._nearestCustomParent,enumerable:!1},_immediate:{value:this.trackingContext._immediate,enumerable:!1}}),c=h.execute(this.element,this.element._templateNode,u,this.as)),s.push.apply(s,Array.prototype.slice.call(c)),this.firstLastNodesList.splice(t+a,0,{first:c[0],last:c[c.length-1],key:r?r[a]:null,currentChildContext:u})}this.insertAllAfter(s,o)},f.prototype.getNodesForIndex=function(e){var t=[],n=this.firstLastNodesList[e].first,r=this.firstLastNodesList[e].last;for(t.push(n);n&&n!==r;)n=n.nextSibling,t.push(n);return t},f.prototype.getLastNodeBeforeIndex=function(e){return e<1||e-1>=this.firstLastNodesList.length?null:this.firstLastNodesList[e-1].last},f.prototype.insertAllAfter=function(t,n){var r,i=this.element;if(1===t.length)o(i,t[0],n);else if(e)o(i,t,n);else for(r=t.length-1;r>=0;--r){var s=t[r];if(!s)break;o(i,s,n)}return t},f.prototype.shouldDelayDeletion=function(e){return e&&("object"==typeof e||"function"==typeof e)},f.prototype.getPendingDeleteFor=function(e){var t=e&&e[l];return void 0===t?null:this.pendingDeletes[t]},f.prototype.getOrCreatePendingDeleteFor=function(e){var t=this.getPendingDeleteFor(e);return t||(t={data:e,nodesets:[]},e[l]=this.pendingDeletes.length,this.pendingDeletes.push(t),t)},f.prototype.deleted=function(e){if(this.shouldDelayDeletion(e.value)){var t=this.getOrCreatePendingDeleteFor(e.value);t.nodesets.push(this.getNodesForIndex(e.index)),t.currentChildContext=this.firstLastNodesList[e.index].currentChildContext}else this.removeNodes(this.getNodesForIndex(e.index));this.indexesToDelete.push(e.index)},f.prototype.removeNodes=function(e){if(e.length){(()=>{for(var t=e[0].parentNode,n=e.length-1;n>=0;--n)h.clean(e[n],this.element),t.removeChild(e[n])})()}},f.prototype.flushPendingDeletes=function(){for(var e=0,t=this.pendingDeletes.length;e!==t;++e){for(var n=this.pendingDeletes[e];n.nodesets.length;)this.removeNodes(n.nodesets.pop());n.data&&void 0!==n.data[l]&&delete n.data[l]}this.pendingDeletes=[]},f.prototype.clearDeletedIndexes=function(){for(var e=this.indexesToDelete.length-1;e>=0;--e)this.firstLastNodesList.splice(this.indexesToDelete[e],1);this.indexesToDelete=[]},f.prototype.updateIndexes=function(e){for(var t=e,n=this.firstLastNodesList.length;t<n;++t){var r=this.firstLastNodesList[t].currentChildContext;r&&r.observableIndex&&r.observableIndex(t)}},f.prototype.getData=function(){return{data:this.data,dataProvider:this.currentDataProvider}},f.prototype.setData=function(e){this.removeSubscriptions(),this.data=e.data,this.currentDataProvider=e.dataProvider,this.addSubscriptions()},i.bindingHandlers._ojBindForEach_={init:function(e,t,n,r,o){var s,a;return i.computed(function(){if(a=t(),s){var e,n,r=a.data,o=s.getData().data;if(i.ignoreDependencies(function(){e=i.unwrap(o),n=i.unwrap(r)}),s.setData({data:r,dataProvider:n.fetchFirst?n:null}),Array.isArray(e)&&Array.isArray(n)){var l=i.utils.compareArrays(e,n,{sparse:!0,dontLimitMoves:!0});s.onArrayChange(l)}else s.recreateContent(n)}},null,{disposeWhenNodeIsRemoved:e}),s=new f(e,a,o),i.utils.domNodeDisposal.addDisposeCallback(e,function(){s.removeSubscriptions()}),{controlsDescendantBindings:!0}}},i.virtualElements.allowedBindings._ojBindForEach_=!0}(),n._registerLegacyNamespaceProp("ResponsiveKnockoutUtils",_),n._registerLegacyNamespaceProp("KnockoutTemplateUtils",f),t.addPostprocessor({nodeHasBindings:function(e,t){return t||1===e.nodeType&&"oj-if"===e.nodeName.toLowerCase()},getBindingAccessors:function(e,n,r){let o=r;if(1===e.nodeType&&"oj-if"===e.localName){const r=function(e,n){if(!e.hasAttribute("test"))throw new Error("Missing the required 'test' attribute on <oj-if>");const r=e.getAttribute("test"),i=a.AttributeUtils.getExpressionInfo(r);return t.createEvaluator(i.expr?i.expr:r,n)}(e,n);o=o||{},o.if=()=>i.unwrap(r(n)),o.style=()=>({display:"contents"})}return o}}),e.ComponentBinding=m,e.ComponentChangeTracker=E,e.__ExpressionUtils=b,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojknockout",["ojs/ojknockout-base"],function(e){}),define("ojs/ojkeyset",["exports","ojs/ojcore-base","ojs/ojkeysetimpl"],function(e,t,n){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;class r{}t._registerLegacyNamespaceProp("KeySet",r);class i extends r{constructor(e){super(),this.keys={all:!1,keys:void 0},this.keys.keys=new Set(e)}has(e){return s(this.keys.keys,e)}add(e){const t=new Set(this.keys.keys.values());return e.forEach(e=>{s(t,e)||t.add(e)}),t.size===this.keys.keys.size?this:new i(t)}delete(e){const t=new Set(this.keys.keys.values());return e.forEach(e=>{const n=a(t,e);n.value&&t.delete(n.key)}),t.size===this.keys.keys.size?this:new i(t)}addAll(){return new o([])}clear(){return 0===this.keys.keys.size?this:new i([])}isAddAll(){return!1}values(){return new Set(this.keys.keys.values())}}class o extends r{constructor(e){super(),this.keys={all:!0,deletedKeys:void 0},this.keys.deletedKeys=new Set(e)}has(e){return!s(this.keys.deletedKeys,e)}add(e){const t=new Set(this.keys.deletedKeys.values());return e.forEach(e=>{const n=a(t,e);n.value&&t.delete(n.key)}),t.size===this.keys.deletedKeys.size?this:new o(t)}delete(e){const t=new Set(this.keys.deletedKeys.values());return e.forEach(e=>{s(t,e)||t.add(e)}),t.size===this.keys.deletedKeys.size?this:new o(t)}addAll(){return 0===this.keys.deletedKeys.size?this:new o([])}clear(){return new i([])}isAddAll(){return!0}deletedValues(){return new Set(this.keys.deletedKeys.values())}}const s=(e,t)=>a(e,t).value,a=(e,n)=>{if(0===e.size)return{value:!1};if("string"==typeof n||"number"==typeof n||"boolean"==typeof n)return{value:e.has(n),key:n};const r=e[Symbol.iterator]();let i=r.next();for(;!i.done;){if(t.KeyUtils.equals(i.value,n))return{value:!0,key:i.value};i=r.next()}return{value:!1}};t._registerLegacyNamespaceProp("KeySetImpl",i),t._registerLegacyNamespaceProp("AllKeySetImpl",o);var l=function(){};t.Object.createSubclass(l,t.Object,"KeySet"),l.prototype.SetInternal=function(e){this._keys=e},l.prototype.AddOrDeleteInternal=function(e,t){var n,r;return null==(n=e?this._add(t):this._remove(t))?this:((r=Object.create(Object.getPrototypeOf(this))).SetInternal(n),r)},l.prototype._add=function(e){var t=this,n=null;return e.forEach(function(e){e!==t.NOT_A_KEY&&t.get(e)===t.NOT_A_KEY&&(null==n&&(n=t.Clone()),n.add(e))}),n},l.prototype._remove=function(e){var t,n=this,r=null;return 0===this._keys.size?null:(e.forEach(function(e){(t=n.get(e))!==n.NOT_A_KEY&&(null==r&&(r=n.Clone()),r.delete(t))}),r)},l.prototype.GetInternalSize=function(){return this._keys.size},l.prototype.Clone=function(){return new Set(this._keys)},n.call(l.prototype);var c=function(e){this.InitializeWithKeys(e)};t._registerLegacyNamespaceProp("ExpandedKeySet",c),t.Object.createSubclass(c,l,"ExpandedKeySet"),c.prototype.add=function(e){return this.AddOrDeleteInternal(!0,e)},c.prototype.addAll=function(){return new u},c.prototype.isAddAll=function(){return!1},c.prototype.delete=function(e){return this.AddOrDeleteInternal(!1,e)},c.prototype.clear=function(){return 0===this.GetInternalSize()?this:new c},c.prototype.has=function(e){return this.get(e)!==this.NOT_A_KEY},c.prototype.values=function(){return this.Clone()};var u=function(){this.InitializeWithKeys(null)};t._registerLegacyNamespaceProp("ExpandAllKeySet",u),t.Object.createSubclass(u,l,"ExpandAllKeySet"),u.prototype.add=function(e){return this.AddOrDeleteInternal(!1,e)},u.prototype.addAll=function(){return 0===this.GetInternalSize()?this:new u},u.prototype.isAddAll=function(){return!0},u.prototype.delete=function(e){return this.AddOrDeleteInternal(!0,e)},u.prototype.clear=function(){return new c},u.prototype.has=function(e){return this.get(e)===this.NOT_A_KEY},u.prototype.deletedValues=function(){return this.Clone()};var d={toArray:function(e){var t,n=e.isAddAll()?e.deletedValues():e.values();return Array.from?t=Array.from(n):(t=[],n.forEach(function(e){t.push(e)})),t.inverted=e.isAddAll(),t},toKeySet:function(e){return e.inverted?(new o).delete(e):(new i).add(e)}};e.AllKeySetImpl=o,e.ExpandAllKeySet=u,e.ExpandedKeySet=c,e.KeySet=r,e.KeySetImpl=i,e.KeySetUtils=d,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojknockout-keyset",["exports","knockout","ojs/ojkeyset"],function(e,t,n){"use strict";e.ObservableExpandedKeySet=class{constructor(e){this._proto=Object.create(t.observable.fn);const r=e||new n.ExpandedKeySet,i=t.observable(r),o=this;return t.utils.arrayForEach(["add","addAll","clear","delete"],function(e){o._proto[e]=function(){const t=this.peek();return this(t[e].apply(t,arguments)),this}}),Object.setPrototypeOf(i,this._proto),i}},e.ObservableKeySet=class{constructor(e){this._proto=Object.create(t.observable.fn);const r=e||new n.KeySetImpl,i=t.observable(r),o=this;return t.utils.arrayForEach(["add","addAll","clear","delete"],function(e){o._proto[e]=function(){const t=this.peek();return this(t[e].apply(t,arguments)),this}}),Object.setPrototypeOf(i,this._proto),i}},Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojknockout-validation",["ojs/ojcore","jquery","ojs/ojcontext","ojs/ojmessaging","ojs/ojknockout","knockout"],function(e,t,n,r,i,o){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;const s=function(){this.Init()};e._registerLegacyNamespaceProp("InvalidComponentTracker",s),e.Object.createSubclass(s,e.Object,"oj.InvalidComponentTracker"),s._OPTION_MESSAGES_SHOWN="messagesShown",s._OPTION_MESSAGES_HIDDEN="messagesHidden",s._OPTION_DISABLED="disabled",s._OPTION_READONLY="readOnly",s.prototype.Init=function(){s.superclass.Init.call(this),this._tracked=[],this._invalid=[],this._invalidHidden=[],this.invalidShown=!1,this.invalidHidden=!1},s.prototype.focusOnFirstInvalid=function(){var e=null,t=this,r=this._updateCounter,i=n.getPageContext().getBusyContext().addBusyState({description:"Setting Focus to first invalid component."});return this.invalidShown&&(e=this._getFirstInvalidComponent()),setTimeout(function(){(e=r===t._updateCounter&&e||t._getFirstInvalidComponent())&&e("instance").GetFocusElement().focus(),i()},1),!!e},s.prototype.showMessages=function(){var e;if(this.invalidHidden)for(var t=this._invalidHidden.length,n=0;n<t;n++)this._invalidHidden[n]&&(e=this._tracked[n].component.call(e,"showMessages"))},s.prototype._getFirstInvalidComponent=function(){var e=0,t=[],n=this._invalid.length;for(e=0;e<n;e++){this._invalid[e]&&t.push(this._tracked[e])}return 0===t.length?null:(t.sort(function(e,t){var n=e.element,r=t.element;return n.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1}),t[0].component)},s.prototype._remove=function(e){var n=-1,r=!1;return t.each(this._tracked,function(t,r){n<0&&r.component===e&&(n=t)}),n>=0&&(this._tracked.splice(n,1),this._invalid.splice(n,1),this._invalidHidden.splice(n,1),this._updateInvalidProperties(),r=!0),r},s.prototype._update=function(e,n,r,i){var o,a=e.call(e,"isValid"),l=!0,c=-1;switch(t.each(this._tracked,function(t,n){c<0&&n.component===e&&(c=t)}),r){case s._OPTION_MESSAGES_SHOWN:case s._OPTION_MESSAGES_HIDDEN:if(o=!1,i){if(c<0&&(c=this._tracked.push({component:e,element:n})-1,this._initializeInvalidTrackers(c,o)),!a&&s._hasInvalidMessages(i)&&(o=!0,r===s._OPTION_MESSAGES_SHOWN)){var u=e.call(e,"option",s._OPTION_DISABLED),d=e.call(e,"option",s._OPTION_READONLY);o=!(u||d)}l=this._updateInvalidTracker(r,c||0,o),this._updateInvalidProperties(),l&&(void 0===this._updateCounter&&(this._updateCounter=0),this._updateCounter+=1)}break;case s._OPTION_DISABLED:case s._OPTION_READONLY:l=!1,i&&(l=this._updateInvalidTracker(s._OPTION_MESSAGES_SHOWN,c||0,!1),l=this._updateInvalidTracker(s._OPTION_MESSAGES_HIDDEN,c||0,!1)||l,this._updateInvalidProperties())}return l},s.prototype._initializeInvalidTrackers=function(e,t){void 0===this._invalid[e]&&this._updateInvalidTracker(s._OPTION_MESSAGES_SHOWN,e,t),void 0===this._invalidHidden[e]&&this._updateInvalidTracker(s._OPTION_MESSAGES_HIDDEN,e,t)},s.prototype._updateInvalidProperties=function(){this.invalidShown=this._invalid.indexOf(!0)>=0,this.invalidHidden=this._invalidHidden.indexOf(!0)>=0},s.prototype._updateInvalidTracker=function(e,t,n){var r,i=!1;return r=e===s._OPTION_MESSAGES_SHOWN?this._invalid:e===s._OPTION_MESSAGES_HIDDEN?this._invalidHidden:[],t>=0&&void 0!==r[t]?(i=r[t]!==n)&&(r[t]=n):(r.push(n),i=!0),i},s._hasInvalidMessages=function(e){return!r.isValid(e)};const a=function(){};e._registerLegacyNamespaceProp("ValueBinding",a),a._ATTRIBUTE_INVALID_COMPONENT_TRACKER="invalidComponentTracker",a._EVENT_OPTIONCHANGE="ojoptionchange",a._OPTION_MESSAGES_SHOWN="messagesShown",a._OPTION_MESSAGES_HIDDEN="messagesHidden",a._OPTION_DISABLED="disabled",a._OPTION_READONLY="readOnly",a._update=function(e,t,n,r,i){var s={},l=i.call()[a._ATTRIBUTE_INVALID_COMPONENT_TRACKER];if(e===a._OPTION_DISABLED||e===a._OPTION_READONLY){var c=l&&l.peek()||null;return null!==c&&o.isWriteableObservable(l)&&c._update.call(c,r,n,e,t)&&l.valueHasMutated(),s[e]=t,s}},a._init=function(e,t){var n={};return n[e]=t,n},a._afterCreate=function(e,t,n,r){var i=r.call();return e===a._ATTRIBUTE_INVALID_COMPONENT_TRACKER&&!!i[e]&&a._registerInvalidComponentTrackerWriteback(e,i,t,n),{}},a._beforeDestroy=function(e,n,r,i){var s,l=t(n),c=i.call()[e];e===a._ATTRIBUTE_INVALID_COMPONENT_TRACKER&&(l.off(a._EVENT_OPTIONCHANGE,a._updateInvalidComponentTracker),c&&o.isWriteableObservable(c)&&(s=c.peek())._remove.call(s,r)&&c.valueHasMutated())},a._updateInvalidComponentTracker=function(e){var t,n=e.data.tracker,r=e.data.component,i=e.data.element,s=arguments[1],l=s.option,c=s.value;l!==a._OPTION_MESSAGES_SHOWN&&l!==a._OPTION_MESSAGES_HIDDEN||n&&o.isWriteableObservable(n)&&(t=n.peek())&&t._update.call(t,r,i,l,c)&&n.valueHasMutated()},a._registerInvalidComponentTrackerWriteback=function(e,n,r,i){var l,c=n[e],u=t(r);if(!o.isObservable(c))throw new Error("Binding attribute "+a._ATTRIBUTE_INVALID_COMPONENT_TRACKER+" should be bound to a ko observable.");if(null==(l=c.peek())&&c(l=new s),o.isWriteableObservable(c)){var d=i.call(i,"option",a._OPTION_MESSAGES_SHOWN),h=i.call(i,"option",a._OPTION_MESSAGES_HIDDEN);l._update.call(l,i,r,a._OPTION_MESSAGES_SHOWN,d),l._update.call(l,i,r,a._OPTION_MESSAGES_HIDDEN,h),c.valueHasMutated()}var p={tracker:c,component:i,element:r};u.on(a._EVENT_OPTIONCHANGE,p,a._updateInvalidComponentTracker)},e.ComponentBinding.getDefaultInstance&&e.ComponentBinding.getDefaultInstance().setupManagedAttributes({for:"editableValue",attributes:[a._ATTRIBUTE_INVALID_COMPONENT_TRACKER,a._OPTION_DISABLED,a._OPTION_READONLY],init:a._init,update:a._update,afterCreate:a._afterCreate,beforeDestroy:a._beforeDestroy})}),define("ojs/ojrouter",["ojs/ojcore","knockout","signals","ojs/ojlogger"],function(e,t,n,r){"use strict";!function(){var i,o,s,a,l,c="/",u="root",d="oj_Router",h=" | ",p=1024,f="popstate",_="hasChanged",m={hasChanged:!1},g=!1,v=[],y=window.location,E="parameters";function b(e){return e?e.split("/"):[]}function S(e){return X(b(e)[0])}function T(t,n){var r=document.createElement("a");return r.href=y.href,void 0!==t.search&&(r.search=t.search),void 0!==t.pathname&&(r.pathname=t.pathname),r.search=function(t,n){var r,i,o="",s=t.indexOf(d);if(-1!==s){var a=t.indexOf("&",s);-1===a&&(a=t.length),r=t.substring(0,s),i=t.substr(a)}else r=t+(-1===t.indexOf("?")?"?":"&"),i="";n&&Object.getOwnPropertyNames(n).length>0?o=function(t){var n=JSON.stringify(t),r=encodeURIComponent(n),i=e.LZString.compressToEncodedURIComponent(n),o=!1,s=d+"=";i.length<=r.length&&(o=!0);s+=o?"1"+i:"0"+r;if(s.length>p)throw new Error("Size of bookmarkable data is too big.");return s}(n):r=r.substring(0,r.length-1);return r+o+i}(r.search,n),r.href.replace(/\?$/,"")}function C(e){return e._parentRouter?C(e._parentRouter)+"."+e._name:e._name}function P(e){var t;if(e){if(t=P(e._parentRouter)){var n=e._stateId();n?t+=n+"/":t=void 0}}else t="/";return t}function O(e,t){var n;return e._childRouters.every(function(e){if(e._parentState){if(e._parentState===t)return n=e,!1}else n=e;return!0}),n}function A(e){var t=e.filter(function(e){return e.value!==e.router._stateId()});return r.option("level")===r.LEVEL_INFO&&(r.info("Potential changes are: "),t.forEach(function(e){r.info("   { router: %s, value: %s }",e.router&&C(e.router),e.value)})),t}function I(e){var t=this[e.router._name];void 0!==t&&(e.router._extra=t)}function R(){return v[0]&&v[0].cancel}function w(t){var n,i=t.charAt(0),o=t.slice(1);if("0"===i)o=decodeURIComponent(o);else{if("1"!==i)throw new Error("Error retrieving bookmarkable data. Format is invalid");o=e.LZString.decompressFromEncodedURIComponent(o)}if(n=JSON.parse(o),r.option("level")===r.LEVEL_INFO){r.info("Bookmarkable data: ");for(var s=Object.keys(n),a=0;a<s.length;a++){var l=s[a];r.info("   { router: %s, value: %s }",l,n[l])}}return n}function N(e,t,n){var r;return e._childRouters.every(function(e){return!((!e._parentState||e._parentState===n)&&e._getStateFromId(t))||(r=e,!1)}),r}function j(e){var t=[];return e._currentState()&&(t.push(new L(e)),e._childRouters.forEach(function(e){t=t.concat(j(e))})),t}function x(e){if(!e)return{title:"",segment:""};var t=x(O(e,e._stateId()));if(""===t.title){var n=e._currentState();if(n){var r=n._title;void 0!==r?("function"==typeof r&&(r=r()),t.title=String(r)):void 0!==(r=n._label)&&(r=String(r),""!==t.segment&&(r+=h+t.segment),t.segment=r)}}return t}function D(t){e.Router._transitionedToState.dispatch(t)}function L(e,t){this.router=e,this.value=t}function M(e){var t,n,r=e[e.length-1];for(r?(t=r.router,n=S(r.value)):(t=l,(n=l._defaultStateId)&&e.push(new L(t,n))),t=O(t,n);t;)(n=t._defaultStateId)&&e.push(new L(t,n)),t=O(t,n);var i=j(l),o=[];return i.forEach(function(t,n){var r=e[n];r&&t.router===r.router||o.unshift(t)}),o.concat(e)}function k(e,t,n){var i=e();return i||r.info("%s is false for state: %s",t,n),i}function F(e,t,n,r){return"function"==typeof e&&(t=t?t.then(function(t){return t&&(t=k(e,n,r)),t}):new Promise(function(t){t(k(e,n,r))})),t}function B(e,t){var n=e._currentState();if(n){for(var r=0;r<e._childRouters.length;r++)t=B(e._childRouters[r],t);t=F(n.viewModel&&n.viewModel.canExit?n.viewModel.canExit:n._canExit,t,"canExit",n._id)}return t}function U(e){var t;return R()?Promise.resolve(!1):(r.info("Start _canExit."),t=e?null===(t=B(e,null))?Promise.resolve(!0):t.then(function(e){return e&&!R()}):Promise.resolve(!0))}function V(e,t){if(R())return Promise.resolve();r.info("Start _canEnter.");var n=null;return e.forEach(function(e){var t=e.getState();t&&(n=F(t._canEnter,n,"canEnter",t._id))}),n=null===n?Promise.resolve({allChanges:e,origin:t}):n.then(function(n){var r;return n&&!R()&&(r={allChanges:e,origin:t}),r})}function H(t){if(!t)return Promise.resolve(m);var n,i=Promise.resolve().then(function(){r.info("Entering _updateAll."),e.Router._updating=!0}),o=t.allChanges;return o.forEach(function(e){n=e.router.currentState.peek(),i=i.then(function(){if(!R())return function(e,t){var n=e.router._getStateFromId(S(e.router._stateId())),i=e.getState();return Promise.resolve().then(function(){r.option("level")===r.LEVEL_INFO&&r.info("Updating state of %s to %s.",C(e.router),e.value)}).then(n?n._exit:void 0).then(function(){var n=e.router,r=!1;if("popState"===t){var o,s=n._navHistory.length;for(o=s-1;o>=0;o--)if(n._navHistory[o]===e.value){r=!0,n._navHistory.splice(o,s-o);break}s-o==1&&(n._navigationType="back")}if(r||(delete n._navigationType,n._navHistory.push(S(n._stateId()))),e.value&&i){var a=b(e.value);i._paramOrder.forEach(function(e,t){var n=X(a[t+1]);n!==i[E][e]&&(i[E][e]=n)})}n._stateId(e.value)}).then(i?i._enter:void 0)}(e,t.origin)})}),i.then(function(){var t,i,s=!1;if(o.length){s=!R();var a=o[o.length-1];t=a.router,i=a.state}return e.Router._updating=!1,r.info("_updateAll returns %s.",String(s)),{hasChanged:s,router:t,oldState:n,newState:i}},function(t){return e.Router._updating=!1,Promise.reject(t)})}function G(e){var t;try{t=A(t=o.parse())}catch(e){return Promise.reject(e)}return V(t,e).then(H)}function K(e,t){if(r.option("level")===r.LEVEL_INFO){var n=t.path?"path="+t.path:"",i=t.deferredHandling?"deferredHandling=true":"",o=t.router?C(t.router):"null";r.info(">> %s: origin=%s router=%s %s %s",e,t.origin,o,n,i)}}function z(){var e,t=v[0];return K("Resolving",t),t.cancel?(K("Cancelled",t),e=Promise.resolve(m)):e=function(e){if(K("Executing",e),!e.deferredHandling){if("sync"===e.origin)return G();if("popState"===e.origin)return U(e.router).then(function(t){return t?G(e.origin):Promise.resolve(m)})}return e.router._go(e)}(t),e.then(function(e){if(K("Done with",v.shift()),!0===e[_]){var t,n=x(l);""!==n.title?t=n.title:i&&i.length>0?(t=i,""!==n.segment&&(t+=h+n.segment)):t=n.segment,t!==window.document.title&&(window.document.title=t)}return D(e),e},function(e){return v=[],r.error("Error when executing transition: %o",e),D(m),Promise.reject(e)})}function W(e){K("Queuing  ",e);var t=v.push(e);if(1===t)a=z();else{var n=v[t-2];n.deferredHandling||(K("Cancelling",n),n.cancel=!0),a=a.then(z)}return a}function Y(){var e=S(l._stateId()),t=null;if(r.info("Handling popState event with URL: %s",y.href),e)for(var n=0;n<l._childRouters.length;n++){var i=l._childRouters[n];if(e===i.parent.stateId()){t=i;break}}W({router:t,origin:"popState"})}function $(){g||(o||(o=new e.Router.urlPathAdapter),o.init(c),i=window.document.title,window.addEventListener(f,Y,!1),r.info("Initializing rootInstance."),r.info("Base URL is %s",c),r.info("Current URL is %s",y.href),g=!0)}function q(e){var t=e;return t&&t.replace&&(t=(t=t.replace(/~/g,"~0")).replace(/\//g,"~1")),t}function X(e){var t=e;return t&&t.replace&&(t=(t=t.replace(/~1/g,"/")).replace(/~0/g,"~")),t}L.prototype.getState=function(){return this.state||this.value&&(this.state=this.router._getStateFromId(S(this.value))),this.state},L.prototype.addParameter=function(e){e&&(this.value+="/"+e)},e.Router=function(e,n,r){var i=this;function o(e,t){var n={name:a(e),params:{ojRouter:{parentRouter:t,get direction(){return t._navigationType}}}};return n.params.ojRouter[E]={},e&&(s(e,n),n.lifecycleListener={attached:t.moduleConfig.lifecycleListener.attached}),n}function s(e,n){var r=n.params.ojRouter[E],i=e[E];Object.keys(i).forEach(function(e){var n=i[e],o=r[e];o||(o=t.observable(),r[e]=o),o(n)})}function a(e){var t;return e&&((t=e.value)&&"string"==typeof t||(t=e._id)),t}this._name=e,this._parentState=r||(n?S(n._stateId()):void 0),this._parentRouter=n,this._childRouters=[],this._extra=void 0,this._stateId=t.observable(),this._stateIdComp=t.pureComputed({read:function(){return S(this._stateId())},write:function(e){this.go(e).then(null,function(e){throw e})},owner:i}),this._states=null,this._defaultStateId=void 0,this._currentState=t.pureComputed(function(){var e=S(i._stateId());return t.ignoreDependencies(i._getStateFromId,i,[e])}),this._currentValue=t.pureComputed(function(){var e,n=S(i._stateId()),r=t.ignoreDependencies(i._getStateFromId,i,[n]);return r&&(e=r.value),e}),this._navigationType=void 0,this._navHistory=[],this._moduleConfig=Object.create(null,{name:{value:t.pureComputed(function(){var e,t=S(this._stateId())||this._defaultStateId||this._states[0].name,n=this._getStateFromId(t);return n&&((e=n.value)&&"string"==typeof e||(e=n._id)),e},i),enumerable:!0},params:{value:Object.create(null,{ojRouter:{value:new function(){Object.defineProperties(this,{parentRouter:{value:i,enumerable:!0},direction:{get:function(){return i._navigationType},enumerable:!0}})},enumerable:!0}}),enumerable:!0},lifecycleListener:{value:{attached:function(e){var t=i.currentState();t&&(t.viewModel=e.viewModel)},enumerable:!0},enumerabl:!0}}),this._getObservableModuleConfig=function(){if(!this._observableModuleConfig){var e=i.currentState,n=e.peek(),r=t.observable(o(n,i));e.subscribe(function(e){var t=r.peek();t.name!==a(e)?r(o(e,i)):s(e,t)}),this._observableModuleConfig=r}return this._observableModuleConfig},Object.defineProperties(this,{parent:{value:this._parentRouter,enumerable:!0}})},Object.defineProperties(e.Router.prototype,{name:{get:function(){return this._name},enumerable:!0},states:{get:function(){return this._states},enumerable:!0},stateId:{get:function(){return this._stateIdComp},enumerable:!0},currentState:{get:function(){return this._currentState},enumerable:!0},currentValue:{get:function(){return this._currentValue},enumerable:!0},direction:{get:function(){return this._navigationType},enumerable:!0},defaultStateId:{get:function(){return this._defaultStateId},set:function(e){this._defaultStateId=e},enumerable:!0},moduleConfig:{get:function(){return this._moduleConfig},enumerable:!0},observableModuleConfig:{get:function(){return this._getObservableModuleConfig()},enumerable:!0}}),l=new e.Router(u,void 0,void 0),e.Router.prototype.getChildRouter=function(e){var t;if(e&&"string"==typeof e){var n=e.trim();n.length>0&&this._childRouters.every(function(e){return e._name!==n||(t=e,!1)})}return t},e.Router.prototype.getCurrentChildRouter=function(){return O(this,S(this._stateId()||this._defaultStateId))},e.Router.prototype.createChildRouter=function(t,n){var r;e.Assert.assertString(t);for(var i=n||S(this._stateId()),o=encodeURIComponent(t.trim()),s=0;s<this._childRouters.length;s++){var a=this._childRouters[s];if(a._name===o)throw new Error('Invalid router name "'+o+'", it already exists.');if(a._parentState===i)throw new Error('Cannot create more than one child router for parent state id "'+a._parentState+'".')}return r=new e.Router(o,this,i),this._childRouters.push(r),r},e.Router.prototype._getStateFromId=function(t){var n;return this._stateFromIdCallback?!(n=this._stateFromIdCallback(t))||n instanceof e.RouterState||(n=new e.RouterState(t,n,this)):n=function(t,n){var r;return n&&t._states&&(e.Assert.assertString(n),t._states.every(function(e){return e._id!==n||(r=e,!1)})),r}(this,t),n},e.Router.prototype.configure=function(t){return this._stateId(void 0),delete this._defaultStateId,this._navigationType=void 0,this._navHistory=[],"function"==typeof t?(this._states=null,this._stateFromIdCallback=t):(this._states=[],this._stateFromIdCallback=void 0,Object.keys(t).forEach(function(n){var r=t[n];this._states.push(new e.RouterState(n,r,this)),"boolean"==typeof r.isDefault&&r.isDefault&&(this._defaultStateId=S(n))},this)),this},e.Router.prototype.getState=function(e){return this._getStateFromId(e)},e.Router.prototype.go=function(e,t){$();var n=t||{};return Array.isArray(e)&&(e=e.map(q).join("/")),W({router:this,path:e,origin:"go",historyUpdate:n.historyUpdate})},e.Router.prototype._go=function(e){var t,n,i=!0,a=e.path,l=!1,c=!1;switch(e.historyUpdate){case"skip":c=!0;break;case"replace":l=!0}if(a){if("string"!=typeof a)return Promise.reject(new Error("Invalid object type for state id."));i=!1}if(i&&!(a=this._defaultStateId))return r.info(function(){return"Undefined state id with no default id on router "+C(this)}),Promise.resolve(m);if("/"===a.charAt(0))n=a;else{if(!(n=P(this._parentRouter)))return Promise.reject(new Error('Invalid path "'+a+'". The parent router does not have a current state.'));n+=a}r.info("Destination path: %s",n);try{t=function(e,t){var n,r,i,o,a=[],l=[],c=e,u=b(t),d=0;for(u.splice(0,1);c;)l.unshift(c),c=c._parentRouter;for(var h=u.shift();h;h=u.shift())if(i&&(i._paramOrder[d]?(o.addParameter(h),d+=1):d=0),!i||0===d){if(!(c=l.shift())&&!(c=N(n,h,r)))return s=t,a;if(!(i=(o=new L(c,h)).getState()))throw new Error('Invalid path "'+t+'". State id "'+h+'" does not exist on router "'+c._name+'".');a.push(o),n=c,r=h}return a}(this,n),t=M(t)}catch(e){return Promise.reject(e)}var u=A(t);return l||u.length>0?(r.info("Deferred mode or new state is different."),U(this).then(function(e){return e?V(u).then(H).then(function(e){if(e[_])if(c)r.info("Skip history update.");else{var n=o.buildUrlFromStates(t);r.info("%s URL to %s",l?"Replacing":"Pushing",n),window.history[l?"replaceState":"pushState"](null,"",n)}return e}):Promise.resolve(m)})):Promise.resolve(m)},e.Router.prototype.store=function(e){this._extra=e;for(var t,n={},r=this;r;)void 0!==r._extra&&(n[r._name]=r._extra),r=r._parentRouter;for(r=this;r;){for(var i=0;i<r._childRouters.length;i++){var o=r._childRouters[i],s=S(r._stateId());if(s&&s===o._parentState){void 0!==o._extra&&(n[o._name]=o._extra),t=o;break}}r=t,t=void 0}window.history.replaceState(null,"",T({},n))},e.Router.prototype.retrieve=function(){return this._extra},e.Router.prototype.dispose=function(){for(;this._childRouters.length>0;)this._childRouters[0].dispose();if(this._parentRouter){for(var t=this._parentRouter._childRouters,n=0;n<t.length;n++)if(t[n]._name===this._name){t.splice(n,1);break}delete this._parentState}else c="/",o=null,this._name=u,window.document.title=i,window.removeEventListener(f,Y),e.Router._transitionedToState.removeAll(),g=!1;delete this._navigationType,this._navHistory=[],this._states=null,delete this._defaultStateId,delete this._extra},e.Router._transitionedToState=new n.Signal,e.Router._updating=!1,Object.defineProperties(e.Router,{rootInstance:{value:l,enumerable:!0},transitionedToState:{value:e.Router._transitionedToState,enumerable:!0}}),e.Router.defaults={},Object.defineProperties(e.Router.defaults,{urlAdapter:{get:function(){return o||(o=new e.Router.urlPathAdapter),o},set:function(e){if(g)throw new Error("Incorrect operation. Cannot change URL adapter after calling sync() or go().");o=e},enumerable:!0,readonly:!1},baseUrl:{get:function(){return c},set:function(e){if(g)throw new Error("Incorrect operation. Cannot change base URL after calling sync() or go().");c=e?e.match(/[^?#]+/)[0]:"/"},enumerable:!0,readonly:!1},rootInstanceName:{get:function(){return l._name},set:function(t){if(g)throw new Error("Incorrect operation. Cannot change the name of the root instance after calling sync() or go().");e.Assert.assertString(t),l._name=encodeURIComponent(t.trim())},enumerable:!0,readonly:!1}}),e.Router.sync=function(){var t={router:l,origin:"sync"};return $(),r.info("Entering sync with URL: %s",y.href),s?(t.path=s,t.deferredHandling=!0,t.historyUpdate="replace",s=void 0,W(t)):e.Router._updating?(r.info("Sync called while updating, waiting for updates to end."),new Promise(function(t){e.Router._transitionedToState.addOnce(function(e){r.info("Sync updates done."),t(e)})})):W(t)},e.Router.urlPathAdapter=function(){var e="";this.init=function(t){var n=document.createElement("a");n.href=t;var r=n.pathname;"/"!==(r=r.replace(/^([^/])/,"/$1")).slice(-1)&&(r+="/"),e=r},this.parse=function(){var t=l,n=y.pathname.replace(e,""),i=b(decodeURIComponent(n)).map(X),o=[];for(r.info("Parsing: %s",n);t;){var s=i.shift();if(!s)break;var a=new L(t,s),c=a.getState();c&&c._paramOrder.forEach(function(){a.addParameter(i.shift())}),o.push(a),t=O(t,s)}o=M(o);var u=y.search.split(d+"=")[1];return u&&(u=u.split("&")[0])&&o.forEach(I,w(u)),o},this.buildUrlFromStates=function(t){for(var n=!1,r="",i={},o=t.pop();o;o=t.pop())o.value&&(n||o.value!==o.router._defaultStateId)&&(r=r?o.value+"/"+r:o.value,n=!0),void 0!==o.router._extra&&(i[o.router._name]=o.router._extra);return T({pathname:e+r},i)}},e.Router.urlParamAdapter=function(){this.init=function(){},this.parse=function(){var e=y.search,t=function(e){var t={},n=e.split("?")[1];return n&&n.split("&").forEach(function(e){var n=e.split(/=(.+)?/),r=n[0];if(r.length){var i=n[1]&&decodeURIComponent(n[1]);t[r]=i}}),t}(e),n=l,i=[];for(r.info("Parsing: %s",e);n;){var o=t[n._name]||n._defaultStateId,s=b(o),a=new L(n,o=s.shift());if(o){var c=a.getState();c&&c._paramOrder.forEach(function(){a.addParameter(s.shift())}),i.push(a)}n=O(n,o)}i=M(i);var u=t[d];return u&&i.forEach(I,w(u)),i},this.buildUrlFromStates=function(e){for(var t=!1,n="",r={},i=e.pop();i;i=e.pop()){if(i.value&&(t||i.value!==i.router._defaultStateId)){var o="&"+i.router._name+"=",s=i.value;n=o+encodeURIComponent(s)+n,t=!0}void 0!==i.router._extra&&(r[i.router._name]=i.router._extra)}return n&&(n="?"+n.substr(1)),T({search:n},r)}}}();var i,o,s,a,l=e.Router;return o=String.fromCharCode,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",e.LZString={compressToEncodedURIComponent:function(e){return null===e?"":function(e,t,n){if(null===e)return"";for(var r,i,o={},s={},a="",l=2,c=3,u=2,d="",h=0,p=0,f=e.length,_=0;_<f;_++){var m=e[_];Object.prototype.hasOwnProperty.call(o,m)||(o[m]=c,c+=1,s[m]=!0);var g=a+m;if(Object.prototype.hasOwnProperty.call(o,g))a=g;else{if(Object.prototype.hasOwnProperty.call(s,a)){if(a.charCodeAt(0)<256){for(r=u;r--;)h<<=1,p===t-1?(p=0,d+=n(h),h=0):p+=1;for(i=a.charCodeAt(0),r=8;r--;)h=h<<1|1&i,p===t-1?(p=0,d+=n(h),h=0):p+=1,i>>=1}else{for(i=1,r=u;r--;)h=h<<1|i,p===t-1?(p=0,d+=n(h),h=0):p+=1,i=0;for(i=a.charCodeAt(0),r=16;r--;)h=h<<1|1&i,p===t-1?(p=0,d+=n(h),h=0):p+=1,i>>=1}0==(l-=1)&&(l=Math.pow(2,u),u+=1),delete s[a]}else for(i=o[a],r=u;r--;)h=h<<1|1&i,p===t-1?(p=0,d+=n(h),h=0):p+=1,i>>=1;0==(l-=1)&&(l=Math.pow(2,u),u+=1),o[g]=c,c+=1,a=String(m)}}if(""!==a){if(Object.prototype.hasOwnProperty.call(s,a)){if(a.charCodeAt(0)<256){for(r=u;r--;)h<<=1,p===t-1?(p=0,d+=n(h),h=0):p+=1;for(i=a.charCodeAt(0),r=8;r--;)h=h<<1|1&i,p===t-1?(p=0,d+=n(h),h=0):p+=1,i>>=1}else{for(i=1,r=u;r--;)h=h<<1|i,p===t-1?(p=0,d+=n(h),h=0):p+=1,i=0;for(i=a.charCodeAt(0),r=16;r--;)h=h<<1|1&i,p===t-1?(p=0,d+=n(h),h=0):p+=1,i>>=1}0==(l-=1)&&(l=Math.pow(2,u),u+=1),delete s[a]}else for(i=o[a],r=u;r--;)h=h<<1|1&i,p===t-1?(p=0,d+=n(h),h=0):p+=1,i>>=1;0==(l-=1)&&(u+=1)}for(i=2,r=u;r--;)h=h<<1|1&i,p===t-1?(p=0,d+=n(h),h=0):p+=1,i>>=1;for(;;){if(h<<=1,p===t-1){d+=n(h);break}p+=1}return d}(e,6,function(e){return s.charAt(e)})},decompressFromEncodedURIComponent:function(e){return null===e?"":""===e?null:function(e,t,n){for(var r,i,s=[],a=4,l=4,c=3,u="",d="",h={val:n(0),position:t,index:1},p=0;p<3;p+=1)s[p]=p;for(var f=0,_=Math.pow(2,2),m=1;m!==_;)r=h.val&h.position,h.position>>=1,0===h.position&&(h.position=t,h.val=n(h.index),h.index+=1),f|=(r>0?1:0)*m,m<<=1;switch(f){case 0:for(f=0,_=Math.pow(2,8),m=1;m!==_;)r=h.val&h.position,h.position>>=1,0===h.position&&(h.position=t,h.val=n(h.index),h.index+=1),f|=(r>0?1:0)*m,m<<=1;i=o(f);break;case 1:for(f=0,_=Math.pow(2,16),m=1;m!==_;)r=h.val&h.position,h.position>>=1,0===h.position&&(h.position=t,h.val=n(h.index),h.index+=1),f|=(r>0?1:0)*m,m<<=1;i=o(f);break;case 2:return""}s[3]=i;var g=i;for(d=i;;){if(h.index>e)return"";for(f=0,_=Math.pow(2,c),m=1;m!==_;)r=h.val&h.position,h.position>>=1,0===h.position&&(h.position=t,h.val=n(h.index),h.index+=1),f|=(r>0?1:0)*m,m<<=1;switch(i=f){case 0:for(f=0,_=Math.pow(2,8),m=1;m!==_;)r=h.val&h.position,h.position>>=1,0===h.position&&(h.position=t,h.val=n(h.index),h.index+=1),f|=(r>0?1:0)*m,m<<=1;s[l]=o(f),i=(l+=1)-1,a-=1;break;case 1:for(f=0,_=Math.pow(2,16),m=1;m!==_;)r=h.val&h.position,h.position>>=1,0===h.position&&(h.position=t,h.val=n(h.index),h.index+=1),f|=(r>0?1:0)*m,m<<=1;s[l]=o(f),i=(l+=1)-1,a-=1;break;case 2:return d}if(0===a&&(a=Math.pow(2,c),c+=1),s[i])u=s[i];else{if(i!==l)return null;u=g+(g.length?g[0]:"")}d+=u,s[l]=g+u[0],l+=1,g=u,0==(a-=1)&&(a=Math.pow(2,c),c+=1)}}(e.length,32,function(t){return function(e,t){var n;if(i||(i={}),!i[e])for(i[e]={},n=0;n<e.length;n++)i[e][e[n]]=n;return i[e][t]}(s,e.charAt(t))})}},a=/^{(\w+)}$/,e.RouterState=function(t,n,r){n=n||{},e.Assert.assertString(t);var i=(t=t.trim()).split("/");this._id=i.shift(),this._parameters={},this._paramOrder=[],i.forEach(function(e,t){var n=e.match(a);if(n){var r=n[1];this._parameters[r]=null,this._paramOrder[t]=r}},this),this._canEnter=n.canEnter,this._canEnter&&e.Assert.assertFunctionOrNull(this._canEnter),this._enter=n.enter,this._enter&&e.Assert.assertFunctionOrNull(this._enter),this._canExit=n.canExit,this._canExit&&e.Assert.assertFunctionOrNull(this._canExit),this._exit=n.exit,this._exit&&e.Assert.assertFunctionOrNull(this._exit),this._value=n.value,this._label=n.label,this._title=n.title,this._router=r,this.viewModel=void 0,this.go=()=>this._router?this._router.go(this._id):(e.Router._transitionedToState.dispatch({hasChanged:!1}),Promise.reject(new Error("Router is not defined for this RouterState object."))),this.isCurrent=()=>{if(!this._router)throw new Error("Router is not defined for this RouterState object.");return this._router._stateId()===this._id},Object.defineProperties(this,{id:{value:this._id,enumerable:!0},value:{get:function(){return this._value},set:function(e){this._value=e},enumerable:!0},label:{get:function(){return this._label},set:function(e){this._label=e},enumerable:!0},title:{get:function(){return this._title},set:function(e){this._title=e},enumerable:!0},canEnter:{get:function(){return this._canEnter},set:function(e){this._canEnter=e},enumerable:!0},enter:{get:function(){return this._enter},set:function(e){this._enter=e},enumerable:!0},canExit:{get:function(){return this._canExit},set:function(e){this._canExit=e},enumerable:!0},exit:{get:function(){return this._exit},set:function(e){this._exit=e},enumerable:!0},parameters:{get:function(){return this._parameters},enumerable:!0}})},l}),define("ojs/ojmodule",["ojs/ojcore-base","knockout","ojs/ojlogger","ojs/ojcontext","ojs/ojcustomelement-utils"],function(e,t,n,r,i){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;const o={};return e._registerLegacyNamespaceProp("ModuleBinding",o),o.defaults={viewPath:"text!views/",viewSuffix:".html",modelPath:"viewModels/",initializeMethod:"initialize",disposeMethod:"dispose",activatedHandler:"handleActivated",attachedHandler:"handleAttached",detachedHandler:"handleDetached",bindingsAppliedHandler:"handleBindingsApplied",deactivatedHandler:"handleDeactivated",transitionCompletedHandler:"handleTransitionCompleted"},o._EMPTY_MODULE="oj:blank",function(){function s(e,n,r){var i=n||e,o=[];r&&e===i&&(r.parentNode.removeChild(r),o.push(r)),t.virtualElements.setDomNodeChildren(i,o)}function a(e,t){e.forEach(function(e){t.appendChild(e)})}function l(e,n){for(var r,i=0;i<e.length&&!(r=t.contextFor(e[i]));i++);return r&&r.$module&&r.$module===n}function c(e,t,n){var r={};n[0]&&(r.viewModel=n[0]),n[1]&&(r.view=n[1]);var i=new CustomEvent(t,{detail:r});e.dispatchEvent(i)}function u(e,n,r){if(e&&e[n]){var i={element:r[0],valueAccessor:r[1]};return r.length>2&&(i.viewModel=r[2],r.length>3&&(i["boolean"==typeof r[3]?"fromCache":"cachedNodes"]=r[3])),t.ignoreDependencies(e[n],e,[i])}}function d(e,n,r){if(null!=e){var i=o.defaults[n];if(null!=i&&e){var s,a=e[i];if("function"==typeof a)return r&&(s={element:r[0],valueAccessor:r[1]},r.length>2&&(s["boolean"==typeof r[2]?"fromCache":"cachedNodes"]=r[2])),t.ignoreDependencies(a,e,[s])}}}function h(e,n,r){if(e&&n){var i=e[n];"function"==typeof i&&t.ignoreDependencies(i,e,[r])}}function p(e,n,r){for(var i=e;null!=i;){var o=t.virtualElements.nextSibling(i),s=i.nodeType;i===n||1!==s&&8!==s||r(i),i=o}}function f(e,n){for(var r=n.length-1;r>=0;r--)t.virtualElements.prepend(e,n[r])}function _(e,t){if(t)for(var n=0;n<e.length;n++){var r=e[n];1===r.nodeType&&t(r)}}function m(e,t,r){var i=e||require,o=new Promise(function(e,t){i([r],e,t)});return o=o.catch(function(e){throw n.error("ojModule failed to load "+r),e})}t.bindingHandlers.ojModule={init:function(g,v,y,E,b){var S,T,C,P,O,A,I,R,w={},N=-1,j=g.parentNode&&"OJ-MODULE"===g.parentNode.nodeName,x=j?function(){}:d,D=j?function(){}:u,L=j?h:function(){},M=j?c:function(){};function k(){A&&(A(),A=null)}var F=function(e){x(e,"disposeMethod",[g,v])},B=function(){F(S)};t.utils.domNodeDisposal.addDisposeCallback(g,function(){B();for(var e=Object.keys(w),t=0;t<e.length;t++){var n=w[e[t]].model;F(n)}k()});var U=new Error("Promise cancelled because ojModule is fetching new View and ViewModel"),V=function(e){if(e!==N)throw U},H=g;return 8===g.nodeType&&(H=g.parentNode,t.virtualElements.setDomNodeChildren(g,[]),O=g.nextSibling),t.computed(function(){if(N+=1,!A){var c=r.getContext(H).getBusyContext();A=c.addBusyState({description:"ojModule binding on a node with the Id "+g.id+"is loading the module. Binding evaluator: "+v.toString()})}var u,d,h,y,E,F,G,K,z,W,Y,$,q,X,J=0===N,Q=t.utils.unwrapObservable,Z=Q(v());"string"==typeof Z?u=Z:(u=Q(Z.name),d=Q(Z.viewName),h=Q(Z.params),y=Q(Z.viewModelFactory),E=Q(Z.createViewFunction),F=Q(Z.cacheKey),G=Q(Z.lifecycleListener),K=Q(Z.animation),$=Q(Z.view),q=Q(Z.viewModel),z=Q(Z.require),X=Q(Z.cleanupMode)),null==z||z instanceof Function||(Y=z.viewPath,W=z.modelPath,z=z.instance),d=null==d?u:d;var ee,te,ne,re,ie=o._EMPTY_MODULE===d,oe=D(G,"activated",[g,v]);if(M(H,"ojTransitionStart",[q]),ie?(ee=Promise.resolve([]),te=Promise.resolve(null)):null!=(ne=null==F?null:w[F])&&(delete w[F],ee=Promise.resolve(ne.view),te=Promise.resolve(ne.model)),null==ee&&null!=$&&(ee=Promise.resolve($)),null==te&&(null!=q?te=Promise.resolve(q):null!=y&&(te=t.ignoreDependencies(y.createViewModel,y,[h,v])),null==te&&null!=u&&(null==W&&(W=o.defaults.modelPath),te=m(z,"viewModel",W+u)),null!=te&&(te=te.then(function(e,t){return V(e),t="function"==typeof t?new t(h):x(t,"initializeMethod",[g,v])||t}.bind(null,N)),null==ee&&null!=E&&(ee=te.then(function(e,t){if(V(e),null==t)throw k(),new Error("createViewFunction option cannot be used when the ViewModel is null");var n=t[E];if(null==n)throw k(),new Error("function specified by the createViewFunction option was not found on the ViewModel");return n.call(t)}.bind(null,N)))),null==ee)){if(null==d)throw k(),new Error("View name or view instance must be specified");null==Y&&(Y=o.defaults.viewPath),ee=m(z,"view",Y+d+o.defaults.viewSuffix)}if(null==ee)throw k(),new Error("ojModule is missing a View");null!=te&&(re=te.then(function(e,t){return V(e),x(t,"activatedHandler",[g,v])}.bind(null,N))),Promise.all([ee,te,oe,re,T]).then(function(r,o){if(r===N){var c=o[0];if(null==c)throw k(),new Error("The module's View was resolved to null");var u=function(e,n){var r=e;if("string"==typeof r)r=t.utils.parseHtmlFragment(r,document);else if(function(e){if(window.DocumentFragment)return e instanceof DocumentFragment;return e&&11===e.nodeType}(r))r=t.utils.arrayPushAll([],r.childNodes);else{if(!Array.isArray(r))throw n(),new Error("The View ("+r+") has an unsupported type");r=t.utils.arrayPushAll([],r)}return r}(c,k),d=o[1];!function(e,t,n,r,i){if(r&&t.length>0&&!l(t,n)){if(t[0]._oj_module_used_view)throw i(),new Error("The oj-module with id '"+e.id+"' cannot apply binding on a previously cleaned view.");Object.defineProperty(t[0],"_oj_module_used_view",{value:!0})}}(g,u,d,j,k);var m,y=!1,E=function(e,n,r){for(var i=[],o=t.virtualElements.firstChild(e);null!=o&&o!==r;o=o.nextSibling)o!==n&&i.push(o);return i}(g,P,O),A=function(e,n){const r=[],i=t.virtualElements.childNodes(e);for(let e=0;e<i.length;e++){const t=i[e];if(t!==n){const e=t.nodeType;1!==e&&8!==e||r.push(t)}}return r}(g,P);null==C||I?j&&(m=E):(y=!0,m=E,P||((P=document.createElement("div")).className="oj-helper-module-cache",t.virtualElements.prepend(g,P)));var U=!1,V=function(n){if(!U){if(U=!0,y)a(E,P),s(g,n||g,P);else if(j&&"none"===R)for(var r=0;r<m.length;r++){var o=m[r];o.parentNode.removeChild(o)}else A.forEach(function(e){t.cleanNode(e)}),s(g,n||g,P);J||(D(G,"detached",[g,v,S,m]),x(S,"detachedHandler",[g,v,m]),L(S,"disconnected",m),M(H,"ojViewDisconnected",[S,m]),D(G,"deactivated",[g,v,S]),x(S,"deactivatedHandler",[g,v])),y?(_(m,i.CustomElementUtils.subtreeHidden),w[C]={model:S,view:m}):j&&"none"===R?_(m,e.Components?e.Components.subtreeDetached:null):B(),S=d,C=F,I=ie,R=X}},z=function(){D(G,"transitionCompleted",[g,v,d]),x(d,"transitionCompletedHandler",[g,v]),L(d,"transitionCompleted",u),M(H,"ojTransitionEnd",[d]),k()};if(null!=K){var W=function(e,t,n,r,i,o){return{node:o?e.parentNode:e,valueAccessor:o?null:t,isInitial:n,oldViewModel:r,newViewModel:i}}(g,v,J,S,d,j),Y=function(r,i,o,s,l,c,u){var d,h,p=r,m=i.canAnimate,g=null==m||m.call(i,p);if(!g)return;var v=i.prepareAnimation.call(i,p);v&&(d=v.newViewParent,h=v.oldViewParent);var y=d||o;h&&h!==o?a(s,h):y===o&&c(null);y!==o&&t.virtualElements.setDomNodeChildren(y,[]);l(y);var E=Array.prototype.slice.call(y.childNodes),b=!1,S=function(){if(!b&&(b=!0,o!==y)){f(o,E);var t=o.parentNode&&"OJ-MODULE"===o.parentNode.nodeName;e.Components&&!t&&(_(E,e.Components.subtreeDetached),_(E,e.Components.subtreeAttached))}},T=c.bind(null,h);p.newViewParent=d,p.oldViewParent=h,p.oldViewNodes=s,p.removeOldView=T,p.insertNewView=S;var C=function(){T(),S(),u()},P=i.animate.call(i,p).then(C,function(){C(),n.error("ojModule animation promise was rejected")});return P}(W,K,g,E,$,V,z);T=function(e){if(!e)return e;var t=new Promise(function(t,n){e.then(t,t)});return t}(Y)}else T=void 0;T||(V(null),$(null),z())}function $(n){var r=n||g,i=j&&l(u,d);f(r,u);var o=null!=ne;if(o?_(u,e.Components?e.Components.subtreeShown:null):i&&_(u,e.Components?e.Components.subtreeAttached:null),D(G,"attached",[r,v,d,o]),x(d,"attachedHandler",[r,v,o]),L(d,"connected",u),M(H,"ojViewConnected",[d]),!o&&!i){var s=b.createChildContext(d,void 0,function(e){e.$module=d,e.$params=h});j&&(s.$parent=void 0,s.$parents=void 0,s.$parentContext=void 0,s.$props=void 0,s.$properties=void 0,s.$slotNodeCounts=void 0,s.$slotCounts=void 0,s.$unique=void 0,s.$uniqueId=void 0,s.$provided=void 0),function(e,n,r,i){var o=t.bindingProvider.instance,s=o.preprocessNode;s&&(p(n,i,function(e){s.call(o,e)}),n=t.virtualElements.firstChild(e));p(n,i,function(e){t.applyBindings(r,e)})}(r,u[0],s,P),D(G,"bindingsApplied",[r,v,d]),x(d,"bindingsAppliedHandler",[r,v])}}}.bind(null,N),function(e,t){t!==U&&null!=t&&(k(),n.error(t))}.bind(null,N))},null,{disposeWhenNodeIsRemoved:g}),{controlsDescendantBindings:!0}}},t.virtualElements.allowedBindings.ojModule=!0}(),o}),define("ojs/ojmodule-element",["knockout","ojs/ojcontext","ojs/ojmodule","ojs/ojcomposite","ojs/ojcustomelement-utils"],function(e,t,n,r,i){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;r.register("oj-module",{view:'\x3c!-- ko ojModule: {"view":config().view, "viewModel":config().viewModel,"cleanupMode":config().cleanupMode,"animation":animation} --\x3e\x3c!-- /ko --\x3e',metadata:{properties:{animation:{type:"object"},config:{type:"object|Promise",properties:{cleanupMode:{type:"string",enumValues:["none","onDisconnect"],value:"onDisconnect"},view:{type:"Array<Node>"},viewModel:{type:"object"}}}},events:{ojTransitionEnd:{},ojTransitionStart:{},ojViewConnected:{},ojViewDisconnected:{}},extension:{}},viewModel:function(n){var r=n.element,o=n.properties,s=this;function a(){s.busyCallback||(s.busyCallback=t.getContext(r).getBusyContext().addBusyState({description:"oj-module is waiting on config Promise resolution"}));var e=Promise.resolve(o.config);s.configPromise=e,e.then(function(t){e===s.configPromise&&(s.config(t),s.busyCallback(),s.busyCallback=null)},function(t){if(e===s.configPromise)throw s.busyCallback(),s.busyCallback=null,t})}function l(t,n){var r=t&&t[n];"function"==typeof r&&e.ignoreDependencies(r,t)}function c(e,t,n){var i={};t&&(i.viewModel=t),n&&(i.view=n);var o=new CustomEvent(e,{detail:i});r.dispatchEvent(o)}this.animation=n.properties.animation,this.config=e.observable({view:[]}),this.configPromise=null,this.propertyChanged=function(e){"animation"===e.property?s.animation=e.value:"config"===e.property&&a()},a(),this.connected=function(){var e,t,n,o=this.config();t=(e=o)?e.view:null,(n=t&&t.length>0?t[0][i.OJ_BIND_CONVERTED_NODE]||t[0]:null)&&r.contains(n)&&(l(o.viewModel,"connected"),c("ojViewConnected",o.viewModel))}.bind(this),this.disconnected=function(){var e=this.config();l(e.viewModel,"disconnected"),c("ojViewDisconnected",e.viewModel,e.view)}.bind(this)}})}),define("ojs/ojmodule-element-utils",["exports","ojs/ojcore-base","ojs/ojhtmlutils"],function(e,t,n){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;const r={};t._registerLegacyNamespaceProp("ModuleElementUtils",r),r.createView=function(e){return e&&e.viewPath?new Promise(function(t,n){(e.require?e.require:require)(["text!"+e.viewPath],t,n)}).then(r._processViewText):Promise.resolve([])},r._processViewText=function(e){return n.stringToNodeArray(e)},r.createViewModel=function(e){return e&&e.viewModelPath?new Promise(function(t,n){(e.require?e.require:require)([e.viewModelPath],t,n)}).then(function(t){var n=t;return n&&("always"===e.initialize||null!=e.params&&"never"!==e.initialize)&&("function"==typeof n?n=new n(e.params):"function"==typeof n.initialize&&n.initialize(e.params)),n}):Promise.resolve(null)},r.createConfig=function(e){if(!e||!e.name&&!e.viewPath)return Promise.resolve(null);var t=e.viewPath||"views/"+e.name+".html",n=e.viewModelPath||(e.name?"viewModels/"+e.name:null);return Promise.all([r.createView({viewPath:t,require:e.require}),r.createViewModel({viewModelPath:n,require:e.require,params:e.params,initialize:"always"})]).then(function(e){return{view:e[0],viewModel:e[1]}})};const i=r.createView,o=r.createViewModel,s=r.createConfig;e.createConfig=s,e.createView=i,e.createViewModel=o,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojanimation",["exports","ojs/ojcore-base","jquery","ojs/ojdomutils","ojs/ojthemeutils","ojs/ojlogger"],function(e,t,n,r,i,o){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;const s="translate(",a=") translateZ(0)",l={};t._registerLegacyNamespaceProp("AnimationUtils",l),l._getName=function(e,t){if(!l._nameMap){l._nameMap={};var n=l._nameMap,r=e.style;n.backfaceVisibility=void 0!==r.webkitBackfaceVisibility?"webkitBackfaceVisibility":"backfaceVisibility",n.transform=void 0!==r.webkitTransform?"webkitTransform":"transform",n.transformOrigin=void 0!==r.webkitTransformOrigin?"webkitTransformOrigin":"transformOrigin",n.transition=void 0!==r.webkitTransition?"webkitTransition":"transition",n.transitionend=void 0!==r.webkitTransition?"webkitTransitionEnd":"transitionend"}return l._nameMap[t]||t},l._getElementStyle=function(e,t){return e.style[l._getName(e,t)]},l._setElementStyle=function(e,t,n){e.style[l._getName(e,t)]=n},l._animate=function(e,t,r,i,o,s){var a=[].concat(o),c=function(n,c){var u=function(e){var t=0===e.propertyName.indexOf("-webkit-")?e.propertyName.substr(8):e.propertyName;t=l._getCamelCasePropName(t);var n=a.indexOf(t);n>-1&&(a.length>1?a.splice(n,1):p())},d=0,h=!1;function p(){h||(d&&(window.cancelAnimationFrame(d),d=0),e.removeEventListener(l._getName(e,"transitionend"),u),n&&n(!0),h=!0)}null==r&&(r={}),null==r.css&&(r.css={}),r.css.transition=l._createTransitionValue(e,o,i);var f=l._saveStyle(e,t,r,i,s||o);l._applyState(e,t,f>1),e.addEventListener(l._getName(e,"transitionend"),u);var _=i.duration,m=i.delay,g=i._skipPromise;function v(){d=0,l._applyState(e,r,f>1)}null==t?v():(i._noReflow||(l._x=e.offsetWidth),d=window.requestAnimationFrame(v));var y=l._getTotalTiming(_,m);g||setTimeout(p,y+100)};return i._skipPromise?(c(null),null):new Promise(c).then(function(){t&&t.addClass&&n(e).removeClass(t.addClass),r&&r.addClass&&n(e).removeClass(r.addClass),l._restoreStyle(e)})},l._saveCssValues=function(e,t,n,r){for(var i=Object.keys(t),o=Object.prototype.hasOwnProperty,s=0;s<i.length;s++){var a=i[s];o.call(n,a)||r&&-1!==r.indexOf(a)||(n[a]=l._getElementStyle(e,a))}},l._saveStyle=function(e,t,n,r,i){var o=e._ojSavedStyle||{},s=t&&t.css?t.css:{},a=n&&n.css?n.css:{},c=i;r&&"all"===r.persist||(c=null),l._saveCssValues(e,s,o,c),l._saveCssValues(e,a,o,c),e._ojSavedStyle=o;var u=e._ojEffectCount||0;return u+=1,e._ojEffectCount=u,u},l._restoreStyle=function(e){var t=e,n=t._ojEffectCount;if(n>1)t._ojEffectCount=n-1;else{var r=t._ojSavedStyle;if(r){for(var i=Object.keys(r),o=0;o<i.length;o++){var s=i[o];l._setElementStyle(t,s,r[s])}delete t._ojSavedStyle,delete t._ojEffectCount}}},l._getCamelCasePropName=function(e){if(e.indexOf("-")>=0){for(var t="",n=e.split("-"),r=0;r<n.length;r++){var i=n[r];i&&(t?t+=i.charAt(0).toUpperCase()+i.slice(1):t=i)}return t}return e},l._getHyphenatedPropName=function(e){var t=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return 0===t.indexOf("webkit")&&(t="-"+t),t},l._concatMultiValue=function(e,t,n,r,i){if(t.css[n]){var o=l._getElementStyle(e,n);o&&0!==o.indexOf(r)&&(t.css[n]=o+i+t.css[n])}},l._splitTransform=function(e){var t=[];if(e&&"none"!==e)for(var n=e,r=n.indexOf(")");r>0;){var i=n.substr(0,r+1);t.push(i.trim()),r=(n=n.slice(r+1)).indexOf(")")}return t},l._getTransformFuncName=function(e){var t=e.indexOf("(");return t>=1?e.substr(0,t):e},l._applyTransform=function(e,t){for(var n=l._getElementStyle(e,"transform"),r=l._splitTransform(n),i=l._splitTransform(t),o=[],s=0;s<i.length;s++){var a=l._getTransformFuncName(i[s]),c=!1;if(a)for(var u=0;u<r.length;u++)0===r[u].indexOf(a+"(")&&(r[u]=i[s],c=!0);c||o.push(i[s])}return(r=r.concat(o)).join(" ")},l._applyState=function(e,t,r){if(t){if(t.css){var i="transform";r&&l._concatMultiValue(e,t,"transition","all",", "),t.css[i]&&(t.css[i]=l._applyTransform(e,t.css[i]));for(var o=t.css,s=Object.keys(o),a=0;a<s.length;a++){var c=s[a];l._setElementStyle(e,c,o[c])}}t.addClass&&n(e).addClass(t.addClass),t.removeClass&&n(e).removeClass(t.removeClass)}},l._getTimingValue=function(e){var t=parseFloat(e);return isNaN(t)?0:e.indexOf("ms")>-1?t:1e3*t},l._getTotalTiming=function(e,t){var n=l._getTimingValue(e);return n>0?n+(t?l._getTimingValue(t):0):0},l._calcCssTime=function(e,t,n){for(var r=e.split(","),i=t.split(","),o=n.split(","),s=r.length,a=i.length,c=o.length,u=0,d=0;d<s;d++){var h=o[d%c],p=i[d%a],f=l._getTotalTiming(h,p);u=Math.max(u,f)}return u},l._calcEffectTime=function(e){var t,n,r,i=window.getComputedStyle(e);t=i.animationName||i.webkitAnimationName,n=i.animationDelay||i.webkitAnimationDelay,r=i.animationDuration||i.webkitAnimationDuration;var o=l._calcCssTime(t,n,r);t=i.transitionProperty||i.webkitTransitionProperty,n=i.transitionDelay||i.webkitTransitionDelay,r=i.transitionDuration||i.webkitTransitionDuration;var s=l._calcCssTime(t,n,r);return Math.max(o,s)},l._fillEmptyOptions=function(e,t){e.delay=e.delay||t.delay,e.duration=e.duration||t.duration,e.timingFunction=e.timingFunction||t.timingFunction,e.persist=e.persist||t.persist},l._triggerEvent=function(e,t,n,r){var i;if(r&&r._trigger)i=!r._trigger(t,null,n);else{var o="oj"+t.substr(0,1).toUpperCase()+t.substr(1),s=new CustomEvent(o,{detail:n,bubbles:!0,cancelable:!0}),a=r||e;a.dispatchEvent&&a.dispatchEvent(s),i=s.defaultPrevented}return i},l.startAnimation=function(e,t,r,i){return e=n(e)[0],new Promise(function(o,s){var a=n(e),c="oj-animate-"+t,u=c+"-active",d=!1,h=!1,p=function(){if(d&&h){a.removeClass(c),a.removeClass(u),l._restoreStyle(e),o(!0);var n={action:t,element:e};l._triggerEvent(e,"animateEnd",n,i)}},f=function(){d=!0,p()},_=function(){h=!0,p()};l._saveStyle(e,null,null,null,null);var m={action:t,element:e,endCallback:f};if(!l._triggerEvent(e,"animateStart",m,i)){for(var g=[].concat(r),v=[],y={},E=0;E<g.length;E++){var b,S=g[E],T="";null!=S&&"none"!==S&&("string"==typeof S?(T=S,b={}):"object"==typeof S&&(T=S.effect,b=n.extend({},S)),l._fillEmptyOptions(b,y),y=n.extend({},b)),T&&l[T]&&v.push(l[T](e,b))}v.length?Promise.all(v).then(f):f()}a.addClass(c);var C=window.requestAnimationFrame(function(){C=0,a.addClass(u);var t=l._calcEffectTime(e);t>0?setTimeout(_,t+100):_()});setTimeout(function(){C&&(window.cancelAnimationFrame(C),C=0,_())},1e3)})},l._mergeOptions=function(e,t){return null==l._defaultOptions&&(l._defaultOptions=i.parseJSONFromFontFamily("oj-animation-effect-default-options")),n.extend({duration:"400ms"},l._defaultOptions?l._defaultOptions[e]:null,t)},l._createTransitionValue=function(e,t,n){var r="";if(t)for(var i=0;i<t.length;i++){var o=l._getName(e,t[i]);r+=(i>0?", ":"")+l._getHyphenatedPropName(o)+" "+n.duration,n.timingFunction&&(r+=" "+n.timingFunction),n.delay&&(r+=" "+n.delay)}return r},l._fade=function(e,t,n,r,i){var o=l._mergeOptions(n,t),s={css:{opacity:r}},a={css:{opacity:i}};return o&&(o.startOpacity&&(s.css.opacity=o.startOpacity),o.endOpacity&&(a.css.opacity=o.endOpacity)),l._animate(e,s,a,o,["opacity"])},l.fadeIn=function(e,t){return l._fade(e,t,"fadeIn",0,1)},l.fadeOut=function(e,t){return l._fade(e,t,"fadeOut",1,0)},l.expand=function(e,t){return l._expandCollapse(e,t,!0)},l.collapse=function(e,t){return l._expandCollapse(e,t,!1)},l._wrapRowContent=function(e,t){var n,r,i=[],o=e.children,s=[],a=[];for(e._ojSavedHeight=e.style.height,r=0;r<o.length;r++){n=o[r];var l=window.getComputedStyle(n);s.push(l.padding),a.push(l.textAlign),n._ojSavedPadding=n.style.padding}for(r=0;r<o.length;r++){n=o[r];var c=document.createElement("div");c.style.overflow="hidden;";var u=document.createElement("div");for(u.style.display="table-cell",u.style.verticalAlign="middle",u.style.boxSizing="border-box",u.style.height=t,u.style.padding=s[r],u.style.textAlign=a[r],c.appendChild(u);n.firstChild;)u.appendChild(n.firstChild);n.appendChild(c),n.style.padding="0",i.push(c)}return e.style.height="0",i},l._unwrapRowContent=function(e){for(var t=e.children,n=0;n<t.length;n++){var r=t[n],i=r.children[0];if(i){var o=i.children[0];if(o)for(;o.firstChild;)r.appendChild(o.firstChild);r.removeChild(i)}r.style.padding=r._ojSavedPadding,delete r._ojSavedPadding}e.style.height=e._ojSavedHeight,delete e._ojSavedHeight},l._expandCollapseRow=function(e,t,r){var i=Promise.resolve(),o=e.offsetHeight+"px",s=l._wrapRowContent(e,o),a=n.extend({},t);if(r?a.endMaxHeight||(a.endMaxHeight=o):a.startMaxHeight||(a.startMaxHeight=o),a.persist="all",a._noReflow=!0,s.length)for(var c=0;c<s.length;c++)0===c?(a._skipPromise=!1,i=l._expandCollapse(s[c],a,r)):(a._skipPromise=!0,l._expandCollapse(s[c],a,r));return i.then(function(){null!=t&&"all"===t.persist||l._unwrapRowContent(e)})},l._getSizeLimit=function(e,t,n,r,i){var o=n;if(!o)if(r)o="0";else{var s=i?t.maxWidth:t.maxHeight;o="none"!==s?s:(i?e.offsetWidth:e.offsetHeight)+"px"}return o},l._expandCollapse=function(e,t,n){if(e&&"TR"===e.tagName)return l._expandCollapseRow(e,t,n);var r=l._mergeOptions(n?"expand":"collapse",t),i={css:{}},o={css:{}},s=r.direction||"height",a=i.css,c=o.css,u=window.getComputedStyle(e),d=[];if("both"===s||"height"===s){var h=l._getSizeLimit(e,u,r.startMaxHeight,n,!1),p=l._getSizeLimit(e,u,r.endMaxHeight,!n,!1);a.maxHeight=h,c.maxHeight=p,d.push("maxHeight")}if("both"===s||"width"===s){var f=l._getSizeLimit(e,u,r.startMaxWidth,n,!0),_=l._getSizeLimit(e,u,r.endMaxWidth,!n,!0);a.maxWidth=f,c.maxWidth=_,d.push("maxWidth")}a.overflow=r.overflow?r.overflow:"hidden";var m=[].concat(d);return m.push("overflow"),l._animate(e,i,o,r,d,m)},l.zoomIn=function(e,t){return l._zoom(e,t,!0)},l.zoomOut=function(e,t){return l._zoom(e,t,!1)},l._zoom=function(e,t,n){var r,i=l._mergeOptions(n?"zoomIn":"zoomOut",t),o={css:{}},s={css:{}},c=i.axis||"both";r="both"===c?"scale":"x"===c?"scaleX":"scaleY";var u=o.css,d=s.css,h="transform";return u[h]=r+"("+(n?0:1)+a,d[h]=r+"("+(n?1:0)+a,u.transformOrigin=i.transformOrigin||"center",l._animate(e,o,s,i,[h])},l.slideIn=function(e,t){return l._slide(e,t,!0)},l.slideOut=function(e,t){return l._slide(e,t,!1)},l._slide=function(e,t,n){var i=l._mergeOptions(n?"slideIn":"slideOut",t),o={css:{}},c={css:{}},u=i.direction||"start",d="0",h="0",p=o.css,f=c.css;if(i.offsetX||i.offsetY)i.offsetX&&(d=i.offsetX),i.offsetY&&(h=i.offsetY);else{var _="rtl"===r.getReadingDirection();switch(u){case"left":d=(n?e.offsetWidth:-e.offsetWidth)+"px";break;case"right":d=(n?-e.offsetWidth:e.offsetWidth)+"px";break;case"top":h=(n?e.offsetHeight:-e.offsetHeight)+"px";break;case"bottom":h=(n?-e.offsetHeight:e.offsetHeight)+"px";break;case"end":d=(n?-e.offsetWidth:e.offsetWidth)*(_?-1:1)+"px";break;default:d=(n?e.offsetWidth:-e.offsetWidth)*(_?-1:1)+"px"}}var m="transform";return n?(p[m]=s+d+","+h+a,f[m]="translate(0,0) translateZ(0)"):(p[m]="translate(0,0) translateZ(0)",f[m]=s+d+","+h+a),l._animate(e,o,c,i,[m])},l.ripple=function(e,t){var r=l._mergeOptions("ripple",t),i={css:{}},o={css:{}},s=e.offsetWidth,a=e.offsetHeight,c=n("<div>").css({position:"absolute",overflow:"hidden"}),u=n("<div class='oj-animation-effect-ripple oj-animation-rippler'>"),d="static"===window.getComputedStyle(e).position?{left:e.offsetLeft,top:e.offsetTop}:{left:0,top:0};e.insertBefore(c[0],e.firstChild),c.css({left:d.left+"px",top:d.top+"px",width:s+"px",height:a+"px"}),c.prepend(u);var h=i.css,p=o.css,f="transform";return l._setRippleOptions(h,u,c,r),h[f]="scale(0) translateZ(0)",h.opacity=r.startOpacity||u.css("opacity"),p[f]="scale(1) translateZ(0)",p.opacity=r.endOpacity||0,r.persist="all",l._animate(u[0],i,o,r,[f,"opacity"]).then(function(){c.remove()})},l._setRippleOptions=function(e,t,n,r){var i=e,o=t.width(),s=n.width(),a=n.height();if(r.diameter){var c=r.diameter,u=parseInt(c,10);isNaN(u)||(o="%"===c.charAt(c.length-1)?Math.floor(Math.min(s,a)*(u/100)):u,i.width=o+"px",i.height=o+"px")}var d,h="static"===n.css("position")?n.position():{left:0,top:0};null!=(d=l._calcRippleOffset(r.offsetX,o,s,h.left))&&(i.left=d+"px"),null!=(d=l._calcRippleOffset(r.offsetY,o,a,h.top))&&(i.top=d+"px"),r.color&&(i.backgroundColor=r.color)},l._calcRippleOffset=function(e,t,n,r){var i,o=e||"50%",s=parseInt(o,10);return isNaN(s)||(i="%"===o.charAt(o.length-1)?n*(s/100)-t/2:s-t/2,i=Math.floor(i+r)),i},l._removeRipple=function(e,t){var r=t||{},i=r.removeEffect||"fadeOut",s=n(".oj-animation-rippler",e);if(0!==s.length)return i in{fadeOut:1,collapse:1,zoomOut:1,slideOut:1}?l[i](s,r).then(function(){s.remove()}):s.remove();o.warn("No rippler so returning")},l._calcBackfaceAngle=function(e){var t,n=e.match(/^([+-]?\d*\.?\d*)(.*)$/),r=parseFloat(n[1]),i=n[2];switch(i){case"deg":t=r-180+i;break;case"grad":t=r-200+i;break;case"rad":t=r-3.1416+i;break;case"turn":t=r-.5+i;break;default:o.error("Unknown angle unit in flip animation: "+i)}return t},l._flip=function(e,t,r,i,o){if(t&&"children"===t.flipTarget){var s,a=[],c=n(e).children(),u=n.extend({},t);delete u.flipTarget;var d=n.extend({},u);d.startAngle=l._calcBackfaceAngle(t.startAngle||i),d.endAngle=l._calcBackfaceAngle(t.endAngle||o);for(var h=0;h<c.length;h++)s=n(c[h]).hasClass("oj-animation-backface")?d:u,a.push(l._flip(c[h],s,r,i,o));return Promise.all(a)}var p,f={},_={},m={css:f},g={css:_},v="rotateY(",y="2000px",E="hidden",b="center";(t=l._mergeOptions(r,t))&&("x"===t.axis&&(v="rotateX("),t.startAngle&&(i=t.startAngle),t.endAngle&&(o=t.endAngle),t.perspective&&(y=t.perspective),t.backfaceVisibility&&(E=t.backfaceVisibility),t.transformOrigin&&(b=t.transformOrigin)),p="perspective("+y+") "+v;var S="backfaceVisibility",T="transform",C="transformOrigin";return f[T]=p+i+")",f[S]=E,f[C]=b,_[T]=p+o+")",l._animate(e,m,g,t,[T],[T,S,C])},l.flipIn=function(e,t){return l._flip(e,t,"flipIn","-180deg","0deg")},l.flipOut=function(e,t){return l._flip(e,t,"flipOut","0deg","180deg")},l.addTransition=function(e,t){var n=l._mergeOptions("addTransition",t);return l._animate(e,null,null,n,n.transitionProperties)},l._createHeroParent=function(){var e=document.createElement("div"),t=document.body;t.appendChild(e),e.style.position="absolute",e.style.height=t.offsetHeight+"px",e.style.width=t.offsetWidth+"px",e.style.left=t.offsetLeft+"px",e.style.top=t.offsetTop+"px",e.style.zIndex=2e3,e.className="oj-animation-host-viewport";var n=document.createElement("div");return n.className="oj-animation-host",e.appendChild(n),n},l._removeHeroParent=function(e){if(e){var t=e.parentNode;t&&t.parentNode&&t.parentNode.removeChild(t)}},l._defaultHeroCreateClonedElement=function(e){return e.fromElement.cloneNode(!0)},l._defaultHeroHideFromAndToElements=function(e){var t=e.fromElement,n=e.toElement;t.style.visibility="hidden",n.style.visibility="hidden"},l._defaultHeroAnimateClonedElement=function(e){return new Promise(function(t){var n=e.clonedElement.style;n.transformOrigin="left top",n.transform="translate(0, 0) scale(1, 1)",requestAnimationFrame(function(){n.transitionDelay=e.delay,n.transitionDuration=e.duration,n.transitionTimingFunction=e.timingFunction,n.transitionProperty="transform";var r=s+e.translateX+"px,"+e.translateY+"px)";r+=" scale("+e.scaleX.toFixed(2)+","+e.scaleY.toFixed(2)+")",n.transform=r;var i=l._getTimingValue(e.delay)+l._getTimingValue(e.duration);setTimeout(function(){t()},i)})})},l._defaultHeroShowToElement=function(e){e.toElement.style.visibility="visible"},l._doAnimateHero=function(e,t,n,r,i,o){var s=document.querySelector(t);if(null!=s){var a=e.getBoundingClientRect(),c=s.getBoundingClientRect(),u=c.left-a.left,d=c.top-a.top,h=c.width/a.width,p=c.height/a.height,f={fromElement:e,toElement:s,clonedElement:null,translateX:u,translateY:d,scaleX:h,scaleY:p,toElementElapsedTime:r,delay:n.delay,duration:n.duration,timingFunction:n.timingFunction},_=n.createClonedElement(f);f.clonedElement=_;var m=l._createHeroParent(),g=m.getBoundingClientRect();m.appendChild(_),_.style.position="absolute",_.style.left=a.left-g.left+"px",_.style.top=a.top-g.top+"px",n.hideFromAndToElements(f),_.style.visibility="visible",n.animateClonedElement(f).then(function(){v(),i()}).catch(function(e){v(),o(e)})}else{r+100>n.toElementWaitTime?o("toElement not found in DOM after toElementWaitTime has expired"):setTimeout(function(){l._doAnimateHero(e,t,n,r+100,i,o)},100)}function v(){n.showToElement(f),l._removeHeroParent(m)}},l.animateHero=function(e,t){var n=e,r={toElementWaitTime:5e3,createClonedElement:l._defaultHeroCreateClonedElement,hideFromAndToElements:l._defaultHeroHideFromAndToElements,animateClonedElement:l._defaultHeroAnimateClonedElement,showToElement:l._defaultHeroShowToElement,delay:"0s",duration:"400ms",timingFunction:"ease"};return Object.assign(r,t),new Promise(function(e,i){n?t.toElementSelector?l._doAnimateHero(n,t.toElementSelector,r,0,e,i):i("No options.toElementSelector specified"):i("No element specified")})};const c=l.startAnimation,u=l.fadeIn,d=l.fadeOut,h=l.expand,p=l.collapse,f=l.zoomIn,_=l.zoomOut,m=l.slideIn,g=l.slideOut,v=l.ripple,y=l.flipIn,E=l.flipOut,b=l.addTransition,S=l.animateHero;e.addTransition=b,e.animateHero=S,e.collapse=p,e.expand=h,e.fadeIn=u,e.fadeOut=d,e.flipIn=y,e.flipOut=E,e.ripple=v,e.slideIn=m,e.slideOut=g,e.startAnimation=c,e.zoomIn=f,e.zoomOut=_,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojmoduleanimations",["exports","knockout","jquery","ojs/ojcore-base","ojs/ojdomutils","ojs/ojthemeutils","ojs/ojanimation"],function(e,t,n,r,i,o,s){"use strict";n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;const a={};r._registerLegacyNamespaceProp("ModuleAnimations",a),a._addContainedElements=function(e,n){for(var r=t.virtualElements.firstChild(e);r;)1===r.nodeType?n.push(r):8===r.nodeType&&this._addContainedElements(r,n),r=t.virtualElements.nextSibling(r)},a._cacheVirtualViewRoot=function(e,t){e._ojOldRoot=t},a._getVirtualViewRoot=function(e){return e._ojOldRoot},a._defaultCanAnimate=function(e){if(e.isInitial)return!1;if(1===e.node.nodeType)return!0;if(8===e.node.nodeType){var t=[];if(a._addContainedElements(e.node,t),t&&1===t.length)return a._cacheVirtualViewRoot(e,t[0]),!0}return!1},a._getOldView=function(e){var t;return 1===e.node.nodeType?t=e.node:8===e.node.nodeType&&(t=a._getVirtualViewRoot(e)),t},a._createViewParent=function(e){var t=n(document.createElement("div")),r={position:"absolute",height:e.offsetHeight+"px",width:e.offsetWidth+"px",left:e.offsetLeft+"px",top:e.offsetTop+"px"};t.appendTo(e.offsetParent),t.css(r),t.addClass("oj-animation-host-viewport");var i=document.createElement("div");return i.className="oj-animation-host",t.append(i),i},a.createAnimation=function(e,t,n){return{canAnimate:a._defaultCanAnimate,prepareAnimation:function(r){var i={},o=a._getOldView(r);return t&&!n&&(i.newViewParent=a._createViewParent(o)),e&&(i.oldViewParent=a._createViewParent(o)),t&&n&&(i.newViewParent=a._createViewParent(o)),i},animate:function(n){var r=n.oldViewParent,i=n.newViewParent,o=[];return r&&e&&("function"==typeof e?o.push(e(r)):o.push(s.startAnimation(r,"close",e))),i&&t&&("function"==typeof t?o.push(t(i)):o.push(s.startAnimation(i,"open",t))),Promise.all(o).then(function(){a._postAnimationProcess(n)}).catch(function(){a._postAnimationProcess(n)})}}},a._removeViewParent=function(e,t){var n=e[t];if(n){var r=n.parentNode;r&&r.parentNode&&r.parentNode.removeChild(r)}},a._postAnimationProcess=function(e){e.removeOldView(),e.insertNewView(),a._removeViewParent(e,"newViewParent"),a._removeViewParent(e,"oldViewParent")},a._getModuleEffect=function(e){return null==a._moduleEffects&&(a._moduleEffects=o.parseJSONFromFontFamily("oj-animation-module-effects")),a._moduleEffects?a._moduleEffects[e]:null},a._getImplementation=function(e){var t=a._getModuleEffect(e);return t?a.createAnimation(t.oldViewEffect,t.newViewEffect,t.newViewOnTop):null},a._getNavigateMethod=function(e,t){return null==a._navigateMethods&&(a._navigateMethods=o.parseJSONFromFontFamily("oj-animation-navigate-methods")),a._navigateMethods?a._navigateMethods[t]:null},a._navigateCanAnimate=function(e,t){var n=a._getNavigateMethod(e,t);return!!a[n]&&(null==a[n].canAnimate||a[n].canAnimate(e))},a._navigatePrepareAnimation=function(e,t){var n=a._getNavigateMethod(e,t);return a[n]&&a[n].prepareAnimation?a[n].prepareAnimation(e):null},a._navigateAnimate=function(e,t){var n=a._getNavigateMethod(e,t);return a[n]&&a[n].animate?a[n].animate(e):Promise.resolve()},a._getNavigateImplementation=function(e){return{canAnimate:function(t){return a._navigateCanAnimate(t,e)},prepareAnimation:function(t){return a._navigatePrepareAnimation(t,e)},animate:function(t){return a._navigateAnimate(t,e)}}},a.coverLeft=a._getImplementation("coverLeft"),a.coverRight=a._getImplementation("coverRight"),a.revealLeft=a._getImplementation("revealLeft"),a.revealRight=a._getImplementation("revealRight"),a.coverStart="rtl"===i.getReadingDirection()?a.coverRight:a.coverLeft,a.revealEnd="rtl"===i.getReadingDirection()?a.revealLeft:a.revealRight,a.coverUp=a._getImplementation("coverUp"),a.revealDown=a._getImplementation("revealDown"),a.zoomIn=a._getImplementation("zoomIn"),a.zoomOut=a._getImplementation("zoomOut"),a.fade=a._getImplementation("fade"),a.pushStart=a._getImplementation("pushStart"),a.pushEnd=a._getImplementation("pushEnd"),a.navChild=a._getNavigateImplementation("navChild"),a.navParent=a._getNavigateImplementation("navParent"),a.drillIn=a.navChild,a.drillOut=a.navParent,a.navSiblingEarlier=a._getNavigateImplementation("navSiblingEarlier"),a.navSiblingLater=a._getNavigateImplementation("navSiblingLater"),a.switcher=function(e){return new function(){var t;function n(e){return function(n){return t[e].call(t,n)}}var r=this,i="canAnimate";this[i]=function(o){var s=e(o);if(!(t=null==s?null:a[s]))return!1;for(var l=["prepareAnimation","animate"],c=0;c<l.length;c++){var u=l[c];r[u]=n(u)}return n(i)(o)}}};const l=a.createAnimation,c=a.coverLeft,u=a.coverRight,d=a.revealLeft,h=a.revealRight,p=a.coverStart,f=a.revealEnd,_=a.coverUp,m=a.revealDown,g=a.zoomIn,v=a.zoomOut,y=a.fade,E=a.pushStart,b=a.pushEnd,S=a.navChild,T=a.navParent,C=a.drillIn,P=a.drillOut,O=a.navSiblingEarlier,A=a.navSiblingLater,I=a.switcher;e.coverLeft=c,e.coverRight=u,e.coverStart=p,e.coverUp=_,e.createAnimation=l,e.drillIn=C,e.drillOut=P,e.fade=y,e.navChild=S,e.navParent=T,e.navSiblingEarlier=O,e.navSiblingLater=A,e.pushEnd=b,e.pushStart=E,e.revealDown=m,e.revealEnd=f,e.revealLeft=d,e.revealRight=h,e.switcher=I,e.zoomIn=g,e.zoomOut=v,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojdefer",["ojs/ojkoshared","knockout","ojs/ojcore-base"],function(e,t,n){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,e.addPostprocessor({nodeHasBindings:function(e,t){return t||1===e.nodeType&&"oj-defer"===e.nodeName.toLowerCase()},getBindingAccessors:function(e,t,n){var r=n;return 1===e.nodeType&&"oj-defer"===e.nodeName.toLowerCase()&&((r=r||{})._ojDefer_=function(){}),r}}),t.bindingHandlers._ojDefer_={init:function(e,n,r,i,o){var s=e;if(s._shown)t.applyBindingsToDescendants(o,s);else if(!s._activateSubtree){for(var a=[];s.firstChild;)a.push(s.firstChild),s.removeChild(s.firstChild);s._activateSubtree=e=>{a.forEach(t=>e.appendChild(t)),t.applyBindingsToDescendants(o,e)}}return{controlsDescendantBindings:!0}}};class r extends HTMLElement{constructor(){super(),this._activateSubtreeInternal=null,this._shownInternal=!1}get _shown(){return this._shownInternal}get _activateSubtree(){return this._activateSubtreeInternal}set _activateSubtree(e){this._activateSubtreeInternal=e}_activate(){this._activateSubtree?(this._activateSubtree(this),this._activateSubtreeInternal=null):this._shownInternal=!0}}customElements.define("oj-defer",r),n._registerLegacyNamespaceProp("DeferElement",r)}),define("ojs/ojdatasource-common",["exports","ojs/ojcore-base","ojs/ojcore"],function(e,t,n){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;
/**
   * @preserve Copyright 2013 jQuery Foundation and other contributors
   * Released under the MIT license.
   * http://jquery.org/license
   */
const r=function(e){this.data=e,this.Init()};t._registerLegacyNamespaceProp("DataSource",r),t.Object.createSubclass(r,t.EventSource,"oj.DataSource"),r.prototype.Init=function(){r.superclass.Init.call(this)};const i=function(e){i.superclass.constructor.call(this,e)};n._registerLegacyNamespaceProp("DataGridDataSource",i),n.Object.createSubclass(i,n.DataSource,"oj.DataGridDataSource");const o=function(e){o.superclass.constructor.call(this,e)};t._registerLegacyNamespaceProp("DiagramDataSource",o),t.Object.createSubclass(o,t.DataSource,"oj.DiagramDataSource"),o.EventType={ADD:"add",REMOVE:"remove",CHANGE:"change"};
/**
   * @preserve Copyright 2013 jQuery Foundation and other contributors
   * Released under the MIT license.
   * http://jquery.org/license
   */
const s=function(e,t){if(this.constructor===s){var n=s._LOGGER_MSG._ERR_TABLE_DATASOURCE_INSTANTIATED_SUMMARY,r=s._LOGGER_MSG._ERR_TABLE_DATASOURCE_INSTANTIATED_DETAIL;throw new Error(n+"\n"+r)}this.data=e,this.options=t,this.isFetching=!1,this._startIndex=0,this.Init()};n._registerLegacyNamespaceProp("TableDataSource",s),n.Object.createSubclass(s,n.DataSource,"oj.TableDataSource"),s.prototype.Init=function(){s.superclass.Init.call(this)},s.prototype.sortCriteria=null,s.prototype.totalSizeConfidence=function(){return"actual"},s.EventType={ADD:"add",REMOVE:"remove",RESET:"reset",REFRESH:"refresh",SORT:"sort",CHANGE:"change",REQUEST:"request",SYNC:"sync",ERROR:"error"},s._LOGGER_MSG={_ERR_TABLE_DATASOURCE_INSTANTIATED_SUMMARY:"oj.TableDataSource constructor called.",_ERR_TABLE_DATASOURCE_INSTANTIATED_DETAIL:"Please do not instantiate oj.TableDataSource. Please use one of the subclasses instead such as oj.ArrayTableDataSource or oj.CollectionTableDataSource.",_ERR_DATA_INVALID_TYPE_SUMMARY:"Invalid data type.",_ERR_DATA_INVALID_TYPE_DETAIL:"Please specify the appropriate data type."};const a=function(e){a.superclass.constructor.call(this,e)};n._registerLegacyNamespaceProp("TreeDataSource",a),n.Object.createSubclass(a,n.DataSource,"oj.TreeDataSource");var l={};l.DataGridDataSource=oj.DataGridDataSource,e.DataGridDataSource=i,e.DataSource=r,e.DataSourceCommon=l,e.DiagramDataSource=o,e.TableDataSource=s,e.TreeDataSource=a,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojarraytabledatasource",["ojs/ojcore-base","jquery","ojs/ojlogger","ojs/ojtranslation","ojs/ojdatasource-common"],function(e,t,n,r,i){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;const o=function(e,t){if(this.data=e||{},!(e instanceof Array||this._isObservableArray(e))){var r=i.TableDataSource._LOGGER_MSG._ERR_DATA_INVALID_TYPE_SUMMARY,s=i.TableDataSource._LOGGER_MSG._ERR_DATA_INVALID_TYPE_DETAIL;throw new Error(r+"\n"+s)}null!=t&&null!=t.idAttribute||n.info(o._LOGGER_MSG._INFO_ARRAY_TABLE_DATASOURCE_IDATTR),o.superclass.constructor.call(this,e,t),this._eventHandlers=[],this._rows={},null!=e&&(this._idAttribute=null,null!=t&&null!=t.idAttribute&&(this._idAttribute=t.idAttribute)),(null==t||"enabled"!==t.startFetch&&null!=t.startFetch)&&null!=t||(this._startFetchEnabled=!0)};e._registerLegacyNamespaceProp("ArrayTableDataSource",o),e.Object.createSubclass(o,i.TableDataSource,"ArrayTableDataSource"),o.prototype.comparator=null,o.prototype.sortCriteria=null,o.prototype.Init=function(){o.superclass.Init.call(this)},o.prototype.add=function(e,t){t=t||{},this._checkDataLoaded();var n=t.at;return this._addToRowSet(e,n,t)},o.prototype.at=function(e,t){var n;return this._checkDataLoaded(),n=e<0||e>=this._rows.data.length?null:{data:this._rows.data[e],index:e,key:this._getId(this._rows.data[e])},new Promise(function(e){e(n)})},o.prototype.change=function(e,t){t=t||{},this._checkDataLoaded();var n=t.silent,r={data:[],keys:[],indexes:[]};e instanceof Array||(e=[e]);for(var o=0;o<e.length;o++){var s=e[o];if(null!=s){var a=this._getId(s),l=this._getInternal(a,!1);r.data.push(this._wrapWritableValue(s)),r.keys.push(a),r.indexes.push(l.index),this._rows.data[l.index]=s}}return!n&&r.data.length>0&&i.TableDataSource.superclass.handleEvent.call(this,i.TableDataSource.EventType.CHANGE,r),Promise.resolve(r)},o.prototype.fetch=function(e){return"init"!==(e=e||{}).fetchType||this._startFetchEnabled?this._fetchInternal(e):Promise.resolve()},o.prototype.get=function(e,t){return this._checkDataLoaded(),Promise.resolve(this._getInternal(e,!0))},o.prototype.getCapability=function(e){return"full"},o.prototype.remove=function(e,t){return t=t||{},this._checkDataLoaded(),this._removeInternal(e,t)},o.prototype.reset=function(e,t){(t=t||{}).previousRows=this._rows;var n=t.silent;return null!=e&&(this.data=e),this._rows={},this._totalSize=0,this._arrayChangeSubscription&&(this._arrayChangeSubscription.dispose(),this._arrayChangeSubscription=null),n||i.TableDataSource.superclass.handleEvent.call(this,i.TableDataSource.EventType.RESET,null),Promise.resolve()},o.prototype.sort=function(e){null==e?e=this.sortCriteria:this.sortCriteria=e,e=e||{},this._checkDataLoaded();var t=this;return new Promise(function(n){var r=t._getComparator();t._rows.data.sort(function(e,n){return o._sortFunc(e,n,r,t)}),t._sorted=!0;var s={header:e.key,direction:e.direction};i.TableDataSource.superclass.handleEvent.call(t,i.TableDataSource.EventType.SORT,s),n(s)})},o.prototype.totalSize=function(){return this._checkDataLoaded(),this._totalSize},o.prototype._addToRowSet=function(e,t,n){var r=(n=n||{}).silent,s={data:[],keys:[],indexes:[]};e instanceof Array||(e=[e]),null==t||t instanceof Array||(t=[t]);for(var a=0;a<e.length;a++){var l=e[a];if(null!=l){var c=this._getId(l);if(s.data.push(this._wrapWritableValue(l)),s.keys.push(c),!0===this._sorted&&this._rows.data.length>0)for(var u=0;u<this._rows.data.length;u++){if(o._sortFunc(l,this._rows.data[u],this._getComparator(),this)<0){this._rows.data.splice(u,0,l),s.indexes.push(u);break}if(u===this._rows.data.length-1){this._rows.data.push(l),s.indexes.push(u+1);break}}else null==t?(this._rows.data.push(l),s.indexes.push(this._rows.data.length-1)):(this._rows.data.splice(t[a],0,l),s.indexes.push(t[a]));this._totalSize+=1,this._realignRowIndices()}}return!r&&s.data.length>0&&i.TableDataSource.superclass.handleEvent.call(this,i.TableDataSource.EventType.ADD,s),Promise.resolve(s)},o.prototype._checkDataLoaded=function(){if(!this._isDataLoaded()){var e=[];this.data instanceof Array?e=this.data:this._isObservableArray(this.data)&&(e=this.data.peek(),this._subscribeObservableArray(this.data)),this._rows=this._getRowArray(e),this._totalSize=e.length}},o.prototype._isDataLoaded=function(){return null!=this._rows&&null!=this._rows.data},o.prototype._fetchInternal=function(e){var t,n,r,i;e=e||{},this._startFetch(e),this._checkDataLoaded();try{t=e.pageSize>0?e.pageSize:-1,this._startIndex||(this._startIndex=0),this._startIndex=null==e.startIndex?this._startIndex:e.startIndex,i=o._getEndIndex(this._rows,this._startIndex,t),n=[],r=[];for(var s=this._startIndex;s<=i;s++){var a=this._getId(this._rows.data[s]),l=this._wrapWritableValue(this._rows.data[s]);n[s-this._startIndex]=l,r[s-this._startIndex]=a}}catch(t){return this._endFetch(e,null,t),Promise.reject(t)}i<this._startIndex&&(this._startIndex=i+1),e.pageSize=t,e.startIndex=this._startIndex,e.refresh=!0;var c={data:n,keys:r,startIndex:this._startIndex};return this._endFetch(e,c,null),Promise.resolve(c)},o.prototype._getInternal=function(e,n){for(var r=null,i=0;i<this._rows.data.length;i++){var o=this._rows.data[i];if(void 0!==o){var s=this._getId(o);if(t.isArray(s)&&t.isArray(e)){if(s.length===e.length){for(var a=!0,l=0;l<e.length;l++)if(s[l]!==e[l]){a=!1;break}if(a){r=n?{data:this._wrapWritableValue(o),key:s,index:this._rows.indexes[i]}:{data:o,key:s,index:this._rows.indexes[i]};break}}}else if(s===e){r=n?{data:this._wrapWritableValue(o),key:s,index:this._rows.indexes[i]}:{data:o,key:s,index:this._rows.indexes[i]};break}}}return r},o.prototype._getComparator=function(){var e=this.comparator;if(null==e){var n=this.sortCriteria.key,r=this.sortCriteria.direction;"ascending"===r?e=function(e){return t.isFunction(e[n])?e[n]():e[n]}:"descending"===r&&(e=function(e,r){var i,o;return t.isFunction(e[n])?(i=e[n](),o=r[n]()):(i=e[n],o=r[n]),i===o?0:i>o?-1:1})}return e},o.prototype._realignRowIndices=function(){for(var e=0;e<this._rows.data.length;e++)this._rows.indexes[e]=e},o.prototype._removeInternal=function(e,t){var n,r=(t=t||{}).silent,o={data:[],keys:[],indexes:[]};e instanceof Array||(e=[e]);var s=[];for(n=0;n<e.length;n++){var a=e[n];if(null!=a){var l=this._getId(a),c=this._getInternal(l,!1);null!=c&&s.push({data:c.data,key:c.key,index:c.index})}}for(s.sort(function(e,t){return e.index-t.index}),n=0;n<s.length;n++)o.data.push(s[n].data),o.keys.push(s[n].key),o.indexes.push(s[n].index);for(n=o.indexes.length-1;n>=0;n--)this._rows.data.splice(o.indexes[n],1),this._rows.indexes.splice(o.indexes[n],1),this._totalSize-=1;return this._realignRowIndices(),!r&&o.data.length>0&&i.TableDataSource.superclass.handleEvent.call(this,i.TableDataSource.EventType.REMOVE,o),Promise.resolve(o)},o.prototype._setRow=function(e,t){this._rows[e]=t,t.index=e},o.prototype._startFetch=function(e){e.silent||i.TableDataSource.superclass.handleEvent.call(this,i.TableDataSource.EventType.REQUEST,{startIndex:e.startIndex})},o.prototype._endFetch=function(e,t,n){null!=n?i.TableDataSource.superclass.handleEvent.call(this,i.TableDataSource.EventType.ERROR,n):e.silent||i.TableDataSource.superclass.handleEvent.call(this,i.TableDataSource.EventType.SYNC,t)},o.prototype._handleRowChange=function(e){e.startIndex=this._startIndex,i.TableDataSource.superclass.handleEvent.call(this,i.TableDataSource.EventType.CHANGE,e)},o._compareKeys=function(e,t,n){if("descending"===n){if(e<t)return 1;if(t<e)return-1}else{if(e>t)return 1;if(t>e)return-1}return 0},o._getEndIndex=function(e,t,n){var r=e.data.length-1;return n>0&&(r=(r=t+n-1)>e.data.length-1?e.data.length-1:r),r},o._getKey=function(e,t){return"function"==typeof e[t]?e[t]():e[t]},o.prototype._getRowArray=function(e){var t=e.length-1,n={data:[],indexes:[]};this._attributes=null;for(var r=0;r<=t;r++){var i={},o=e[r];if(o)for(var s=Object.keys(o),a=0;a<s.length;a++){var l=s[a];i[l]=o[l],0===r&&(null==this._attributes&&(this._attributes=[]),this._attributes.push(l))}else i=null;n.data[r]=i,n.indexes[r]=r}return n},o.prototype._getId=function(e){var n,i,s=this._getIdAttr(e);if(null==e)return null;if(t.isArray(s)){var a;for(n=[],a=0;a<s.length;a++){if(!(s[a]in e))throw i=r.applyParameters(o._LOGGER_MSG._ERR_ARRAY_TABLE_DATASOURCE_IDATTR_NOT_IN_ROW,[s[a]]),new Error(i);n[a]=o._getKey(e,s[a])}}else{if(!(s in e))throw i=r.applyParameters(o._LOGGER_MSG._ERR_ARRAY_TABLE_DATASOURCE_IDATTR_NOT_IN_ROW,[s]),new Error(i);n=o._getKey(e,s)}return n},o.prototype._getIdAttr=function(e){if(null!=this._idAttribute)return this._idAttribute;if(null==this._attributes){this._attributes=[];for(var t=Object.keys(e),n=0;n<t.length;n++){var r=t[n];this._attributes.push(r)}}return Object.prototype.hasOwnProperty.call(this._attributes,"id")?"id":this._attributes},o._sortFunc=function(n,r,i,s){var a,l,c,u,d=s.sortCriteria.direction;if(t.isFunction(i)){if(1===i.length){a=i.call(s,n),l=i.call(s,r);var h=e.StringUtils.isString(a)?a.split(","):[a],p=e.StringUtils.isString(l)?l.split(","):[l];for(c=0;c<h.length;c++)if(0!==(u=o._compareKeys(h[c],p[c],d)))return u;return 0}return i.call(s,n,r)}if(e.StringUtils.isString(i)){var f=i.split(",");for(c=0;c<f.length;c++)if(a=o._getKey(n,f[c]),l=o._getKey(r,f[c]),0!==(u=o._compareKeys(a,l,d)))return u}return 0},o.prototype._subscribeObservableArray=function(t){if(!(t instanceof Array)){var n=this;this._arrayChangeSubscription=t.subscribe(function(t){var r,i,o,s,a=[],l=[];for(r=0;r<t.length;r++)for(o=t[r].index,s=t[r].status,i=0;i<t.length;i++)i!==r&&o===t[i].index&&s!==t[i].status&&a.indexOf(r)<0&&l.indexOf(r)<0&&("deleted"===s?(l.push(r),a.push(i)):(l.push(i),a.push(r)));var c=[];for(r=0;r<t.length;r++)if(a.indexOf(r)>=0){var u=n._getId(n._rows.data[t[r].index]),d=n._getId(t[r].value);null==d||e.Object.compareValues(d,u)||(n._rows.data[t[r].index]=t[r].value),c.push(t[r].value)}n.change(c,null),c=[];var h=[];for(r=0;r<t.length;r++)a.indexOf(r)<0&&l.indexOf(r)<0&&"deleted"===t[r].status&&c.push(t[r].value);for(n.remove(c,null),c=[],h=[],r=0;r<t.length;r++)a.indexOf(r)<0&&l.indexOf(r)<0&&"added"===t[r].status&&(c.push(t[r].value),h.push(t[r].index));n.add(c,{at:h})},null,"arrayChange")}},o.prototype._wrapWritableValue=function(e){var t={};if(!e)return null;for(var n=Object.keys(e),r=0;r<n.length;r++)o._defineProperty(t,e,n[r]);return t},o.prototype._isObservableArray=function(e){return"function"==typeof e&&"function"==typeof e.subscribe},o._defineProperty=function(e,t,n){Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){t[n]=e},enumerable:!0})},o._LOGGER_MSG={_INFO_ARRAY_TABLE_DATASOURCE_IDATTR:"idAttribute option has not been specified. Will default to using 'id' if the field exists. If not, will use all the fields.",_ERR_ARRAY_TABLE_DATASOURCE_IDATTR_NOT_IN_ROW:"Specified idAttribute {0} not in row data. Please ensure all specified idAttribute fields are in the row data or do not specify idAttribute and all fields will be used as id."}}),define("ojs/ojeventtarget",["exports","ojs/ojcore-base"],function(e,t){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;
/**
     * @preserve Copyright 2013 jQuery Foundation and other contributors
     * Released under the MIT license.
     * http://jquery.org/license
     */
class n{constructor(e,t){this.type=e,this.options=t,null!=t&&(this.detail=t.detail)}}t._registerLegacyNamespaceProp("GenericEvent",n);class r{addEventListener(e,t){this._eventListeners||(this._eventListeners=[]),this._eventListeners.push({type:e.toLowerCase(),listener:t})}removeEventListener(e,t){if(this._eventListeners){let n;for(n=this._eventListeners.length-1;n>=0;n--)this._eventListeners[n].type==e&&this._eventListeners[n].listener==t&&this._eventListeners.splice(n,1)}}dispatchEvent(e){if(this._eventListeners){var t,n=this._eventListeners.slice(0);for(t=0;t<n.length;t++){var r=n[t];if(e&&e.type&&r.type==e.type.toLowerCase()&&!1===r.listener.apply(this,[e]))return!1}}return!0}static applyMixin(e){[r].forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(n=>{"constructor"!==n&&(e.prototype[n]=t.prototype[n])})})}}t._registerLegacyNamespaceProp("EventTargetMixin",r),e.EventTargetMixin=r,e.GenericEvent=n,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojdataprovider",["exports","ojs/ojcore-base","ojs/ojeventtarget"],function(e,t,n){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,
/**
     * @preserve Copyright 2013 jQuery Foundation and other contributors
     * Released under the MIT license.
     * http://jquery.org/license
     */
oj.DataProvider=function(){},function(e){let t;!function(e){e.$co="$co",e.$eq="$eq",e.$ew="$ew",e.$pr="$pr",e.$gt="$gt",e.$ge="$ge",e.$lt="$lt",e.$le="$le",e.$ne="$ne",e.$regex="$regex",e.$sw="$sw"}(t=e.AttributeOperator||(e.AttributeOperator={}))}(e.AttributeFilterOperator||(e.AttributeFilterOperator={})),t._registerLegacyNamespaceProp("AttributeFilterOperator",e.AttributeFilterOperator),function(e){let t;!function(e){e.$and="$and",e.$or="$or"}(t=e.CompoundOperator||(e.CompoundOperator={}))}(e.CompoundFilterOperator||(e.CompoundFilterOperator={})),t._registerLegacyNamespaceProp("CompoundFilterOperator",e.CompoundFilterOperator);class r{constructor(){this._handleMutationAdd=function(e){const n=e[r._BEFOREKEYS],i=e[r._KEYS],o=[];i.forEach(e=>{o.push(e)});const s=e[r._DATA]?e[r._DATA]:[],a=this._deriveMetadataFromKey(e[r._METADATA],i),l=e[r._INDEXES];if(o&&o.length>0)if(l)o.forEach((e,t)=>{this._items.splice(l[t],0,new this.Item(a[t],s[t]))});else if(n){const i=Object.assign([],n),l=Object.assign(new Set,e[r._KEYS]),c=Object.assign([],s),u=Object.assign([],a),d=[];let h,p,f;for(const e of n){if(h=e,f=!0,null!=h){for(const e of o)if(t.Object.compareValues(e,h)){f=!1;break}if(f)for(const e of this._items)if(t.Object.compareValues(e?.metadata?.key,h)){f=!1;break}}else f=!1;f&&d.push(h)}let _=n.length;for(;_>0;){for(const e of n)if(p=e,d.indexOf(p)>=0){d.push(p);break}_--}for(let e=i.length-1;e>=0;e--)d.indexOf(i[e])>=0&&(delete i[e],l.delete(i[e]),delete c[e],delete u[e]);i.forEach((e,n)=>{if(null===e)this._items.push(new this.Item(a[n],s[n]));else for(let r=0;r<this._items.length;r++)if(t.Object.compareValues(this._items[r]?.metadata?.key,e)){this._items.splice(r,0,new this.Item(a[n],s[n]));break}})}else if(this._fetchParams&&null!=this._fetchParams.sortCriteria){const e=this._fetchParams.sortCriteria;if(e){const t=this._getSortComparator(e);let n,r,i;const o=[];s.forEach((e,l)=>{for(n=0;n<this._items.length;n++)if(r=this._items[n].data,i=t(e,r),i<0){this._items.splice(n,0,new this.Item(a[l],s[l])),o.push(l);break}}),s.forEach((e,t)=>{o.indexOf(t)<0&&this._items.push(new this.Item(a[t],s[t]))})}}else s.forEach((e,t)=>{this._items.push(new this.Item(a[t],s[t]))})},this._handleMutationRemove=function(e){const n=e[r._KEYS];if(n&&n.size>0){let e;n.forEach(n=>{for(e=this._items.length-1;e>=0;e--)if(t.Object.compareValues(this._items[e].metadata.key,n)){this._items.splice(e,1);break}})}},this._handleMutationUpdate=function(e){const n=e[r._DATA];if(n&&n.length>0){const i=e[r._KEYS],o=this._deriveMetadataFromKey(e[r._METADATA],i);let s,a=0;i.forEach(e=>{for(s=this._items.length-1;s>=0;s--)if(t.Object.compareValues(this._items[s].metadata.key,e)){this._items.splice(s,1,new this.Item(o[a],n[a]));break}a++})}},this.Item=class{constructor(e,t){this.metadata=e,this.data=t,this[r._METADATA]=e,this[r._DATA]=t}},this.FetchByKeysResults=class{constructor(e,t){this.fetchParameters=e,this.results=t,this[r._FETCHPARAMETERS]=e,this[r._RESULTS]=t}},this.FetchByOffsetResults=class{constructor(e,t,n,i){this.fetchParameters=e,this.results=t,this.done=n,this.totalFilteredRowCount=i,this[r._FETCHPARAMETERS]=e,this[r._RESULTS]=t,this[r._DONE]=n,"enabled"===e?.includeFilteredRowCount&&(this.totalFilteredRowCount=i)}},this._items=[]}addListResult(e){const t=[];e.value.data.forEach((n,r)=>{t.push(new this.Item(e.value.metadata[r],n))}),this._items=this._items.concat(t),this._done=e.done}getDataList(e,t){this._fetchParams=e;let n=25;null!=e.size&&(n=-1===e.size?this.getSize():e.size);const r=this._items.slice(t,t+n),i=[],o=[];return r.forEach(e=>{i.push(e.data),o.push(e.metadata)}),{fetchParameters:e,data:i,metadata:o}}getDataByKeys(e){const t=new Map;return e&&e.keys&&e.keys.forEach(e=>{for(const n of this._items)if(n.metadata.key===e){t.set(e,n);break}}),new this.FetchByKeysResults(e,t)}getDataByOffset(e){let t=[];const n=e.offset+e.size>=this.getSize()&&this.isDone();return e&&(t=this._items.slice(e.offset,e.offset+e.size)),new this.FetchByOffsetResults(e,t,n,this.getSize())}processMutations(e){null!=e.remove&&this._handleMutationRemove(e.remove),null!=e.add&&this._handleMutationAdd(e.add),null!=e.update&&this._handleMutationUpdate(e.update)}reset(){this._items=[],this._done=!1}getSize(){return this._items.length}isDone(){return this._done}_deriveMetadataFromKey(e,t){return e&&e.length==t.size||(e=[],t.forEach(t=>{e.push({key:t})})),e}_getSortComparator(e){return(t,n)=>{let i,o,s,a;for(const l of e){i=l[r._DIRECTION],o=l[r._ATTRIBUTE],s=this._getVal(t,o),a=this._getVal(n,o);let e=0;const c="string"==typeof s?s:String(s).toString(),u="string"==typeof a?a:String(a).toString();if(e="ascending"===i?c.localeCompare(u,void 0,{numeric:!0,sensitivity:"base"}):u.localeCompare(c,void 0,{numeric:!0,sensitivity:"base"}),0!==e)return e}return 0}}_getVal(e,t){if("string"==typeof t){const n=t.indexOf(".");if(n>0){const r=t.substring(0,n),i=t.substring(n+1),o=e[r];if(o)return this._getVal(o,i)}}return"function"==typeof e[t]?e[t]():e[t]}}r._DATA="data",r._METADATA="metadata",r._ITEMS="items",r._BEFOREKEYS="addBeforeKeys",r._KEYS="keys",r._INDEXES="indexes",r._FROM="from",r._OFFSET="offset",r._REFRESH="refresh",r._MUTATE="mutate",r._SIZE="size",r._FETCHPARAMETERS="fetchParameters",r._SORTCRITERIA="sortCriteria",r._DIRECTION="direction",r._ATTRIBUTE="attribute",r._VALUE="value",r._DONE="done",r._RESULTS="results",r._CONTAINSPARAMETERS="containsParameters",r._DEFAULT_SIZE=25,r._CONTAINSKEYS="containsKeys",r._FETCHBYKEYS="fetchByKeys",r._FETCHBYOFFSET="fetchByOffset",r._FETCHFIRST="fetchFirst",r._FETCHATTRIBUTES="attributes",t._registerLegacyNamespaceProp("DataCache",r);class i extends n.GenericEvent{constructor(e){const t={};t[i._DETAIL]=e,super("mutate",t)}}i._DETAIL="detail",t._registerLegacyNamespaceProp("DataProviderMutationEvent",i);class o extends n.GenericEvent{constructor(e){const t={};t.detail=e,super("refresh",t)}}t._registerLegacyNamespaceProp("DataProviderRefreshEvent",o);class s{fetchByKeys(e){let t=0;const n=this.getIterationLimit?this.getIterationLimit():-1,r={size:25},i=new Map,o=this.fetchFirst(r)[Symbol.asyncIterator]();return function e(r,i,o){return i.next().then(function(s){const a=s.value,l=a.data,c=a.metadata,u=c.map(function(e){return e.key});let d=!0;return r.keys.forEach(function(e){o.has(e)||u.map(function(t,n){t===e&&o.set(t,{metadata:c[n],data:l[n]})}),o.has(e)||(d=!1)}),t+=l.length,d||s.done||-1!=n&&t>=n?o:e(r,i,o)})}(e,o,i).then(function(t){const n=new Map;return t.forEach(function(e,t){const r=[e];n.set(t,r[0])}),{fetchParameters:e,results:n}})}containsKeys(e){return this.fetchByKeys(e).then(function(t){const n=new Set;return e.keys.forEach(function(e){null!=t.results.get(e)&&n.add(e)}),Promise.resolve({containsParameters:e,results:n})})}getCapability(e){if("fetchByKeys"===e)return{implementation:"iteration"};let t=null;if(!0!==this._ojSkipLastCapability){this._ojSkipLastCapability=!0;let n=1;for(;this["_ojLastGetCapability"+n];)++n;for(--n;n>0&&(t=this["_ojLastGetCapability"+n](e),!t);n--);delete this._ojSkipLastCapability}return t}static applyMixin(e){const t=e.prototype.getCapability;if([s].forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(n=>{"constructor"!==n&&(e.prototype[n]=t.prototype[n])})}),t){let n=1;for(;e.prototype["_ojLastGetCapability"+n];)++n;e.prototype["_ojLastGetCapability"+n]=t}}}t._registerLegacyNamespaceProp("FetchByKeysMixin",s);class a{fetchByOffset(e){const t=e&&e.size>0?e.size:25,n=e?e.sortCriteria:null,r=e&&e.offset>0?e.offset:0;let i=0;const o=this.getIterationLimit?this.getIterationLimit():-1;let s=!1;const a={};a.size=t,a.sortCriteria=n;const l=new Array,c=this.fetchFirst(a)[Symbol.asyncIterator]();return function e(n,a,l){return a.next().then(function(c){s=c.done;const u=c.value,d=u.data,h=u.metadata,p=d.length;if(r<i+p){for(let e=r<=i?0:r-i;e<p&&l.length!==t;e++)l.push({metadata:h[e],data:d[e]})}return i+=p,l.length<t&&!s?-1!==o&&i>=o?l:e(n,a,l):l})}(e,c,l).then(function(t){return{fetchParameters:e,results:t,done:s}})}getCapability(e){if("fetchByOffset"===e)return{implementation:"iteration"};let t=null;if(!0!==this._ojSkipLastCapability){this._ojSkipLastCapability=!0;let n=1;for(;this["_ojLastGetCapability"+n];)++n;for(--n;n>0&&(t=this["_ojLastGetCapability"+n](e),!t);n--);delete this._ojSkipLastCapability}return t}static applyMixin(e){const t=e.prototype.getCapability;if([a].forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(n=>{"constructor"!==n&&(e.prototype[n]=t.prototype[n])})}),t){let n=1;for(;e.prototype["_ojLastGetCapability"+n];)++n;e.prototype["_ojLastGetCapability"+n]=t}}}t._registerLegacyNamespaceProp("FetchByOffsetMixin",a),function(e){function t(e,r=undefined){let i;const l=[];for(const c in e)if("collationOptions"!==c&&"criterion"!==c&&e.hasOwnProperty(c)){const u=e[c];if(0===c.indexOf("$"))if(o(c)){if(!(u instanceof Array))throw new Error("not a valid expression: "+e);i={operator:c,array:[]};for(const n of u){const r=t(n,e.collationOptions);i.array.push(r)}}else{if(s(c))throw new Error("not a valid expression: "+e);if(a(c)){const n=t(e.criterion,e.criterion.collationOptions);l.push({left:u,right:n,operator:c,collationOptions:r})}}else if("object"!=typeof u)l.push({left:c,right:u,operator:"$eq",collationOptions:r});else{const e={left:c,collationOptions:r};n(e,u),l.push(e)}}return l.length>1?i={operator:"$and",array:l}:1===l.length&&(i=l[0]),i}function n(e,t){let n=!1;for(const r in t)if(t.hasOwnProperty(r)){const i=t[r];if(n||!s(r))throw new Error("parsing error "+t);e.operator=r,e.right=i,n=!0}}function r(e,t){const n=e.operator,{collationOptions:l}=e;if(o(n)){if(!e.left&&e.array instanceof Array){let i;const o=e.array;for(const e of o){const o=r(e,t);if("$or"===n&&!0===o)return!0;if("$and"===n&&!1===o)return!1;i=o}return i}throw new Error("invalid expression tree!"+e)}if(s(n)){const r=e.right;let o;if("*"!=e.left)return o=u(e.left,t),i(n,r,o,l);{const e=Object.keys(t);for(const s of e)if(o=u(s,t),i(n,r,o,l))return!0;return!1}}if(a(n)){let n=u(e.left,t);if(void 0===n||!(n instanceof Array)||0===n.length)return!1;for(const t of n){if(r(e.right,t))return!0}return!1}throw new Error("not a valid expression!"+e)}function i(e,t,n,r){if(r&&["base","accent","case","variant"].indexOf(r.sensitivity)<0)throw new Error("not a valid sensitivity! "+r.sensitivity);let i;if(r&&("string"==typeof t||t instanceof String)&&("string"==typeof n||n instanceof String)&&["base","accent","case","variant"].indexOf(r.sensitivity)>=0&&(i=new Intl.Collator(void 0,r)),"$lt"===e){const e=c(n,t);return n=e[0],t=e[1],i?i.compare(n,t)<0:n<t}if("$gt"===e){const e=c(n,t);return n=e[0],t=e[1],i?i.compare(n,t)>0:n>t}if("$lte"===e){const e=c(n,t);return n=e[0],t=e[1],i?i.compare(n,t)<=0:n<=t}if("$gte"===e){const e=c(n,t);return n=e[0],t=e[1],i?i.compare(n,t)>=0:n>=t}if("$eq"===e)return i?0===i.compare(n,t):n===t;if("$ne"===e)return i?0!==i.compare(n,t):n!==t;if("$regex"===e){if(null!=n){if("string"!=typeof n&&!(n instanceof String))if(n instanceof Object){if("[object Object]"==(n=n.toString()))return!1}else n=new String(n);const e=r?.sensitivity;let i;"base"!==e&&"case"!==e||(n=n.normalize("NFD").replace(/[\u0300-\u036f]/g,""),t=t.normalize("NFD").replace(/[\u0300-\u036f]/g,"")),"base"!==e&&"accent"!==e||(i="i");return null!==n.match(new RegExp(t,i))}return!1}if("$exists"===e)return t?null!=n:null==n;throw new Error("not a valid operator! "+e)}function o(e){return"$and"===e||"$or"===e}function s(e){return"$lt"===e||"$gt"===e||"$lte"===e||"$gte"===e||"$eq"===e||"$ne"===e||"$regex"===e||"$exists"===e}function a(e){return"$nestedAttr"===e}function l(e){return null!=e&&(e instanceof String||"string"==typeof e)}function c(e,t){return l(e)&&null==t?t="":l(t)&&null==e&&(e=""),[e,t]}function u(e,t){const n=e.split(".");let r=t;for(const e of n)r=r[e];return r}e.satisfy=function(e,n){if(e){return r(t(e,e.collationOptions),n)}return!0},e.validateFilterCapabilities=function e(t,n){let r;const i=t?.textFilterMatching?.matchBy;if(n){if(n.text&&(r=n.matchBy,r&&(!i||i.indexOf(r)<0)))throw new Error("This data provider does not support TextFilter with matchBy value "+r);if(n.criteria?.length>0)for(let r=0;r<n.criteria.length;r++){e(t,n.criteria[r])}n.criterion&&e(t,n.criterion)}}}(e.FilterUtils||(e.FilterUtils={}));class l{constructor(e){e=e||{},this._textFilterAttributes=e.filterOptions?e.filterOptions.textFilterAttributes:null;const t=e.filterDef;t&&(t.op?(this.op=t.op,void 0!==t.value?(this.value=t.value,t.attribute&&(this.attribute=t.attribute)):t.criteria?this.criteria=t.criteria:t.criterion&&(this.criterion=t.criterion,t.attribute&&(this.attribute=t.attribute)),t.collationOptions&&(this.collationOptions=t.collationOptions)):t.text&&(this.text=t.text,this.matchBy=t.matchBy))}filter(t,n,r){return e.FilterUtils.satisfy(l._transformFilter(this),t)}static _transformFilter(e){let t;if(e){let n,r=e.op;const i=e.collationOptions;if("$exists"===r&&e.attribute&&e.criterion)return t={},t.$nestedAttr=e.attribute,t.criterion=l._transformFilter(c.getFilter({filterDef:e.criterion})),t;if(e.text?r="$regex":"$le"===r?r="$lte":"$ge"===r?r="$gte":"$pr"===r&&(r="$exists"),"$and"!==r&&"$or"!==r){n=e.text?"phrase"===e.matchBy?new RegExp(""+("\\b"+e.text.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&").replace(/('|")/g,"").replace(/(\s|\t)/g,"(.*)((\\s|\\t|\\r|\\n)*)")),"i"):"startsWith"===e.matchBy?new RegExp(`^${e.text.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}`,"i"):new RegExp(e.text.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),"i"):e.value,t={};const i=e.attribute;if(i){const e={};"$sw"!==r&&"$ew"!==r&&"$co"!==r||(n=l._fixStringExpr(r,n),r="$regex"),e[r]=n,t[i]=e}else if(e.text){const i={};if(i[r]=n,e._textFilterAttributes&&e._textFilterAttributes.length>0){const n=[];e._textFilterAttributes.forEach(function(e){const t={};t[e]=i,n.push(t)}),t.$or=n}else t["*"]=i}else{const e=[];if(null==n)throw new Error("attribute cannot be empty");l._transformObjectExpr(n,r,null,e),t.$and=e}}else{const n=[];e.criteria.forEach(function(t){t&&t.text&&e._textFilterAttributes&&(t._textFilterAttributes=e._textFilterAttributes),n.push(l._transformFilter(t))}),t={},t[r]=n}t.collationOptions=i}return t}static _transformObjectExpr(e,t,n,r){if(Object.keys(e).length>0)Object.keys(e).forEach(function(i){let o=e[i];const s=n?n+"."+i:i;if(o instanceof Object)l._transformObjectExpr(o,t,s,r);else{const e={};"$sw"!==t&&"$ew"!==t&&"$co"!==t||(o=l._fixStringExpr(t,o),t="$regex"),e[t]=o;const n={};n[s]=e,r.push(n)}});else{const i={};i[t]=e;const o={};o[n]=i,r.push(o)}}static _fixStringExpr(e,t){return("string"==typeof t||t instanceof String)&&("$sw"===e?t="^"+t:"$ew"===e&&(t+="$")),t}}class c{static getFilter(e){return new l(e)}}t._registerLegacyNamespaceProp("FilterFactory",c),function(e){function t(e){const t=(e,n)=>{if(null==e)return e;if("string"==typeof n){const r=n.indexOf(".");if(r>0){const i=n.substring(0,r),o=n.substring(r+1),s=e[i];if(s)return t(s,o)}}return"function"==typeof e[n]?e[n]():e[n]};return(r,i)=>{let o,s,a,l;o=e.direction,s=e.attribute,a=t(r,s),l=t(i,s);let c=0;const u=n();return c="ascending"===o?u(a,l):u(l,a),0!==c?c:0}}function n(){return(e,t)=>{if(null==e)return 1;if(null==t)return-1;let n=0;const r="string"==typeof e?e:String(e).toString(),i="string"==typeof t?t:String(t).toString();return n=r.localeCompare(i,void 0,{numeric:!0,sensitivity:"base"}),0!==n?n:0}}e.getNaturalSortCriteriaComparator=function(e){return(n,r)=>{for(const i of e){const e=t(i)(n,r);if(0!==e)return e}return 0}},e.getNaturalSortCriterionComparator=t,e.getNaturalSortComparator=n}(e.SortUtils||(e.SortUtils={}));const u=e=>e.reason instanceof DOMException?e.reason:new DOMException(e.reason,"AbortError");e.DataCache=r,e.DataProviderMutationEvent=i,e.DataProviderRefreshEvent=o,e.FetchByKeysMixin=s,e.FetchByOffsetMixin=a,e.FilterFactory=c,e.wrapWithAbortHandling=(e,t,n)=>e?.aborted?Promise.reject(u(e)):new Promise((r,i)=>{e?.addEventListener("abort",()=>i(u(e))),n?t(r,i).catch(i):t(r,i)}),Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojset",["ojs/ojkeysetimpl"],function(e){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;class t{constructor(t){this.initialKeys=t;const n=this;this._set=new Set,this._keyset=new e,t&&t.forEach(function(e){n.add(e)}),Object.defineProperty(this,"size",{get(){return this._set.size}}),this[Symbol.iterator]=function(){return this._set[Symbol.iterator]()}}clear(){this._set.clear(),this._keyset._keys.clear()}delete(e){const t=this._keyset.get(e);return t!==this._keyset.NOT_A_KEY&&(this._keyset._keys.delete(t),this._set.delete(t))}forEach(e,t){this._set.forEach(e,t)}keys(){return this._set.keys()}values(){return this._set.values()}entries(){return this._set.entries()}has(e){return this._keyset.has(e)}add(e){return this._keyset.get(e)===this._keyset.NOT_A_KEY&&(this._keyset._keys.add(e),this._set.add(e)),this}get[(Symbol.iterator,Symbol.toStringTag)](){return Set[Symbol.toStringTag]()}}return t}),define("ojs/ojmap",["ojs/ojkeysetimpl"],function(e){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;var t=function(t){t?(this._map=t,this._keyset=new e(Array.from(this._map.keys()))):(this._map=new Map,this._keyset=new e)},n=t.prototype;return Object.defineProperty(n,"size",{get:function(){return this._map.size}}),n.clear=function(){this._map.clear(),this._keyset._keys.clear()},n.delete=function(e){var t=this._keyset.get(e);return t!==this._keyset.NOT_A_KEY&&(this._keyset._keys.delete(t),this._map.delete(t))},n.forEach=function(e){this._map.forEach(e)},n.entries=function(){return this._map.entries()},n.keys=function(){return this._map.keys()},n.values=function(){return this._map.values()},n.get=function(e){var t=this._keyset.get(e);return this._map.get(t)},n.has=function(e){return this._keyset.has(e)},n.set=function(e,t){var n=this._keyset.get(e);return n===this._keyset.NOT_A_KEY?(this._keyset._keys.add(e),this._map.set(e,t)):this._map.set(n,t),this},t}),define("ojs/ojarraydataproviderimpl",["exports","ojs/ojdataprovider","ojs/ojset","ojs/ojcore-base","ojs/ojmap","ojs/ojlogger"],function(e,t,n,r,i,o){"use strict";n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;const s="@default",a=()=>{const e=new Set;return e.add("exclusion"),{caching:"all",attributeFilter:{expansion:{},ordering:{},defaultShape:{features:e}}}},l=(e,t)=>{if("string"==typeof t){const n=t.indexOf(".");if(n>0){const r=t.substring(0,n),i=t.substring(n+1),o=e[r];if(o)return l(o,i)}}return"function"==typeof e[t]?e[t]():e[t]},c=(e,t,n)=>{if(Array.isArray(e)){let r,i=!1;e.forEach(e=>{e!==s&&e.name!==s||(i=!0)}),Object.keys(t).forEach(o=>{if(i){let i,s=!1,a=o;for(r=0;r<e.length;r++)if(i=e[r]instanceof Object?e[r].name:e[r],i.startsWith("!")){if(i=i.substr(1,i.length-1),i===o){s=!0;break}}else if(i===o){a=e[r];break}s||c(a,t,n)}else e.forEach(e=>{let r;r=e instanceof Object?e.name:e,r.startsWith("!")||r!==o||c(e,t,n)})})}else if(e instanceof Object){const r=e.name,i=e.attributes;if(r&&!r.startsWith("!"))if(t[r]instanceof Object&&!Array.isArray(t[r])&&i){const e={};c(i,t[r],e),n[r]=e}else if(Array.isArray(t[r])&&i){let e;n[r]=[],t[r].forEach((t,o)=>{e={},c(i,t,e),n[r][o]=e})}else u(n,t,r)}else u(n,t,e)},u=(e,t,n)=>{e&&t&&Object.defineProperty(e,n,{get:()=>t[n],set(e){t[n]=e},enumerable:!0})},d=(e,t)=>({metadata:{key:e},data:t}),h=e=>e.map(e=>({key:e})),p=(e,t)=>{let n,i=-1;for(n=0;n<t.length;n++)if(r.Object.compareValues(t[n],e)){i=n;break}return i};e.ArrayDataProviderImpl=class{constructor(e,n){var r;this.options=e,this.implOptions=n,this._sequenceNum=0,this._mutationSequenceNum=0,this._mapClientIdToIteratorInfo=new Map,this.AsyncIterable=(r=class{constructor(e){this._asyncIterator=e,this[Symbol.asyncIterator]=()=>this._asyncIterator}},Symbol.asyncIterator,r),this.AsyncIterator=class{constructor(e,t,n,r){this._parent=e,this._nextFunc=t,this._params=n,this._offset=r,this._clientId=n&&n.clientId||Symbol(),e._mapClientIdToIteratorInfo.set(this._clientId,{offset:r,rowKey:null,filterCriterion:n?.filterCriterion,sortCriteria:n?.sortCriteria,fetchedRowKeys:[]}),this._cacheObj={mutationSequenceNum:e._mutationSequenceNum}}next(){const e=(e,t)=>{const n=this._parent._mapClientIdToIteratorInfo.get(this._clientId),r=n?n.offset:null,i=this._nextFunc(this._params,r,!1,this._cacheObj);Object.defineProperty(i.result.value,"totalFilteredRowCount",{get:()=>{if("enabled"===this._params?.includeFilteredRowCount)return(void 0===this._totalFilteredRowCount||this._parent._resetTotalFilteredRowCount)&&(this._totalFilteredRowCount=this._parent._getTotalFilteredRowCount(this._params),this._parent._resetTotalFilteredRowCount=!1),this._totalFilteredRowCount},enumerable:!0});const o=i.result.value.metadata?.map(e=>e.key),s=o?n?.fetchedRowKeys?n.fetchedRowKeys.concat(o):o:[],a=s.length>0?s[s.length-1]:null;return this._parent._mapClientIdToIteratorInfo.set(this._clientId,{offset:i.offset,rowKey:a,filterCriterion:this._params?.filterCriterion,sortCriteria:this._params?.sortCriteria,fetchedRowKeys:s}),e(i.result)};return this._parent.implOptions.supportAbortController?t.wrapWithAbortHandling(this._params?.signal,e,!1):e(Promise.resolve.bind(Promise),Promise.reject.bind(Promise))}}}containsKeys(e){return this.fetchByKeys(e).then(t=>{const r=new n;return e.keys.forEach(e=>{null!=t.results.get(e)&&r.add(e)}),Promise.resolve({containsParameters:e,results:r})})}fetchByKeys(e){const n=(t,n)=>{this.implOptions.generateKeysIfNeeded(()=>this.generateKeys());const o=new i,s=this.implOptions.getKeys(),a=null!=e?e.attributes:null;let l,u=0;if(e){const n=this.implOptions.getData();return e.keys.forEach(e=>{for(l=null,u=0;u<s.length;u++)if(r.Object.compareValues(s[u],e)){l=u;break}if(null!=l&&l>=0){let t=n[l];if(a&&a.length>0){const e={};c(a,t,e),t=e}o.set(e,d(e,t))}}),t({fetchParameters:e,results:o})}return n("Keys are a required parameter")};return this.implOptions.supportAbortController?t.wrapWithAbortHandling(e?.signal,n,!1):n(Promise.resolve.bind(Promise),Promise.reject.bind(Promise))}fetchByOffset(e){const n=(t,n)=>{const r=null!=e?e.size:-1,i=null!=e?e.sortCriteria:null,o=null!=e&&e.offset>0?e.offset:0,s=null!=e?e.attributes:null,a=null!=e?e.filterCriterion:null;this.implOptions.generateKeysIfNeeded(()=>this.generateKeys());let l=[],c=!0;if(e){const n={size:r,sortCriteria:i,filterCriterion:a,attributes:s},u=this._fetchFrom(n,o,!0).result,h=u.value.fetchParameters;h.sortCriteria!==i&&(e={...e,sortCriteria:h.sortCriteria});const p=u.value;c=u.done;const f=p.data,_=p.metadata.map(e=>e.key);return l=f.map((e,t)=>d(_[t],e)),t(Object.assign({fetchParameters:e,results:l,done:c},"enabled"===e?.includeFilteredRowCount?{totalFilteredRowCount:this._getTotalFilteredRowCount(e)}:null))}return n("Offset is a required parameter")};return this.implOptions.supportAbortController?t.wrapWithAbortHandling(e?.signal,n,!1):n(Promise.resolve.bind(Promise),Promise.reject.bind(Promise))}fetchFirst(e){return new this.AsyncIterable(new this.AsyncIterator(this,this._fetchFrom.bind(this),e,0))}getTotalSize(){return Promise.resolve(this.implOptions.getData().length)}isEmpty(){return this.implOptions.getData().length>0?"no":"yes"}_getTotalFilteredRowCount(e){const n=this.implOptions.getData(),r=e?e.filterCriterion:null;let i=-1;if(r){i=0;let e=t.FilterFactory.getFilter({filterDef:r,filterOptions:this.options});for(let t=0;t<n.length;t++)e.filter(n[t])&&++i}else i=n.length;return i}getId(e){let t;const n=this.options?.keyAttributes;if(null!=n){if(Array.isArray(n)){let r;for(t=[],r=0;r<n.length;r++)t[r]=l(e,n[r])}else t="@value"===n?"string"==typeof(r=e)||"number"==typeof r||"boolean"==typeof r?r:Object.keys(r).map(e=>l(r,e)):l(e,n);return t}return null;var r}generateKeys(){const e=this.options?.keyAttributes,t=[],n=this.implOptions.getData();for(let r=0;r<n.length;r++){let i=this.getId(n[r]);null!=i&&"@index"!==e||(i=this._sequenceNum++),t.push(i)}return t}_fetchFrom(e,n,r,i){const o=null!=e?e.attributes:null;this.implOptions.generateKeysIfNeeded(()=>this.generateKeys());const s=null!=e?e.sortCriteria:null,a=this._getCachedIndexMap(s,i),l=this.implOptions.getData(),u=this.implOptions.getKeys(),d=a.map(e=>l[e]),p=a.map(e=>u[e]),f=null!=e?e.size>0?e.size:e.size<0?u.length:25:25;let _=n+f<d.length;const m=this.implOptions.mergeSortCriteria(s);null!=m&&(e={...e,sortCriteria:m});let g,v=[],y=[],E=0;if(null!=e&&e.filterCriterion){let r=null;r=t.FilterFactory.getFilter({filterDef:e.filterCriterion,filterOptions:this.options});let i=0;for(;v.length<f&&i<d.length;)r.filter(d[i])&&(E>=n&&(v.push(d[i]),y.push(p[i])),E++),i++;_=i<d.length}else v=d.slice(n,n+f),y=p.slice(n,n+f);E=n+v.length,g=v.map(e=>{if(o&&o.length>0){const t={};c(o,e,t),e=t}return e});const b={fetchParameters:e,data:g,metadata:h(y)};return{result:{value:b,done:!(r?_:b.data.length>0)},offset:E}}_getCachedIndexMap(e,t){if(t&&t.indexMap&&t.mutationSequenceNum===this._mutationSequenceNum)return t.indexMap;const n=this.implOptions.getData().map((e,t)=>t),r=this._sortData(n,e);return t&&(t.indexMap=r,t.mutationSequenceNum=this._mutationSequenceNum),r}_sortData(e,t){const n=this.implOptions.getData(),r=e.map(e=>({index:e,value:n[e]}));return null!=t&&r.sort(this.implOptions.getSortComparator(t)),r.map(e=>e.index)}queueMutationEvent(e){this._mutationEvent=this._createMutationEvent(e)}flushQueue(){this.implOptions.dispatchEvent(this._mutationEvent??new t.DataProviderRefreshEvent),this._mutationEvent=null}_createMutationEvent(e){let i,s,a,l,c,u=[],d=[],f=[];const _=[];this._mutationSequenceNum++;let m=!0,g=!0;this._resetTotalFilteredRowCount=!0,e.forEach(e=>{"deleted"===e.status?(m=!1):"added"===e.status&&(g=!1)});const v=[],y=[];let E=null,b=null,S=null;const T=this.implOptions.generateKeysIfNeeded(()=>this.generateKeys());if(!m&&!g){for(i=0;i<e.length;i++){l=e[i].index,c=e[i].status;const t=this.getId(e[i].value);for(s=0;s<e.length;s++)s!==i&&l===e[s].index&&c!==e[s].status&&v.indexOf(i)<0&&y.indexOf(i)<0&&(null==t||r.Object.compareValues(t,this.getId(e[s].value)))&&("deleted"===c?(y.push(i),v.push(s)):(y.push(s),v.push(i)))}for(i=0;i<e.length;i++)if(v.indexOf(i)>=0){const t=this.implOptions.getKeys()[e[i].index];d.push(t),u.push(e[i].value),f.push(e[i].index)}d.length>0&&(E={keys:new n(d),metadata:h(d),data:u,indexes:f})}if(u=[],d=[],f=[],!m){for(i=0;i<e.length;i++)"deleted"===e[i].status&&v.indexOf(i)<0&&y.indexOf(i)<0&&(a=this.implOptions.getKeyForDelete(e[i],T),d.push(a),u.push(e[i].value),f.push(e[i].index));d.length>0&&d.forEach(e=>{const t=p(e,this.implOptions.getKeys());t>=0&&this.implOptions.spliceKeys(t,1)}),d.length>0&&(S={keys:new n(d),metadata:h(d),data:u,indexes:f})}if(u=[],d=[],f=[],!g){const t=null==this.implOptions.getKeys()||!(this.implOptions.getKeys().length>0);for(i=0;i<e.length;i++)"added"===e[i].status&&v.indexOf(i)<0&&y.indexOf(i)<0&&(a=this.getId(e[i].value),null==a&&(T||this.implOptions.keysSpecified)&&(a=this.implOptions.getKeys()[e[i].index]),null==a?(a=this._sequenceNum++,this.implOptions.spliceKeys(e[i].index,0,a)):t||-1===p(a,this.implOptions.getKeys())?this.implOptions.spliceKeys(e[i].index,0,a):T||this.implOptions.keysSpecified||(o.warn("added row has duplicate key "+a),this.implOptions.spliceKeys(e[i].index,0,a)),d.push(a),u.push(e[i].value),f.push(e[i].index));for(i=0;i<e.length;i++)if("added"===e[i].status&&v.indexOf(i)<0&&y.indexOf(i)<0){let t=this.implOptions.getKeys()[e[i].index+1];t=null==t?null:t,_.push(t)}d.length>0&&(b={keys:new n(d),afterKeys:new n(_),addBeforeKeys:_,metadata:h(d),data:u,indexes:f})}return this._adjustIteratorOffset(S,b),new t.DataProviderMutationEvent({add:b,remove:S,update:E})}resetTotalFilteredRowCount(){this._resetTotalFilteredRowCount=!0}_adjustIteratorOffset(e,t){const n=e?.indexes,r=t?.indexes.slice(0);this._mapClientIdToIteratorInfo.forEach((i,o)=>{if(i.offset>0){const s=i.filterCriterion,a=i.sortCriteria,l=a?this.implOptions.getSortComparator(a):null;if(n&&(n.forEach((t,n)=>{const r=Array.from(e.keys)[n],o=p(r,i.fetchedRowKeys);o>-1&&(--i.offset,i.fetchedRowKeys.splice(o,1))}),i.rowKey=i.fetchedRowKeys[i.fetchedRowKeys.length-1]),r){const e=t.data.slice(0),n=Array.from(t.keys);if(null!=s?.filter)for(let t=r.length-1;t>=0;t--){let i=e[t];null!=i&&s.filter(i)&&(r.splice(t,1),e.splice(t,1),n.splice(t,1))}if(null!=l){const e=[...i.fetchedRowKeys,...n],t=this.implOptions.getData(),r=new Map;this.implOptions.getKeys().forEach((e,t)=>{r.set(e,t)}),e.sort((e,n)=>{const i=t[r.get(e)],o=t[r.get(n)];return l({value:i},{value:o})}),i.fetchedRowKeys=e.slice(0,p(i.rowKey,e)+1),i.offset=i.fetchedRowKeys.length}else r.forEach((e,t)=>{const r=n[t];if(e<p(i.rowKey,this.implOptions.getKeys())){++i.offset;p(r,i.fetchedRowKeys)<0&&i.fetchedRowKeys.splice(e,0,r)}})}this._mapClientIdToIteratorInfo.set(o,i)}})}},e.createOptimizedKeyMap=e=>{if(e){const t=new i;return e.forEach((e,n)=>{t.set(n,e)}),t}return new i},e.createOptimizedKeySet=e=>new n(e),e.getCapability=e=>"sort"===e?{attributes:"multiple"}:"fetchByKeys"===e?Object.assign({implementation:"lookup"},a()):"fetchByOffset"===e?Object.assign({implementation:"randomAccess",totalFilteredRowCount:"exact"},a()):"fetchFirst"===e?Object.assign({iterationSpeed:"immediate",totalFilteredRowCount:"exact"},a()):"fetchCapability"===e?a():"filter"===e?{operators:["$co","$eq","$ew","$pr","$gt","$ge","$lt","$le","$ne","$regex","$sw","$exists"],attributeExpression:["*"],textFilter:{},textFilterMatching:{matchBy:["startsWith","contains","phrase"]},nestedFilter:{},collationOptions:{sensitivity:["base","accent","case","variant"]}}:null,e.getVal=l,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojarraydataprovider",["ojs/ojcore-base","ojs/ojdataprovider","ojs/ojeventtarget","ojs/ojarraydataproviderimpl"],function(e,t,n,r){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;
/**
     * @preserve Copyright 2013 jQuery Foundation and other contributors
     * Released under the MIT license.
     * http://jquery.org/license
     */
class i{constructor(e,t){this.data=e,this.options=t,this._subscribeObservableArray(e);let n=!1;null!=t&&null!=t.keys&&(n=!0,this._keys=t.keys),this._impl=new r.ArrayDataProviderImpl({...t,get keyAttributes(){return t?.keyAttributes??t?.idAttribute}},{getData:()=>this._getRowData(),getKeys:()=>this._getKeys(),generateKeysIfNeeded:e=>this._generateKeysIfNeeded(e),mergeSortCriteria:e=>this._mergeSortCriteria(e),getSortComparator:e=>this._getSortComparator(e),dispatchEvent:e=>this.dispatchEvent(e),supportAbortController:!0,getKeyForDelete:(e,t)=>this._getKeyForDelete(e,t),spliceKeys:(...e)=>this._keys.splice(...e),keysSpecified:n})}containsKeys(e){return this._impl.containsKeys(e)}fetchByKeys(e){return this._impl.fetchByKeys(e)}fetchByOffset(e){return this._impl.fetchByOffset(e)}fetchFirst(e){return this._impl.fetchFirst(e)}getCapability(e){return r.getCapability(e)}static getCapability(e){return r.getCapability(e)}getTotalSize(){return this._impl.getTotalSize()}isEmpty(){return this._impl.isEmpty()}createOptimizedKeySet(e){return r.createOptimizedKeySet(e)}createOptimizedKeyMap(e){return r.createOptimizedKeyMap(e)}_getRowData(){return o(this.data)}_getKeys(){return o(this._keys)}_subscribeObservableArray(e){if(!(e instanceof Array)){if(!this._isObservableArray(e))throw new Error("Invalid data type. ArrayDataProvider only supports Array or observableArray.");e.subscribe(e=>this._impl.queueMutationEvent(e),null,"arrayChange"),e.subscribe(e=>this._impl.flushQueue(),null,"change")}}_getKeyForDelete(e,t){let n=this._impl.getId(e.value);return null==n&&(n=t?e.index:this._getKeys()[e.index]),n}_isObservableArray(e){return"function"==typeof e&&e.subscribe&&!(void 0===e.destroyAll)}_generateKeysIfNeeded(e){return null==this._keys&&(this._keys=e(),!0)}_getSortComparator(e){return(n,i)=>{const o=null!=this.options?this.options.sortComparators:null;let s,a,l,c,u,d;for(s=0;s<e.length;s++){a=e[s].direction,l=e[s].attribute,c=null,null!=o&&(c=o.comparators.get(l)),u=r.getVal(n.value,l),d=r.getVal(i.value,l),c||(c=t.SortUtils.getNaturalSortComparator());const h="descending"===a?-1:1,p=c(u,d)*h;if(0!==p)return p}return 0}}_mergeSortCriteria(e){const t=null!=this.options?this.options.implicitSort:null;return null==t?e:null==e?t:void 0}}const o=e=>!e||e instanceof Array?e:e();return n.EventTargetMixin.applyMixin(i),e._registerLegacyNamespaceProp("ArrayDataProvider",i),i}),define("ojs/ojarraytreedataprovider",["ojs/ojcore-base","jquery","ojs/ojarraydataprovider","ojs/ojeventtarget","ojs/ojlogger"],function(e,t,n,r,i){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;
/**
   * @preserve Copyright 2013 jQuery Foundation and other contributors
   * Released under the MIT license.
   * http://jquery.org/license
   */
class o{constructor(e,t,r){var i;this.treeData=e,this.options=t,this._rootDataProvider=r,this.TreeAsyncIterator=class{constructor(e,t){this._parent=e,this._baseIterable=t}next(){return this._baseIterable[Symbol.asyncIterator]().next().then(e=>{const t=e.value.metadata;for(let n=0;n<t.length;n++)t[n]=this._parent._getTreeMetadata(t[n],e.value.data[n]);return e})}},this.TreeAsyncIterable=(i=class{constructor(e,t){this._parent=e,this._asyncIterator=t,this[Symbol.asyncIterator]=()=>this._asyncIterator}},Symbol.asyncIterator,i),this._baseDataProvider=new n(e,t),this._mapKeyToNode=new Map,this._mapNodeToKey=new Map,this._mapArrayToSequenceNum=new Map,this._mapKoArrayToSubscriptions=new Map,this._mapKeyToParentNodePath=new Map,this._parentNodeKeys=new Set,this._childrenAttr=this.options&&this.options.childrenAttribute?this.options.childrenAttribute:"children",null==r?(this._parentNodePath=[],this._processTreeArray(e,[])):this._getTreeKeys(this.treeData)}containsKeys(e){return this.fetchByKeys(e).then(t=>{const n=new Set;return e.keys.forEach(e=>{null!=t.results.get(e)&&n.add(e)}),Promise.resolve({containsParameters:e,results:n})})}getCapability(e){return this._baseDataProvider.getCapability(e)}getTotalSize(){return this._baseDataProvider.getTotalSize()}isEmpty(){return this._baseDataProvider.isEmpty()}createOptimizedKeySet(e){return this._baseDataProvider.createOptimizedKeySet(e)}createOptimizedKeyMap(e){return this._baseDataProvider.createOptimizedKeyMap(e)}getChildDataProvider(e,t){const n=this._getRootDataProvider(),r=this._getNodeForKey(e);if(r){const t=this._getChildren(r);if(t){const r=new o(t,this.options,n);return null!=r&&(r._parentNodePath=n._mapKeyToParentNodePath.get(JSON.stringify(e)),n.addEventListener("refresh",e=>{r._getTreeKeys(t)}),n.addEventListener("mutate",e=>{r._getTreeKeys(t)})),r}}return null}fetchFirst(e){e=this._applyLeafNodeFilter(e);const t=this._baseDataProvider.fetchFirst(e);return new this.TreeAsyncIterable(this,new this.TreeAsyncIterator(this,t))}fetchByOffset(e){e=this._applyLeafNodeFilter(e);return this._baseDataProvider.fetchByOffset(e).then(t=>{const n=t.results,r=[];for(const e of n){let t=e.metadata;const n=e.data;t=this._getTreeMetadata(t,n),r.push({data:n,metadata:t})}const i={done:t.done,fetchParameters:t.fetchParameters,results:r};return"enabled"===e.includeFilteredRowCount&&(i.totalFilteredRowCount=t.totalFilteredRowCount),i})}fetchByKeys(e){const t=new Map;return e.keys.forEach(e=>{if(0===this._parentNodePath.length||this._parentNodeKeys.has(e)){const n=this._getNodeForKey(e);n&&t.set(e,{metadata:{key:e},data:n})}}),Promise.resolve({fetchParameters:e,results:t})}_getTreeKeys(e){const t=e instanceof Array?e:e();for(const e of t){const t=this._getKeyForNode(e);this._parentNodeKeys.add(t),e[this._childrenAttr]&&this._getTreeKeys(e[this._childrenAttr])}}_getChildren(e){return this._getVal(e,this._childrenAttr,!0)}_getRootDataProvider(){return this._rootDataProvider?this._rootDataProvider:this}_subscribeObservableArray(t,n){if("function"!=typeof t||!t.subscribe||void 0===t.destroyAll)throw new Error("Invalid data type. ArrayTreeDataProvider only supports Array or observableArray.");let r=null,i=null;const o=new Array(2);o[0]=t.subscribe(o=>{let s,a,l,c=[],u=[],d=[],h=[];const p=[];let f=null,_=null,m=null;const g=new Set,v=[],y=[];for(let e=0;e<o.length;e++)y[e]={index:o[e].index,status:o[e].status};for(let e=0;e<y.length;e++){const t=y[e].index,n=y[e].status;if("deleted"===n)for(let e=0;e<y.length;e++)"deleted"===y[e].status&&y[e].index>t&&y[e].index--;else if("added"===n)for(let e=0;e<y.length;e++)"added"===y[e].status&&y[e].index>t&&y[e].index++}for(s=0;s<y.length;s++){l=y[s].index,status=y[s].status;const t=this._getId(o[s].value);if(t)for(a=0;a<y.length;a++)if(a!==s&&l===y[a].index&&status!==y[a].status&&p.indexOf(s)<0&&v.indexOf(s)<0){const n=this._getId(o[a].value);e.Object.compareValues(t,n)&&("deleted"===status?(v.push(s),p.push(a),this._releaseNode(o[s].value)):(v.push(a),p.push(s)),this._compareChildren(o[s].value,o[a].value)||g.add(t))}}for(s=0;s<o.length;s++)if("deleted"===o[s].status&&p.indexOf(s)<0&&v.indexOf(s)<0){const e=o[s].value,t=this._getKeyForNode(e);u.push(t),c.push(e),d.push(o[s].index),this._releaseNode(e)}if(u.length>0){h=u.map(e=>({key:e}));const e=new Set;u.forEach(t=>{e.add(t)}),m={data:c,indexes:d,keys:e,metadata:h}}c=[],u=[],d=[],h=[];const E=t(),b=[],S=[],T=[],C=[];for(s=0;s<o.length;s++)if("added"===o[s].status&&v.indexOf(s)<0){const e=o[s].value,r=this._processNode(e,n,t);p.indexOf(s)<0?(u.push(r.key),c.push(e),d.push(o[s].index),h.push({key:r.key})):(b.push(r.key),S.push(e),T.push(o[s].index),C.push({key:r.key}))}if(u.length>0){const e=new Set;u.forEach(t=>{e.add(t)});const t=new Set,r=[],i=[];let o;o=this.options&&this.options.keyAttributes&&"siblings"!==this.options.keyAttributesScope?n.length>0?n[n.length-1]:null:n.length>0?n:null,d.forEach(e=>{let n;n=e>=E.length-1?null:this._getKeyForNode(E[e+1]),t.add(n),r.push(n),i.push(o)}),_={afterKeys:t,addBeforeKeys:r,parentKeys:i,data:c,indexes:d,keys:e,metadata:h}}if(b.length>0){const e=new Set;b.forEach(t=>{e.add(t)}),f={data:S,indexes:T,keys:e,metadata:C}}(_||m||f)&&(r=new e.DataProviderMutationEvent({add:_,remove:m,update:f})),g.size&&(i=new e.DataProviderRefreshEvent({keys:g}))},null,"arrayChange"),o[1]=t.subscribe(t=>{r||i?(r&&this.dispatchEvent(r),i&&this.dispatchEvent(i)):(this._flushMaps(),this._processTreeArray(this.treeData,[]),this.dispatchEvent(new e.DataProviderRefreshEvent)),r=null,i=null},null,"change"),this._mapKoArrayToSubscriptions.set(t,o)}_flushMaps(){const e=this._getRootDataProvider();e._mapKeyToNode.clear(),e._mapNodeToKey.clear(),e._mapArrayToSequenceNum.clear(),e._mapKoArrayToSubscriptions.forEach((e,t)=>{this._unsubscribeObservableArray(t)})}_unsubscribeObservableArray(e){if("function"==typeof e&&e.subscribe&&void 0!==e.destroyAll){const t=this._mapKoArrayToSubscriptions.get(e);t&&(t[0].dispose(),t[1].dispose(),this._mapKoArrayToSubscriptions.delete(e))}}_processTreeArray(e,t){let n;e instanceof Array?n=e:(this._subscribeObservableArray(e,t),n=e()),n.forEach((n,r)=>{this._processNode(n,t,e)})}_releaseTreeArray(e){let t;e instanceof Array?t=e:(this._unsubscribeObservableArray(e),t=e()),t.forEach((e,t)=>{this._releaseNode(e)})}_processNode(e,t,n){const r=this._createKeyObj(e,t,n);this._setMapEntry(r.key,e);this._getRootDataProvider()._mapKeyToParentNodePath.set(JSON.stringify(r.key),r.keyPath);const i=this._getChildren(e);return i&&this._processTreeArray(i,r.keyPath),r}_releaseNode(e){const t=this._getKeyForNode(e);this._deleteMapEntry(t,e);const n=this._getChildren(e);n&&this._releaseTreeArray(n)}_createKeyObj(e,t,n){let r=this._getId(e);const i=t?t.slice():[];return null==r?(this._setUseIndexAsKey(!0),i.push(this._incrementSequenceNum(n)),r=i):(i.push(r),this.options&&"siblings"===this.options.keyAttributesScope&&(r=i)),{key:r,keyPath:i}}_getId(e){let t;const n=null!=this.options?this.options.keyAttributes:null;if(null!=n){if(Array.isArray(n)){t=[];for(let r=0;r<n.length;r++)t[r]=this._getVal(e,n[r])}else t="@value"==n?this._getAllVals(e):this._getVal(e,n);return t}return null}_getVal(e,t,n){if("string"==typeof t){const n=t.indexOf(".");if(n>0){const r=t.substring(0,n),i=t.substring(n+1),o=e[r];if(o)return this._getVal(o,i)}}return!0!==n&&"function"==typeof e[t]?e[t]():e[t]}_getAllVals(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e?e:Object.keys(e).map(t=>this._getVal(e,t))}_getNodeMetadata(e){return{key:this._getKeyForNode(e)}}_getNodeForKey(e){return this._getRootDataProvider()._mapKeyToNode.get(JSON.stringify(e))}_getKeyForNode(e){return this._getRootDataProvider()._mapNodeToKey.get(e)}_setMapEntry(e,t){const n=this._getRootDataProvider(),r=JSON.stringify(e);n._mapKeyToNode.has(r)&&i.warn(`Duplicate key ${r} found in ArrayTreeDataProvider.  Keys must be unique when keyAttributes ${this.options.keyAttributes} is specified`),n._mapKeyToNode.set(r,t),n._mapNodeToKey.set(t,e)}_deleteMapEntry(e,t){const n=this._getRootDataProvider();n._mapKeyToNode.delete(JSON.stringify(e)),n._mapNodeToKey.delete(t)}_incrementSequenceNum(e){const t=this._getRootDataProvider(),n=t._mapArrayToSequenceNum.get(e)||0;return t._mapArrayToSequenceNum.set(e,n+1),n}_getUseIndexAsKey(){return this._getRootDataProvider()._useIndexAsKey}_setUseIndexAsKey(e){return this._getRootDataProvider()._useIndexAsKey=e}_getLeafNodeFilter(e){return{op:"$or",criteria:[e,{op:"$and",criteria:[{op:"$ne",attribute:this._childrenAttr,value:null},{op:"$ne",attribute:this._childrenAttr,value:void 0}]}]}}_applyLeafNodeFilter(e){if(e&&e.filterCriterion){const n=t.extend({},e);n.filterCriterion=this._getLeafNodeFilter(n.filterCriterion),n.filterCriterion.filter=e.filterCriterion.filter,e=n}return e}_getTreeMetadata(e,t){let n=!1,r=e.key;return(null==this.options||null==this.options.keyAttributes||"siblings"==this.options.keyAttributesScope||"@index"==this.options.keyAttributes||this._getUseIndexAsKey())&&(n=!0),n&&(r=this._parentNodePath?this._parentNodePath.slice():[],r.push(e.key)),e=this._getNodeMetadata(this._getNodeForKey(r))}_compareChildren(t,n){let r=!0;const i=t[this._childrenAttr],o=n[this._childrenAttr],s="function"==typeof i?i():i,a="function"==typeof o?o():o;if(!s&&a||s&&!a)r=!1;else if(s&&a)if(s.length!==a.length)r=!1;else for(let t=0;t<s.length;t++)if(!e.Object.compareValues(s[t],a[t])){r=!1;break}return r}}return r.EventTargetMixin.applyMixin(o),e._registerLegacyNamespaceProp("ArrayTreeDataProvider",o),o}),define("ojs/ojsuppressnodetreedataprovider",["exports","ojs/ojeventtarget","ojs/ojdataprovider"],function(e,t,n){"use strict";
/**
     * @preserve Copyright 2013 jQuery Foundation and other contributors
     * Released under the MIT license.
     * http://jquery.org/license
     */class r{constructor(e,t){var r,i;this.treeDataProvider=e,this.options=t,this.SuppressNodeTreeAsyncIterable=(i=class{constructor(e,t){this._parent=e,this._asyncIterator=t,this[r]=()=>new this._parent.SuppressNodeTreeAsyncIterator(this._parent,this._asyncIterator)}},r=Symbol.asyncIterator,i),this.SuppressNodeTreeAsyncIterator=class{constructor(e,t,n){this._parent=e,this._baseIterator=t,this._params=n}_fetchNext(){return this._baseIterator.next()}next(){const e=this._params?.signal;return n.wrapWithAbortHandling(e,e=>e(this._fetchNext().then(e=>this._parent._suppressNodeIfEmptyChildrenFirst(e))),!1)}},this.AsyncIteratorYieldResult=class{constructor(e){this.value=e,this.done=!1}},this.AsyncIteratorReturnResult=class{constructor(e){this.value=e,this.done=!0}},this.FetchListResult=class{constructor(e,t,n,r){this.fetchParameters=e,this.data=t,this.metadata=n,this.totalFilteredRowCount=r}},this.FetchByOffsetResults=class{constructor(e,t,n){this.fetchParameters=e,this.results=t,this.done=n}},this.Item=class{constructor(e,t){this.metadata=e,this.data=t}},this._addEventListeners(e)}containsKeys(e){return this.treeDataProvider.containsKeys(e)}getCapability(e){return this.treeDataProvider.getCapability(e)}getTotalSize(){return this.treeDataProvider.getTotalSize()}isEmpty(){return this.treeDataProvider.isEmpty()}createOptimizedKeySet(e){return this.treeDataProvider.createOptimizedKeySet(e)}createOptimizedKeyMap(e){return this.treeDataProvider.createOptimizedKeyMap(e)}getChildDataProvider(e){const t=this.treeDataProvider.getChildDataProvider(e);return null===t?null:new r(t,this.options)}fetchFirst(e){const t=this.treeDataProvider.fetchFirst(e);return new this.SuppressNodeTreeAsyncIterable(this,t[Symbol.asyncIterator]())}fetchByOffset(e){const t=e?.signal;return n.wrapWithAbortHandling(t,t=>t(this.treeDataProvider.fetchByOffset(e).then(e=>this._suppressNodeIfEmptyChildrenByOffset(e))),!1)}fetchByKeys(e){const t=e?.signal;return n.wrapWithAbortHandling(t,t=>t(this.treeDataProvider.fetchByKeys(e)),!1)}_suppressNodeIfEmptyChildrenByOffset(e){if(e.results&&this.options&&"ifEmptyChildren"==this.options.suppressNode){const t=[],n=[];return new Promise(r=>{for(let t=0;t<e.results.length;t++){const r=e.results[t];n[t]=this._suppressChild(r.metadata.key,e.fetchParameters?e.fetchParameters.filterCriterion:null)}return Promise.all(n).then(n=>{for(let r=0;r<n.length;r++)!1===n[r]&&t.push(new this.Item(e.results[r].metadata,e.results[r].data));return r(t)})}).then(t=>new this.FetchByOffsetResults(e.fetchParameters,t,e.done))}return Promise.resolve(e)}_suppressNodeIfEmptyChildrenFirst(e){const t=[];if(!e.done&&this.options&&"ifEmptyChildren"==this.options.suppressNode){return new Promise(n=>{if(e&&e.value&&e.value.data){const r=e.value.metadata,i=e.value.data,o=[];for(let n=0;r&&n<r.length;n++)t[n]=this._suppressChild(r[n].key,e.value.fetchParameters?e.value.fetchParameters.filterCriterion:null);return Promise.all(t).then(t=>{for(let n=0;n<t.length;n++)!1===t[n]&&o.push({data:i[n],metadata:r[n],totalFilteredRowCount:e.value.totalFilteredRowCount});return n(o)})}return{data:e.value.data,metadata:e.value.metadata,totalFilteredRowCount:e.value.totalFilteredRowCount}}).then(t=>{const n=[],r=[];for(const e of t)n.push(e.data),r.push(e.metadata);return new this.AsyncIteratorYieldResult(new this.FetchListResult(e.value.fetchParameters,n,r,e.value.totalFilteredRowCount))})}return Promise.resolve(e)}_suppressChild(e,t){const n=this.getChildDataProvider(e);return null==n||"yes"===n.isEmpty()?Promise.resolve(null!==n):t?n.fetchByOffset({offset:0,filterCriterion:t}).then(e=>!(e&&e.results&&e.results.length>0)):"unknown"===n.isEmpty()?n.fetchByOffset({offset:0,size:1}).then(e=>!(e&&e.results&&e.results.length>0)):Promise.resolve(!1)}_addEventListeners(e){e.addEventListener("refresh",e=>{this.dispatchEvent(e)}),e.addEventListener("mutate",e=>{this.dispatchEvent(e)})}}t.EventTargetMixin.applyMixin(r),e.SuppressNodeTreeDataProvider=r,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojdataprovideradapter-base",["ojs/ojcore-base","ojs/ojeventtarget"],function(e,t){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;class n{constructor(e){var t;this.dataSource=e,this.AsyncIterable=(t=class{constructor(e){this._asyncIterator=e,this[Symbol.asyncIterator]=function(){return this._asyncIterator}}},Symbol.asyncIterator,t),this.AsyncIterator=class{constructor(e,t){this._nextFunc=e,this._params=t,this._fetchFirst=!0}next(){const e=this._fetchFirst;return this._fetchFirst=!1,this._nextFunc(this._params,e)}},this.AsyncIteratorYieldResult=class{constructor(e,t){this._parent=e,this.value=t,this[n._VALUE]=t,this[n._DONE]=!1}},this.AsyncIteratorReturnResult=class{constructor(e,t){this._parent=e,this.value=t,this[n._VALUE]=t,this[n._DONE]=!0}},this.FetchListResult=class{constructor(e,t,r,i){this._parent=e,this.fetchParameters=t,this.data=r,this.metadata=i,this[n._FETCHPARAMETERS]=t,this[n._DATA]=r,this[n._METADATA]=i}},this.ItemMetadata=class{constructor(e,t){this._parent=e,this.key=t,this[n._KEY]=t}},this.SortCriterion=class{constructor(e,t,r){this._parent=e,this.attribute=t,this.direction=r,this[n._ATTRIBUTE]=t,this[n._DIRECTION]=r}},this.DataProviderMutationEventDetail=class{constructor(e,t,r,i){this._parent=e,this.add=t,this.remove=r,this.update=i,this[n._ADD]=t,this[n._REMOVE]=r,this[n._UPDATE]=i}},this.DataProviderOperationEventDetail=class{constructor(e,t,r,i,o){this._parent=e,this.keys=t,this.metadata=r,this.data=i,this.indexes=o,this[n._KEYS]=t,this[n._METADATA]=r,this[n._DATA]=i,this[n._INDEXES]=o}},this.DataProviderAddOperationEventDetail=class{constructor(e,t,r,i,o,s,a,l){this._parent=e,this.keys=t,this.afterKeys=r,this.addBeforeKeys=i,this.parentKeys=o,this.metadata=s,this.data=a,this.indexes=l,this[n._KEYS]=t,this[n._AFTERKEYS]=r,this[n._ADDBEFOREKEYS]=i,this[n._METADATA]=s,this[n._DATA]=a,this[n._INDEXES]=l}}}getCapability(e){return e===n._SORT&&"full"===this.dataSource.getCapability(e)?{attributes:"multiple"}:"fetchByKeys"===e||"fetchByOffset"===e?{implementation:"lookup"}:null}addListener(e,t){this._eventHandlerFuncs[e]=t.bind(this),this.dataSource.on(e,this._eventHandlerFuncs[e])}removeListener(e){this.dataSource.off(e,this._eventHandlerFuncs[e])}removeAllListeners(){this._eventHandlerFuncs={}}}return n._SORT="sort",n._DATA="data",n._KEY="key",n._ATTRIBUTE="attribute",n._DIRECTION="direction",n._VALUE="value",n._DONE="done",n._FETCHPARAMETERS="fetchParameters",n._METADATA="metadata",n._KEYS="keys",n._INDEXES="indexes",n._ADD="add",n._REMOVE="remove",n._UPDATE="update",n._AFTERKEYS="afterKeys",n._ADDBEFOREKEYS="addBeforeKeys",t.EventTargetMixin.applyMixin(n),e._registerLegacyNamespaceProp("DataSourceAdapter",n),n}),define("ojs/ojmodel",["exports","ojs/ojcore-base","ojs/ojlogger","jquery","ojs/ojconfig"],function(e,t,n,r,i){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;const o={on:function(e,t,n){return this.OnInternal(e,t,n,!1,!1)},off:function(e,t,n){return this._offInternal(e,t,n,!1)},trigger:function(e){var t=Array.prototype.slice.call(arguments);return t.unshift(!1),o.TriggerInternal.apply(this,t)},once:function(e,t,n){return this._onceInternal(e,t,n,!1,null)},listenTo:function(e,t,n){var r,i,s,a,l,c,u,d={};for(u in t.constructor===String?d[t]=n:d=t,d)if(d.hasOwnProperty(u))for(r=o._getEvents(u),i=0;i<r.length;i+=1)c={event:s=r[i].event,attribute:a=r[i].attribute,object:e,callback:d[u]},l=a?s+":"+a:s,void 0===this._listeningTo&&(this._listeningTo=[]),this._listeningTo.push(c),e.OnInternal(l,d[u],null,!0,!1);return this},listenToOnce:function(e,t,n){var r,i,s,a,l,c,u,d={};for(u in t.constructor===String?d[t]=n:d=t,d)if(d.hasOwnProperty(u))for(r=o._getEvents(u),i=0;i<r.length;i+=1)c={event:s=r[i].event,attribute:a=r[i].attribute,object:e,callback:d[u]},l=a?s+":"+a:s,void 0===this._listeningTo&&(this._listeningTo=[]),this._listeningTo.push(c),e._onceInternal(l,d[u],null,!0,this);return this},stopListening:function(e,t,n){var r,i,s,a,l,c,u,d,h,p,f,_,m,g={};if(null==arguments||arguments.length<=1){for(_=this._listeningTo?this._listeningTo.length:0,f=0;f<_;f++)c=this._listeningTo[f],(u=!e||e===c.object)&&c.object._offInternal.apply(c.object,[c.event,c.callback,c.context,!0]);return this._listeningTo=[],this}for(m in i=t,e&&e.constructor===String&&(i=e),i.constructor===String?g[i]=n:g=i,g)if(g.hasOwnProperty(m))for(r=o._getEvents(m),s=0;s<r.length;s+=1)for(a=r[s].event,l=r[s].attribute,f=(_=this._listeningTo?this._listeningTo.length:0)-1;f>=0;f-=1)c=this._listeningTo[f],u=!e||e===c.object,d=!a||a===c.event,h=!n||g[m]===c.callback,p=!l||l===c.attribute,u&&d&&h&&p&&(this._listeningTo[f].object._offInternal.apply(this._listeningTo[f].object,[this._listeningTo[f].event,this._listeningTo[f].callback,this._listeningTo[f].context,!0]),this._listeningTo.splice(f,1));return this},EventType:{ADD:"add",ALLADDED:"alladded",REMOVE:"remove",RESET:"reset",REFRESH:"refresh",SORT:"sort",CHANGE:"change",DESTROY:"destroy",ALLREMOVED:"allremoved",REQUEST:"request",SYNC:"sync",ERROR:"error",INVALID:"invalid",READY:"ready",ALL:"all"}};o.bind=o.on,o.unbind=o.off,o.Mixin=function(e,t){var n,r=t||this;for(n in r)"function"==typeof r[n]&&(e[n]=r[n]);e.eventHandlers={},e._listeningTo=[]},o._onceInternal=function(e,t,n,r,i){var o,s,a,l,c,u,d;u=this._getEventMap(e,t,n),c=u.map,d=u.context;var h=this;return Object.keys(c||{}).forEach(function(e){if(Object.prototype.hasOwnProperty.call(c,e))for(o=h._getEvents(e),s=0;s<o.length;s+=1)a=o[s].event,l=o[s].attribute,void 0===h.eventHandlers&&(h.eventHandlers=[]),void 0===h.eventHandlers[a]&&(h.eventHandlers[a]=[]),h.eventHandlers[a].push({callback:c[e],context:d,attribute:l,once:!0,fired:!1,listen:r,otherObj:i})}),this},o._shouldFire=function(e){return!e.once||!e.fired&&(e.fired=!0,!0)},o._getContext=function(e,t){return t.context||t.otherObj||e},o.TriggerInternal=function(e,t){var n,r,i,s,a,l,c,u,d,h=this._getEvents(t);for(s=[],n=0;n<h.length;n+=1)r=h[n].event,i=h[n].attribute,s.push({event:r,attribute:i});for(n=0;n<s.length;n+=1){for(u=this._getHandlers(this.eventHandlers,o.EventType.ALL),a=o._getHandlers(this.eventHandlers,s[n].event,!1),l=0;l<(a?a.length:0);l+=1)a[l].attribute===s[n].attribute&&a[l].callback&&(c=Array.prototype.slice.call(arguments),a&&a[l]&&a[l].once&&(this._removeHandler(o._getHandlers(this.eventHandlers,s[n].event,!0),a[l]),a[l].otherObj&&a[l].otherObj.stopListening(this,t,a[l].callback)),a&&a[l]&&this._shouldFire(a[l])&&(d=a[l].callback,e&&!a[l].ignoreSilent||d.apply(o._getContext(this,a[l]),c.slice(2))));for(l=0;l<(u?u.length:0);l+=1)(c=Array.prototype.slice.call(arguments)).length>0&&(s[n].attribute?c[1]=s[n].event+":"+s[n].attribute:c[1]=s[n].event),u&&u[l]&&u[l].callback&&this._shouldFire(u[l])&&(d=u[l].callback,e&&!u[l].ignoreSilent||d.apply(o._getContext(this,u[l]),c.slice(1))),u&&u[l]&&u[l].once&&(this._removeHandler(this._getHandlers(this.eventHandlers,o.EventType.ALL,!0),u[l]),u[l].otherObj&&u[l].otherObj.stopListening(this,o.EventType.ALL,u[l].callback))}return this},o.OnInternal=function(e,t,n,r,i){var s,a,l,c,u,d,h,p,f=this._getEventMap(e,t,n);for(p in s=f.map,h=f.context,s)if(s.hasOwnProperty(p))for(a=this._getEvents(p),l=0;l<a.length;l+=1)c=a[l].event,u=a[l].attribute,void 0===this.eventHandlers&&(this.eventHandlers=[]),void 0===this.eventHandlers[c]&&(this.eventHandlers[c]=[]),d={callback:s[p],context:h,attribute:u,listen:r,ignoreSilent:i},-1===this._checkForHandler(this.eventHandlers[c],d,o._handlersIdentical)&&this.eventHandlers[c].push(d);return this},o._offInternal=function(e,t,n,r){var i,o,s,a;if(null==arguments||0===arguments.length)return this.eventHandlers={},this;if(null==e)return this._removeEvent(e,t,n,r),this;for(a in i=(o=this._getEventMap(e,t,n)).map,s=o.context,i)i.hasOwnProperty(a)&&this._removeEvent(a,i[a],s,r);return this},o._getEventMap=function(e,t,n){var r={};return e.constructor!==String?{map:r=e,context:t}:(r[e]=t,{map:r,context:n})},o._removeEvent=function(e,t,n,r){var i,s,a,l,c,u,d,h,p,f=[];if(e)f=o._getEvents(e);else if(void 0!==this.eventHandlers){var _=this;Object.keys(this.eventHandlers||{}).forEach(function(e){Object.prototype.hasOwnProperty.call(_.eventHandlers,e)&&f.push({event:e})})}for(i=0;i<f.length;i+=1)if(s=f[i].event,l=f[i].attribute,void 0!==this.eventHandlers&&this.eventHandlers[s]instanceof Array){for(a=(c=this.eventHandlers[s]).length-1;a>=0;a-=1)u=null==t||c[a].callback===t,d=null==n||c[a].context===n,h=null==l||c[a].attribute===l,p=null==r||c[a].listen===r,u&&d&&h&&p&&c.splice(a,1);0===c.length&&delete this.eventHandlers[s]}},o._removeHandler=function(e,t){var n,r,i,o,s,a;if(e)for(n=e.length-1;n>=0;n-=1)r=void 0===t.callback||null===t.callback||e[n].callback===t.callback,i=void 0===t.context||null===t.context||e[n].context===t.context,o=void 0===t.attribute||null===t.attribute||e[n].attribute===t.attribute,s=void 0===t.listen||null===t.listen||e[n].listen===t.listen,a=void 0===t.once||null===t.once||e[n].once===t.once,r&&i&&o&&s&&a&&e.splice(n,1)},o._getEvents=function(e){var t,n,r,i,o=e?e.split(" "):[],s=[];for(t=0;t<o.length;t+=1)r=(n=o[t].split(":"))[0],i=n.length>1?n[1]:null,s.push({event:r,attribute:i});return s},o._handlersIdentical=function(e,t){return e.callback===t.callback&&e.attribute===t.attribute&&e.context===t.context&&e.listen===t.listen&&e.once===t.once},o._listenersIdentical=function(e,t){return e.event===t.event&&e.attribute===t.attribute&&e.context===t.context&&e.object===t.object},o._checkForHandler=function(e,t,n){var r;if(void 0===e)return-1;for(r=0;r<e.length;r+=1)if(n(e[r],t))return r;return-1},o._getHandlers=function(e,t,n){if(e&&e[t]instanceof Array){if(n)return e[t];var r,i=[];for(r=0;r<e[t].length;r++)i.push(e[t][r]);return i}return null},t._registerLegacyNamespaceProp("Events",o);const s=function(){this.name="URLError",this.message="No URL defined"};t._registerLegacyNamespaceProp("URLError",s),s.prototype=new Error,s.constructor=s;const a=function(e,t){this.rootURL=e,this.model=t,this.customURL=t.customURL,r.support.cors=!0};t._registerLegacyNamespaceProp("RestImpl",a),a._HEADER_PROP="headers",a.addOptions=function(e,t,n){var i=r.extend(!0,e,n),o=t||{};return Object.keys(o).forEach(function(e){Object.prototype.hasOwnProperty.call(o,e)&&"oauthHeader"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||(i[e]=o[e]),e===a._HEADER_PROP&&(i[e]=r.extend(!0,i[e],o[e])))}),t&&t.oauthHeader&&(i[a._HEADER_PROP]||(i[a._HEADER_PROP]={}),Object.keys(t.oauthHeader||{}).forEach(function(e){Object.prototype.hasOwnProperty.call(t.oauthHeader,e)&&(Object.prototype.hasOwnProperty.call(i[a._HEADER_PROP],e)||(i[a._HEADER_PROP][e]=t.oauthHeader[e]))})),i},a.prototype.getRecords=function(e,t,n,r){var i=n||{},o="jsonp"===i.dataType,s=this._getURL("read",this.rootURL,this.customURL,null,r,i),l={crossDomain:i.crossDomain||!o,dataType:this._getDataType(i),jsonpCallback:i.jsonpCallback,context:null!==r?r:this,success:e,error:t};return l=this._addHeaderProp(l),l=a.addOptions(l,i,s),i.xhr=this.ajax(l,r),i.xhr},a.prototype._addHeaderProp=function(e){var t=e||{};return this.model&&this.model.omitLanguageHeader||(t[a._HEADER_PROP]={"Accept-Language":this.getLocale()}),t},a.prototype.getRecord=function(e,t,n,r,i){var o=r||{},s="jsonp"===o.dataType,l=this._getURL("read",this.rootURL,this.customURL,n,i,o),c={crossDomain:o.crossDomain||!s,dataType:this._getDataType(o),jsonpCallback:o.jsonpCallback,context:null!==i?i:this,success:e,error:t};return c=this._addHeaderProp(c),c=a.addOptions(c,o,l),o.xhr=this.ajax(c,i),o.xhr},a.prototype.updateRecord=function(e,t,n,r,i,o,s){var l=i||{},c="jsonp"===l.dataType,u=this._getURL(s?"patch":"update",this.rootURL,this.customURL,t,o,l),d=a._emulateHTTP(l),h={crossDomain:l.crossDomain||!c,contentType:this._getContentType(l),dataType:this._getDataType(l),jsonpCallback:l.jsonpCallback,data:this._getData(JSON.stringify(n),l,u),emulateHTTP:d,emulateJSON:a._emulateJSON(l),success:e,error:r,context:null!==o?o:this};return h=this._addHeaderProp(h),h=a.addOptions(h,l,u),h=a._beforeSendMod(d,h),l.xhr=this.ajax(h,o),l.xhr},a._beforeSendMod=function(e,t){var n=t||{};if(e){var r=n.beforeSend;n.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",n._method),r?r.apply(this,arguments):null}}return n},a.prototype._getData=function(e,t,n){if(a._emulateJSON(t)){var r={_method:n._method?n._method:n.type};return e&&(r.model=e),r}return e},a.prototype._getHTTPMethod=function(e,t){if(t.type)return{method:t.type};var n=null;return"create"===e&&(n="POST"),"delete"===e&&(n="DELETE"),"patch"===e&&(n="PATCH"),"update"===e&&(n="PUT"),a._emulateHTTP(t)?{method:"POST",_method:n}:(null===n&&(n="GET"),{method:n})},a._emulateHTTP=function(e){return e.emulateHTTP||t.emulateHTTP},a._emulateJSON=function(e){return e.emulateJSON||t.emulateJSON},a.prototype._getURL=function(e,n,i,o,s,l){var c=this._getHTTPMethod(e,l);if(r.isFunction(i)){var u=i.call(this,e,s,a.SetCustomURLOptions(o,s,l));if(t.StringUtils.isString(u)){var d={url:u,type:c.method};return c._method&&(d._method=c._method),d}if(u)return u.url=Object.prototype.hasOwnProperty.call(u,"url")?u.url:n,Object.prototype.hasOwnProperty.call(u,"type")||(u.type=c.method),Object.prototype.hasOwnProperty.call(u,"data")||c._method&&(u._method=c._method),u}var h={url:a.GetPropValue(null,n),type:c.method};return c._method&&(h._method=c._method),h},a.prototype.deleteRecord=function(e,t,n,r){var i=n||{},o="jsonp"===i.dataType,s=this._getURL("delete",this.rootURL,this.customURL,e,r,i),l=a._emulateHTTP(i),c=a._emulateJSON(i),u={crossDomain:i.crossDomain||!o,success:i.success,error:t,context:null!==r?r:this,emulateHTTP:l,emulateJSON:c},d=this._getData(null,i,s);return d&&(u.data=d),u=a.addOptions(u,i,s),u=a._beforeSendMod(l,u),i.xhr=this.ajax(u,r),i.xhr},a.prototype.addRecord=function(e,t,n,r){var i=n||{},o=JSON.stringify(e),s="jsonp"===i.dataType,l=this._getURL("create",this.rootURL,this.customURL,null,r,i),c=a._emulateHTTP(i),u={crossDomain:i.crossDomain||!s,contentType:i.contentType||"application/json",dataType:this._getDataType(i),jsonpCallback:i.jsonpCallback,data:this._getData(o,i,l),success:i.success,error:t,emulateHTTP:c,emulateJSON:a._emulateJSON(i),context:null!==r?r:this};return u=this._addHeaderProp(u),u=a.addOptions(u,i,l),i.xhr=this.ajax(u,r),i.xhr},a.prototype._getDataType=function(e){return a._emulateJSON(e)&&!a._emulateHTTP(e)?"application/x-www-form-urlencoded":e.dataType||"json"},a.prototype._getContentType=function(e){return a._emulateJSON(e)&&!a._emulateHTTP(e)?"application/x-www-form-urlencoded":e.contentType||"application/json"},a.prototype.getLocale=function(){return i.getLocale()},a.prototype.ajax=function(e,n){if(null===e.url||void 0===e.url)throw new s;var r=t.ajax(e);return n._addxhr&&n._addxhr(r),r},a.SetCustomURLOptions=function(e,n,r){var i=n instanceof t.Collection?n.ModifyOptionsForCustomURL(r):{};return e&&(i.recordID=e),i},a.GetPropValue=function(e,t){return e?r.isFunction(e[t])?e[t]():e[t]:r.isFunction(t)?t():t};const l=function(e,t){l._init(this,e,t,null)};t._registerLegacyNamespaceProp("Model",l),t.Object.createSubclass(l,t.Object,"oj.Model"),l.prototype.Init=function(){l.superclass.Init.call(this)},l.prototype.attributes={},l.prototype.defaults={},l.prototype.id=null,l.prototype.idAttribute="id",l.prototype.urlRoot=null,l.prototype.customURL=null,l.prototype.validate=null,l.prototype.validationError=null,l.prototype.omitLanguageHeader=!1,l._idCount=0,l._init=function(e,t,n,i){var s,a,c;if(!l._justExtending){e.Init(),o.Mixin(e),e._clearChanged(),e.previousAttrs={},e.nestedSet=!1,e.index=-1;var u=n||{};for(c in e.attributes={},e.defaults&&!u.ignoreDefaults&&(e.attributes=l._cloneAttributes(r.isFunction(e.defaults)?e.defaults():e.defaults,null)),i)Object.prototype.hasOwnProperty.call(i,c)&&(e[c]=i[c]);if(t)if(s=u.parse,r.isFunction(s)&&(e.parse=s),a=l._cloneAttributes(t,e.attributes),e.attributes=a,null==(a=s?e.parse(a):a)||void 0===a)e.attributes={};else for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&e._setProp(c,a[c],!1,!1,u,!0);e.SetCid(),e.SetCollection(u.collection),u.customURL&&(e.customURL=u.customURL),u.url&&(e.url=u.url),u.urlRoot&&(e.urlRoot=u.urlRoot),e.initialize&&e.initialize(t,u),e.SetupId()}},l.extend=function(e,t){var n;l._justExtending=!0,n=new l,l._justExtending=!1,r.extend(n,this.prototype);var i,s=e||{};return Object.keys(s).forEach(function(e){Object.prototype.hasOwnProperty.call(s,e)&&(n[e]=s[e])}),i=s&&s.constructor&&Object.prototype.hasOwnProperty.call(s,"constructor")?s.constructor:function(e,t){l._init(this,e,t,s)},r.extend(i,this),i.prototype=n,i.extend=l.extend,i.prototype.constructor=i,o.Mixin(i,this),t&&Object.keys(t).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&(i[e]=t[e])}),i},l.prototype.TriggerInternal=function(e,t,n,r,i){},l.prototype.SetCid=function(){this.GetCid()||(this.cid="id"+l._idCount,l._idCount+=1)},l.prototype.GetCid=function(){return this.cid},l.prototype.SetIndex=function(e){this.index=e},l.prototype.GetIndex=function(){return this.index},l.prototype.SetNext=function(e){var t=this.nextModel;return this.nextModel=e,t},l.prototype.GetNext=function(){return this.nextModel},l.prototype.SetPrevious=function(e){var t=this.previousModel;return this.previousModel=e,t},l.prototype.GetPrevious=function(){return this.previousModel},l.prototype.Merge=function(e,n,r){var i,o=!1,s=t.StringUtils.isString(n),a=!1,l=this;return Object.keys(e.attributes||{}).forEach(function(t){Object.prototype.hasOwnProperty.call(e.attributes,t)&&(i=l.attributes[t]!==e.attributes[t],s?t===n&&i&&(o=!0):i&&(o=!0),i&&(a=!0,l.attributes[t]=e.attributes[t],l._addChange(t,e.attributes[t]),l._fireAttrChange(t,l.attributes[t],null,r)))}),this.SetupId(),a&&this._fireChange(null,r),o},l._hasProperties=function(e){var t;if(e&&e instanceof Object)for(t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!0;return!1},l.prototype.SetCollection=function(e){null!=e?(this.collection=e,this.SetupId()):delete this.collection},l.prototype.GetCollection=function(){return this.collection},l.prototype._fireAttrChange=function(e,t,n,r){null!=e&&this.TriggerInternal(r,o.EventType.CHANGE+":"+e,this,t,n)},l.prototype._fireChange=function(e,t){this.TriggerInternal(t,o.EventType.CHANGE,this,e,null)},l.prototype.SetupId=function(){var e=null;if(this.collection&&this.collection.modelId){var t=this.collection.modelId;e=r.isFunction(t)?t.call(this.collection,this.attributes):t}if(!e){var n=this._getIdAttr();e=null!=this.attributes?this.attributes[n]:null}this.id=e},l.prototype._setPropInternal=function(e,n,r){var i=t.Object.__innerEquals(this.attributes[e],n);return!(!r&&i)&&(this.attributes[e]=n,this.SetupId(),!i)},l.prototype._clearChanged=function(){this.changed={}},l.prototype._addChange=function(e,t){this.changed[e]=t},l.prototype._setProp=function(e,t,n,r,i,o){if(null==e)return!0;var s,a={},c=this.nestedSet;if(r?Object.keys(e).forEach(function(t){Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t])}):a[e]=t,s=i||{},!this._checkValid(a,{validate:s.validate},!1))return!1;c||(this._clearChanged(),this.changes=[]),this.nestedSet||o||(this.previousAttrs=l._cloneAttributes(this.attributes,null)),this.nestedSet=!0;var u=this;Object.keys(a).forEach(function(e){Object.prototype.hasOwnProperty.call(a,e)&&(u._setPropInternal(e,a[e],n)?(u._addChange(e,a[e]),u.changes.push(e)):delete a[e])});var d=s.silent;if(Object.keys(a).forEach(function(e){Object.prototype.hasOwnProperty.call(a,e)&&(!d&&(u.changes.length>0||c&&-1===u.changes.indexOf(e))&&(u.pendingChanges=!0,u.pendingOpts=s),u._fireAttrChange(e,a[e],s,d))}),c)return!0;if(!d&&!c)for(;this.pendingChanges;)this.pendingChanges=!1,this._fireChange(this.pendingOpts,d);return this.nestedSet=!1,!0},l.prototype.clear=function(e){var t,n,r={silent:!0},i=e||{};t=i.silent,r.validate=i.validate,this._clearChanged();for(n in this.attributes)if(Object.prototype.hasOwnProperty.call(this.attributes,n)){if(!this._unsetInternal(n,r,!0))return!1;this.TriggerInternal(t,o.EventType.CHANGE+":"+n,this,void 0,null)}return this.attributes={},this.SetupId(),this._fireAttrChange(null,null,null,t),this._fireChange(null,t),this},l._cloneAttributes=function(e,n){var i,o,s=n||{},a=!0;if(("object"==typeof s?Object.keys(s):[]).length>0){for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&Object.prototype.hasOwnProperty.call(e,i)&&void 0===e[i]&&delete e[i];return t.CollectionUtils.copyInto(s,e,void 0,!0,1e4),s}for(i in e)if("function"===(o=r.type(e[i]))||"undefined"===o||"date"===o||"array"===o||"object"===o){a=!1;break}return a?s=JSON.parse(JSON.stringify(e)):"object"==typeof e&&t.CollectionUtils.copyInto(s,e,void 0,!0,1e4),s},l.prototype.clone=function(){var e,t=new this.constructor;for(e in this)Object.prototype.hasOwnProperty.call(this,e)&&this[e]!==this.attributes&&(t[e]=this[e]);return t.attributes=l._cloneAttributes(this.attributes,null),delete t.cid,t.SetCid(),t.SetupId(),t},l.prototype.Match=function(e,t){var n,r=this.GetId();return void 0!==r&&r==e||void 0!==(n=this.cid)&&n==t},l.prototype.set=function(e,n,r){var i,o=r||{},s=!0;if(arguments&&arguments.length>0)if(t.StringUtils.isString(e))o.unset?this._unsetInternal(e,null,!1):this._setProp(e,n,!1,!1,o,!1)||(s=!1);else if((o=n||{}).unset)for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&this._unsetInternal(i,null,!1);else this._setProp(e,null,!0,!0,o,!1)||(s=!1);return!!s&&this},l.prototype.unset=function(e,t){return this._unsetInternal(e,t,!1)},l.prototype._unsetInternal=function(e,t,n){var r=t||{},i=r.silent;if(this.has(e)){if(!this._checkValid({},r,!1))return!1;n||this._clearChanged(),delete this.attributes[e],this._addChange(e,void 0),this._fireAttrChange(e,null,null,i),this._fireChange(null,i)}return this.SetupId(),!0},l.prototype.get=function(e){return this.attributes[e]},l.prototype.has=function(e){return t.Collection._defined(this.attributes[e])},l.prototype.fetch=function(e){var t,n=e||{},i=n.success,o=n.error,s=this;return(t=l._copyOptions(n)).error=function(t,r,i){l._triggerError(s,!1,n,r,i,t),o&&o.apply(s,[s,i,e,t,r])},t.success=function(e){t.xhr&&(n.xhr=t.xhr),l._fireSyncEvent(s,e,t,!1),r.isFunction(s.parse)&&s.set(s.parse(e),t),i&&i.call(l.GetContext(t,s),s,e,n)},l._internalSync("read",this,t)},l.prototype._parseImpl=function(e){return e},l.prototype.parse=l.prototype._parseImpl,l.prototype.url=function(){var e,t,n=this._getUrlRoot(),r=this.GetId();if(n)return r?n+"/"+encodeURIComponent(r):n;if(e=this.collection)return t=a.GetPropValue(e,"url"),r&&t?t+("/"===l._getLastChar(t)?"":"/")+encodeURIComponent(this.GetId()):t;throw new s},l.prototype.keys=function(){var e=[],t=this;return Object.keys(t.attributes||{}).forEach(function(n){Object.prototype.hasOwnProperty.call(t.attributes,n)&&e.push(n)}),e},l.prototype.values=function(){var e=[],t=this;return Object.keys(t.attributes||{}).forEach(function(n){Object.prototype.hasOwnProperty.call(t.attributes,n)&&e.push(t.get(n))}),e},l.prototype.pairs=function(){var e,t=[],n=this;return Object.keys(n.attributes||{}).forEach(function(r){Object.prototype.hasOwnProperty.call(n.attributes,r)&&((e=[]).push(r),e.push(n.get(r)),t.push(e))}),t},l.prototype.omit=function(e){var t,n=[],r={};if(e instanceof Array)n=e;else for(t=0;t<arguments.length;t++)n.push(arguments[t]);var i=this;return Object.keys(i.attributes||{}).forEach(function(e){Object.prototype.hasOwnProperty.call(i.attributes,e)&&-1===n.indexOf(e)&&(r[e]=i.get(e))}),r},l.prototype.pick=function(e){var t,n=[],r={};if(e instanceof Array)n=e;else for(t=0;t<arguments.length;t++)n.push(arguments[t]);for(t=0;t<n.length;t++)Object.prototype.hasOwnProperty.call(this.attributes,n[t])&&(r[n[t]]=this.get(n[t]));return r},l.prototype.invert=function(){var e,t={},n=this;return Object.keys(n.attributes||{}).forEach(function(r){Object.prototype.hasOwnProperty.call(n.attributes,r)&&(e=n.get(r),t[e]=r)}),t},l._getLastChar=function(e){return e.charAt(e.length-1)},l.prototype._saveUrl=function(){var e=this._getUrlRoot();return e||(this.GetCollection()?this.GetCollection().url:null)},l.prototype._getUrlRoot=function(){return a.GetPropValue(this,"urlRoot")},l.prototype._parseSaveImpl=function(e){return e},l.prototype.parseSave=l.prototype._parseSaveImpl,l.prototype.isValid=function(){var e={validate:this.validate};return this._checkValid(this.attributes,e,!1)},l._isValidateSet=function(e,t){var n=e||{};return void 0!==n.validate&&null!==n.validate?n.validate:t},l.prototype._checkValid=function(e,t,n){var r=t||{},i=this.validate;return!(i&&l._isValidateSet(r,n)&&(this.validationError=i.call(this,e,r),this.validationError))||(this.TriggerInternal(!1,o.EventType.INVALID,this,this.validationError,r),!1)},l._processArgs=function(e){var n,r=!1,i={},o={};if(e&&e.length>0){if(e.length>1&&e[e.length-1]&&l._hasProperties(e[e.length-1])&&(r=!0,i=e[e.length-1]||{}),null==e[0])return{attributes:null,options:i};if(l._hasProperties(e[0])||t.Object.isEmpty(e[0]))Object.keys(e[0]).forEach(function(t){Object.prototype.hasOwnProperty.call(e[0],t)&&(o[t]=e[0][t])});else for(n=0;n<e.length;n+=2)(void 0!==e[n]||n<e.length-1||!r&&n===e.length-1)&&(o[e[n]]=e[n+1])}return{attributes:o,options:i}},l._copyOptions=function(e){var t={},n=e||{};return Object.keys(n).forEach(function(e){Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}),t},l._triggerError=function(e,t,n,r,i,s){var a=n||{};a.textStatus=r,a.errorThrown=i,e.TriggerInternal(t,o.EventType.ERROR,e,s,a)},l.prototype.save=function(e,n){var i,o,s,a,c,u,d,h,p,f=l._processArgs(arguments);p=void 0===e?void 0:f.attributes;var _=n||{};d=l._copyOptions(f.options);var m=r.extend(!0,{},this.attributes,p);return!!this._checkValid(m,d,!0)&&(d.wait||this.set(p),i=void 0!==d.forceNew&&d.forceNew,a=this,c=d.error,u=d.patch,d.error=function(e,t,r){l._triggerError(a,!1,_,t,r,e),c&&c.apply(a,[a,r,n,e,t])},d.saveAttrs=d.wait?this._attrUnion(p):this.attributes,h=this.attributes,this.attributes=d.saveAttrs,d.saveAttrs=this.toJSON(),this.attributes=h,i||this.isNew()?(s=l._getSuccess(d),d.success=function(e){var n;if(d.xhr&&(_.xhr=d.xhr),e&&!t.Object.isEmpty(e)){if(n=r.isFunction(a.parse)?a.parse(e):e,!a._checkValid(n,d,!0))return;a.attributes=r.extend(!0,a.attributes,n),d.wait&&Object.keys(p||{}).forEach(function(e){Object.prototype.hasOwnProperty.call(n,e)&&(p[e]=n[e])}),a.SetupId()}l._fireSyncEvent(a,e,d,!1),d.wait&&a.set(p),s&&s.call(l.GetContext(d,a),a,e,_),a._clearChanged()},d.attrs||(d.attrs=d.saveAttrs),d.parse=!0,u&&(d.saveAttrs=d.attrs),l._internalSync("create",this,d)):(o=d.success,d.success=function(e){var n;d.xhr&&(_.xhr=d.xhr),e&&!t.Object.isEmpty(e)&&(n=r.isFunction(a.parse)?a.parse(e):e,a.attributes=r.extend(!0,a.attributes,n),d.wait&&Object.keys(p||{}).forEach(function(e){Object.prototype.hasOwnProperty.call(n,e)&&(p[e]=n[e])}),a.SetupId()),l._fireSyncEvent(a,e,d,!1),d.wait&&a.set(p),o&&o.call(l.GetContext(d,a),a,e,_),a._clearChanged()},d.attrs||(d.attrs=void 0===p?void 0:u?p:d.saveAttrs),l._internalSync(u?"patch":"update",this,d)))},l.prototype._attrUnion=function(e){var t={},n=this;return Object.keys(n.attributes||{}).forEach(function(e){Object.prototype.hasOwnProperty.call(n.attributes,e)&&(t[e]=n.attributes[e])}),Object.keys(e||{}).forEach(function(n){Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}),t},l.IsComplexValue=function(e){return e&&Object.prototype.hasOwnProperty.call(e,"value")&&Object.prototype.hasOwnProperty.call(e,"comparator")},l.prototype._hasAttrs=function(e){var n;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(!Object.prototype.hasOwnProperty.call(this.attributes,n))return!1;for(var r=Array.isArray(e[n])?e[n]:[e[n]],i=0;i<r.length;i++)if(l.IsComplexValue(r[i])){var o=r[i].comparator,s=r[i].value;if(t.StringUtils.isString(o))throw new Error("String comparator invalid for local where/findWhere");if(!o(this,n,s))return!1}else if(e[n]!==this.attributes[n])return!1}return!0},l.prototype.matches=function(e){return function(t){for(var n in e)if(t.get(n)!==e[n])return!1;return!0}(this)},l.prototype.Contains=function(e){var t,n=e.constructor===Array?e:[e];for(t=0;t<n.length;t++)if(this._hasAttrs(n[t]))return!0;return!1},l._getSuccess=function(e){return null!=e&&e.success?e.success:null},l.GetContext=function(e,t){return void 0!==e&&void 0!==e.context?e.context:t},l.prototype.isNew=function(){return void 0===this.GetId()},l.prototype._getIdAttr=function(){return this.idAttribute||"id"},l.prototype.GetId=function(){return this.id},l.prototype.changedAttributes=function(e){if(e){var n={},r=this;return Object.keys(e).forEach(function(i){Object.prototype.hasOwnProperty.call(e,i)&&(t.Object.__innerEquals(e[i],r.attributes[i])||(n[i]=e[i]))}),!t.Object.isEmpty(n)&&n}return!t.Object.isEmpty(this.changed)&&this.changed},l.prototype.hasChanged=function(e){return void 0!==e?l._hasProperties(this.changed)&&Object.prototype.hasOwnProperty.call(this.changed,e):l._hasProperties(this.changed)},l.prototype.destroy=function(e){var n,r,i,s=e||{},a=s.wait,c=s.error,u=this;i=l._copyOptions(s),n=l._getSuccess(i);var d=this.GetCollection();return i.success=function(e){if(i.xhr&&(s.xhr=i.xhr),d){var r=t.StringUtils.isString(e)&&!t.StringUtils.isEmpty(e)?JSON.parse(e):e;d._setPagingReturnValues(r,null,e,!0)}a&&u._fireDestroy(!1),l._fireSyncEvent(u,e,i,!1),n&&n.call(l.GetContext(i,u),u,e,s)},i.error=function(t,n,r){u.TriggerInternal(!1,o.EventType.ERROR,u,t,s),c&&c.apply(u,[u,r,e,t,n])},this.isNew()?(a||this._fireDestroy(!1),n&&n.call(l.GetContext(i,u),u,null,s),!1):(r=l._internalSync("delete",this,i),a||this._fireDestroy(!1),r)},l.prototype._fireRequest=function(e,t,n,r){this.TriggerInternal(r,o.EventType.REQUEST,e,t,n)},l.prototype._fireDestroy=function(e){this.TriggerInternal(e,o.EventType.DESTROY,this,this.collection,null)},l._fireSyncEvent=function(e,t,n,r){e.TriggerInternal(r,o.EventType.SYNC,e,t,n)},l.prototype.toJSON=function(){var e={},t=this;return Object.keys(t.attributes||{}).forEach(function(n){Object.prototype.hasOwnProperty.call(t.attributes,n)&&(Array.isArray(t.attributes[n])?e[n]=t.attributes[n].slice(0):e[n]=t.attributes[n])}),e},l.prototype.previous=function(e){return this.previousAttrs[e]},l.prototype.previousAttributes=function(){return this.previousAttrs},l.prototype.sync=function(e,n,r){return t.sync(e,n,r)},l._internalSync=function(e,t,n){var r=n||{};t.oauth&&(r.oauthHeader=t.oauth.getHeader()),!r.dataType&&t.dataType&&(r.dataType=t.dataType),!r.jsonpCallback&&t.jsonpCallback&&(r.jsonpCallback=t.jsonpCallback),"create"!==e&&"patch"!==e&&"update"!==e||(r.parsedData=t.parseSave.call(t,"patch"===e?r.attrs:r.saveAttrs));var i=null;t instanceof l&&(i=t.GetId());var o={};Object.keys(r).forEach(function(e){o[e]=r[e]});var s=a.SetCustomURLOptions(i,t,r);return Object.keys(s||{}).forEach(function(e){o[e]=s[e]}),r.xhr=t.sync(e,t,o),o.xhr&&(r.xhr=o.xhr),r.xhr};const c=function(e,t,n){var r,i=n||{};function o(e){return t._fireRequest(t,e,i,i.silent),e}var s,c=i.success,u=i.error;if("create"===e.valueOf())return s=(s=t._saveUrl())||a.GetPropValue(t,"url"),o((r=new a(s,t)).addRecord(i.parsedData,u,i,t));if("read"===e.valueOf())return t instanceof l?(s=i.url?i.url:a.GetPropValue(t,"url"),o((r=new a(s,t)).getRecord(c,u,t.GetId(),i,l.GetContext(i,t)))):(s=t.GetCollectionFetchUrl(i),o((r=new a(s,t)).getRecords(c,u,i,t)));r=new a(a.GetPropValue(t,"url"),t);var d=null;return t instanceof l&&(d=t.GetId()),"update"===e.valueOf()?o(r.updateRecord(c,d,i.parsedData,u,i,t,!1)):"patch"===e.valueOf()?o(r.updateRecord(c,d,i.parsedData,u,i,t,!0)):"delete"===e.valueOf()?o(r.deleteRecord(d,u,i,t)):null};t._registerLegacyNamespaceProp("sync",c),l._urlError=function(e){if(!e.url)throw new Error("The url property or function must be specified")};const u=function(e){return arguments&&arguments.length>0&&l._urlError(arguments[0]),r.ajax.apply(t,arguments)};t._registerLegacyNamespaceProp("ajax",u);const d=function(e,t){d._justExtending||d._init(this,e,t,null)};t._registerLegacyNamespaceProp("Collection",d),t.Object.createSubclass(d,t.Object,"oj.Collection"),d.prototype.model=null,d.prototype.modelId=function(e){var t=this.model;return t&&e?e[t.idAttribute||t.prototype.idAttribute||"id"]:null},d.prototype.length=null,d.prototype.models=null,d.prototype._modelIndices=[],d.prototype.url=null,d.prototype.changes=[],d.prototype.customURL=null,d.prototype.customPagingOptions=null,d.prototype.lastFetchSize=null,d.prototype.hasMore=!1,d.prototype.totalResults=null,d.prototype.lastFetchCount=null,d.prototype.modelLimit=-1,d.prototype.offset=null,d.prototype.fetchSize=-1,d.prototype.sortDirection=1,d.prototype.comparator=null,d.prototype.omitLanguageHeader=!1,d.prototype.Init=function(){d.superclass.Init.call(this)},d.extend=function(e,t){var n,i=null;return d._justExtending=!0,i=new d,d._justExtending=!1,r.extend(i,this.prototype),n=e&&e.constructor&&Object.prototype.hasOwnProperty.call(e,"constructor")?e.constructor:function(t,n){d._init(this,t,n,e)},t&&Object.keys(t).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e])}),e&&Object.keys(e).forEach(function(t){Object.prototype.hasOwnProperty.call(e,t)&&(i[t]=e[t])}),r.extend(n,this),n.prototype=i,n.extend=d.extend,n.prototype.constructor=n,n},d._init=function(e,t,n,r){var i,s,a,l;if(e.Init(),o.Mixin(e),r)for(l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l]);var c=n||{};for(s=["comparator","customPagingOptions","customURL",d._FETCH_SIZE_PROP,"model","modelLimit","sortDirection","url"],i=0;i<s.length;i++)Object.prototype.hasOwnProperty.call(c,s[i])&&void 0!==c[s[i]]&&(e[s[i]]=c[s[i]]);void 0===e._getFetchSize(null)&&e.setFetchSize(-1),void 0===e.modelLimit&&e.setModelLimit(-1),e.hasMore=!1,e.lruCount=0,e._setModels([],!0);var u=t;c.parse&&(u=e.parse(t)),null!=u&&(c.noparse=!0,a=u instanceof Array?u:[u],e._addInternal(a,c,!0,!1)),e._setLength(),u||(e.totalResults=void 0),r&&r.initialize&&r.initialize.call(e,u,c)},d.prototype.on=function(e,t){},d.prototype.OnInternal=function(e,t,n,r,i){},d.prototype.TriggerInternal=function(e,t,n,r,i){},d.prototype._fireRequest=function(e,t,n,r){this.TriggerInternal(r,o.EventType.REQUEST,e,t,n)},d.prototype._resetChanges=function(){this.changes=[]},d.prototype._setChangeAt=function(e,t){for(var n=e;n<e+t;n++)-1===this.changes.indexOf(n)&&this.changes.push(n)},d.prototype._setModels=function(e,t){if(this.models=e,t)this._modelIndices=[],this._resetChanges();else for(var n=0;n<e.length;n++)e[n]&&this._modelIndices.push(n)},d.prototype._getModels=function(){return this.models},d.prototype._getModelsLength=function(){return this._getModels().length},d.prototype._overUpperLimit=function(e){return!(e<this._getModelsLength())&&!(this.IsVirtual()&&(!this._hasTotalResults()||0===this._getModelsLength()))},d.prototype._hasTotalResults=function(){return d._defined(this.totalResults)},d._defined=function(e){return null!=e},d.prototype._pushModel=function(e){this._getModels().push(e),this._modelIndices.push(this._getModelsLength()-1),this._setChangeAt(this._getModelsLength()-1,1)},d.prototype._pushModels=function(e){this._makeModelHead(e),this._pushModel(e),this.lruCount+=1,e.SetIndex(this._getModelsLength()-1)},d.prototype._reduceLRU=function(e){if(e)for(var t=0;t<e.length;t++)e[t]&&(this.lruCount-=1)},d.prototype._spliceModels=function(e,t,n){for(var r=e;r<e+t;r++)this._removePrevNext(this._getModel(r));void 0===n?(this._reduceLRU(this._getModels().splice(e,t)),this._spliceModelIndices(e,e+t-1)):(this._reduceLRU(this._getModels().splice(e,t,n)),this._spliceModelIndices(e,e+t-1),this._insertModelIndex(e),this._makeModelHead(n)),this._setChangeAt(e,t),this.lruCount<0&&(this.lruCount=0),this._realignModelIndices(e)},d.prototype._getModel=function(e){return this._getModels()[e]},d.prototype._realignModelIndices=function(e){for(var t,n=0;n<this._modelIndices.length;n++)(t=this._modelIndices[n])>=e&&this._getModel(t)&&this._getModel(t).SetIndex(t)},d.prototype._removePrevNext=function(e){if(e){var t=e.GetPrevious(),n=e.GetNext();t?t.SetNext(n):this.head=n,n?n.SetPrevious(t):this.tail=t}},d.prototype._makeModelHead=function(e){e.SetNext(this.head),this.head?this.head.SetPrevious(e):this.tail=e,e.SetPrevious(null),this.head=e},d.prototype._setModelIndex=function(e){-1===this._modelIndices.indexOf(e)&&this._modelIndices.push(e)},d.prototype._insertModelIndex=function(e){for(var t=0;t<this._modelIndices.length;t++)this._modelIndices[t]>=e&&(this._modelIndices[t]+=1);this._modelIndices.push(e)},d.prototype._spliceModelIndices=function(e,t){var n=void 0===t?e:t;this._clearModelIndices(e,n);for(var r=n-e+1,i=0;i<this._modelIndices.length;i++)this._modelIndices[i]>n&&(this._modelIndices[i]-=r)},d.prototype._clearModelIndices=function(e,t){for(var n=void 0===t?e:t,r=e;r<=n;r++){var i=this._modelIndices.indexOf(e);i>-1&&this._modelIndices.splice(i,1)}},d.prototype._setModel=function(e,t){var n=this._getModel(e);this._removePrevNext(n),n||(this.lruCount+=1),this._setChangeAt(e,1),this._getModels()[e]=t,t&&(this._setModelIndex(e),t.SetIndex(e),this._makeModelHead(t))},d.prototype._clearOutModels=function(e){var t,n,r=this.tail,i=0;for(this.tail=null;r&&i<e;)t=r.GetIndex(),(n=this._getModel(t))&&n.hasChanged()?(this.tail||(this.tail=r),r=r.GetPrevious()):(this.lruCount-=1,t>-1&&(this._setModel(t,void 0),this._clearModelIndices(t,t)),r.SetNext(null),r=r.SetPrevious(null),i+=1);this.tail||(this.tail=r),this.lruCount<0&&(this.lruCount=0),0===this.lruCount&&(this.head=null,this.tail=null)},d.prototype._resetLRU=function(){this.lruCount=0,this.head=null,this.tail=null},d.prototype._manageLRU=function(e){if(this.IsVirtual()){var t=this._getModelLimit();t>-1&&this.lruCount+e>t&&this._clearOutModels(this.lruCount+e-t)}},d.prototype.clone=function(){return this._cloneInternal(!0)},d.prototype._cloneInternal=function(e){var t,n,r=new this.constructor;if(this.IsVirtual()&&(r=this._copyFetchProperties(r))._resetModelsToFullLength(this.totalResults),r=this._copyProperties(r),e){var i,o=[];for(t=0;t<this._modelIndices.length;t++)o.push(this._modelIndices[t]);for(o.sort(function(e,t){return e-t}),t=0;t<o.length;t++)i=o[t],(n=this._atInternal(i,null,!0,!1))&&r._addInternal(n.clone(),{at:i},!0,!1)}return r},d.prototype._copyProperties=function(e){var t,n,r=["comparator","model","modelId"];for(n=0;n<r.length;n++)e[t=r[n]]=this[t];return e},d.prototype._copyFetchProperties=function(e){var t,n,r=["totalResults","hasMore",d._FETCH_SIZE_PROP];for(n=0;n<r.length;n++)e[t=r[n]]=this[t];return e},d.prototype._getLength=function(){return this.length},d.prototype._setLength=function(){var e=this._getModelsLength();this.length=e,this.IsVirtual()||(this.totalResults=e)},d._createModel=function(e,t,n){return e.model?r.isFunction(e.model)?new e.model(t,n):new e.model.constructor(t,n):null},d.prototype._newModel=function(e,t,n,r){var i,s=null,a=n||{};return a.ignoreDefaults=r,e instanceof l?s=e:this.model?s=d._createModel(this,e,a):(a.collection=this,s=new l(e,a)),a.validate&&s.validate&&(i=s.validate(s.attributes))?(a.validationError=i,this.TriggerInternal(!1,o.EventType.INVALID,s,i,a),null):s},d.prototype.add=function(e,t){this._manageLRU(1);var n=t||{};return this._handlePromise(this._addInternal(e,t,!1,n.deferred))},d.prototype._addInternal=function(e,r,i,s){var a,c,u,h=r||{},p=[],f=h.at,_=h.silent,m=h.force,g=h.merge||!1,v=h.sort,y=!0,E=!1,b=[],S=[];function T(e,r,s,a,l){var d,p=null;return!m&&g&&s?(y=s.Merge(r,e.comparator,_),p=s):(m||(d=i&&a.isNew()?void 0:e._getLocal(a))&&i&&f!==d.index&&n.warn("Duplicate ID fetched or added without merging, the id = "+d.GetId()),void 0===d?(!function(e,t){void 0===f?(e._pushModels(t),c=e._getModelsLength()-1,e._getModel(c).SetCid()):(c=f,e.IsVirtual()&&i?e._setModel(c,t):e._spliceModels(c,0,t),e._getModel(c).SetCid(),f+=1),void 0===t.GetCollection()&&t.SetCollection(e),e._setLength(),e._listenToModel(t),E=!0}(e,a),p=a):p=d),function(e,n,r,s,a){var l=h||{};i&&(l.fillIn=!0);var d=l.comparator||e._hasComparator();if((!i||i&&d)&&y&&void 0===n&&!v&&void 0===f&&e._getLength()>1){c>-1&&(u=e._getModel(c).cid);var p={};t.CollectionUtils.copyInto(p,l),p.add=!0,e.sort(p),c>-1&&(c=e.IsVirtual()?-1:e.indexOf(e.getByCid(u),a))}E&&(l.at&&(l.index=c),s?(s.TriggerInternal(_,o.EventType.ADD,s,e,l),b.push(s)):(r.TriggerInternal(_,o.EventType.ADD,r,e,l),b.push(r)))}(e,d,s,a,l),p}function C(e,t,n){E=!1;var r=e._newModel(t,!0,h,!1),o=null,s=null;if(null!=r){if(c=-1,r.SetupId(),o=t instanceof l?t:r,n)return m?new Promise(function(t){var i=T(e,o,void 0,r,n);S.push(i),t(i)}):e._getInternal(o,{silent:!0},n,!0).then(function(t){s=t.m;var i=T(e,o,s,r,n);S.push(i)});!m&&g&&(s=i?e._getLocal(o):e.get(o));var a=T(e,o,s,r,n);a&&S.push(a)}else S.push(!1);return Promise.resolve()}function P(e,t){return e.parse&&h.parse&&!h.noparse?e.parse(t):t}if(void 0!==f&&f<0&&(f+=this._getLength()+1),e instanceof Array?p=e:p.push(e),!i&&(this.IsVirtual()||s)){var O=this;return new Promise(function(e,t){var n=function(e){return new Promise(function(t,n){C(O,p[e],!0).then(function(){t(e+1)},n)})},r=Promise.resolve(0);for(p=P(O,p),a=0;a<p.length;a++)r=r.then(n);r.then(function(){b.length>0&&O.TriggerInternal(h.silent,o.EventType.ALLADDED,O,b,h),e(d._returnModels(S))},t)})}for(p=P(this,p),a=0;a<p.length;a++)C(this,p[a],!1);return b.length>0&&this.TriggerInternal(h.silent,o.EventType.ALLADDED,this,b,h),d._returnModels(S)},d._returnModels=function(e){return 1===e.length?e[0]:e},d.prototype._hasComparator=function(){return d._defined(this.comparator)},d.prototype.sort=function(e){var t,n,r=e||{},i=r.silent,s=this.comparator;if(!this._hasComparator())return null;if(this.IsVirtual()){var a=this.totalResults;this._hasTotalResults()?this._setModels(new Array(a),!0):(this._setModels([],!0),this._resetLRU(),this._setLength()),n=r.add?{add:!0}:null,this.TriggerInternal(i,o.EventType.SORT,this,n,null);var l=r.startIndex;return null!=l?this.setRangeLocal(l,this._getFetchSize(r)):null}return t=this,this._getModels().sort(function(e,n){return d.SortFunc(e,n,s,t,t)}),this._realignModelIndices(0),n=r.add?{add:!0}:null,this.TriggerInternal(i,o.EventType.SORT,this,n,null),null},d._getKey=function(e,t){return e instanceof l?e.get(t):a.GetPropValue(e,t)},d.SortFunc=function(e,n,i,o,s){var a,l,c,u;if(r.isFunction(i)){if(1===i.length){a=i.call(s,e),l=i.call(s,n);var h=t.StringUtils.isString(a)?a.split(","):[a],p=t.StringUtils.isString(l)?l.split(","):[l];for(c=0;c<h.length;c++)if(0!==(u=d._compareKeys(h[c],p[c],o.sortDirection)))return u}return i.call(s,e,n)}if(t.StringUtils.isString(i)){var f=i.split(",");for(c=0;c<f.length;c++)if(a=d._getKey(e,f[c]),l=d._getKey(n,f[c]),0!==(u=d._compareKeys(a,l,o.sortDirection)))return u}return 0},d.prototype.sortedIndex=function(e,n){var i,o,s=n||this.comparator;return s?(this._throwErrIfVirtual("sortedIndex"),i=this,o=function(e,n){var o,a;if(r.isFunction(s)){if(1===s.length){o=s.call(i,e),a=s.call(i,n);var l,c,u=t.StringUtils.isString(o)?o.split(","):[o],h=t.StringUtils.isString(a)?a.split(","):[a];for(c=0;c<u.length;c++)if(0!==(l=d._compareKeys(u[c],h[c],i.sortDirection)))return l}return s.call(i,e,n)}return t.StringUtils.isString(s)?(o=e.get(s),a=n.get(s),d._compareKeys(o,a,i.sortDirection)):0},d._find(this._getModels(),e,o)):-1},d._find=function(e,t,n){return function r(i,o){var s,a,l;return i>o?-1:(s=t.GetCid(),a=t.GetId(),e[i].Match(a,s)?i:e[o].Match(a,s)?o:(l=Math.floor((o+i)/2),-1===n(e[l],t)?r(i+1,l):1===n(e[l],t)?r(l,o-1):l))}(0,e.length-1)},d._compareKeys=function(e,t,n){if(-1===n){if(e<t)return 1;if(t<e)return-1}else{if(e>t)return 1;if(t>e)return-1}return 0},d.prototype.unshift=function(e,n){var r={};return t.CollectionUtils.copyInto(r,n||{}),r.at||(r.at=0),this._manageLRU(1),this._handlePromise(this._addInternal(e,r,!1,r.deferred))},d.prototype._handlePromise=function(e){return r.isFunction(e.then)?this._addPromise(function(){return e}):e},d.prototype.shift=function(e){var t,n=e||{},r=this._getDeferred(n);if(this.IsVirtual()||r){var i=this;return this._atInternal(0,n,!1,!0).then(function(e){return t=i._removeInternal(e,0,n),i.TriggerInternal(n.silent,o.EventType.ALLREMOVED,i,[t],n),t})}return t=this._removeInternal(this.at(0),0,n),this.TriggerInternal(n.silent,o.EventType.ALLREMOVED,this,[t],n),t},d.prototype.initial=function(e){var t=void 0===e?1:e;this._throwErrIfVirtual("initial");var n,r=[];for(n=0;n<this._getLength()-t;n+=1)r.push(this.at(n));return r},d.prototype._getDeferred=function(e){return(e||{}).deferred},d.prototype.last=function(e,t){var n,r=this._getDeferred(t),i=void 0===e?1:e;if(1===i)return 0===(n=this._getModelsLength())&&(n=i),n>0?this._atInternal(n-1,t,!1,r):null;var o,s=[];if(n=this._getLength(),r||this.IsVirtual()){var a=n-e;a<0&&(a=0),0===n&&(n=e);var l=this;return this._addPromise(function(){return l.IterativeAt(a,n)})}for(o=n-e;o<n;o+=1)s.push(this.at(o));return s},d.prototype.IterativeAt=function(e,t){var n,r=[],i=this;return new Promise(function(o,s){var a=function(e){return i.IsVirtual()&&i._hasTotalResults()&&e>=i.totalResults?Promise.resolve(e+1):new Promise(function(t,n){i._deferredAt(e,null).then(function(n){r.push(n),t(e+1)},n)})},l=Promise.resolve(e);for(n=e;n<t;n++)l=l.then(a);l.then(function(){o(r)},s)})},d.prototype._getDefaultFetchSize=function(e){return null==e?this[d._FETCH_SIZE_PROP]:e},d.prototype._calculateNextStart=function(){var e=this.lastFetchCount;return null==e&&(e=this[d._FETCH_SIZE_PROP]),void 0===this.offset||null===this.offset?e:this.offset+e},d.prototype.next=function(e,t){var n=t||{};n[d._FETCH_SIZE_PROP]=this._getDefaultFetchSize(e);var r=this._calculateNextStart(),i=this._getLength();if(0===i&&n[d._FETCH_SIZE_PROP]>0)r=0;else if(r>=i){return n.success&&n.success.call(l.GetContext(n,this),this,null,n),null}return n.startIndex=r,this.fetch(n)},d.prototype._calculatePrevStart=function(e){return void 0===this.offset||null===this.offset?0:this.offset-e},d.prototype.previous=function(e,t){var n=t||{};if(0===this.offset){return n.success&&this.lastFetchCount&&n.success.call(l.GetContext(n,this),this,null,n),null}n[d._FETCH_SIZE_PROP]=this._getDefaultFetchSize(e);var r=this._calculatePrevStart(n[d._FETCH_SIZE_PROP]);return r<0&&(n[d._FETCH_SIZE_PROP]=this.offset,r=0),n.startIndex=r,this.fetch(n)},d.prototype.setModelLimit=function(e){this.modelLimit=e,this._manageLRU(0)},d.prototype._getModelLimit=function(){return this.modelLimit},d.prototype.setFetchSize=function(e){this[d._FETCH_SIZE_PROP]=e},d.prototype.rest=function(e,t){var n,r=this._getDeferred(t),i=void 0===e?1:e,o=[];if(this.IsVirtual()||r){var s=this;return this._addPromise(function(){return s.IterativeAt(i,s._getLength())})}for(n=i;n<this._getLength();n+=1)o.push(this.at(n));return o},d.prototype.remove=function(e,t){var n,r=t||{},i=[];e instanceof Array?i=e:i.push(e);var s=[];for(n=i.length-1;n>=0;n-=1)s.unshift(this._removeInternal(i[n],-1,r));return this.TriggerInternal(r.silent,o.EventType.ALLREMOVED,this,i,r),d._returnModels(s)},d.prototype._removeInternal=function(e,n,r){var i=r||{},s=-1===n?this._getInternal(e):d._getModinfo(n,e),a=i.silent,l=s.index;if(l>-1){var c=s.m;void 0!==c&&c.GetCollection()===this&&c.SetCollection(null),this._spliceModels(l,1),this._setLength();var u={};t.CollectionUtils.copyInto(u,i),u.index=l,void 0!==c&&c.TriggerInternal(a,o.EventType.REMOVE,c,this,u),this._unlistenToModel(c)}return s.m},d.prototype._unlistenToModel=function(e){void 0!==e&&e.off(null,null,this)},d.prototype._listenToModel=function(e){e.OnInternal(o.EventType.ALL,this._modelEvent,this,!1,!0)},d.prototype._modelEvent=function(e,t,n,r){if(e===o.EventType.DESTROY&&this.remove(t),!(void 0!==n&&n instanceof d&&n!==this)){var i=r&&r.silent;this.TriggerInternal(i,e,t,n,r)}},d.prototype.refresh=function(e){var t,n=e||{},r=this;return this._addPromise(function(){return new Promise(function(e,i){if(!r.IsVirtual()){t=void 0!==n.silent&&n.silent;try{r.reset(null,{silent:!0});var a={};return Object.keys(n).forEach(function(e){Object.prototype.hasOwnProperty.call(n,e)&&(a[e]=n[e])}),a.success=function(n,i,s){r.TriggerInternal(t,o.EventType.REFRESH,r,s,null),e({collection:n,response:i,options:s})},a.error=function(e,t,o,s,a){i(d._createRejectionError(o,a,t,r,n,!1))},void r._fetchInternal(a,-1,!1)}catch(i){if(i instanceof s)return r.TriggerInternal(t,o.EventType.REFRESH,r,n,null),void e({collection:r,options:n});throw i}}var l=n.startIndex;r._setModels([],!0),r._resetLRU(),r.totalResults=void 0,r._setLength(),t=void 0!==n.silent&&n.silent,r.TriggerInternal(t,o.EventType.REFRESH,r,n,null),null==l&&(l=0),null!=l?r._setRangeLocalInternal(l,r._getFetchSize(n)).then(function(t){e(t)},function(e){i(e)}):e(void 0)})})},d.prototype.reset=function(e,n){var r,i,s={};t.CollectionUtils.copyInto(s,n||{}),s.previousModels=this._getModels();for(var a=0;a<this._modelIndices.length;a++)r=this._modelIndices[a],(i=this._getModel(r))&&(this._unlistenToModel(i),i.SetCollection(null));this._setModels([],!0),this._resetLRU();var l=void 0!==s.silent&&s.silent;if(!e)return this._setLength(),this.totalResults=void 0,this.TriggerInternal(l,o.EventType.RESET,this,s,null),null;var c,u=e;return s.parse&&(u=this.parse(e)),this._manageLRU(u instanceof Array?u.length:1),s.noparse=!0,c=this._addInternal(u,s,!0,!1),this._setLength(),this.TriggerInternal(l,o.EventType.RESET,this,s,null),this._handlePromise(c)},d.prototype.at=function(e,t){var n=this._getDeferred(t);return this._atInternal(e,t,!1,n)},d.prototype._atInternal=function(e,t,n,r){var i=e;if(i<0&&(i+=this._getLength()),i<0||this._overUpperLimit(i))return n||!this.IsVirtual()&&!r?null:this._addPromise(function(){return Promise.resolve(null)});var o=this;return n||!this.IsVirtual()&&!r?this._getModel(i):this._addPromise(function(){return o._deferredAt(i,t)})},d.prototype.whenReady=function(){return this._promises?this._promises:Promise.resolve()},d.prototype._addPromise=function(e){var t=this;return void 0===this._promises&&(this._promiseCount=0,this._promises=Promise.resolve()),this._promiseCount+=1,this._promises=this._promises.then(e.bind(t)).then(function(e){return t._promiseCount-=1,0===t._promiseCount&&(t._promises=void 0,t.TriggerInternal(!1,o.EventType.READY,t,null,null)),e},function(e){return t._promiseCount-=1,0===t._promiseCount&&(t._promises=void 0),Promise.reject(e)}),this._promises},d.prototype._addxhr=function(e){if(e&&e.abort){void 0===this._xhrs&&(this._xhrs=[]);var t=this;this._xhrs.push(e),e.done(function(){var n=t._xhrs?t._xhrs.indexOf(e):-1;n>-1&&t._xhrs.splice(n,1)})}},d.prototype.abort=function(){var e=this;function t(t,n){e._xhrs[t].then(function(r,i){"abort"===i&&(e._xhrs.splice(t,1),0===e._xhrs.length&&e.whenReady().then(function(){n(null)},function(){n(null)}))},function(){e._xhrs.splice(t,1),0===e._xhrs.length&&e.whenReady().then(function(){n(null)},function(){n(null)})})}return this._xhrs&&this._xhrs.length>0?new Promise(function(n){for(var r=e._xhrs.length-1;r>=0;r--)t(r,n),e._xhrs[r].abort()}):Promise.resolve()},d.prototype._deferredAt=function(e,n){var r=this,i=r._getModel(e);return new Promise(void 0===i?function(i,o){var s={};t.CollectionUtils.copyInto(s,n||{}),s.context=r,s.startIndex=e,s.error=function(e,t,i,s,a){o(d._createRejectionError(s,a,t,r,n,!1))},s.success=function(){i(r._getModel(e))},r._fetchInternal(s,-1,!1)}:function(e){e(i)})},d.prototype.getByCid=function(e){for(var t,n=this._getModels(),r=null,i=0;i<this._modelIndices.length;i++)if(n[t=this._modelIndices[i]]&&e===n[t].cid){r=n[t];break}if(r)return r;if(this.IsVirtual())throw new Error("Not found locally and not supported by server for virtual collections");return null},d.prototype.get=function(e,t){var n=this._getDeferred(t),i=this._getInternal(e,t,n);if(i){if(r.isFunction(i.then))return this._addPromise(function(){return new Promise(function(e,t){i.then(function(t){e(t.m)},function(e){t(e)})})});if(this.IsVirtual())return this._addPromise(function(){return new Promise(function(e){e(i.m)})});if(Object.prototype.hasOwnProperty.call(i,"m"))return i.m}return null},d.prototype._getLocal=function(e){var t=this._getLocalInternal(e);return t?t.m:null},d.prototype._getLocalInternal=function(e){var t=e,n=e;e instanceof l?(t=e.GetCid(),n=e.GetId()):d._defined(e)&&void 0!==e.id&&(n=e.id);for(var r,i,o=null,s=this._modelIndices.length,a=this._getModels(),c=0;c<s;c++)if(void 0!==(r=a[i=this._modelIndices[c]])&&r.Match(n,t)){o=d._getModinfo(i,r);break}return o||d._getModinfo(-1,void 0)},d.prototype._getInternal=function(e,n,r,i){var o=e,s=e,a=void 0!==i&&i;e instanceof l?(o=e.GetCid(),s=e.GetId()):d._defined(e)&&void 0!==e.id&&(s=e.id);for(var c,u=null,h=this._getModels(),p=0;p<this._modelIndices.length;p++)if(h[c=this._modelIndices[p]]&&h[c].Match(s,o)){var f=d._getModinfo(c,h[c]);u=f;break}if(u)return r?new Promise(function(e){e(u)}):u;if(this.IsVirtual()){if(void 0===s&&void 0!==o)return new Promise(function(e){e(d._getModinfo(-1,void 0))});var _=this;return new Promise(function(e,r){var i={};t.CollectionUtils.copyInto(i,n||{}),i.context=_,i.startID=s,i.error=function(e,t,i,o,s){r(d._createRejectionError(o,s,t,_,n,!1))},i.success=function(t,n){!function(t){if(null!=t){var n=_._getOffset(),r=_._getModel(n);void 0!==r&&r.Match(s,o)?e(d._getModinfo(n,r)):e(d._getModinfo(-1,void 0))}else e(d._getModinfo(-1,void 0))}(n)},_._fetchInternal(i,-1,a)})}var m=d._getModinfo(-1,void 0);return r?new Promise(function(e){e(m)}):m},d._getModinfo=function(e,t){return{index:e,m:t}},d.prototype._parseImpl=function(e){if(e instanceof Array)return e;if(!e)return e;var t;for(t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&e[t]instanceof Array)return e[t];return e},d.prototype.parse=d.prototype._parseImpl,d.prototype._checkActual=function(e,t,n){return!!(this._hasTotalResults()&&n.start+n.count>=this.totalResults)||n.start===e&&n.count===t},d.prototype.setRangeLocal=function(e,t,n){var r=this;return this._addPromise(function(){return r._setRangeLocalInternal(e,t,n)})},d.prototype._setRangeLocalInternal=function(e,t,n){this.IsVirtual()&&this._resetModelsToFullLength(this.totalResults);var r=this._getLocalRange(e,t),i=this;if(this._checkActual(e,t,r))return new Promise(function(e){e(r)});var o=this._getModelLimit();return o>-1&&o<t&&(this.modelLimit=t),new Promise(function(r,o){i._setRangeLocalFetch(e,t,-1,{start:e,count:t},r,o,!0,n)})},d.prototype._setRangeLocalFetch=function(e,t,n,r,i,o,a,l){var c=this,u=e,h=u+t;this[d._FETCH_SIZE_PROP]&&this[d._FETCH_SIZE_PROP]>t&&(h=this[d._FETCH_SIZE_PROP]+u);var p=null;if(this.IsVirtual()){var f=this._getFirstMissingModel(u,h);f>u&&(h=(u=f)+t,this[d._FETCH_SIZE_PROP]&&this[d._FETCH_SIZE_PROP]>t&&(h=this[d._FETCH_SIZE_PROP]+u)),p={context:this,startIndex:u,fetchSize:h-u}}else p={context:this};p.error=function(e,t,n,r,i){o(d._createRejectionError(r,i,t,c,null,!1))},p.success=function(){!function(){var e=c._getLocalRange(r.start,r.count);if(a&&c._hasTotalResults()&&e.count<r.count){var n=e.start+e.count,s=u+(c.lastFetchCount?c.lastFetchCount:t);s<c.totalResults?c._setRangeLocalFetch(s,t,n,r,i,o,a,l):i(e)}else i(e)}()},l&&l.silent&&(p.silent=l.silent);try{this._fetchInternal(p,n,n>-1)}catch(e){if(e instanceof s){var _=c._getLocalRange(u,t);i(_)}}},d._createRejectionError=function(e,t,n,r,i,o){var s=!1;i&&i.silent&&(s=i.silent),o&&l._triggerError(r,s,i,t,n,e);var a=new Error(t);return a.xhr=e,a.error=n,a.collection=r,a.status=t,a},d.prototype._getMaxLength=function(e,t){var n=this._getModelsLength();return 0===n?e+t:e+t>n?n:e+t},d.prototype.isRangeLocal=function(e,t){var n=this._getLocalRange(e,t);return 0===this._getModelsLength()?0===t:e===n.start&&(t===n.count||e+t>this._getModelsLength())},d.prototype._getModelArray=function(e,t){for(var n=[],r=this._getModels(),i=e+t,o=e;o<i;o++)n.push(r[o]);return n},d.prototype._getLocalRange=function(e,t){if(!this.IsVirtual()){if(this._getModelsLength()>0){if(e+t>this._getModelsLength()){var n=this._getModelsLength()-e;return{start:e,count:n,models:this._getModelArray(e,n)}}return{start:e,count:t,models:this._getModelArray(e,t)}}return{start:e,count:0,models:[]}}var r=this._getMaxLength(e,t);if(!this._hasTotalResults()&&r<e+t)return{start:e,count:r-e,models:this._getModelArray(e,r-e)};if(0===r)return{start:e,count:0,models:[]};var i=this._getFirstMissingModel(e,r);if(i>-1)return{start:e,count:i-e,models:this._getModelArray(e,i-e)};var o=t;return e>r?o=0:e+o>r&&(o=r-e),{start:e,count:o,models:this._getModelArray(e,o)}},d.prototype._getFirstMissingModel=function(e,t){for(var n=e;n<t;n++)if(void 0===this._getModel(n))return n;return-1},d.prototype.fetch=function(e){var t=this._fetchInternal(e,-1,!1);return this._addPromise(function(){return Promise.resolve(t)}),t},d.prototype._fetchInternal=function(e,t,n){function r(e,t,n,r){e.IsVirtual()?n||e._resetModelsToFullLength(r):t.add||t.useset||e.reset(null,{silent:!0})}var i,s=e||{},a=s.success,c=s.error;return s.set&&(s.useset=!!s.set),void 0===s.parse&&(s.parse=!0),i=this,s.error=function(t,n,r){l._triggerError(i,!1,e,n,r,t),c&&c.call(l.GetContext(e,i),i,r,e,t,n)},s.success=function(c){var u,h;try{u=i.parse(c,e)}catch(t){return void d._reportError(i,t,s.error,e)}i._setPagingReturnValues(c,e,u,n)||(h=i.totalResults);var p=null,f=!1,_=t;if(s.add||i.model){r(i,s,n,h);try{-1===t&&(f=!0,_=i._getOffset()),p=i._fillInCollectionWithParsedData(u,_,f,s)}catch(t){return void d._reportError(i,t,s.error,e)}}else n||(i.IsVirtual()?(r(i,s,n,h),-1===t&&(f=!0,_=i._getOffset()),p=i._putDataIntoCollection(u,_,f)):s.useset?i._setInternal(u,!1,s,!1):i.reset(u,{silent:!0}));i.IsVirtual()&&p&&(i.lastFetchCount=p.length);var m=!!s.silent;i.TriggerInternal(m,o.EventType.SYNC,i,c,s),a&&a.call(l.GetContext(e,i),i,c,s)},this._fetchCall(s)},d.prototype._putDataIntoCollection=function(e,t,n){var r;if(e){r=e instanceof Array?e:[e];var i={};n&&this._manageLRU(r.length);for(var o=t,s=this.IsVirtual(),a=null,l=0;l<r.length;l+=1)s&&(i={at:o},a=this._atInternal(o,null,!0,!1)),i.silent=!0,this._addInternal(r[l],i,!0,!1),this._atInternal(o,null,!0,!1)!==a&&(o+=1)}return r},d.prototype._fillInCollectionWithParsedData=function(e,t,n,r){var i=r||{},o=i.parse,s=d._createModel(this),a=null;if(e){a=e instanceof Array?e:[e];var l,c={};n&&this._manageLRU(a.length);var u,h=this.IsVirtual();if(i.useset&&!h){for(u=0;u<a.length;u+=1)l=s&&o?s.parse(a[u]):a[u],a[u]=l;this._setInternal(a,!1,i,!1)}else{var p=null,f=t;for(u=0;u<a.length;u+=1)l=s&&o?s.parse(a[u]):a[u],h&&(c={at:f},p=this._atInternal(f,c,!0,!1)),c.silent=!0,this._addInternal(l,c,!0,!1),this._atInternal(f,null,!0,!1)!==p&&(f+=1)}}return a},d._reportError=function(e,t,r,i){n.error(t.toString()),r&&r.call(l.GetContext(i,e),e,t,i)},d.prototype._fetchOnly=function(e){var t,n,r=e||{},i=r.success;return void 0===r.parse&&(r.parse=!0),n=this,r.success=function(s){var a,c,u,h=null,p=[];try{u=n.parse(s,e)}catch(t){return void d._reportError(n,t,r.error,e)}if(r.add||n.model){if(c=d._createModel(n),u)for(h=u instanceof Array?u:[u],a=0;a<h.length;a+=1){if(c&&r.parse)try{t=c.parse(h[a])}catch(t){return void d._reportError(n,t,r.error,e)}else t=h[a];p.push(n._newModel(t))}}else h=u instanceof Array?u:[u];n.TriggerInternal(!1,o.EventType.SYNC,n,s,r),i&&i.call(l.GetContext(e,n),n,p,r)},this._fetchCall(r)},d.prototype._fetchCall=function(e){try{return l._internalSync("read",this,e)}catch(t){throw l._triggerError(this,!1,e,null,t,null),t}},d.prototype._resetModelsToFullLength=function(e){return void 0!==e&&this._getModelsLength()!==e&&(this._setModels(new Array(e),!0),this._resetLRU(),this._setLength(),!0)},d.prototype._getFetchSize=function(e){return(e||{})[d._FETCH_SIZE_PROP]||this[d._FETCH_SIZE_PROP]},d.prototype.IsVirtual=function(){return this._getFetchSize(null)>-1},d.prototype._getReturnProperty=function(e,t,n,r,i){var o=parseInt(d._getProp(e,t,n),10);return null==o||isNaN(o)?r||i:o},d.prototype._cleanTotalResults=function(e){if(-1!==e)return e},d.prototype._setPagingReturnValues=function(e,t,n,r){var i={};this.customPagingOptions&&((i=this.customPagingOptions.call(this,e))||(i={}));var o=t||{};this.lastFetchSize=this._getReturnProperty(i,e,"limit",o.fetchSize,this.fetchSize),this.offset=this._getReturnProperty(i,e,"offset",o.startIndex,0),this.lastFetchCount=this._getReturnProperty(i,e,"count",this.lastFetchCount,this.lastFetchCount),this.totalResults=this._cleanTotalResults(this._getReturnProperty(i,e,"totalResults",this.totalResults,this.totalResults)),this.hasMore=this._getHasMore(d._getProp(i,e,"hasMore"),this.offset,this.lastFetchSize,this.totalResults);var s=!1;if(!r){var a=this._cleanTotalResults(parseInt(d._getProp(i,e,"totalResults"),10)),l=parseInt(d._getProp(i,e,"count"),10);this.totalResults=this._adjustTotalResults(a,this.hasMore,this.offset,l,n&&Array.isArray(n)?n.length:0),s=void 0===a||isNaN(a)||null===a}return!this.IsVirtual()&&this.totalResults&&this.totalResults!==this.lastFetchCount&&this.lastFetchSize&&this.setFetchSize(this.lastFetchSize),s},d.prototype._adjustTotalResults=function(e,t,n,r,i){if(!t&&isNaN(e))return(isNaN(r)?i:r)+n;return this.totalResults},d.prototype._getHasMore=function(e,t,n,r){return d._defined(e)?e:null==r||!(t+n>r)},d._getProp=function(e,t,n){return Object.prototype.hasOwnProperty.call(e,n)?e[n]:t?t[n]:void 0},d.prototype._getOffset=function(){return d._defined(this.offset)?this.offset:0},d.prototype.create=function(e,t){var n=this,r=t||{},i=this._getDeferred(r);function o(t,n,r,i){return n.save(e instanceof l?null:e,i),n}function s(e,t){return r.wait?n.IsVirtual()||i?n._addPromise(function(){return Promise.resolve(void 0)}):null:n.add(e,t)}var a=this._newModel(e,!0,r,!1),c=r.success,u=r.context;r.validate;if(r.context=this,r.success=function(e,t,i){i.xhr&&(r.xhr=i.xhr),r.wait&&n.add(a,r),c&&c.call(null!=u?u:n,e,t,r)},null==a)return!1;r.forceNew=null!=a.GetId();var d=l._copyOptions(r);return a.SetCollection(this),i||this.IsVirtual()?new Promise(function(e){d.merge=!0,d.deferred=!0,s(a,d).then(function(){r.success=function(t,i,o){o.xhr&&(r.xhr=o.xhr),r.wait?(n.IsVirtual()&&(d.force=!0),n.add(a,d).then(function(){c&&c.call(null!=u?u:n,t,i,r),e(t)})):(c&&c.call(null!=u?u:n,t,i,r),e(t))};var t=o(0,a,0,r);t||e(t)})}):(d.merge=!0,s(a,d),o(0,a,0,r))},d.prototype.pluck=function(e){var t,n=[];for(this._throwErrIfVirtual("pluck"),t=0;t<this._getLength();t+=1)n.push(this.at(t).get(e));return n},d.prototype.where=function(e,t){return this._handlePromise(this._whereInternal(e,t))},d.prototype._whereInternal=function(e,t){var n=t||{},r=this._getDeferred(n),i=this;if(this.IsVirtual())return new Promise(function(t,r){var o={query:e,all:!0,success:function(e,n){t(n)},error:function(e,t,o){r(d._createRejectionError(e,t,o,i,n,!0))}};i._fetchOnly(o)});var o,s,a=[];for(o=0;o<this._getLength();o+=1)(s=this.at(o)).Contains(e)&&a.push(s);return r?new Promise(function(e){e(a)}):a},d.prototype.whereToCollection=function(e,t){var n=t||{},r=this._getDeferred(n),i=this;if(this.IsVirtual()||r)return i._addPromise(function(){return new Promise(function(t,r){return i._whereInternal(e,n).then(function(e){var n=i._makeNewCollection(e);t(n)},function(e){r(e)})})});var o=this._whereInternal(e,n),s=this._makeNewCollection(o);return s[d._FETCH_SIZE_PROP]=-1,s._setLength(),s},d.prototype._makeNewCollection=function(e){var t=this._cloneInternal(!1);return t._setModels(e,!1),t._resetLRU(),t._setLength(),t},d.prototype._throwErrIfVirtual=function(e){if(this.IsVirtual())throw new Error(e+" not valid on a virtual Collection")},d.prototype.map=function(e,t){var n,r=[];return this._throwErrIfVirtual("map"),this._getModels().forEach(function(i){n=e.call(t||this,i),r.push(n)}),r},d.prototype.each=function(e,t){this._throwErrIfVirtual("each"),this._getModels().forEach(e,t)},d.prototype.size=function(){return this._getLength()},d.prototype.sortBy=function(e,t){var n,i=[];return this._throwErrIfVirtual("sortBy"),this._getModels().forEach(function(e){i.push(e)}),n=this,i.sort(function(i,o){var s,a;return r.isFunction(e)?(s=e.call(t||n,i),a=e.call(t||n,o),d._compareKeys(s,a,n.sortDirection)):(s=i.get(e),a=o.get(e),d._compareKeys(s,a,n.sortDirection))}),i},d.prototype.groupBy=function(e,t){var n,i={};return this._throwErrIfVirtual("groupBy"),this._getModels().forEach(function(o){n=r.isFunction(e)?e.call(t||this,o):o.get(e),void 0===i[n]&&(i[n]=[]),i[n].push(o)},this),i},d.prototype.indexBy=function(e,t){var n,i={};return this._throwErrIfVirtual("indexBy"),this._getModels().forEach(function(o){n=r.isFunction(e)?e.call(t||this,o):o.get(e),i[n]=o},this),i},d.prototype.min=function(e,t){var n,r,i={};return this._throwErrIfVirtual("min"),0===this._getModelsLength()?null:(i=this._getModel(0),n=e.call(t||this,this._getModel(0)),this._getModels().forEach(function(o,s){s>=1&&(r=e.call(t||this,o))<n&&(i=o,n=r)},this),i)},d.prototype.max=function(e,t){var n,r,i={};return this._throwErrIfVirtual("max"),0===this._getModelsLength()?null:(i=this._getModel(0),n=e.call(t,this._getModel(0)),this._getModels().forEach(function(o,s){s>=1&&(r=e.call(t||this,o))>n&&(i=o,n=r)},this),i)},d.prototype.filter=function(e,t){var n=[];return this._throwErrIfVirtual("filter"),this._getModels().forEach(function(r){e.call(t||this,r)&&n.push(r)}),n},d.prototype.without=function(e){var t,n,r,i,o,s=[];this._throwErrIfVirtual("without");for(var a=0;a<this._getModels().length;a++){for(i=!0,o=this._getModel(a),t=0;t<arguments.length;t+=1)if(r=arguments[t].GetCid(),n=arguments[t].GetId(),o.Match(n,r)){i=!1;break}i&&s.push(o)}return s},d.prototype.difference=function(e){var t,n,r,i,o,s,a=[];this._throwErrIfVirtual("difference");for(var l=0;l<this._getModels().length;l++){for(o=!0,s=this._getModel(l),t=0;t<arguments.length;t+=1){for(n=0;n<arguments[t].length;n++)if(i=arguments[t][n].GetCid(),r=arguments[t][n].GetId(),s.Match(r,i)){o=!1;break}if(!o)break}o&&a.push(s)}return a},d.prototype.isEmpty=function(){return 0===this._getLength()},d.prototype.any=function(e,t){var n;this._throwErrIfVirtual("any");for(var r=0;r<this._getModelsLength();r+=1)if(n=this._getModel(r),e.call(t||this,n))return!0;return!1},d.prototype.findWhere=function(e,t){var n=this._getDeferred(t),r=this;if(this.IsVirtual()||n)return this._addPromise(function(){return new Promise(function(n){r._whereInternal(e,t).then(function(e){e&&e.length>0&&n(e[0]),n(null)})})});var i=this._whereInternal(e,t);return i.length>0?i[0]:null},d.prototype.slice=function(e,t,n){var r,i=this._getDeferred(n),o=[],s=t;if(void 0===s){if(this.IsVirtual()&&!this._hasTotalResults())throw new Error("End must be set for virtual collections with no totalResults");s=this._getModelsLength()}if(i||this.IsVirtual()){var a=this;return this._addPromise(function(){return a.IterativeAt(e,s)})}for(r=e;r<s;r+=1)o.push(this._getModel(r));return o},d.prototype.set=function(e,t){var n=this._getDeferred(t);return this._setInternal(e,!0,t,n||this.IsVirtual())},d._removeAfterSet=function(e,t,n,r,i){if(n)for(var o=t.length-1;o>=0;o-=1)-1===r.indexOf(o)&&e._removeInternal(t[o],o,i)},d.prototype._swapModels=function(e,t,n,r){if(this._hasComparator()||!n||!r)return{index:e,swapped:!1};var i=this._getModelsLength();if(e>=i||t>=i)return{index:e,swapped:!1};var o=this._getModel(e),s=this._getModel(t);return this._setModel(e,s),s.SetIndex(e),this._setModel(t,o),o.SetIndex(t),{index:t,swapped:t!==e}},d.prototype._setInternal=function(e,t,n,r){var i,s,a=n||{},l=void 0===a.add||a.add,c=void 0===a.remove||a.remove,u=void 0===a.merge||a.merge,h=[],p=null,f=t?this.parse(e):e;if(s=Array.isArray(f)?f:[f],r){var _=this;return this._addPromise(function(){return _._deferredSet(s,_._getModels(),a,c,l,u,t)})}var m=!1;for(i=0;i<s.length;i+=1)if(-1!==(p=this._updateModel(this._newModel(s[i],t,a,!0),l,u,r))){var g=this._swapModels(p,i,c,l),v=g.index;g.swapped&&(m=!0),-1===h.indexOf(v)&&h.push(v)}if(m){var y=a.add?{add:!0}:null;this.TriggerInternal(a.silent,o.EventType.SORT,this,y,null)}return d._removeAfterSet(this,this._getModels(),c,h,a),null},d.prototype._deferredSet=function(e,t,n,r,i,o,s){var a,l=[],c=this;return new Promise(function(u,h){var p=function(t){return new Promise(function(r,a){c._updateModel(c._newModel(e[t],s,n,!0),i,o,!0).then(function(e){-1!==e&&l.push(e),r(t+1)},a)})},f=Promise.resolve(0);for(a=0;a<e.length;a+=1)f=f.then(p);f.then(function(){d._removeAfterSet(c,t,r,l,n),u(void 0)},h)})},d.prototype._updateModel=function(e,t,n,r){function i(r,i,o){var s=i?i.index:-1,a=i?i.m:null,l={};if(a){if(n){if(l={merge:n},o)return new Promise(function(t){r._addInternal(e,l,!1,!0).then(function(){t(s)})});r.add(e,l)}}else if(t){if(o)return new Promise(function(t){r._addInternal(e,l,!1,!0).then(function(){t(r._getLength()-1)})});r.add(e),s=r._getLength()-1}return s}if(r||this.IsVirtual()){var o=this;return new Promise(function(t){o._getInternal(e,{silent:!0},r).then(function(e){i(o,e,!0).then(function(e){t(e)})})})}return i(this,this._getInternal(e),!1)},d.prototype.toJSON=function(){var e=[];return this._throwErrIfVirtual("toJSON"),this._getModels().forEach(function(t){e.push(t.toJSON())}),e},d.prototype.first=function(e,t){var n,r=this._getDeferred(t),i=this._getLength(),o=[],s=this,a=e;a?i=a:a=1;var l=this.IsVirtual()||r;if(1===a)return l?this._addPromise(function(){return s._deferredAt(0,null)}):this._getModelsLength()>0?this._getModel(0):null;if(i>this._getModelsLength()&&(this.IsVirtual()&&!this._hasTotalResults()||(i=this._getModelsLength())),l)return this._addPromise(function(){return s.IterativeAt(0,i)});for(n=0;n<i;n+=1)o.push(this._getModel(n));return o},d.prototype.indexOf=function(e,t){var n=this._getDeferred(t);if(this.IsVirtual()||n){var r=this;return this._addPromise(function(){return r._getInternal(e,null,!0).then(function(e){return e.index})})}return this._getInternal(e).index},d.prototype.contains=function(e,t){var n=this._getDeferred(t);if(this.IsVirtual()||n){var r=this;return this._addPromise(function(){return r._getInternal(e,null,!0).then(function(e){return e.index>-1})})}return this._getInternal(e).index>-1},d.prototype.include=d.prototype.contains,d.prototype._localIndexOf=function(e){var t=this._getLocalInternal(e);return void 0!==t?t.index:-1},d.prototype.pop=function(e){var t=this._getDeferred(e);if(this.IsVirtual()||t){var n=this;return this._atInternal(this._getLength()-1,e,!1,!0).then(function(t){return n.remove(t,e),t})}var r=this.at(this._getLength()-1);return this.remove(r,e),r},d.prototype.push=function(e,t){var n=this._getDeferred(t);return this._manageLRU(1),this._handlePromise(this._addInternal(e,t,!1,n))},d.prototype.lastIndexOf=function(e,n){var r,i=n;for(this._throwErrIfVirtual("lastIndexOf"),void 0===i&&(i=0),r=this._getLength()-1;r>=i;r-=1)if(t.Object.__innerEquals(e,this.at(r)))return r;return-1},d.prototype._getSortAttrs=function(e){return void 0===e?[]:e.split(",")},d._getQueryString=function(e){function t(e,t,n){return e+n+t}function n(e,n){var i,o=n;return Object.keys(e||{}).forEach(function(n){if(Object.prototype.hasOwnProperty.call(e,n))for(var s=Array.isArray(e[n])?e[n]:[e[n]],a=0;a<s.length;a++){if(l.IsComplexValue(s[a])){var c=s[a].value,u=null,d=s[a].comparator;u=r.isFunction(d)?d(null,n,c):d,i=t(n,c,u)}else i=t(n,e[n],"=");o+=i+"+"}}),o=o.substring(0,o.length-1)+","}var i,o=Array.isArray(e)?e:[e],s="";for(i=0;i<o.length;i++)s=n(o[i],s);return","===s.substring(s.length-1)?s.substring(0,s.length-1):s},d.prototype.ModifyOptionsForCustomURL=function(e){var n={};Object.keys(e||{}).forEach(function(t){Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])});var r=this.comparator;if(r&&t.StringUtils.isString(r)){for(var i=this._getSortAttrs(r),o=0;o<i.length;o++)0===o?n.sort=i[o]:n.sort+=","+i[o];n.sortDir=this._getSortDirStr()}return this.IsVirtual()&&(n[d._FETCH_SIZE_PROP]=this._getFetchSize(n)),n},d.prototype.IsUrlBased=function(e){var t=this.customURL;if(r.isFunction(t))return!0;var n=this.GetCollectionFetchUrl(e);return d._defined(n)},d.prototype.GetCollectionFetchUrl=function(e){var n=a.GetPropValue(this,"url");if(this.IsVirtual()){var r=e||{},i=r.all,o=null;if(i)o=this.totalResults||this._getFetchSize(r);else o=this._getFetchSize(r);if(n&&n.indexOf("?")>-1?n+="&":n+="?",n+="limit="+o,i||(d._defined(r.startIndex)&&(n+="&offset="+r.startIndex),r.startID&&(n+="&fromID="+r.startID),r.since&&(n+="&since="+r.since),r.until&&(n+="&until="+r.until)),r.query){var s=d._getQueryString(r.query);s&&s.length>0&&(n+="&q="+s)}var l=this.comparator;if(l&&t.StringUtils.isString(l)){var c,u=this._getSortAttrs(l),h=this._getSortDirStr();for(c=0;c<u.length;c++)n+=0===c?"&orderBy="+u[c]+":"+h:","+u[c]+":"+h}n+="&totalResults=true"}return n},d.prototype._getSortDirStr=function(){return-1===this.sortDirection?"desc":"asc"},d.prototype.sync=function(e,n,r){return t.sync(e,n,r)},d._FETCH_SIZE_PROP="fetchSize";const h=function(e,t){h._init(this,t||{},e||"Authorization")};t._registerLegacyNamespaceProp("OAuth",h),t.Object.createSubclass(h,t.Object,"oj.OAuth"),h.prototype.Init=function(){h.superclass.Init.call(this)},h.prototype.getHeader=function(){var e={};return this.accessTokenResponse.access_token||this.clientCredentialGrant(),e[this.accessTokenRequest.auth_header]="Bearer "+this.accessTokenResponse.access_token,e},h.prototype.isInitialized=function(){return!(!this.accessTokenResponse||!this.accessTokenResponse.access_token)},h.prototype.clientCredentialGrant=function(){var e={},t=this;e[t.accessTokenRequest.auth_header]="Basic "+h._base64_encode(t.accessTokenRequest.client_id+":"+t.accessTokenRequest.client_secret),r.ajax({type:"POST",async:!1,url:this.accessTokenRequest.bearer_url,data:"grant_type=client_credentials",headers:e,success:function(e){t.accessTokenResponse=h._initAccessToken(t.accessTokenResponse,e)},error:function(e){throw new Error(e.responseText)}})},h.prototype.setAccessTokenResponse=function(e){this.accessTokenResponse=h._initAccessToken(this.accessTokenResponse,e)},h.prototype.getAccessTokenResponse=function(){return this.accessTokenResponse},h.prototype.cleanAccessTokenResponse=function(){h._cleanAccessToken(this.accessTokenResponse)},h.prototype.setAccessTokenRequest=function(e){this.accessTokenRequest=h._initAccessToken(this.accessTokenRequest,e)},h.prototype.getAccessTokenRequest=function(){return this.accessTokenRequest},h.prototype.cleanAccessTokenRequest=function(){h._cleanAccessToken(this.accessTokenRequest)},h._init=function(e,t,n){var r=e;r.Init(),r.accessTokenRequest={},r.accessTokenResponse={},t.access_token?r.accessTokenResponse=h._initAccessToken(r.accessTokenResponse,t):t.client_id&&t.client_secret&&t.bearer_url&&(r.accessTokenResponse=h._initAccessToken(r.accessTokenRequest,t)),r.accessTokenRequest.auth_header=n},h._initAccessToken=function(e,t){var n=t||{},r=e||{};return Object.keys(n).forEach(function(e){Object.prototype.hasOwnProperty.call(n,e)&&(r[e]=n[e])}),r},h._cleanAccessToken=function(e){var t=e||{};Object.keys(t).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e)&&"auth_header"!==e&&(t[e]=null,delete t[e])})},h._base64_encode=function(e){var t,n,r,i,o=0,s=0,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=[];do{t=e.charCodeAt(o),o+=1,n=e.charCodeAt(o),o+=1,r=e.charCodeAt(o),o+=1,t=(i=t<<16|n<<8|r)>>18&63,n=i>>12&63,r=i>>6&63,i&=63,l[s]=a.charAt(t)+a.charAt(n)+a.charAt(r)+a.charAt(i),s+=1}while(o<e.length);return l=l.join(""),((t=e.length%3)?l.slice(0,t-3):l)+"===".slice(t||3)},e.Collection=d,e.Events=o,e.Model=l,e.OAuth=h,e.URLError=s,e.ajax=u,e.sync=c,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojdataprovideradapter",["ojs/ojcore-base","ojs/ojdataprovider","ojs/ojmodel","ojs/ojdataprovideradapter-base","ojs/ojeventtarget"],function(e,t,n,r,i){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;class o extends r{constructor(e){super(e),this.tableDataSource=e,this.FetchByKeysResults=class{constructor(e,t,n){this._parent=e,this.fetchParameters=t,this.results=n,this[o._FETCHPARAMETERS]=t,this[o._RESULTS]=n}},this.ContainsKeysResults=class{constructor(e,t,n){this._parent=e,this.containsParameters=t,this.results=n,this[o._CONTAINSPARAMETERS]=t,this[o._RESULTS]=n}},this.Item=class{constructor(e,t,n){this._parent=e,this.metadata=t,this.data=n,this[o._METADATA]=t,this[o._DATA]=n}},this.FetchByOffsetResults=class{constructor(e,t,n,r){this._parent=e,this.fetchParameters=t,this.results=n,this.done=r,this[o._FETCHPARAMETERS]=t,this[o._RESULTS]=n,this[o._DONE]=r}},this.FetchListParameters=class{constructor(e,t,n){this._parent=e,this.size=t,this.sortCriteria=n,this[o._SIZE]=t,this[o._SORTCRITERIA]=n}},this._addTableDataSourceEventListeners(),this[o._OFFSET]=0,this._ignoreDataSourceEvents=new Array}destroy(){this._removeTableDataSourceEventListeners()}containsKeys(e){const t=this,n=[];return e[o._KEYS].forEach(function(e){n.push(t.tableDataSource.get(e,{silent:!0}))}),Promise.all(n).then(function(n){const r=new Set;return n.forEach(e=>{null!=e&&r.add(e[o._KEY])}),Promise.resolve(new t.ContainsKeysResults(t,e,r))})}fetchByKeys(e){const t=this,n=[];return e[o._KEYS].forEach(function(e){n.push(t.tableDataSource.get(e))}),Promise.all(n).then(function(n){const r=new Map;for(let e=0;e<n.length;e++){const i=n[e];if(null!=i){const e=i[o._KEY],n=i[o._DATA],s=new t.ItemMetadata(t,e),a=i[o._INDEX];t._extractMetaData(t.dataSource,a,s),r.set(e,new t.Item(t,s,n))}}return Promise.resolve(new t.FetchByKeysResults(t,e,r))})}fetchByOffset(e){const t=this,n=null!=e?e[o._SIZE]:-1,r=null!=e?e[o._SORTCRITERIA]:null,i=null!=e&&e[o._OFFSET]>0?e[o._OFFSET]:0,s=new this.FetchListParameters(this,n,r);return this._startIndex=0,this._getFetchFunc(s,i)(s,!0).then(function(n){const r=n[o._VALUE],s=n[o._DONE],a=r[o._DATA],l=r[o._METADATA].map(function(e){return e[o._KEY]}),c=new Array;a.map(function(e,n){c.push(new t.Item(t,new t.ItemMetadata(t,l[n]),a[n]))});for(let e=0;e<c.length;e++)t._extractMetaData(t.dataSource,e+i,c[e][o._METADATA]);return new t.FetchByOffsetResults(t,e,c,s)})}fetchFirst(e){return this._isPagingModelTableDataSource()||(this._startIndex=0),new this.AsyncIterable(new this.AsyncIterator(this._getFetchFunc(e),e))}getCapability(e){return e==o._SORT&&"full"==this.tableDataSource.getCapability(e)?{attributes:"multiple"}:"fetchByKeys"==e||"fetchByOffset"==e?{implementation:"lookup"}:null}getTotalSize(){return Promise.resolve(this.tableDataSource.totalSize())}isEmpty(){return this.tableDataSource.totalSize()>0?"no":"yes"}getPage(){return this._isPagingModelTableDataSource()?this.tableDataSource.getPage():-1}setPage(e,t){return this._isPagingModelTableDataSource()?this.tableDataSource.setPage(e,t):Promise.reject(null)}getStartItemIndex(){return this._isPagingModelTableDataSource()?this.tableDataSource.getStartItemIndex():-1}getEndItemIndex(){return this._isPagingModelTableDataSource()?this.tableDataSource.getEndItemIndex():-1}getPageCount(){return this._isPagingModelTableDataSource()?this.tableDataSource.getPageCount():-1}totalSize(){return this._isPagingModelTableDataSource()?this.tableDataSource.totalSize():-1}totalSizeConfidence(){return this._isPagingModelTableDataSource()?this.tableDataSource.totalSizeConfidence():null}_getFetchFunc(e,t){const n=this;if(null!=e&&null!=e[o._SORTCRITERIA]){const r=e[o._SORTCRITERIA][0][o._ATTRIBUTE],i=e[o._SORTCRITERIA][0][o._DIRECTION];return this._ignoreSortEvent=!0,this._isPagingModelTableDataSource()||(this._startIndex=0),function(e,r){return function(i,s){if(s){const s={};return s[o._KEY]=e,s[o._DIRECTION]=r,n[o._OFFSET]=0,n.tableDataSource.sort(s).then(function(){return n._ignoreSortEvent=!1,n._getTableDataSourceFetch(i,t)(i)})}return n._getTableDataSourceFetch(i,t)(i)}}(r,i)}return this._getTableDataSourceFetch(e,t)}_extractMetaData(e,t,n){let r=e;if(this._isPagingModelTableDataSource()&&(r=r.getWrappedDataSource()),r._getMetadata){const e=r._getMetadata(t);e&&Object.keys(e).forEach(function(t){n[t]=e[t]})}}_getTableDataSourceFetch(e,t){const n=this;return function(e,r){const i={};if(t=t>0?t:0,null!=n._startIndex&&(i[o._STARTINDEX]=n._startIndex+t),i[o._PAGESIZE]=null!=e&&e[o._SIZE]>0?e[o._SIZE]:null,!n._isPagingModelTableDataSource()&&e?.[o._SILENT]&&(i[o._SILENT]=e[o._SILENT]),null!=n.tableDataSource[o._SORTCRITERIA]&&null==e[o._SORTCRITERIA]){const t=new n.SortCriterion(n,n.tableDataSource[o._SORTCRITERIA][o._KEY],n.tableDataSource[o._SORTCRITERIA][o._DIRECTION]);e={...e,[o._SORTCRITERIA]:[t]}}return i[o._FETCHTYPE]=e[o._FETCHTYPE],n._isFetching=!0,new Promise(function(t,r){n._fetchResolveFunc=t,n._fetchRejectFunc=r,n._fetchParams=e,n._requestEventTriggered||(n._isPagingModelTableDataSource()||i[o._SILENT]||n._ignoreDataSourceEvents.push(!0),n.tableDataSource.fetch(i).then(function(r){if(n._isPagingModelTableDataSource()||i[o._SILENT]||n._ignoreDataSourceEvents.pop(),null!==r){n._isFetching=!1,void 0===r&&((r={})[o._KEYS]=[],r[o._DATA]=[]);let s=[];null!=r[o._KEYS]&&(s=r[o._KEYS].map(function(e){return new n.ItemMetadata(n,e)})),null==n._startIndex&&(n._startIndex=0);for(let e=0;e<s.length;e++)n._extractMetaData(n.dataSource,n._startIndex+e,s[e]);let a=!1;n._startIndex=n._startIndex+r[o._DATA].length,("actual"==n.tableDataSource.totalSizeConfidence()&&n.tableDataSource.totalSize()>0&&r.startIndex+r[o._DATA].length>=n.tableDataSource.totalSize()||i[o._PAGESIZE]>0&&r[o._DATA].length<i[o._PAGESIZE]||0===r[o._DATA].length)&&(a=!0),n._fetchResolveFunc=null,n._fetchParams=null,t(a?new n.AsyncIteratorReturnResult(n,new n.FetchListResult(n,e,r[o._DATA],s)):new n.AsyncIteratorYieldResult(n,new n.FetchListResult(n,e,r[o._DATA],s)))}},function(e){n._isPagingModelTableDataSource()||i[o._SILENT]||n._ignoreDataSourceEvents.pop(),r(e)}))})}}_adjustIteratorOffset(e,t){let n=this._startIndex,r=0;e&&e.forEach(function(e){e<n&&++r}),n-=r,t&&t.forEach(function(e){e<n&&++n}),this._startIndex=n}_handleSync(e){const n=this;if(!(n._ignoreDataSourceEvents.length>0)){if(n._startIndex=null,e[o._STARTINDEX]>0&&(n._startIndex=e[o._STARTINDEX],n[o._OFFSET]=n._startIndex),n._fetchResolveFunc&&null!=e[o._KEYS]){n._isFetching=!1;const t=e[o._KEYS].map(function(e){return new n.ItemMetadata(n,e)});for(let e=0;e<t.length;e++){let r=null!=n._startIndex?n._startIndex+e:e;n._extractMetaData(n.dataSource,r,t[e])}let r=!1;"actual"==n.tableDataSource.totalSizeConfidence()&&n.tableDataSource.totalSize()>0&&n._startIndex+e[o._DATA].length>=n.tableDataSource.totalSize()&&(r=!0),r?n._fetchResolveFunc(new n.AsyncIteratorReturnResult(n,new n.FetchListResult(n,n._fetchParams,e[o._DATA],t))):n._fetchResolveFunc(new n.AsyncIteratorYieldResult(n,new n.FetchListResult(n,n._fetchParams,e[o._DATA],t))),n._fetchResolveFunc=null,n._fetchParams=null}else n._requestEventTriggered||n.dispatchEvent(new t.DataProviderRefreshEvent);n._requestEventTriggered=!1}}_handleAdd(e){const n=this,r=e[o._KEYS].map(function(e){return new n.ItemMetadata(n,e)}),i=new Set;e[o._KEYS].map(function(e){i.add(e)});const s=new n.DataProviderAddOperationEventDetail(n,i,null,null,null,r,e[o._DATA],e[o._INDEXES]),a=new n.DataProviderMutationEventDetail(n,s,null,null);n.dispatchEvent(new t.DataProviderMutationEvent(a)),this._adjustIteratorOffset(null,a.add?.indexes)}_handleRemove(e){const n=this,r=e[o._KEYS].map(function(e){return new n.ItemMetadata(n,e)}),i=new Set;e[o._KEYS].map(function(e){i.add(e)});const s=new n.DataProviderOperationEventDetail(n,i,r,e[o._DATA],e[o._INDEXES]),a=new n.DataProviderMutationEventDetail(n,null,s,null);n.dispatchEvent(new t.DataProviderMutationEvent(a)),this._adjustIteratorOffset(a.remove?.indexes,null)}_handleReset(e){const n=this;n._requestEventTriggered||n._isPagingModelTableDataSource()||(n._startIndex=0,n.dispatchEvent(new t.DataProviderRefreshEvent))}_handleSort(e){const n=this;n._ignoreSortEvent||(n._startIndex=null,n.dispatchEvent(new t.DataProviderRefreshEvent))}_handleChange(e){const n=this,r=e[o._KEYS].map(function(e){return new n.ItemMetadata(n,e)}),i=new Set;e[o._KEYS].map(function(e){i.add(e)});const s=new n.DataProviderOperationEventDetail(n,i,r,e[o._DATA],e[o._INDEXES]),a=new n.DataProviderMutationEventDetail(n,null,null,s);n.dispatchEvent(new t.DataProviderMutationEvent(a))}_handleRefresh(e){const n=this;n._isFetching||n._requestEventTriggered||(null!=e[o._OFFSET]?(n._startIndex=e[o._OFFSET],"loadMore"===n.tableDataSource._fetchType&&(n.offset=e[o._OFFSET])):n._startIndex=null,n.dispatchEvent(new t.DataProviderRefreshEvent)),n._requestEventTriggered=!1}_handleRequest(e){const r=this;r._ignoreDataSourceEvents.length>0||void 0!==n.Model&&e instanceof n.Model||r._isFetching||(e[o._STARTINDEX]>0&&0===r.getStartItemIndex()&&(r._startIndex=e[o._STARTINDEX]),r._requestEventTriggered=!0,r.dispatchEvent(new t.DataProviderRefreshEvent))}_handleError(e){const t=this;t._fetchRejectFunc&&t._fetchRejectFunc(e),t._isFetching=!1,t._requestEventTriggered=!1}_handlePage(t){const n=this;n._isFetching=!1,n._requestEventTriggered=!1;const r={};r.detail=t,n.dispatchEvent(new i.GenericEvent(e.PagingModel.EventType.PAGE,r))}_addTableDataSourceEventListeners(){this.removeAllListeners(),this.addListener("sync",this._handleSync),this.addListener("add",this._handleAdd),this.addListener("remove",this._handleRemove),this.addListener("reset",this._handleReset),this.addListener("sort",this._handleSort),this.addListener("change",this._handleChange),this.addListener("refresh",this._handleRefresh),this.addListener("request",this._handleRequest),this.addListener("error",this._handleError),this.addListener("page",this._handlePage)}_removeTableDataSourceEventListeners(){this.removeListener("sync"),this.removeListener("add"),this.removeListener("remove"),this.removeListener("reset"),this.removeListener("sort"),this.removeListener("change"),this.removeListener("refresh"),this.removeListener("request"),this.removeListener("error"),this.removeListener("page")}_isPagingModelTableDataSource(){return null!=this.tableDataSource.getStartItemIndex}}return o._STARTINDEX="startIndex",o._SILENT="silent",o._SORTCRITERIA="sortCriteria",o._PAGESIZE="pageSize",o._OFFSET="offset",o._SIZE="size",o._CONTAINSPARAMETERS="containsParameters",o._RESULTS="results",o._FETCHTYPE="fetchType",o._INDEX="index",i.EventTargetMixin.applyMixin(o),e._registerLegacyNamespaceProp("TableDataSourceAdapter",o),o}),define("ojs/ojlistdataproviderview",["ojs/ojcore-base","ojs/ojdataprovider","ojs/ojeventtarget"],function(e,t,n){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;
/**
     * @preserve Copyright 2013 jQuery Foundation and other contributors
     * Released under the MIT license.
     * http://jquery.org/license
     */
class r{constructor(e,n){var i;this.dataProvider=e,this.options=n,this._noFilterSupport=!1,this.AsyncIterable=(i=class{constructor(e,t){this._parent=e,this._asyncIterator=t,this[Symbol.asyncIterator]=()=>this._asyncIterator}},Symbol.asyncIterator,i),this.AsyncIterator=class{constructor(e,t,n){this._parent=e,this._nextFunc=t,this._params=n}next(){const e=this._params?.signal;return t.wrapWithAbortHandling(e,e=>e(this._nextFunc(this._params)),!1)}},this.AsyncIteratorYieldResult=class{constructor(e,t){this._parent=e,this.value=t,this[r._VALUE]=t,this[r._DONE]=!1}},this.AsyncIteratorReturnResult=class{constructor(e,t){this._parent=e,this.value=t,this[r._VALUE]=t,this[r._DONE]=!0}},this.FetchListResult=class{constructor(e,t,n,i,o){this._parent=e,this.fetchParameters=t,this.data=n,this.metadata=i,this.totalFilteredRowCount=o,this[r._FETCHPARAMETERS]=t,this[r._DATA]=n,this[r._METADATA]=i,t&&"enabled"===t.includeFilteredRowCount&&(this[r._TOTALFILTEREDROWCOUNT]=o)}},this.Item=class{constructor(e,t,n){this._parent=e,this.metadata=t,this.data=n,this[r._METADATA]=t,this[r._DATA]=n}},this.ItemMetadata=class{constructor(e,t){this._parent=e,this.key=t,this[r._KEY]=t}},this.FetchListParameters=class{constructor(e,t,n,i,o,s,a){this._parent=e,this.params=t,this.size=n,this.sortCriteria=i,this.filterCriterion=o,this.attributes=s,this.signal=a,t&&Object.keys(t).forEach(e=>{this[e]=t[e]}),this[r._SIZE]=n,i&&(this[r._SORTCRITERIA]=i),o&&(this[r._FILTERCRITERION]=o),s&&(this[r._FETCHATTRIBUTES]=s),a&&(this[r._SIGNAL]=a)}},this.FetchByKeysParameters=class{constructor(e,t,n,i){this._parent=e,this.keys=t,this.params=n,this.attributes=i,n&&Object.keys(n).forEach(e=>{this[e]=n[e]}),t&&(this[r._KEYS]=t),i&&(this[r._FETCHATTRIBUTES]=i)}},this.FetchByOffsetParameters=class{constructor(e,t,n,i,o,s,a,l){this._parent=e,this.offset=t,this.params=n,this.size=i,this.sortCriteria=o,this.filterCriterion=s,this.attributes=a,this.signal=l,n&&Object.keys(n).forEach(e=>{this[e]=n[e]}),i&&(this[r._SIZE]=i),o&&(this[r._SORTCRITERIA]=o),t&&(this[r._OFFSET]=t),s&&(this[r._FILTERCRITERION]=s),a&&(this[r._FETCHATTRIBUTES]=a),l&&(this[r._SIGNAL]=l)}},this.FetchByKeysResults=class{constructor(e,t,n){this._parent=e,this.fetchParameters=t,this.results=n,this[r._FETCHPARAMETERS]=t,this[r._RESULTS]=n}},this.ContainsKeysResults=class{constructor(e,t,n){this._parent=e,this.containsParameters=t,this.results=n,this[r._CONTAINSPARAMETERS]=t,this[r._RESULTS]=n}},this.FetchByOffsetResults=class{constructor(e,t,n,i,o){this._parent=e,this.fetchParameters=t,this.results=n,this.done=i,this.totalFilteredRowCount=o,this[r._FETCHPARAMETERS]=t,this[r._RESULTS]=n,this[r._DONE]=i,t&&"enabled"===t.includeFilteredRowCount&&(this[r._TOTALFILTEREDROWCOUNT]=o)}},this[r._INTERNAL_FROM]=null==this.options?null:this.options[r._FROM],this[r._INTERNAL_OFFSET]=null==this.options?0:this.options[r._OFFSET]>0?this.options[r._OFFSET]:0,this[r._INTERNAL_SORTCRITERIA]=null==this.options?null:this.options[r._SORTCRITERIA],this[r._INTERNAL_DATAMAPPING]=null==this.options?null:this.options[r._DATAMAPPING],this[r._INTERNAL_FETCHATTRIBUTES]=null==this.options?null:this.options[r._FETCHATTRIBUTES],this[r._INTERNAL_FILTERCRITERION]=null==this.options?null:this.options[r._FILTERCRITERION],this._addEventListeners(e),e.getCapability&&!e.getCapability("filter")&&(this._noFilterSupport=!0),Object.defineProperty(this,"from",{set(e){this[r._INTERNAL_FROM]=e,this.dispatchEvent(new t.DataProviderRefreshEvent)},get(){return this[r._INTERNAL_FROM]},enumerable:!0}),Object.defineProperty(this,"offset",{set(e){this[r._INTERNAL_OFFSET]=e,this.dispatchEvent(new t.DataProviderRefreshEvent)},get(){return this[r._INTERNAL_OFFSET]},enumerable:!0}),Object.defineProperty(this,"sortCriteria",{set(e){this[r._INTERNAL_SORTCRITERIA]=e,this.dispatchEvent(new t.DataProviderRefreshEvent)},get(){return this[r._INTERNAL_SORTCRITERIA]},enumerable:!0}),Object.defineProperty(this,"dataMapping",{set(e){this[r._INTERNAL_DATAMAPPING]=e,this.dispatchEvent(new t.DataProviderRefreshEvent)},get(){return this[r._INTERNAL_DATAMAPPING]},enumerable:!0}),Object.defineProperty(this,"attributes",{set(e){this[r._INTERNAL_FETCHATTRIBUTES]=e,this.dispatchEvent(new t.DataProviderRefreshEvent)},get(){return this[r._INTERNAL_FETCHATTRIBUTES]},enumerable:!0}),Object.defineProperty(this,"filterCriterion",{set(e){this[r._INTERNAL_FILTERCRITERION]=e,this.dispatchEvent(new t.DataProviderRefreshEvent)},get(){return this[r._INTERNAL_FILTERCRITERION]},enumerable:!0})}containsKeys(e){return this.dataProvider[r._CONTAINSKEYS]?this.dataProvider[r._CONTAINSKEYS](e):this.fetchByKeys(e).then(t=>{const n=new Set;return e[r._KEYS].forEach(e=>{null!=t[r._RESULTS].get(e)&&n.add(e)}),Promise.resolve(new this.ContainsKeysResults(this,e,n))})}fetchByKeys(e){const n=null!=e?e[r._KEYS]:null;let i=null!=e?e[r._FETCHATTRIBUTES]:null;null==i&&(i=this[r._INTERNAL_FETCHATTRIBUTES]);const o=e?.signal;return t.wrapWithAbortHandling(o,t=>{const o=new this.FetchByKeysParameters(this,n,e,i);if(this.dataProvider[r._FETCHBYKEYS])return t(this.dataProvider[r._FETCHBYKEYS](o).then(e=>{const t=e[r._RESULTS],n=new Map;return t.forEach((e,t)=>{const r=this._getMappedItems([e]);n.set(t,r[0])}),new this.FetchByKeysResults(this,o,n)}));{const n=new this.FetchListParameters(this,null,r._DEFAULT_SIZE,null,null,i),s=new Map,a=this.dataProvider[r._FETCHFIRST](n)[Symbol.asyncIterator]();return t(this._fetchNextSet(e,a,s).then(e=>{const t=new Map;return e.forEach((e,n)=>{const r=this._getMappedItems([e]);t.set(n,r[0])}),new this.FetchByKeysResults(this,o,t)}))}},!1)}fetchByOffset(e){const n=null!=e?e[r._OFFSET]:null,i=null!=e?e[r._SIZE]:null;let o=null!=e?e[r._FETCHATTRIBUTES]:null;null==o&&(o=this[r._INTERNAL_FETCHATTRIBUTES]);let s=null!=e?e[r._SORTCRITERIA]:null;null==s&&(s=this[r._INTERNAL_SORTCRITERIA]);const a=this._getMappedSortCriteria(s),l=this._combineFilters(e),c=e?.signal;return t.wrapWithAbortHandling(c,t=>{const s=this._getMappedFilterCriterion(l),c=new this.FetchByOffsetParameters(this,n,e,i,a,s,o);return t(this.dataProvider[r._FETCHBYOFFSET](c).then(e=>{const t=e[r._RESULTS],n=e[r._DONE],i=e[r._TOTALFILTEREDROWCOUNT],o=new Array;t.forEach(e=>{const t=this._getMappedItems([e]);o.push(t[0])});const s=e[r._FETCHPARAMETERS],a=s?.[r._SORTCRITERIA],l=s?.[r._FILTERCRITERION],u=this._getUnmappedSortCriteria(a),d=this._getUnmappedFilterCriterion(l);return new this.FetchByOffsetResults(this,{...c,sortCriteria:u,filterCriterion:d},o,n,i)}))},!1)}fetchFirst(e){const t={};t[r._ITEMS]=[],t[r._DONE]=!1,t[r._STARTINDEX]=0,t[r._LASTDONEHASDATA]=!1;const n=null!=e?e[r._SIZE]:null,i=e?.signal;let o=null!=e?e[r._SORTCRITERIA]:null;null==o&&(o=this[r._INTERNAL_SORTCRITERIA]);const s=this._getMappedSortCriteria(o),a=this._combineFilters(e),l=this._getMappedFilterCriterion(a);let c=null!=e?e[r._FETCHATTRIBUTES]:null;if(null==c&&(c=this[r._INTERNAL_FETCHATTRIBUTES]),null==this[r._INTERNAL_FROM]&&this[r._INTERNAL_OFFSET]>0){let o=this[r._INTERNAL_OFFSET];return new this.AsyncIterable(this,new this.AsyncIterator(this,(e=>()=>{const t=new this.FetchByOffsetParameters(this,o,null,n,s,l,c,i);return this.dataProvider[r._FETCHBYOFFSET](t).then(t=>{const i=t.results;o+=i.length;const s=this._getMappedItems(i);this._cacheResult(e,s),e[r._DONE]=t[r._DONE];const a=s.map(e=>e[r._DATA]),l=s.map(e=>e[r._METADATA]),c=t[r._FETCHPARAMETERS],u=null!=c?c[r._SORTCRITERIA]:null,d=null!=c?c[r._FILTERCRITERION]:null,h=this._getUnmappedSortCriteria(u),p=this._getUnmappedFilterCriterion(d),f=new this.FetchByOffsetParameters(this,this[r._INTERNAL_OFFSET],null,n,h,p);return e[r._DONE]?Promise.resolve(new this.AsyncIteratorReturnResult(this,new this.FetchListResult(this,f,a,l))):Promise.resolve(new this.AsyncIteratorYieldResult(this,new this.FetchListResult(this,f,a,l)))})})(t),e))}{const o=new this.FetchListParameters(this,e,n,s,l,c,i),a=this.dataProvider[r._FETCHFIRST](o)[Symbol.asyncIterator]();return new this.AsyncIterable(this,new this.AsyncIterator(this,((t,n)=>()=>t[r._LASTDONEHASDATA]?(t[r._LASTDONEHASDATA]=!1,Promise.resolve(new this.AsyncIteratorReturnResult(this,new this.FetchListResult(this,e,[],[],this._totalFilteredRowCount)))):n.next().then(i=>{let o=i[r._VALUE];o||(o={data:[],metadata:[],fetchParameters:null});const s=o[r._DATA],a=o.totalFilteredRowCount,c=o[r._METADATA],u=s.map((e,t)=>new this.Item(this,c[t],s[t]));this._noFilterSupport&&this._filterResult(l,u),this._totalFilteredRowCount=a;const d=this._getMappedItems(u);this._cacheResult(t,d),t[r._DONE]=i[r._DONE];const h=null!=e?e[r._SIZE]:null,p=(null!=e&&e[r._OFFSET],o[r._FETCHPARAMETERS]),f=null!=p?p[r._SORTCRITERIA]:null,_=null!=p?p[r._FILTERCRITERION]:null,m=this._getUnmappedSortCriteria(f),g=this._getUnmappedFilterCriterion(_),v=new this.FetchListParameters(this,e,h,m,g);return this._fetchUntilKey(v,this[r._INTERNAL_FROM],t,n).then(()=>this._fetchUntilOffset(v,this[r._INTERNAL_OFFSET]+t[r._STARTINDEX],s.length,t,n,a))}))(t,a),e))}}getCapability(e){return this.dataProvider.getCapability(e)}getTotalSize(){return this.dataProvider.getTotalSize()}isEmpty(){return this.dataProvider.isEmpty()}_fetchNextSet(t,n,i){return n.next().then(o=>{let s=o[r._VALUE];s||(s={data:[],metadata:[],fetchParameters:null});const a=s[r._DATA],l=s[r._METADATA],c=l.map(e=>e[r._KEY]);let u=!0;return t[r._KEYS].forEach(t=>{i.has(t)||c.map((n,r)=>{e.Object.compareValues(n,t)&&i.set(t,new this.Item(this,l[r],a[r]))}),i.has(t)||(u=!1)}),u||o[r._DONE]?i:this._fetchNextSet(t,n,i)})}_fetchUntilKey(t,n,i,o){if(null!=n){const t=i[r._ITEMS].filter(t=>{if(e.KeyUtils.equals(t[r._METADATA][r._KEY],n))return!0});if(t.length>0){const e=i[r._ITEMS].indexOf(t[0]);i[r._ITEMS]=i[r._ITEMS].slice(e,i[r._ITEMS].length)}else{if(!i[r._DONE])return o.next().then(e=>{let t=e[r._VALUE];t||(t={data:[],metadata:[],fetchParameters:null});const n=t[r._DATA],s=t[r._METADATA],a=n.map((e,t)=>new this.Item(this,s[t],n[t])),l=this._getMappedItems(a);return this._cacheResult(i,l),i[r._DONE]=e[r._DONE],this._fetchUntilKey(e[r._FETCHPARAMETERS],l[r._KEYS],i,o)});i[r._ITEMS]=[]}}return Promise.resolve(null)}_fetchUntilOffset(e,t,n,i,o,s){const a=null!=e&&e[r._SIZE]>0?e[r._SIZE]:n;t=t>0?t:0;const l=i[r._ITEMS].slice(t,t+a);if(this._noFilterSupport){const t=this._getMappedFilterCriterion(e[r._FILTERCRITERION]);this._filterResult(t,l)}return e&&e[r._SIZE]>0&&l.length<a&&!i[r._DONE]?o.next().then(n=>{let a=n[r._VALUE];a||(a={data:[],metadata:[],fetchParameters:null});const l=a[r._DATA],c=a[r._METADATA],u=l.map((e,t)=>new this.Item(this,c[t],l[t]));if(this._noFilterSupport){const t=this._getMappedFilterCriterion(e[r._FILTERCRITERION]);this._filterResult(t,u)}n.done&&u.length>0&&(i[r._LASTDONEHASDATA]=!0);const d=this._getMappedItems(u);return this._cacheResult(i,d),i[r._DONE]=n[r._DONE],this._fetchUntilOffset(e,t,l.length,i,o,s)}):this._createResultPromise(e,i,l,s)}_createResultPromise(e,t,n,i){t[r._STARTINDEX]=t[r._STARTINDEX]+n.length;const o=n.map(e=>e[r._DATA]),s=n.map(e=>e[r._METADATA]);let a=!1;return t[r._DONE]&&0===o.length&&(a=!0),a?Promise.resolve(new this.AsyncIteratorReturnResult(this,new this.FetchListResult(this,e,o,s,i))):Promise.resolve(new this.AsyncIteratorYieldResult(this,new this.FetchListResult(this,e,o,s,i)))}_cacheResult(e,t){t.forEach(t=>{e[r._ITEMS].push(t)})}_filterResult(e,n){if(e){e.filter||(e=t.FilterFactory.getFilter({filterDef:e}));let i=n.length-1;for(;i>=0;)e.filter(n[i][r._DATA])||n.splice(i,1),i--}}_getMappedItems(e){if(null!=this[r._INTERNAL_DATAMAPPING]){const t=this[r._INTERNAL_DATAMAPPING][r._MAPFIELDS];if(null!=t&&null!=e&&e.length>0){return e.map(e=>t.bind(this)(e))}}return e}_combineFilters(e){const n=[];let i,o=0;return null!=e&&null!=e[r._FILTERCRITERION]&&(n[o]=e[r._FILTERCRITERION],o++),null!=this[r._INTERNAL_FILTERCRITERION]&&(n[o]=this[r._INTERNAL_FILTERCRITERION]),i=0==n.length?null:1==n.length?n[0]:t.FilterFactory.getFilter({filterDef:{op:"$and",criteria:n}}),i}_getMappedFilterCriterion(e){if(null!=this[r._INTERNAL_DATAMAPPING]){const t=this[r._INTERNAL_DATAMAPPING][r._MAPFILTERCRITERION];if(null!=t&&null!=e)return t(e)}return e}_getMappedSortCriteria(e){if(null!=this[r._INTERNAL_DATAMAPPING]){const t=this[r._INTERNAL_DATAMAPPING][r._MAPSORTCRITERIA];if(null!=t&&null!=e&&e.length>0)return t(e)}return e}_getUnmappedSortCriteria(e){if(null!=this[r._INTERNAL_DATAMAPPING]){const t=this[r._INTERNAL_DATAMAPPING][r._UNMAPSORTCRITERIA];if(null!=t&&null!=e&&e.length>0)return t(e)}return e}_getUnmappedFilterCriterion(e){if(null!=this[r._INTERNAL_DATAMAPPING]){const t=this[r._INTERNAL_DATAMAPPING][r._UNMAPFILTERCRITERION];if(null!=t&&null!=e)return t(e)}return e}_addEventListeners(e){e[r._ADDEVENTLISTENER](r._REFRESH,e=>{this.dispatchEvent(e)}),e[r._ADDEVENTLISTENER](r._MUTATE,e=>{this.dispatchEvent(e)})}}return r._KEY="key",r._KEYS="keys",r._DATA="data",r._STARTINDEX="startIndex",r._SORT="sort",r._INTERNAL_SORTCRITERIA="_sortCriteria",r._SORTCRITERIA="sortCriteria",r._INTERNAL_FILTERCRITERION="_filterCriterion",r._FILTERCRITERION="filterCriterion",r._METADATA="metadata",r._ITEMS="items",r._INTERNAL_FROM="_from",r._INTERNAL_OFFSET="_offset",r._FROM="from",r._OFFSET="offset",r._REFRESH="refresh",r._MUTATE="mutate",r._SIZE="size",r._FETCHPARAMETERS="fetchParameters",r._VALUE="value",r._DONE="done",r._LASTDONEHASDATA="lastDoneHasData",r._INTERNAL_DATAMAPPING="_dataMapping",r._DATAMAPPING="dataMapping",r._MAPFIELDS="mapFields",r._MAPSORTCRITERIA="mapSortCriteria",r._MAPFILTERCRITERION="mapFilterCriterion",r._UNMAPSORTCRITERIA="unmapSortCriteria",r._UNMAPFILTERCRITERION="unmapFilterCriterion",r._RESULTS="results",r._CONTAINSPARAMETERS="containsParameters",r._DEFAULT_SIZE=25,r._CONTAINSKEYS="containsKeys",r._FETCHBYKEYS="fetchByKeys",r._FETCHBYOFFSET="fetchByOffset",r._FETCHFIRST="fetchFirst",r._ADDEVENTLISTENER="addEventListener",r._INTERNAL_FETCHATTRIBUTES="_attributes",r._FETCHATTRIBUTES="attributes",r._TOTALFILTEREDROWCOUNT="totalFilteredRowCount",r._SIGNAL="signal",n.EventTargetMixin.applyMixin(r),e._registerLegacyNamespaceProp("ListDataProviderView",r),r}),define("ojs/ojcss",["css"],function(e){"use strict";const t={load:function(t,n,r,i){var o=!1;if(i){var s=i.ojcss,a=t+".css";this.isExcluded(a,s)&&(o=!0)}o?r(t):e.load(t,n,r,i)},pluginBuilder:"css-builder"};return t.normalize=e.normalize,t.isExcluded=function(e,t){var n=!1;if(t&&t.include){var r=t.include;if(Array.isArray(r)){if(r.length>0){n=!0;for(var i=0;i<r.length;i++){var o=r[i];if(e.substr(0,o.length)===o){n=!1;break}}}}else this.makeRegExp(r).test(e)&&(n=!1)}if(!n&&t&&t.exclude){var s=t.exclude;if(Array.isArray(s))for(var a=0;a<s.length;a++){var l=s[a];if(e.substr(0,l.length)===l){n=!0;break}}else this.makeRegExp(s).test(e)&&(n=!0)}return n},t.makeRegExp=function(e){var t=null;return e&&(t="string"==typeof e?new RegExp(e):e),t},t}),define("ojs/ojpreact-patch",["exports"],function(e){"use strict";Symbol();const t=Symbol(),n=Symbol();const r=Symbol();e.OJ_POPUP=t,e.OJ_SLOT_REMOVE=n,e.patchPopupParent=function(e){e[r]||(e[r]=!0,Object.defineProperty(e,"firstChild",{get(){let n=e.childNodes[0];return n?n[t]||n:null},enumerable:!0}))},e.patchSlotParent=function(e){if(!e[r]){e[r]=!0;const t=e.removeChild;e.removeChild=r=>{const i=r[n];return i?(i(),null):t.call(e,r)}}},Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojtranslationbundleutils",["exports","ojs/ojconfig","@oracle/oraclejet-preact/utils/UNSAFE_matchTranslationBundle","@oracle/oraclejet-preact/resources/nls/supportedLocales"],function(e,t,n,r){"use strict";r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;const i=new Set(r),o=(()=>{let e;return()=>(void 0===e&&(e=n.matchTranslationBundle([t.getLocale()],i)),e)})();e.getTranslationBundlePromiseFromLoader=e=>e(o()),Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojvcomponent",["require","exports","preact/compat","preact/jsx-runtime","preact","ojs/ojcustomelement-utils","ojs/ojcustomelement-registry","preact/hooks","@oracle/oraclejet-preact/UNSAFE_Environment","ojs/ojcore-base","ojs/ojpreact-patch","ojs/ojmetadatautils","@oracle/oraclejet-preact/UNSAFE_Layer","ojs/ojconfig","ojs/ojlogger","ojs/ojcontext","ojs/ojtranslationbundleutils"],function(e,t,n,r,i,o,s,a,l,c,u,d,h,p,f,_,m){"use strict";c=c&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c,_=_&&Object.prototype.hasOwnProperty.call(_,"default")?_.default:_;let g,v=0;const y=new Map,E=new Map,b=Symbol(),S="@oj_s";function T(e,t,n,r){const s=function(e){let t=e[b];void 0===t&&(t=S+v++,e[b]=t);return t}(t);let l=0;function c(){l++}function d(){if(l--,l<0)throw new o.JetElementError(e,"Slot reference count underflow");if(0===l)r(t);else{const e=t.parentElement;e&&u.patchSlotParent(e)}}t[u.OJ_SLOT_REMOVE]=()=>null;const h=function(e){e?(c(),u.patchSlotParent(t.parentElement),n(t)):d()};return i.h(()=>(function(e,t,n){let r=y.get(e);const i=0===y.size;r||(r=new Set,y.set(e,r));r.add(t),E.set(t,n),i&&(g=document.createElementNS,document.createElementNS=C)}(e,s,t),c(),a.useLayoutEffect(()=>{!function(e,t){const n=y.get(e);n.delete(t),0===n.size&&y.delete(e);0===y.size&&(E.clear(),document.createElementNS=g)}(e,s),d()}),i.h(s,{ref:h,key:s})),null)}function C(e,t,n){return t.startsWith(S)?E.get(t):g.call(document,e,t,n)}class P{parkNode(e){this._getLot().appendChild(e)}disposeNodes(e,t){P._iterateSlots(e,e=>{const n=e.parentElement;this._lot===n?(t(e),this._lot.__removeChild(e)):n||t(e)})}disconnectNodes(e){P._iterateSlots(e,e=>{this._lot===e.parentElement&&this._lot.__removeChild(e)})}reconnectNodes(e){P._iterateSlots(e,e=>{e.parentElement||this._lot.appendChild(e)})}isParked(e){return e?.parentElement===this._lot}_getLot(){if(!this._lot){const e=document.createElement("div");e.__removeChild=e.removeChild,e.removeChild=e=>e,e.style.display="none",document.body.appendChild(e),this._lot=e}return this._lot}static _iterateSlots(e,t){Object.keys(e).forEach(n=>{e[n].forEach(e=>{t(e)})})}}const O=new P,A=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function I(e,t,n){"-"===t[0]?e.setProperty(t,n):null==n?e[t]="":"number"!=typeof n||A.test(t)?e[t]=n:e[t]=n+"px"}function R(e,t,n,r,i){let o;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||I(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||I(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])if(o=t!==(t=t.replace(/Capture$/i,"")),t=t.toLowerCase()in e||"onFocusOut"===t||"onFocusIn"===t?t.toLowerCase().slice(2):t.slice(2),e._listeners||(e._listeners={}),e._listeners[t+o]=n,n){if(!r){const n=o?N:w;e.addEventListener(t,n,o)}}else{const n=o?N:w;e.removeEventListener(t,n,o)}else if("dangerouslySetInnerHTML"!==t){if(i)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null!=n&&(!1!==n||"a"===t[0]&&"r"===t[1])?e.setAttribute(t,n):e.removeAttribute(t))}}function w(e){this._listeners[e.type+!1](i.options.event?i.options.event(e):e)}function N(e){this._listeners[e.type+!0](i.options.event?i.options.event(e):e)}const j="__root_layer_host",x=(e,t,n)=>{let r=null;if("nearestAncestor"===t&&(r=e.closest("[data-oj-layer]")),r)return r;let i=document.getElementById(j);return i||(i=document.createElement("div"),i.setAttribute("id",j),i.setAttribute("data-oj-binding-provider","preact"),i.style.position="relative",i.style.zIndex="999",document.body.prepend(i)),i},D=Symbol(),L=Symbol();class M extends i.Component{constructor(e){super(e),this.getEnvironmentContextObj=(e,t,n,r,i)=>{let o=e;return o?t&&t!==o?(o=t,this.extendTranslationBundleMap(o,i)):(n&&n!==o.colorScheme||r&&r!==o.scale)&&(o=Object.assign({},o,n&&{colorScheme:n},r&&{scale:r})):(o=t||{colorScheme:n,scale:r,user:{locale:p.getLocale()}},this.extendTranslationBundleMap(o,i)),o},this.extendTranslationBundleMap=(e,t)=>{e.translations?e.translations!==t&&Object.keys(t).forEach(n=>{e.translations[n]||(e.translations[n]=t[n])}):e.translations=t},this.state={compProps:e.initialCompProps},this._layerContext=(e=>{const t=c.VLayerUtils?c.VLayerUtils.getLayerHost:x,n=c.VLayerUtils?c.VLayerUtils.onLayerUnmount:null;return{getRootLayerHost:t.bind(null,e,"topLevel"),getLayerHost:t.bind(null,e,"nearestAncestor"),onLayerUnmount:n?.bind(null,e)}})(e.baseElem)}render(e){const t=this.state.compProps,n=e.baseComp,i=r.jsx(n,{...t}),o=k(this.getEnvironmentContextObj,[e.baseElem.__oj_private_contexts?.get(l.EnvironmentContext),e.baseElem.__oj_private_color_scheme,e.baseElem.__oj_private_scale,e.translationBundleMap]),s=e.baseElem.__oj_private_contexts,a=s?Array.from(s).reduce((e,[t,n])=>{if(t===l.EnvironmentContext)return e;return r.jsx(t.Provider,{value:n,children:e})},i):i,c=i.props;return c[D]=e.baseElem,c[L]=e.rootPatchCallback,r.jsx(h.LayerContext.Provider,{value:this._layerContext,children:r.jsx(l.RootEnvironmentProvider,{environment:o,children:a})})}}const k=(e,t)=>(e.memoState||(e.memoState={value:void 0,prevArgs:void 0}),F(e.memoState.prevArgs,t)&&(e.memoState.value=e(e.memoState.value,...t),e.memoState.prevArgs=t),e.memoState.value),F=(e,t)=>!e||e.length!==t.length||t.some((t,n)=>t!==e[n]),B=(e,t)=>{e&&("function"==typeof e?e(t):e.current=t)},U=new Set,V=Symbol(),H=Symbol(),G="subproperty",K="propChange";class z{constructor(e,t,n,r,s,a){this.ref=i.createRef(),this._compWithContextsRef=i.createRef(),this._initialized=!1,this._isPatching=!1,this._props={ref:this.ref},this._verifyingState=W.Unset,this._earlySets=[],this._eventQueue=[],this._isRenderQueued=!1,this._state=o.CustomElementUtils.getElementState(e),this._element=e,this._metadata=n,this._component=t,this._controlledProps=s?.length>0?new Set(s):U,this._controlledAttrs=r?.length>0?new Set(r):U,this._defaultProps=a,this._rootPatchCallback=this._patchRootElement.bind(this)}connectedCallback(){this._verifyConnectDisconnect(W.Connect)}disconnectedCallback(){this._verifyConnectDisconnect(W.Disconnect)}attributeChangedCallback(e,t,n){if(!this._isPatching&&this._state.canHandleAttributes()){const r=o.AttributeUtils.attributeToPropertyName(e),i=r.split(".")[0];if(this._state.dirtyProps.has(i))this._state.dirtyProps.delete(i);else if(t===n)return;null===n&&(n=void 0),"knockout"===this._state.getBindingProviderType()&&(o.AttributeUtils.isGlobalOrData(r)||this._element.dispatchEvent(new CustomEvent("attribute-changed",{detail:{attribute:e,value:n,previousValue:t}})));const{propPath:s,propValue:a,propMeta:l,subPropMeta:c}=this._getPropValueInfo(e,n);s&&this._updatePropsAndQueueRenderAsNeeded(s,a,l,c)}}getProperty(e){if(d.getPropertyMetadata(e,this._metadata?.properties)){let t=o.CustomElementUtils.getPropertyValue(this._props,e);return void 0===t&&this._defaultProps&&(t=o.CustomElementUtils.getPropertyValue(this._defaultProps,e)),t}return this._element[e]}setProperty(e,t){if(this._isPatching)return;const{prop:n,subProp:r}=d.getComplexPropertyMetadata(e,this._metadata?.properties);n?this._state.allowPropertySets()?(t=o.transformPreactValue(this._element,e,r,t),this._updatePropsAndQueueRenderAsNeeded(e,t,n,r)):this._earlySets.push({property:e,value:t}):this._element[e]=t}setProperties(e){this._isPatching||Object.keys(e).forEach(t=>{this.setProperty(t,e[t])})}getProps(){return this._props}isInitialized(){return!!this._vdom}appendChildHelper(e,t){return o.CustomElementUtils.canRelocateNode(e,t)?HTMLElement.prototype.appendChild.call(e,t):t}insertBeforeHelper(e,t,n){return o.CustomElementUtils.canRelocateNode(e,t)?(n&&n.parentNode!==e&&f.info(`Using insertBefore where ${e.tagName} is not a parent of ${n.tagName}`),n&&n.parentNode?HTMLElement.prototype.insertBefore.call(n.parentNode,t,n):HTMLElement.prototype.insertBefore.call(e,t,n)):t}_render(){if(!this._initialized){this._initialized=!0,this._initializePropsFromDom();const e=this._metadata.events;e&&this._initializeActionCallbacks(e);const t=this._metadata.extension?._WRITEBACK_PROPS;t&&this._initializeWritebackCallbacks(t),this._playbackEarlyPropertySets()}if(this._vdom)throw new Error(`Unexpected render call for already rendered component ${this._element.tagName}`);this._vdom=r.jsx(M,{ref:this._compWithContextsRef,baseComp:this._component,baseElem:this._element,initialCompProps:this._props,rootPatchCallback:this._rootPatchCallback,translationBundleMap:this._state.getTranslationBundleMap()}),i.render(this._vdom,this._element)}_getPropValueInfo(e,t){if("knockout"!==this._state.getBindingProviderType()||!o.AttributeUtils.getExpressionInfo(t).expr){const n=o.AttributeUtils.attributeToPropertyName(e),{prop:r,subProp:i}=d.getComplexPropertyMetadata(n,this._metadata?.properties);if(r)return r.readOnly?{}:{propPath:n,propValue:o.AttributeUtils.attributeToPropertyValue(this._element,e,t,i),propMeta:r,subPropMeta:i};const s=o.AttributeUtils.getGlobalPropForAttr(e);if(this._controlledProps.has(s))return{propPath:s,propValue:this._element[o.AttributeUtils.getGlobalValuePropForAttr(e)]??t}}return{}}_updatePropsAndQueueRenderAsNeeded(e,t,n,r,i=!0){const s=this.getProperty(e),a=void 0===t?o.CustomElementUtils.getPropertyValue(this._defaultProps,e):t;if(n&&o.ElementUtils.comparePropertyValues(n.writeback,a,s))return;const l=e.split("."),u=l[0],d=l.length>1;let h=this.getProperty(u);if(c.CollectionUtils.isPlainObject(h)&&(h=c.CollectionUtils.copyInto({},h,void 0,!0)),i&&this._verifyProps(e,t,n,r),this._updateProps(l,t),!i||this._state.allowPropertyChangedEvents()&&!o.AttributeUtils.isGlobalOrData(e)){this._state.dirtyProps.add(u);const n=i?"external":"internal",r={value:this.getProperty(u),previousValue:h,updatedFrom:n};d&&(r[G]={path:e,value:t,previousValue:s});const o=u+"Changed",a=d?null:e=>{if(e.kind!==K||e.type!==o||e.detail[G])return null;const t=Object.assign({},r,{previousValue:e.detail.previousValue});return{type:o,detail:t,collapse:a,kind:K}};this._queueFireEventsTask({type:o,detail:r,collapse:a,kind:K})}const p=this._oldRootProps;p&&this._controlledProps.has(e)&&(p[e]=t),this._vdom&&!n?.readOnly&&(this._compWithContextsRef?.current?this._queueRender():window.queueMicrotask(()=>{this._queueRender()}))}_queueRender(){if(!this._compWithContextsRef?.current)throw new Error(`Render requested for a disconnected component ${this._element.tagName}`);this._compWithContextsRef.current.setState({compProps:this._props})}_verifyProps(e,t,n,r){if(n){if(n.readOnly)throw new o.JetElementError(this._element,`Read-only property '${e}' cannot be set.`);try{d.checkEnumValues(this._element,e,t,r)}catch(e){throw new o.JetElementError(this._element,e.message)}}}_updateProps(e,t){const n=e[0];let r=this._props;if(e.length>1){const e=this._props[n]??this._defaultProps?.[n];e&&c.CollectionUtils.isPlainObject(e)?r[n]=c.CollectionUtils.copyInto({},e,void 0,!0):r[n]={}}for(;e.length;){const n=e.shift();0===e.length?r[n]=t:r[n]||(r[n]={}),r=r[n]}}_queueFireEventsTask(e){let t=e;const n=this._getEventCollapseInfo(e,this._eventQueue);if(n){const[e,r]=n;this._eventQueue.splice(e,1),t=r}return this._eventQueue.push(t),this._queuedEvents||(this._queuedEvents=new Promise(e=>{window.queueMicrotask(()=>{try{for(;this._eventQueue.length;){const e=this._eventQueue.shift(),t=e.kind===K?new CustomEvent(e.type,{detail:e.detail}):e.event;this._element.dispatchEvent(t)}}finally{e(),this._queuedEvents=null}})})),this._queuedEvents}_getEventCollapseInfo(e,t){if(e.kind!==K)return null;for(let n=0;n<t.length;n++){const r=e.collapse?.(t[n]);if(r)return[n,r]}return null}_verifyConnectDisconnect(e){this._verifyingState===W.Unset&&window.queueMicrotask(()=>{this._verifyingState===e&&(this._verifyingState===W.Connect?this._verifiedConnect():this._verifiedDisconnect()),this._verifyingState=W.Unset}),this._verifyingState=e}_verifiedConnect(){if(this._state.isComplete())this._reconnectSlots();else if(this._state.startCreationCycle(),this._state.isCreating()){const e=()=>{this._element[o.CHILD_BINDING_PROVIDER]="preact";let e=this._state.getSlotMap();if(e)this._reconnectSlots();else{e=this._state.getSlotMap(!0);const t=this._removeAndConvertSlotsToProps(e);Object.assign(this._props,t)}this._render()};this._state.setCreateCallback(e),this._state.setBindingsDisposedCallback(()=>this._handleBindingsDisposed())}this._state.executeLifecycleCallbacks(!0)}_verifiedDisconnect(){this._state.executeLifecycleCallbacks(!1),this._state.isComplete()?(this._disconnectSlots(),this._state.resetCreationCycle(),i.render(null,this._element),B(this.ref,null),B(this._compWithContextsRef,null),B(this._oldRootRef,null),this._oldRootRef=void 0,this._vdom=null):this._state.pauseCreationCycle()}_initializePropsFromDom(){const e=this._element.attributes;for(let t=0;t<e.length;t++){const{name:n,value:r}=e[t],{propPath:i,propValue:o,propMeta:s,subPropMeta:a}=this._getPropValueInfo(n,r);i&&(this._verifyProps(i,o,s,a),this._updateProps(i.split("."),o))}}_playbackEarlyPropertySets(){for(;this._earlySets.length;){const e=this._earlySets.shift(),t=d.getPropertyMetadata(e.property,this._metadata?.properties),n=o.transformPreactValue(this._element,e.property,t,e.value);this.setProperty(e.property,n)}}_patchRootElement(e){const t=this._oldRootProps||this._getInitialRootProps(),n=e.props;this._isPatching=!0;try{!function(e,t,n,r,i,o){let s;for(s in n)"children"===s||"key"===s||s in t||o(e,s,null,n[s],r)||R(e,s,null,n[s],r);for(s in t)i&&"function"!=typeof t[s]||"children"===s||"key"===s||"value"===s||"checked"===s||n[s]===t[s]||o(e,s,t[s],n[s],r)||R(e,s,t[s],n[s],r)}(this._element,n,t,!1,!1,z._setPropertyOverrides)}finally{this._isPatching=!1}const r=e.ref;this._oldRootRef!==r&&(B(r,this._element),r&&this._oldRootRef?.(null)),this._oldRootProps=n,this._oldRootRef=r}static _setPropertyOverrides(e,t,n,r){if("style"===t&&"string"==typeof n)throw new Error("CSS style must be an object. CSS text is not supported");if("class"===t||"className"===t){const t=null==r?U:o.CustomElementUtils.getClassSet(r),i=null==n?U:o.CustomElementUtils.getClassSet(n);for(const n of t.values())i.has(n)||e.classList.remove(n);for(const n of i.values())t.has(n)||e.classList.add(n);return!0}if("o"===t[0]&&"n"===t[1]){const i=t!==(t=t.replace(/Capture$/i,""));t=t.toLowerCase()in e||"onFocusOut"===t||"onFocusIn"===t?t.toLowerCase().slice(2):t.slice(2),z._getRootListeners(e,i)[t]=n;const o=i?z._eventProxyCapture:z._eventProxy;return n?r||e.addEventListener(t,o,i):e.removeEventListener(t,o,i),!0}return"role"===t&&(n?e.setAttribute(t,n):e.removeAttribute(t),!0)}static _getRootListeners(e,t){const n=t?H:V;let r=e[n];return r||(r=e[n]={}),r}_getInitialRootProps(){const e={};for(const t of this._controlledProps.values())t in this._props&&(e[t]=this._props[t]);return e}_removeAndConvertSlotsToProps(e){const t=this._metadata.extension?._DYNAMIC_SLOT,n=t?.prop,r=this._metadata?.slots,i=Object.keys(e),o={};if(i.length>0&&i.forEach(i=>{const s=e[i];s.forEach(e=>{O.parkNode(e),this._propagateSubtreeHidden(e)});const a=d.getPropertyMetadata(i,r);if(a){const e=!!a?.data,t=e||""!==i?i:"children";this._assignSlotProperty(o,t,void 0,i,e,s)}else{if(!n)return;o[n]||(o[n]={});const e=t.isTemplate;this._assignSlotProperty(o,i,n,i,e,s)}}),"knockout"===this._state.getBindingProviderType()){let e;for(;e=this._element.firstChild;)this._state.getBindingProviderCleanNode()(e),e.remove()}return o}_assignSlotProperty(e,t,n,r,i,s){const a=n?e[n]:e;if(i){if("TEMPLATE"!==s[0]?.nodeName)throw new o.JetElementError(this._element,`Slot content for template slot ${r} must be a template element.`);{const e=s[0];let r=e.render;r?(a[t]=r,Object.defineProperties(e,{render:{enumerable:!0,get:()=>r,set:e=>{r=e,e&&(this._updateProps([t],e),this._queueRender())}}})):a[t]=this._getSlotRenderer(e,t,n)}}else{const e=s.map((e,t)=>T(this._element,e,this._handleSlotMount.bind(this),this._handleSlotUnmount.bind(this)));a[t]=e}}_getSlotRenderer(e,t,n){const r=this._state.getBindingProvider(),i=r?()=>{(n?this._props[n]:this._props)[t]=this._getSlotRenderer(e,t,n),this._queueRender()}:null;return t=>{const n=this._state.getTemplateEngine();if(!n)throw new o.JetElementError(this._element,"Unexpected call to render a template slot");return n.execute(this._element,e,t,r,i)}}_handleBindingsDisposed(){O.disposeNodes(this._state.getSlotMap(),this._state.getBindingProviderCleanNode()),this._state.disposeTemplateCache()}_disconnectSlots(){O.disconnectNodes(this._state.getSlotMap())}_reconnectSlots(){O.reconnectNodes(this._state.getSlotMap())}_propagateSubtreeHidden(e){e.nodeType===Node.ELEMENT_NODE&&o.CustomElementUtils.subtreeHidden(e)}_handleSlotUnmount(e){this._state.isPostCreateCallbackOrComplete()&&(O.parkNode(e),window.queueMicrotask(()=>{O.isParked(e)&&this._propagateSubtreeHidden(e)}))}_handleSlotMount(e){const t=o.CustomElementUtils.subtreeShown;t&&e.nodeType===Node.ELEMENT_NODE&&(e.isConnected?t(e):window.queueMicrotask(()=>t(e)))}static _eventProxy(e){this[V][e.type](i.options.event?i.options.event(e):e)}static _eventProxyCapture(e){this[H][e.type](i.options.event?i.options.event(e):e)}_initializeActionCallbacks(e){Object.keys(e).forEach(t=>{const n=e[t],r=o.AttributeUtils.eventTypeToEventListenerProperty(t);this._props[r]=e=>{const r=Object.assign({},e),i=!!n.cancelable,o=[];i&&(r.accept=e=>{o.push(e)});const s={detail:r,bubbles:!!n.bubbles,cancelable:i},a=new CustomEvent(t,s),l=this._queueFireEventsTask({event:a,kind:"action"});if(i)return l.then(()=>a.defaultPrevented?Promise.reject():Promise.all(o).then(()=>Promise.resolve(),e=>Promise.reject(e)))}})}_initializeWritebackCallbacks(e){e.forEach(e=>{const t=o.AttributeUtils.propertyNameToChangedCallback(e),{prop:n,subProp:r}=d.getComplexPropertyMetadata(e,this._metadata?.properties);this._props[t]=t=>{this._updatePropsAndQueueRenderAsNeeded(e,t,n,r,!1)}})}}var W;!function(e){e[e.Connect=0]="Connect",e[e.Disconnect=1]="Disconnect",e[e.Unset=2]="Unset"}(W||(W={}));const Y=n.forwardRef((e,t)=>{const n=e.children,o=s.getElementRegistration(n.type).cache.contexts,c=[l.EnvironmentContext,...o??[]],u=c.map(e=>{const t=a.useContext(e),r=n.props.__oj_private_contexts?.get(e);return void 0===r?t:r}),d=a.useMemo(()=>{const e=new Map;for(let t=0;t<c.length;t++)e.set(c[t],u[t]);return e},u);if(n.props.__oj_private_contexts=d,t)if(n.ref){const e=n.ref;n.ref=n=>{B(e,n),B(t,n)}}else n.ref=t;return r.jsx(i.Fragment,{children:n})});Y.__ojIsEnvironmentWrapper=!0;const $=(e,t)=>{if(Object.prototype.hasOwnProperty.call(e,t)){e[o.publicToPrivateName.get(t)]=o.toSymbolizedValue(e[t]),delete e[t]}},q=i.options.vnode;let X=!1;i.options.vnode=e=>{const t=e.type;if("string"==typeof t&&s.isElementRegistered(t)){const t=e.props;$(t,"value"),$(t,"checked")}if("string"==typeof t&&!X&&s.isVComponent(t)){X=!0;try{const t=i.cloneElement(e),n=r.jsx(Y,{children:t});Object.assign(e,n)}finally{X=!1}}q?.(e)};const J=100,Q=i.options.requestAnimationFrame;i.options.requestAnimationFrame=function(e){const t=new Promise(n=>{const r=()=>{n(),_.__removePreactPromise(t),e()};if(Q)Q(r);else{const e=()=>{clearTimeout(t),cancelAnimationFrame(n),setTimeout(r)},t=setTimeout(e,J),n=requestAnimationFrame(e)}});_.__addPreactPromise(t,"Preact requestAnimationFrame")};const Z=new class{constructor(){this.appendChildHelper=(e,t)=>HTMLElement.prototype.appendChild.call(e,t),this.insertBeforeHelper=(e,t,n)=>HTMLElement.prototype.insertBefore.call(e,t,n)}connectedCallback(){}disconnectedCallback(){}attributeChangedCallback(e,t,n){}getProperty(e){}setProperty(e,t){}setProperties(e){}};class ee extends HTMLElement{static get observedAttributes(){let e=[];return this.metadata.properties&&(e=e.concat(d.getFlattenedAttributes(this.metadata.properties))),this.rootObservedAttributes&&(e=e.concat(this.rootObservedAttributes)),e}connectedCallback(){this._getHelper().connectedCallback()}disconnectedCallback(){this._helper?.disconnectedCallback()}attributeChangedCallback(e,t,n){this._helper?.attributeChangedCallback(e,t,n)}getProperty(e){return this._getHelper().getProperty(e)}setProperty(e,t){this._getHelper().setProperty(e,t)}setProperties(e){this._getHelper().setProperties(e)}appendChild(e){return this._getHelper().appendChildHelper(this,e)}insertBefore(e,t){return this._getHelper().insertBeforeHelper(this,e,t)}setAttribute(e,t){if("class"===e){const e=o.CustomElementUtils.getClassSet(t);o.CustomElementUtils.getElementState(this).setOuterClasses(e)}else HTMLElement.prototype.setAttribute.call(this,e,t)}removeAttribute(e){"class"===e?this.setAttribute("class",""):HTMLElement.prototype.removeAttribute.call(this,e)}_getHelper(){return this._helper||(this.hasAttribute("data-oj-jsx")?(this.removeAttribute("data-oj-jsx"),this.classList.add("oj-complete"),this._helper=Z):this._helper=new z(this,this.constructor.component,this.constructor.metadata,this.constructor.rootObservedAttributes,this.constructor.rootObservedProperties,this.constructor.defaultProps)),this._helper}}const te=i.createContext(null);function ne(e,t){return"className"===e||o.AttributeUtils.isGlobalOrData(e)||function(e,t){if(t?.properties?.[e])return!1;const n=e.match(re);if(n){const e=n[1].toLowerCase()+n[2];return!t?.events?.[e]}return!1}(e,t)}const re=/^on(?!.*Changed$)([A-Za-z])([A-Za-z]*)$/;const ie=({children:e})=>{const{tagName:t,metadata:n,isElementFirst:i,vcompProps:s}=a.useContext(te);if(i)return e;const l=Object.keys(s).filter(e=>ne(e,n)).reduce((e,t)=>(e[t]=s[t],e),{}),c=r.jsx("div",{ref:function(e){e&&(e[o.CustomElementUtils.VCOMP_INSTANCE]={props:s})},"data-oj-jsx":"",...l,children:e});return c.type=t,c},oe="class",se=n.forwardRef((e,t)=>{const{tagName:n,metadata:s,isElementFirst:l,vcompProps:c,observedPropsSet:u}=a.useContext(te);if(l){const o=r.jsx("div",{...e,ref:t});return o.type=n,c[L](o),r.jsx(i.Fragment,{children:e.children})}const d={};c.style&&e.style&&(d.style=Object.assign({},c.style,e.style));const h=c[oe];if(h){const t=e[oe]||"";d[oe]=`${h} ${t}`}const p=Object.keys(c).filter(t=>!(t in e)&&!u.has(t)&&ne(t,s)).reduce((e,t)=>(e[t]=c[t],e),{}),f=r.jsx("div",{...e,...d,...p,ref:e=>{t&&B(t,e),e&&(e[o.CustomElementUtils.VCOMP_INSTANCE]={props:c})},"data-oj-jsx":""});return f.type=n,f});class ae extends o.LifecycleElementState{constructor(e){super(e),this._translationBundleMap={}}getTranslationBundleMap(){return this._translationBundleMap}getTemplateEngine(){return ae._cachedTemplateEngine}getTrackChildrenOption(){return"immediate"}allowPropertyChangedEvents(){return super.allowPropertyChangedEvents()&&(e=>{const t=e._getHelper();return!!t.isInitialized?.()})(this.Element)}allowPropertySets(){return this._allowPropertySets||super.allowPropertySets()}resetCreationCycle(){this._allowPropertySets=super.allowPropertySets(),super.resetCreationCycle()}disposeTemplateCache(){const e=this.getSlotMap(),t=Object.keys(e),n=s.getElementDescriptor(this.Element.tagName).metadata,r=n?.extension?._DYNAMIC_SLOT,i=!!r?.isTemplate;t.filter(e=>{const t=d.getPropertyMetadata(e,n?.slots);if(t){if(t.data)return!0}else if(i)return!0;return!1}).forEach(t=>{const n=e[t];"TEMPLATE"===n[0]?.nodeName&&this.getTemplateEngine().cleanupTemplateCache(n[0])})}GetPreCreatedPromise(){let e,t;return this.Element.constructor.translationBundleMap&&(e=this._getTranslationBundlesPromise()),!ae._cachedTemplateEngine&&this._hasDirectTemplateChildren()&&(t=this._getTemplateEnginePromise()),Promise.all([e,t]).then(()=>this.Element.isConnected?super.GetPreCreatedPromise():Promise.reject())}IsTransferAttribute(e){return this.Element.constructor.rootObservedAttrSet.has(e)}GetDescriptiveTransferAttributeValue(e){return((e,t)=>{const n=e.getAttribute(t);if(n)return n;const r=e._getHelper();return(r.getProps?.()||{})[t]})(this.Element,e)}_getTranslationBundlesPromise(){const e=this.Element.constructor.translationBundleMap,t=Object.keys(e),n=[];return t.forEach(t=>{if(!ae._bundlePromiseCache[t]){const n=e[t];ae._bundlePromiseCache[t]=m.getTranslationBundlePromiseFromLoader(n)}n.push(ae._bundlePromiseCache[t])}),Promise.all(n).then(e=>{t.forEach((t,n)=>{this._translationBundleMap[t]=e[n]})})}_getTemplateEnginePromise(){return new Promise(function(t,n){e(["ojs/ojvcomponent-template"],function(e){t(function(e){if(e&&e.__esModule)return e;var t={};return e&&Object.keys(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}),t.default=e,t}(e))},n)}).then(e=>{ae._cachedTemplateEngine=e})}_hasDirectTemplateChildren(){const e=this.Element.childNodes;for(let t=0;t<e.length;t++){if("template"===e[t].localName)return!0}return!1}}ae._bundlePromiseCache={};const le=Symbol("functional component");function ce(e){return function(t){const a=t._metadata||t.metadata||{};!function(e){e.properties||(e.properties={});e.properties.__oj_private_color_scheme={type:"string",binding:{consume:{name:"colorScheme"}}},e.properties.__oj_private_scale={type:"string",binding:{consume:{name:"scale"}}},e.properties.__oj_private_contexts={type:"object"}}(a);const l=a?.extension?._OBSERVED_GLOBAL_PROPS||[],c=l.map(e=>o.AttributeUtils.getGlobalAttrForProp(e));!function(e,t,s,a){const l=t.prototype.render;t.prototype.render=function(t,c,u){const d=s?.extension?._READ_ONLY_PROPS;d&&d.forEach(e=>delete t[e]);const h=t[D],p=!!h;p&&o.CustomElementUtils.getElementState(h).disposeTemplateCache();let f=t;if(t[D]){const{[D]:e,[L]:n,...r}=t;f=r}let _=l.call(this,f,c,u);if(_?.type?.__ojIsEnvironmentWrapper&&_.props.children.type===e){const t=_.props.children;t.type=se;try{_=i.cloneElement(t)}finally{t.type=e}}const m=_?.type;return m!==se&&(ue(m)===(de||(de=ue(n.forwardRef(()=>null))),de)&&m[le]&&0!==Object.keys(s.methods||{}).length||(_=r.jsx(ie,{children:_}))),r.jsx(te.Provider,{value:{tagName:e,metadata:s,isElementFirst:p,vcompProps:t,observedPropsSet:a},children:_})}}(e,t,a,new Set(l)),function(e,t,n,r,i,a){class l extends ee{}l.metadata=t,l.component=n,l.rootObservedAttributes=i,l.rootObservedAttrSet=new Set(i),l.rootObservedProperties=r,l.defaultProps=n.defaultProps||n._defaultProps?d.deepFreeze(n.defaultProps||n._defaultProps):null,l.translationBundleMap=a,function(e,t){if(!t)return;for(let n in t)Object.defineProperty(e,n,{get(){return this.getProperty(n)},set(e){this.setProperty(n,e)}}),o.addPrivatePropGetterSetters(e,n)}(l.prototype,t?.properties),function(e,t){if(!t)return;for(let n in t)e[n]=function(){if(this._helper===Z)throw new o.JetElementError(this,"Cannot access element methods when rendered as a value based element.");const e=this._helper.ref.current;if(!e)throw new o.JetElementError(this,"Cannot access methods before element is upgraded.");return e[n].apply(e,arguments)}}(l.prototype,t?.methods),s.registerElement(e,{descriptor:{metadata:t},stateClass:ae,vcomp:!0,cache:{contexts:n._consumedContexts}},l)}(e,a,t,l,c,t._translationBundleMap||t.translationBundleMap),!t._metadata&&t.metadata&&f.warn(`Component ${e} is compiled with JET version prior to 14.0.0`)}}function ue(e){return e?.$$typeof}let de;"undefined"!=typeof window&&(HTMLTemplateElement.prototype.hasOwnProperty("render")||Object.defineProperty(HTMLTemplateElement.prototype,"render",{value:null,writable:!0}));const he=o.ElementUtils.getUniqueId.bind(null,null);t.Root=se,t.consumedContexts=function(e){return function(e){}},t.customElement=ce,t.getUniqueId=he,t.method=function(e,t,n){},t.registerCustomElement=function(e,t,o){class s extends i.Component{constructor(){if(super(),this.__refCallback=e=>{this.__vcompRef&&(this.__vcompRef.current=e);const t=this.props.innerRef;B(t,e)},s._metadata?.methods){this.__vcompRef=i.createRef();const e=s._metadata.methods,t=this;for(let n in e)t[n]=(...e)=>this.__vcompRef.current?.[n].apply(this.__vcompRef.current,e)}}render(){return arguments[0].ref=this.__refCallback,t(arguments[0])}}return s.displayName=arguments[2],arguments.length>=4&&arguments[3]&&(s._metadata=arguments[3],arguments.length>=5&&arguments[4]&&(s._defaultProps=arguments[4])),arguments.length>=6&&(s._translationBundleMap=arguments[5]),arguments.length>=7&&(s._consumedContexts=arguments[6].consume),s[le]=!0,ce(e)(s),n.forwardRef((e,t)=>r.jsx(s,{...e,innerRef:t}))},Object.defineProperty(t,"__esModule",{value:!0})}),define("ojs/ojpopupcore",["exports","ojs/ojcore-base","jquery","ojs/ojcomponentcore","ojs/ojlogger","ojs/ojdomutils","ojs/ojpreact-patch","jqueryui-amd/position","ojs/ojcontext","preact/jsx-runtime","preact","ojs/ojcustomelement-utils"],function(e,t,n,r,i,o,s,a,l,c,u,d){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,l=l&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l;const h=function(e){this._tapCallback=e,this.Init()};t._registerLegacyNamespaceProp("SimpleTapRecognizer",h),t.Object.createSubclass(h,t.Object,"oj.SimpleTapRecognizer"),h.prototype.Init=function(){h.superclass.Init.call(this);var e=this._eventHandler.bind(this);this._eventHandlerCallback=e;for(var t,n=document.documentElement,r=0;r<h._TOUCHEVENTS.length;r++)"touchstart"===(t=h._TOUCHEVENTS[r])||"touchmove"===t?n.addEventListener(t,e,{passive:!1,capture:!0}):n.addEventListener(t,e,!0)},h.prototype._eventHandler=function(e){var t=this._tapCallback,n=e.type;if("touchstart"===n)this._touchStartEvent=e,this._touchStartEvent._tapStart=(new Date).getTime();else if("touchmove"===n||"touchcancel"===n)this._touchStartEvent=null;else if("touchend"===n){if(this._touchStartEvent){var r=this._touchStartEvent._tapStart;if(isNaN(r))t(this._touchStartEvent);else(new Date).getTime()-r<h._PRESSHOLDTHRESSHOLD&&t(this._touchStartEvent)}this._touchStartEvent=null}},h.prototype.destroy=function(){this._tapCallback=null;var e=this._eventHandlerCallback;this._eventHandlerCallback=null;for(var t,n=document.documentElement,r=0;r<h._TOUCHEVENTS.length;r++)"touchstart"===(t=h._TOUCHEVENTS[r])||"touchmove"===t?n.removeEventListener(t,e,{passive:!1,capture:!0}):n.removeEventListener(t,e,!0)},h._TOUCHEVENTS=["touchstart","touchmove","touchcancel","touchend"],h._PRESSHOLDTHRESSHOLD=700;const p=function(){this.Init()};t._registerLegacyNamespaceProp("PopupService",p),t.Object.createSubclass(p,t.Object,"oj.PopupService");const f=function(){this.Init()},_={};p.prototype.Init=function(){p.superclass.Init.call(this)},p.getInstance=function(e){return p._popupService||(p._popupService=new f),p._popupService},p.prototype.open=function(e){t.Assert.failedInAbstractFunction()},p.prototype.close=function(e){t.Assert.failedInAbstractFunction()},p.prototype.changeOptions=function(e){t.Assert.failedInAbstractFunction()},p.prototype.triggerOnDescendents=function(e,n,r){t.Assert.failedInAbstractFunction()},p.prototype.destroy=function(){p._popupService=null},p.MODALITY={NONE:"none",MODAL:"modal",MODELESS:"modeless"},p.EVENT={POPUP_REMOVE:"ojPopupRemove",POPUP_CLOSE:"ojPopupClose",POPUP_REFRESH:"ojPopupRefresh",POPUP_AUTODISMISS:"ojPopupAutoDismiss",POPUP_BEFORE_OPEN:"ojPopupBeforeOpen",POPUP_AFTER_OPEN:"ojPopupAfterOpen",POPUP_BEFORE_CLOSE:"ojPopupBeforeClose",POPUP_AFTER_CLOSE:"ojPopupAfterClose"},p.LAYER_LEVEL={TOP_LEVEL:"topLevel",NEAREST_ANCESTOR:"nearestAncestor"},p.OPTION={POPUP:"popup",EVENTS:"events",MODALITY:"modality",LAUNCHER:"launcher",POSITION:"position",LAYER_SELECTORS:"layerSelectors",LAYER_LEVEL:"layerLevel",CONTEXT:"context",CUSTOM_ELEMENT:"customElement"},t.__registerWidget("oj.ojSurrogate",n.oj.baseComponent,{version:"1.0.0",widgetEventPrefix:"oj",options:{beforeDestroy:null},_ComponentCreate:function(){this._super(),this.element.uniqueId()},_invokeBeforeDestroy:function(){var e=this.options.beforeDestroy;this.options.beforeDestroy=null,e&&e()},_destroy:function(){this._invokeBeforeDestroy(),this.element.removeUniqueId(),this._super()},_NotifyDetached:function(){this._invokeBeforeDestroy(),this._super()},$$cleanElement:function(){this._invokeBeforeDestroy()}});t.CustomElementBridge.register("oj-surrogate",{metadata:{properties:{beforeDestroy:{type:"function"}},methods:{$$cleanElement:{}},extension:{_WIDGET_NAME:"ojSurrogate"}}}),t._registerLegacyNamespaceProp("PopupServiceImpl",f),t.Object.createSubclass(f,p,"oj.PopupServiceImpl"),f.prototype.open=function(e){t.Assert.assertObject(e);var s=n(e[p.OPTION.POPUP]);t.Assert.assertPrototype(s,n);var a=_.getStatus(s);if(a===_.STATUS.UNKNOWN||a===_.STATUS.BEFORE_OPEN||a===_.STATUS.CLOSE){var l=n(e[p.OPTION.LAUNCHER]);t.Assert.assertPrototype(l,n);var c=e[p.OPTION.POSITION];t.Assert.assertObjectOrNull(c);var u=e[p.OPTION.EVENTS];t.Assert.assertObject(u);var d=e[p.OPTION.MODALITY];(!d||p.MODALITY.MODELESS!==d&&p.MODALITY.MODAL!==d)&&(d=p.MODALITY.NONE);var h=e[p.OPTION.LAYER_SELECTORS];t.Assert.assertString(h);var m=e[p.OPTION.CUSTOM_ELEMENT],g=e[p.OPTION.LAYER_LEVEL];(!g||p.LAYER_LEVEL.TOP_LEVEL!==g&&p.LAYER_LEVEL.NEAREST_ANCESTOR!==g)&&(g=p.LAYER_LEVEL.NEAREST_ANCESTOR);var v=u[p.EVENT.POPUP_BEFORE_OPEN];v&&n.isFunction(v)||(v=f._defaultBeforeOpenCallback);var y=u[p.EVENT.POPUP_AFTER_OPEN];_.setStatus(s,_.STATUS.OPENING),o.setLogicalParent(s,l),_.addToAncestorLayer(s,l,d,h,g,m);var E,b=function(){try{s.removeAttr("aria-hidden"),this._assertEventSink()}catch(e){i.error("Error opening popup:\n%o",e)}finally{_.setStatus(s,_.STATUS.OPEN),y&&y(e);var r=_.getFirstAncestorLayer(s);if(t.Assert.assertPrototype(r,n),_.applyEvents(r,u),!_._getSurrogate(r)&&n.isFunction(u[p.EVENT.POPUP_REMOVE]))(0,u[p.EVENT.POPUP_REMOVE])()}};b=b.bind(this);try{E=v(e),r.subtreeShown(s[0])}catch(e){i.error("Error before open popup:\n%o",e)}finally{E&&E instanceof Promise?E.then(b):b()}}else this._assertEventSink()},f._defaultBeforeOpenCallback=function(e){var r=n(e[p.OPTION.POPUP]);t.Assert.assertPrototype(r,n);var i=e[p.OPTION.POSITION];r.show(),i&&r.position(i)},f.prototype.close=function(e){t.Assert.assertObject(e);var s=n(e[p.OPTION.POPUP]);t.Assert.assertPrototype(s,n);var a=_.getOpenPopupLayer(s);t.Assert.assertPrototype(a,n);var l=e[p.OPTION.EVENTS];l?l=n.extend(_.getEvents(a),l):(l=_.getEvents(a),e[p.OPTION.EVENTS]=l);var c=_.getStatus(s);if(c!==_.STATUS.OPEN&&c!==_.STATUS.BEFORE_CLOSE||!l)this._assertEventSink();else{var u=l[p.EVENT.POPUP_BEFORE_CLOSE];u&&n.isFunction(u)||(u=f._defaultBeforeCloseCallback);var d=l[p.EVENT.POPUP_AFTER_CLOSE];_.setStatus(s,_.STATUS.CLOSING),_.applyEvents(a,{}),s.attr("aria-hidden","true");var h,m=function(){try{s.hide(),null!==e[p.OPTION.POSITION]&&s.css({top:"auto",bottom:"auto",left:"auto",right:"auto"}),_.removeFromAncestorLayer(s),o.setLogicalParent(s,null),this._assertEventSink(),r.subtreeHidden(s[0])}catch(e){i.error("Error closing popup:\n%o",e)}finally{_.setStatus(s,_.STATUS.CLOSE),d&&n.isFunction(d)&&d(e)}};m=m.bind(this);try{h=u(e)}catch(e){i.error("Error before close popup:\n%o",e)}finally{h&&h instanceof Promise?h.then(m):m()}}},f._defaultBeforeCloseCallback=function(e){var r=n(e[p.OPTION.POPUP]);t.Assert.assertPrototype(r,n),r.hide()},f.prototype.changeOptions=function(e){t.Assert.assertObject(e);var r=n(e[p.OPTION.POPUP]);if(t.Assert.assertPrototype(r,n),_.getStatus(r)===_.STATUS.OPEN){var i=_.getOpenPopupLayer(r);t.Assert.assertPrototype(i,n);var o=e[p.OPTION.EVENTS];o&&_.applyEvents(i,o);var s=e[p.OPTION.MODALITY];s&&_.applyModality(i,r,s);var a=e[p.OPTION.LAYER_SELECTORS];t.StringUtils.isEmptyOrUndefined(a)||i.attr("class",a)}},f.prototype.triggerOnDescendents=function(e,t,n){if(_.isPopupOpen(e)){var r={};r.event=t,r.argsArray=n;var i=_.getFirstAncestorLayer(e);_.postOrderVisit(i,this._triggerOnDescendentsVisitCallback,r)}},f.prototype._triggerOnDescendentsVisitCallback=function(e,t){var r=t.event,i=t.argsArray,o=_.getEvents(e);return o&&n.isFunction(o[r])&&o[r].apply(this,i),_.VISIT_RESULT.ACCEPT},f.prototype._assertEventSink=function(){var e,t,n,r=_.hasPopupsOpen(),i=this._callbackEventFilter;if(!r&&i){for(window.removeEventListener("resize",f._refreshCallback,!0),window.removeEventListener("scroll",f._refreshCallback,!0),(t=document.documentElement).removeEventListener("mousewheel",f._refreshCallback,{passive:!0,capture:!0}),t.removeEventListener("DOMMouseScroll",f._refreshCallback,!0),this._callbackEventFilter=null,e=0;e<f._REDISTRIBUTE_EVENTS.length;e++)n=f._REDISTRIBUTE_EVENTS[e],t.removeEventListener(n,i,!0);var s=this._simpleTapRecognizer;s&&(s.destroy(),this._simpleTapRecognizer=null)}else if(r&&!i){for(window.addEventListener("resize",f._refreshCallback,!0),window.addEventListener("scroll",f._refreshCallback,!0),(t=document.documentElement).addEventListener("mousewheel",f._refreshCallback,{passive:!0,capture:!0}),t.addEventListener("DOMMouseScroll",f._refreshCallback,!0),i=this._eventFilterCallback.bind(this),this._callbackEventFilter=i,e=0;e<f._REDISTRIBUTE_EVENTS.length;e++)n=f._REDISTRIBUTE_EVENTS[e],t.addEventListener(n,i,!0);o.isTouchSupported()&&(this._simpleTapRecognizer=new h(i))}},f.prototype._eventFilterCallback=function(e){var t=n(e.target);if(_.hasPopupsOpen()){if(!o.isChromeEvent(e)&&("focus"!==e.type||t.is(":focusable"))){var r=_.getDefaultLayer();if("keydown"!==e.type||!_.hasModalDialogOpen()||o.isAncestor(r[0],t[0])){var i=_.getFirstAncestorLayer(t),s=r.find("."+f._FOCUS_WITHIN_SELECTOR).first(),a=e.target.classList.contains(_._OVERLAY_SELECTOR);if(r[0]!==i[0]?i.hasClass(f._FOCUS_WITHIN_SELECTOR)||(s.length&&s.removeClass(f._FOCUS_WITHIN_SELECTOR),i.addClass(f._FOCUS_WITHIN_SELECTOR)):s.length&&!a&&s.removeClass(f._FOCUS_WITHIN_SELECTOR),"focus"!==e.type||"-1"!==t.attr("tabindex")){var l={};l.targetIsOverlay=a;for(var c=f._COPY_SAFE_EVENT_PROPERTIES,u={},d=0;d<c.length;d++){var h=c[d],p=e[h];void 0===p||n.isFunction(p)||(u[h]=p)}l.event=n.Event(e,u),_.postOrderVisit(r,f._redistributeVisitCallback,l)}}else _.eatEvent(e)}}else this._assertEventSink()},f._redistributeVisitCallback=function(e,t){var r=_.getEvents(e),i=t.event;return r&&n.isFunction(r[p.EVENT.POPUP_AUTODISMISS])?r[p.EVENT.POPUP_AUTODISMISS](i):"mousedown"===i.type&&t.targetIsOverlay&&i.preventDefault(),_.VISIT_RESULT.ACCEPT},f._refreshCallback=function(e){isNaN(f._refreshTimerId)&&(f._refreshTimerId=window.setTimeout(function(){f._refreshTimerId=Number.NaN;var e=_.getDefaultLayer();n.isFunction(window.requestAnimationFrame)?f._afRequestId=window.requestAnimationFrame(function(){f._afRequestId=null,_.postOrderVisit(e,f._refreshVisitCallback)}):_.postOrderVisit(e,f._refreshVisitCallback)},f._REFRESH_DELAY))},f._refreshVisitCallback=function(e,t){if(t.level>0)return _.VISIT_RESULT.REJECT;var r=_.getEvents(e);return r&&n.isFunction(r[p.EVENT.POPUP_REFRESH])&&r[p.EVENT.POPUP_REFRESH](),_.VISIT_RESULT.ACCEPT},f.prototype.destroy=function(){f.superclass.destroy.call(this)},f._FOCUS_WITHIN_SELECTOR="oj-focus-within",f._REDISTRIBUTE_EVENTS=["focus","mousedown","keydown"],f._COPY_SAFE_EVENT_PROPERTIES=["altKey","bubbles","cancelable","ctrlKey","currentTarget","eventPhase","metaKey","relatedTarget","shiftKey","target","timeStamp","view","which","button","buttons","clientX","clientY","offsetX","offsetY","pageX","pageY","screenX","screenY","toElement","char","charCode","key","keyCode"],f._REFRESH_DELAY=10,t._registerLegacyNamespaceProp("ZOrderUtils",_),_.STATUS={UNKNOWN:0,BEFORE_OPEN:.5,OPENING:1,OPEN:2,BEFORE_CLOSE:2.5,CLOSING:3,CLOSE:4},_._STATUS_DATA=Symbol("PopupStatus"),_.getStatus=function(e){e instanceof Element&&(e=n(e));var t=_.STATUS.UNKNOWN;return e.length&&(t=e[0][_._STATUS_DATA],isNaN(t)&&(t=_.STATUS.UNKNOWN)),t},_.setStatus=function(e,t){e instanceof Element&&(e=n(e));var r=e[0];t>=_.STATUS.UNKNOWN&&t<=_.STATUS.CLOSE&&(r[_._STATUS_DATA]=t)},_.getFirstAncestorLayer=function(e){if(!e)return _.getDefaultLayer();for(var t=e;t&&t.length>0&&t.attr(_._SURROGATE_ATTR)!==_._DEFAULT_LAYER_ID;){if(_._hasSurrogate(t[0]))return t;t=t.parent()}return _.getDefaultLayer()},_.getDefaultLayer=function(){var e=n(document.getElementById(_._DEFAULT_LAYER_ID));return e.length>0||((e=n("<div>")).attr("role","presentation"),e.attr("id",_._DEFAULT_LAYER_ID),e.prependTo(n(document.body))),e},_.addToAncestorLayer=function(e,i,o,s,a,l){var c=e[0];if(_._hasSurrogate(c.parentNode))throw new Error("JET Popup is already open - id: "+c.getAttribute("id"));var u=_.getFirstAncestorLayer(a===p.LAYER_LEVEL.TOP_LEVEL?null:i),d=n("<div>"),h=e.attr("id");t.StringUtils.isEmptyOrUndefined(h)?d.uniqueId():d.attr("id",[h,"layer"].join("_")),d.attr("role","presentation"),d.addClass(s),e.after(d);const f=_._createSurrogate(d,l);r.subtreeDetached(c),e.appendTo(d),c[_._LAYER_ID_DATA]=d.attr("id"),d.appendTo(u),r.subtreeAttached(c),_._applyVDomPatch(f[0],c),_.applyModality(d,e,o)},_._applyVDomPatch=function(e,t){e[s.OJ_POPUP]=t,s.patchPopupParent(e.parentElement)},_._getSurrogate=function(e){var t=e.attr(_._SURROGATE_ATTR);if(t)return document.getElementById(t)},_.applyEvents=function(e,t,i){i||(i=n(_._getSurrogate(e))),e.data(_._EVENTS_DATA,t),i.length>0&&t&&n.isFunction(t[p.EVENT.POPUP_REMOVE])&&r.setComponentOption(i[0],"beforeDestroy",t[p.EVENT.POPUP_REMOVE])},_.getEvents=function(e){return e.data(_._EVENTS_DATA)},_._createSurrogate=function(e,r){var i="script";r&&(i="oj-surrogate");var o=n(document.createElement(i)),s=e.attr("id");t.StringUtils.isEmptyOrUndefined(s)||o.attr("id",[s,"surrogate"].join("_")),r&&o.attr("data-oj-binding-provider","none"),o.insertBefore(e),r||o.ojSurrogate();var a=o.attr("id");return e.attr(_._SURROGATE_ATTR,a),o},_._removeSurrogate=function(e){var t=e.attr(_._SURROGATE_ATTR);e.removeAttr(_._SURROGATE_ATTR);var i=n(document.getElementById(t)),o=i.length>0;return o&&(e.insertAfter(i),r.setComponentOption(i[0],"beforeDestroy",null),i.remove()),o},_.getOpenPopupLayer=function(e){var t=e.parent(),r=e[0];if(!t||0===t.length){var i=r[_._LAYER_ID_DATA];t=n(document.getElementById(i))}return t},_.removeFromAncestorLayer=function(e){var t=_.getOpenPopupLayer(e);_.preOrderVisit(t,_._closeDescendantPopupsCallback),_._removeOverlayFromAncestorLayer(t),_._resetAriaHiddenOnBackround(t),_._restoreBodyOverflow(),t.removeData(_._EVENTS_DATA),t.removeData(_._MODALITY_DATA);var n=e[0];delete n[_._LAYER_ID_DATA],r.subtreeDetached(n),_._removeSurrogate(t)&&n&&n.parentElement?(o.unwrap(e,t),r.subtreeAttached(n)):t.remove()},_._closeDescendantPopupsCallback=function(e,t){if(t.level>0)return _.VISIT_RESULT.REJECT;var r=e.data(_._EVENTS_DATA);return r&&n.isFunction(r[p.EVENT.POPUP_CLOSE])&&r[p.EVENT.POPUP_CLOSE](),_.VISIT_RESULT.ACCEPT},_._disableBodyOverflow=function(e){const r=document.body,i=e.children()[0];if(Math.floor(n(i).width())<=window.innerWidth&&Math.floor(n(i).height())<=window.innerHeight)if(t.AgentUtils.getAgentInfo().os===t.AgentUtils.OS.IOS){if(this._iosScrollLockBackup)return;const e=window.visualViewport.offsetLeft,t=window.visualViewport.offsetTop,n=window.pageXOffset,i=window.pageYOffset;this._iosScrollLockBackup={windowScrollX:n,windowScrollY:i,bodyPosition:r.style.position,bodyOverflow:r.style.overflow,bodyTop:r.style.top,bodyLeft:r.style.left,bodyRight:r.style.right},r.style.position="fixed",r.style.overflow="hidden",r.style.top=-(i-Math.floor(t))+"px",r.style.left=-(n-Math.floor(e))+"px",r.style.right="0"}else r.classList.add("oj-component-modal-open")},_._restoreBodyOverflow=function(){if(!_.hasModalDialogOpen()){const e=document.body;if(t.AgentUtils.getAgentInfo().os===t.AgentUtils.OS.IOS){if(!this._iosScrollLockBackup)return;const t=this._iosScrollLockBackup;e.style.position=t.bodyPosition,e.style.overflow=t.bodyOverflow,e.style.top=t.bodyTop,e.style.left=t.bodyLeft,e.style.right=t.bodyRight,window.scrollTo(t.windowScrollX,t.windowScrollY),delete this._iosScrollLockBackup}else e.classList.remove("oj-component-modal-open")}},_._removeFocusWithinFromOverlayedContent=function(){var e=_.getDefaultLayer().find("."+f._FOCUS_WITHIN_SELECTOR).first();e.length&&e.removeClass(f._FOCUS_WITHIN_SELECTOR)},_.applyModality=function(e,n,r){var i=e.data(_._MODALITY_DATA);if(e.data(_._MODALITY_DATA,r),t.StringUtils.isEmptyOrUndefined(i)?p.MODALITY.MODAL===r?(_._addOverlayToAncestorLayer(e),_._disableBodyOverflow(e),_._removeFocusWithinFromOverlayedContent(),_._setAriaHiddenOnBackround(e)):_._removeOverlayFromAncestorLayer(e):i!==r&&(r===p.MODALITY.MODAL?(_._addOverlayToAncestorLayer(e),_._disableBodyOverflow(e),_._removeFocusWithinFromOverlayedContent(),_._setAriaHiddenOnBackround(e)):(_._removeOverlayFromAncestorLayer(e),_._restoreBodyOverflow(),_._resetAriaHiddenOnBackround(e))),r===p.MODALITY.MODAL){const e=n.attr("role");"dialog"!==e&&"alertdialog"!==e||n.attr("aria-modal","true")}else n.removeAttr("aria-modal")},_._setAriaHiddenOnBackround=function(e){var t=e,r=n();do{r=r.add(t.siblings(':not(script):not([aria-hidden="true"])')),t=t.parent()}while("body"!==t[0].tagName.toLowerCase());r.attr("aria-hidden",!0),e.data(_._ARIA_HIDDEN_ELEMS,r)},_._resetAriaHiddenOnBackround=function(e){var t=e.data(_._ARIA_HIDDEN_ELEMS);t&&(t.removeAttr("aria-hidden"),e.removeData(_._ARIA_HIDDEN_ELEMS))},_.hasModalDialogOpen=function(){for(var e=_.getDefaultLayer().children(),t=e.length-1;t>-1;t--){if(n(e[t]).hasClass(_._OVERLAY_SELECTOR))return!0}return!1},_._addOverlayToAncestorLayer=function(e){var r=n("<div>");r.addClass(_._OVERLAY_SELECTOR),r.addClass(e[0].className),r.attr("role","presentation");var i=e.attr("id");t.StringUtils.isEmptyOrUndefined(i)?r.uniqueId():r.attr("id",[i,"overlay"].join("_")),e.before(r);var o=r.attr("id");e.attr(_._OVERLAY_ATTR,o)},_._removeOverlayFromAncestorLayer=function(e){var r=e.attr(_._OVERLAY_ATTR);t.StringUtils.isEmptyOrUndefined(r)||(e.removeAttr(_._OVERLAY_ATTR),n(document.getElementById(r)).remove())},_.VISIT_RESULT={ACCEPT:0,REJECT:1,COMPLETE:2},_._VISIT_TRAVERSAL={PRE_ORDER:0,POST_ORDER:1},_.postOrderVisit=function(e,t,n){var r=n;n||(r={}),r.level=0,r.type=_._VISIT_TRAVERSAL.POST_ORDER,_._visitTree(e,t,r)},_.preOrderVisit=function(e,t,n){var r=n;n||(r={}),r.level=0,r.type=_._VISIT_TRAVERSAL.PRE_ORDER,_._visitTree(e,t,r)},_._visitTree=function(e,t,r){for(var i=r.level,o=e.children(),s=o.length-1;s>-1;s--){var a=n(o[s]);if(_._hasSurrogate(a[0])){var l;if(r.type===_._VISIT_TRAVERSAL.PRE_ORDER){if((l=t(a,r))===_.VISIT_RESULT.COMPLETE)return l;if(l===_.VISIT_RESULT.REJECT)break}if(r.level=i+1,l=_._visitTree(a,t,r),r.level=i,l===_.VISIT_RESULT.COMPLETE)return l;if(r.type===_._VISIT_TRAVERSAL.POST_ORDER){if((l=t(a,r))===_.VISIT_RESULT.COMPLETE)return l;if(l===_.VISIT_RESULT.REJECT)break}}}return _.VISIT_RESULT.ACCEPT},_._hasSurrogate=function(e){return!(!e||1!==e.nodeType||!e.hasAttribute(_._SURROGATE_ATTR))},_.hasPopupsOpen=function(){return _.getDefaultLayer().children().length>0},_.getOpenPopupCount=function(){var e={popupCount:0},t=_.getDefaultLayer();return _.preOrderVisit(t,_._openPopupCountCallback,e),e.popupCount},_._openPopupCountCallback=function(e,t){return t.popupCount+=1,_.VISIT_RESULT.ACCEPT},_.findOpenPopups=function(){var e={},t=[];e.popups=t;var r=_.getDefaultLayer();return _.preOrderVisit(r,_._openPopupsCallback,e),t=e.popups,n(t)},_._openPopupsCallback=function(e,t){return t.popups.push(e[0]),_.VISIT_RESULT.ACCEPT},_.isAboveTopModalLayer=function(e){if(!e||!_.hasPopupsOpen())return!0;var t=function(){var e={topLayer:null},t=_.getDefaultLayer();if(_.preOrderVisit(t,function(e,t){if(t.level>0)return _.VISIT_RESULT.REJECT;var r=t.topLayer;return r?_.compareStackingContexts(n(e),n(r))>0&&(t.topLayer=e):t.topLayer=e,_.VISIT_RESULT.ACCEPT},e),e.topLayer)return e.topLayer[0]}();if(!t)return!0;var r=function(e){var t={topModalPopup:null};if(e.hasAttribute(_._OVERLAY_ATTR)&&(t.topModalPopup=n(e)),_.postOrderVisit(n(e),function(e,t){return e[0].hasAttribute(_._OVERLAY_ATTR)?(t.topModalPopup=e,_.VISIT_RESULT.COMPLETE):_.VISIT_RESULT.ACCEPT},t),t.topModalPopup)return t.topModalPopup[0]}(t);return!r||(o.isAncestorOrSelf(r,e)||_.compareStackingContexts(n(r),n(e))<0)},_.compareStackingContexts=function(e,r){function i(e,t){var r,i=["absolute","relative","fixed"],s=e.parents(),a=[];for(r=s.length-1;r>-1;r--)a.push(n(s[r]));(s=a).push(e);var l=[],c=0;for(r=0;r<s.length;r++){var u=s[r],d=u.css("position"),h=o.getCSSLengthAsFloat(u.css("opacity")),p=o.getCSSLengthAsInt(u.css("z-index")),f=n.inArray(u[0],u.parent().children());n.inArray(d,i)>-1&&p>0?(l.push({weight:[c,p,f],order:[f]}),c+=1):h<1?(l.push({weight:[c,1,f],order:[f]}),c+=1):t&&l.push({weight:[0,0,f],order:[f]})}return l}function s(e,t){for(var n=Math.max(e.length,t.length),r=0;r<n;r++){var i=r<e.length?e[r]:0,o=r<t.length?t[r]:0;if(i!==o)return i<o?-1:1}return 0}t.Assert.assertPrototype(e,n),t.Assert.assertPrototype(r,n);var a,l,c=i(e,!1),u=i(r,!1),d=Math.max(c.length,u.length);for(a=0;a<d;a++)if(0!==(l=s(a<c.length?c[a].weight:[-1],a<u.length?u[a].weight:[-1])))return l;for(c=i(e,!0),u=i(r,!0),d=Math.max(c.length,u.length),a=0;a<d;a++)if(0!==(l=s(a<c.length?c[a].order:[-1],a<u.length?u[a].order:[-1])))return l;return 0},_.eatEvent=function(e){e.stopPropagation(),e.preventDefault()},_.isPopupOpen=function(e){var t=e.parent();return!(!t||1!==t.length||!_._hasSurrogate(t[0]))},_._EVENTS_DATA="oj-popup-events",_._MODALITY_DATA="oj-popup-modality",_._ARIA_HIDDEN_ELEMS="oj-aria-hidden-elems",_._DEFAULT_LAYER_ID="__oj_zorder_container",_._SURROGATE_ATTR="data-oj-surrogate-id",_._LAYER_ID_DATA=Symbol("PopupLayerId"),_._OVERLAY_ATTR="data-oj-overlayid",_._OVERLAY_SELECTOR="oj-component-overlay";const m={};t._registerLegacyNamespaceProp("PositionUtils",m),m.normalizeHorizontalAlignment=function(e,r){for(var i=n.extend({},e),o=0;o<m._ALIGN_RULE_PROPERTIES.length;o++){var s=m._ALIGN_RULE_PROPERTIES[o],a=i[s];if(a)if(t.StringUtils.isString(a))i[s]=a.replace("start",r?"right":"left").replace("end",r?"left":"right").replace("<",r?"+":"-").replace(">",r?"-":"+");else for(var l=0;l<m._SUB_ALIGN_RULE_PROPERTIES.length;l++){var c=m._SUB_ALIGN_RULE_PROPERTIES[l],u=a[c];t.StringUtils.isString(u)&&(a[c]=u.replace("start",r?"right":"left").replace("end",r?"left":"right").replace("<",r?"+":"-").replace(">",r?"-":"+"))}}return i},m.normalizePositionOf=function(e,t,n){return"event"===e?n:null==e||"launcher"===e?t:e},m._normalizeEventForPosition=function(e){n.each(["pageX","pageY"],function(t,n){if(e&&void 0===e[n]&&e.originalEvent){var r,i=e.originalEvent,o=i.type;if(r="touchstart"===o||"touchmove"===o?"touches":"touchend"===o?"changedTouches":null){var s=i[r][0];s&&(e[n]=s[n])}}})},m._ALIGN_RULE_PROPERTIES=["my","at"],m._SUB_ALIGN_RULE_PROPERTIES=["vertical","horizontal"],m.isAligningPositionClipped=function(e){if(e.target&&e.target.height>0&&e.target.width>0){var t=e.target.element;return!m.isWithinViewport(t)}return!1},m.isWithinViewport=function(e){function t(e,t){var n;if(["hidden","scroll","auto"].indexOf(t.overflowY)>-1){if(e.bottom-t.top<-1)return!1;if(n="auto"===t.overflowX&&t.scrollWidth>t.innerWidth||"scroll"===t.overflowX?o.getScrollBarWidth():0,t.bottom-n-e.top<1)return!1}return!(["hidden","scroll","auto"].indexOf(t.overflowX)>-1&&(n="auto"===t.overflowY&&t.scrollHeight>t.innerHeight||"scroll"===t.overflowY?o.getScrollBarWidth():0,e.right-(t.left+("rtl"===o.getReadingDirection()?n:0))<-1||e.left-(t.right-("ltr"===o.getReadingDirection()?n:0))>-1))}function r(e){var t=e[0];if(1===t.nodeType){var r=n.extend({},t.getBoundingClientRect());return r.overflowX=e.css("overflow-x"),r.overflowY=e.css("overflow-y"),r.innerHeight=e.innerHeight(),r.innerWidth=e.innerWidth(),r.scrollHeight=t.scrollHeight,r.scrollWidth=t.scrollWidth,r}return{height:0,width:0}}function i(e){return["fixed","absolute","relative","sticky"].indexOf(e.css("position"))>-1&&(!isNaN(parseInt(e.css("top"),10))||!isNaN(parseInt(e.css("bottom"),10))||!isNaN(parseInt(e.css("left"),10))||!isNaN(parseInt(e.css("right"),10)))}if(!e)return!1;if(n.isWindow(e[0])||i(e))return!0;for(var s,a=r(e),l=!0,c=e.parent();l&&c&&c.length>0&&"BODY"!==c[0].nodeName&&1===c[0].nodeType&&!i(c);){if("visible"!==(s=c).css("overflow-x")||"visible"!==s.css("overflow-y")){var u=r(c);u.height>0&&u.width>0&&(l=t(a,u))}c=c.parent()}return l},m._ANIMATION_TRANSFORM_ORIGIN_RULES={"right-top":"right top","right-middle":"right center","right-bottom":"right bottom","left-top":"left top","left-middle":"left center","left-bottom":"left bottom","center-top":"center top","center-middle":"center center","center-bottom":"center bottom"},m._ALIGN_MNEMONIC_DATA="oj-popup-align-mnemonic",m.captureTransformOriginAnimationEffectsOption=function(e,t){var n=[t.horizontal,t.vertical].join("-");e.data(m._ALIGN_MNEMONIC_DATA,n)},m.addTransformOriginAnimationEffectsOption=function(e,n){var r,i;t.StringUtils.isString(n)?(i=!0,r=n):(i=!1,r=JSON.stringify(n));var o=/#myPosition/g;if(r.match(o)){var s=e.data(m._ALIGN_MNEMONIC_DATA);t.StringUtils.isEmptyOrUndefined(s)&&(s="center-middle");var a=m._ANIMATION_TRANSFORM_ORIGIN_RULES[s];r=r.replace(o,a),n=i?r:JSON.parse(r)}return n},m._JQUI_MNEMONIC_GRP_REGX=/^(\w+)(\+|-)?(\d+)?/,m._VERTICAL_ENUM_TST_REGX=/^top$|^center$|^bottom$/,m._HORIZONTAL_ENUM_TST_REGX=/^start$|^left$|^center$|^end$|^right$/,m._COLLISION_ENUM_TST_REGX=/^none$|^flip$|^flipfit$|^fit$|^flipcenter$/,m._parsePositionNmnemonic=function(e,t){var n=[null,Number.NaN],r=m._JQUI_MNEMONIC_GRP_REGX.exec(e);if(r[1]&&t.test(r[1])&&(n[0]=r[1],r[2])){var i=parseInt(r[3],10);isNaN(i)||(i*="-"===r[2]?-1:1,n[1]=i)}return n},m._parseJSON=function(e){if(t.StringUtils.isString(e)&&/^{/.test(e)&&/}$/.test(e))try{return JSON.parse(e)}catch(e){}return null},m._coerceMyAtToJet=function(e,r,i,s){var a=m._parseJSON(r);a&&(r=a),(a=m._parseJSON(i))&&(i=a),s||(s={});var l,c=n.extend({},s),u={x:0,y:0};if(i&&"x"in i&&"y"in i&&(u.x=o.getCSSLengthAsInt(i.x),u.y=o.getCSSLengthAsInt(i.y)),t.StringUtils.isString(r)){var d=r.split(/\s/);d.length>0&&!t.StringUtils.isEmpty(d[0])&&(l=m._parsePositionNmnemonic(d[0],m._HORIZONTAL_ENUM_TST_REGX))[0]&&(c.horizontal=l[0],isNaN(l[1])||(u.x=l[1])),d.length>1&&!t.StringUtils.isEmpty(d[1])&&(l=m._parsePositionNmnemonic(d[1],m._VERTICAL_ENUM_TST_REGX))[0]&&(c.vertical=l[0],isNaN(l[1])||(u.y=l[1]))}else r&&("horizontal"in r&&(l=m._parsePositionNmnemonic(r.horizontal,m._HORIZONTAL_ENUM_TST_REGX))[0]&&(c.horizontal=l[0],isNaN(l[1])||(u.x=l[1])),"vertical"in r&&(l=m._parsePositionNmnemonic(r.vertical,m._VERTICAL_ENUM_TST_REGX))[0]&&(c.vertical=l[0],isNaN(l[1])||(u.y=l[1])));var h={};return h[e]=c,h.offset=u,h},m._coerceCollisionToJet=function(e,t){var n=t;return m._COLLISION_ENUM_TST_REGX.test(e)&&(n=e),{collision:n}},m._coerceOfToJet=function(e,r){var i=m._parseJSON(e);i&&(e=i);var s=r;if(t.StringUtils.isString(e))s=e;else if(n.isWindow(e))s="window";else if(e instanceof Element||e instanceof n){(e=n(e)).uniqueId(),s="#"+function(e){for(var t=[],n=/\w|_|-/,r=0;r<e.length;r++){var i=e.substring(r,r+1);n.test(i)?t.push(i):t.push("\\"+i)}return t.join("")}(e.attr("id"))}else e instanceof Event||e instanceof n.Event?("pageX"in e||"pageY"in e)&&((s={}).x=o.getCSSLengthAsFloat(e.pageX),s.y=o.getCSSLengthAsFloat(e.pageY)):e&&("x"in e||"y"in e)&&((s={}).x=o.getCSSLengthAsFloat(e.x),s.y=o.getCSSLengthAsFloat(e.y));return{of:s}},m.coerceToJet=function(e,t){e||(e={});var r=m._parseJSON(e);r&&(e=r),t||(t={});var i=t.my,o=t.at,s=t.collision,a=t.of,l=m._coerceMyAtToJet("my",e.my,e.offset,i),c=m._coerceMyAtToJet("at",e.at,null,o),u={offset:{x:l.offset.x+c.offset.x,y:l.offset.y+c.offset.y}};delete l.offset,delete c.offset;var d=n.extend({},l,c,u,m._coerceCollisionToJet(e.collision,s),m._coerceOfToJet(e.of,a),function(e,t){return{using:n.isFunction(e)?e:t}}(e.using,undefined));return d},m.coerceToJqUi=function(e){function r(t,n){var r=[];if(e[t][n]?r.push(e[t][n]):r.push("center"),"my"===t&&e.offset){var i="horizontal"===n?"x":"y",o=e.offset[i];isNaN(o)||0===o||(r.push(o>0?"+":""),r.push(Math.floor(o).toString()))}return r.join("")}var i={};["my","at"].forEach(function(t){if(e[t]){var n=[];n.push(r(t,"horizontal")),n.push(" "),n.push(r(t,"vertical")),i[t]=n.join("")}});var o=e.of;if(t.StringUtils.isString(o))i.of="window"===o?window:o;else if(o&&!t.StringUtils.isString(o)&&"x"in o&&"y"in o){var s=o.x,a=o.y,l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,1,s,a,s,a,!1,!1,!1,!1,0,null),i.of=n.Event(l,{pageX:s,pageY:a})}else i.of=o;return e.collision&&(i.collision=e.collision),e.using&&(i.using=e.using),i},m.calcAvailablePopupSize=function(e,t,r){var i,s,a,l,c=n.position.getWithinInfo(r||window),u=n.position.getScrollInfo(c),d="rtl"===o.getReadingDirection(),h=d?u.width:0,p=d?0:u.width,f=t.element,_=t.target,m=c.isWindow?c.scrollLeft:0,g=c.isWindow?c.scrollTop:0,v=f.left,y=f.left+f.width,E=f.top,b=f.top+f.height,S=_.left,T=_.left+_.width,C=_.top,P=_.top+_.height,O=c.offset.left+m+h,A=c.offset.left+c.width+m-p,I=c.offset.top+g,R=c.offset.top+c.height+g-u.height;return v<S?(i=O,s=y<=S?S:y<=T?Math.min(T,A):A):v===S?S-O>A-T?(i=O,s=T):(i=S,s=A):v<T?(i=S,s=y<=T?T:A):(i=T,s=A),E<C?(a=I,l=b<=C?C:b<=P?Math.min(P,R):R):E===C?(a=C,l=R):E<P?(a=C,l=b<=P?P:R):(a=P,l=R),{width:s-i,height:l-a}},function(){var e,r=Math.max,i=Math.abs;const s=/left|center|right/,a=/top|center|bottom/,l=/[+-]\d+(\.[\d]+)?%?/,c=/^\w+/,u=/%$/;var d=n.fn.position,h=n.position.getWithinInfo;function p(e,t,n){return[parseFloat(e[0])*(u.test(e[0])?t/100:1),parseFloat(e[1])*(u.test(e[1])?n/100:1)]}function f(e,t){return parseInt(n.css(e,t),10)||0}n.position={getWithinInfo:h.bind(this),scrollbarWidth:function(){if(void 0!==e)return e;var t,r,i=document.createElement("div");i.style.display="block",i.style.position="absolute",i.style.width="50px",i.style.height="50px",i.style.overflow="hidden";var o=document.createElement("div");return o.style.height="100px",o.style.width="auto",i.appendChild(o),n("body").append(n(i)),t=o.offsetWidth,i.style.overflow="scroll",t===(r=o.offsetWidth)&&(r=i.clientWidth),n(i).remove(),e=t-r},getScrollInfo:function(e){var t=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),r=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),i="scroll"===t||"auto"===t&&e.width<e.element[0].scrollWidth;return{width:"scroll"===r||"auto"===r&&e.height<e.element[0].scrollHeight?n.position.scrollbarWidth():0,height:i?n.position.scrollbarWidth():0}}},n.fn.position=function(e){if(!e||!e.of)return d.apply(this,arguments);var o,u,h,_,m,g,v="string"==typeof(e=n.extend({},e)).of?n(document).find(e.of):n(e.of),y=n.position.getWithinInfo(e.within),E=n.position.getScrollInfo(y),b=(e.collision||"flip").split(" "),S={};return g=function(e){var n,r=e[0];if(9===r.nodeType)return{width:e.width(),height:e.height(),offset:{top:0,left:0}};if(null!=(n=r)&&n===n.window){var i=t.AgentUtils.getAgentInfo(),o=t.AgentUtils.OS.ANDROID===i.os||t.AgentUtils.OS.IOS===i.os;return{width:e.width(),height:o?r.innerHeight:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}}return r.preventDefault?{width:0,height:0,offset:{top:r.pageY,left:r.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}(v),v[0].preventDefault&&(e.at="left top"),u=g.width,h=g.height,_=g.offset,m=n.extend({},_),n.each(["my","at"],function(){var t,n,r=(e[this]||"").split(" ");1===r.length&&(r=s.test(r[0])?r.concat(["center"]):a.test(r[0])?["center"].concat(r):["center","center"]),r[0]=s.test(r[0])?r[0]:"center",r[1]=a.test(r[1])?r[1]:"center",t=l.exec(r[0]),n=l.exec(r[1]),S[this]=[t?t[0]:0,n?n[0]:0],e[this]=[c.exec(r[0])[0],c.exec(r[1])[0]]}),1===b.length&&(b[1]=b[0]),"right"===e.at[0]?m.left+=u:"center"===e.at[0]&&(m.left+=u/2),"bottom"===e.at[1]?m.top+=h:"center"===e.at[1]&&(m.top+=h/2),o=p(S.at,u,h),m.left+=o[0],m.top+=o[1],this.each(function(){var t,s,a=n(this),l=a.outerWidth(),c=a.outerHeight(),d=f(this,"marginLeft"),g=f(this,"marginTop"),T=l+d+f(this,"marginRight")+E.width,C=c+g+f(this,"marginBottom")+E.height,P=n.extend({},m),O=p(S.my,a.outerWidth(),a.outerHeight());"right"===e.my[0]?P.left-=l:"center"===e.my[0]&&(P.left-=l/2),"bottom"===e.my[1]?P.top-=c:"center"===e.my[1]&&(P.top-=c/2),P.left+=O[0],P.top+=O[1],t={marginLeft:d,marginTop:g},n.each(["left","top"],function(r,i){n.ui.position[b[r]]&&n.ui.position[b[r]][i](P,{targetWidth:u,targetHeight:h,elemWidth:l,elemHeight:c,collisionPosition:t,collisionWidth:T,collisionHeight:C,offset:[o[0]+O[0],o[1]+O[1]],my:e.my,at:e.at,within:y,elem:a})}),P.left=Math.round(P.left),P.top=Math.round(P.top),e.using&&(s=function(t){var n=_.left-P.left,o=n+u-l,s=_.top-P.top,d=s+h-c,p={target:{element:v,left:_.left,top:_.top,width:u,height:h},element:{element:a,left:P.left,top:P.top,width:l,height:c},horizontal:o<0?"left":n>0?"right":"center",vertical:d<0?"top":s>0?"bottom":"middle"};u<l&&Math.abs(n+o)<u&&(p.horizontal="center"),h<c&&Math.abs(s+d)<h&&(p.vertical="middle"),r(i(n),i(o))>r(i(s),i(d))?p.important="horizontal":p.important="vertical",e.using.call(this,t,p)}),a.offset(n.extend(P,{using:s}))})};var _=n.ui.position.flip.left;n.ui.position.flip={left:_.bind(this),top:function(e,t){var n,r,i=t.within,o=i.offset.top+i.scrollTop,s=i.height,a=i.isWindow?i.scrollTop:i.offset.top,l=e.top-t.collisionPosition.marginTop,c=l-a,u=l+t.collisionHeight-s-a;n="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,r="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0;var d,h,p=-2*t.offset[1];c<0?((d=e.top+n+r+p+t.collisionHeight-s-o)<0||d<Math.abs(c))&&u<0&&c>u&&(e.top+=n+r+p):u>0&&((h=e.top-t.collisionPosition.marginTop+n+r+p-a)>0||Math.abs(h)<u)&&(e.top+=n+r+p)}},n.ui.position.fit={left:function(e,t){var n,r=t.within,i=r.isWindow?r.scrollLeft:r.offset.left,o=r.width,s=e.left-t.collisionPosition.marginLeft,a=i-s,l=s+t.collisionWidth-o-i;t.collisionWidth>o?a>0&&l<=0?(n=e.left+a+t.collisionWidth-o-i,e.left+=a-n):e.left=l>0&&a<=0?i:a>l?i+o-t.collisionWidth:i:a>0?e.left+=a:l>0?e.left-=l:e.left=Math.max(e.left-s,e.left),e.left<0&&(e.left=0)},top:function(e,t){var n,r=t.within,i=r.isWindow?r.scrollTop:r.offset.top,o=t.within.height,s=e.top-t.collisionPosition.marginTop,a=i-s,l=s+t.collisionHeight-o-i;t.collisionHeight>o?a>0&&l<=0?(n=e.top+a+t.collisionHeight-o-i,e.top+=a-n):e.top=l>0&&a<=0?i:a>l?i+o-t.collisionHeight:i:a>0?e.top+=a:l>0?e.top-=l:e.top=Math.max(e.top-s,e.top),e.top<0&&(e.top=0)}},n.ui.position.flipcenter={left:function(e,t){var r=e.left;n.ui.position.flip.left.call(this,e,t);var i=t.within,s=i.isWindow?i.scrollLeft:i.offset.left,a=i.width,l=e.left-t.collisionPosition.marginLeft,c=s-l,u=l+t.collisionWidth-a-s;(c>0||u>0)&&("right"===t.at[0]?r-=t.targetWidth/2:"left"===t.at[0]&&(r+=t.targetWidth/2),((r-=("rtl"===o.getReadingDirection()?-1:1)*(t.elemWidth/2))<s||r+t.elemWidth>a-s)&&(n.ui.position.fit.left.call(this,e,t),r=e.left),e.left=Math.max(0,r))},top:function(e,t){var r=e.top;n.ui.position.flip.top.call(this,e,t);var i=t.within,o=i.isWindow?i.scrollTop:i.offset.top,s=t.within.height,a=e.top-t.collisionPosition.marginTop,l=o-a,c=a+t.collisionHeight-s-o;(l>0||c>0)&&("top"===t.at[1]?r+=t.targetHeight/2:"bottom"===t.at[1]&&(r-=t.targetHeight/2),r+=t.elemHeight/2,e.top=Math.max(0,r))}}}();const g=function(){this.Init()};t._registerLegacyNamespaceProp("PopupLiveRegion",g),t.Object.createSubclass(g,t.Object,"oj.PopupLiveRegion"),g.prototype.Init=function(){g.superclass.Init.call(this),isNaN(g._refCounter)?g._refCounter=1:g._refCounter+=1},g.prototype.destroy=function(){if(!isNaN(g._refCounter)&&(g._refCounter-=1)<1){var e=n(document.getElementById(g._POPUP_LIVE_REGION_ID));e.length>0&&e.remove()}},g.prototype.announce=function(e){if(!t.StringUtils.isEmpty(e)){var r=g._getLiveRegion();r.children().remove(),setTimeout(function(){n("<div>").text(e).appendTo(r)},250)}},g._getLiveRegion=function(){var e=n(document.getElementById(g._POPUP_LIVE_REGION_ID));return 0===e.length&&((e=n("<div>")).attr({id:g._POPUP_LIVE_REGION_ID,role:"log","aria-live":"polite","aria-relevant":"additions"}),e.addClass("oj-helper-hidden-accessible"),e.appendTo(document.body)),e},g._POPUP_LIVE_REGION_ID="__oj_popup_arialiveregion";const v=function(e,r,i,o,s){t.Assert.assertPrototype(e,n),t.Assert.assertString(r),t.Assert.assertFunction(i),t.Assert.assertStringOrNull(o),this._options={insertBefore:!1,preventKeyEvents:!0},s&&(this._options=Object.assign({},this._options,s)),this._sibling=e,this._message=r,this._callback=i,this._id=o,this.Init()};t._registerLegacyNamespaceProp("PopupSkipLink",v),t.Object.createSubclass(v,t.Object,"oj.PopupSkipLink"),v.prototype.Init=function(){v.superclass.Init.call(this);var e=this._sibling,t=this._callback,r=this._message,i=this._options.insertBefore,o=this._options.preventKeyEvents;this._message=null;var s=this._id;this._id=null;var a=n(document.getElementById(s));a.length<1&&(a=n("<a>").attr({tabindex:"-1",href:"#",role:"link"})),a.attr("id",s),a.addClass("oj-helper-hidden-accessible"),a.text(r),i?a.insertBefore(e):a.insertAfter(e),a.on("click",v._activateHandler.bind(this,t)),o&&a.on("keydown keyup keypress",v._keyHandler),e[0][v._SKIPLINK_ATTR]=a},v._activateHandler=function(e,t){_.eatEvent(t),window.setImmediate(e)},v._keyHandler=function(e){e.keyCode===n.ui.keyCode.ENTER&&_.eatEvent(e)},v.prototype.destroy=function(){var e=this._sibling;if(delete this._sibling,delete this._callback,e){var t=e[0][v._SKIPLINK_ATTR];delete e[0][v._SKIPLINK_ATTR],t&&(t.off("click keydown keyup keypress"),t.remove())}},v.prototype.getLink=function(){var e,t=this._sibling;return t&&(e=t[0][v._SKIPLINK_ATTR]),e},v._SKIPLINK_ATTR=Symbol("ojSkipLink");const y=function(e,t,n,r){this._element=e,this._operation=t,this._widgetName=n,this._isCustomElement=!!r,this.Init()};t._registerLegacyNamespaceProp("PopupWhenReadyMediator",y),t.Object.createSubclass(y,t.Object,"oj.PopupWhenReadyMediator"),y.prototype.Init=function(){y.superclass.Init.call(this),this._resolvedQueue=[],this._callback=this._eventHandler.bind(this);var e=this._operation,t=["oj"];this._isCustomElement?(t.push(e.charAt(0).toUpperCase()),t.push(e.slice(1))):t.push(e);var n=t.join("");this._eventType=n,this._element.on(n,this._callback);var r=l.getContext(this._element[0]).getBusyContext(),i={description:this._getBusyStateDescription.bind(this,this._element,this._operation,this._widgetName)},o=r.addBusyState(i);this.AddPromiseExecutor(o),this._whenReadyPromise=new Promise(this.AddPromiseExecutor.bind(this))},y.prototype._getBusyStateDescription=function(e,t,n){return n+" identified by '"+e.attr("id")+"' is busy animating on the '"+t+"' operation."},y.prototype._deliverResolved=function(e){var t=this._resolvedQueue;this._resolvedQueue=null;var n=e||this._operation;this._operation=null;for(var r=0;r<t.length;r++)try{t[r](n)}catch(e){i.error("Error resolving whenReady promises:\n%o",e)}this._whenReadyPromise=Promise.resolve("none")},y.prototype.destroy=function(){if(this._resolvedQueue&&this._deliverResolved("none"),this._callback){var e=this._eventType;this._element.off(e,this._callback)}this._callback=null,this._element=null,this._operation=null,this._whenReadyPromise=null,this._widgetName=null,this._eventType=null},y.prototype.getWhenReadyPromise=function(){return this._whenReadyPromise},y.prototype._eventHandler=function(e){e.target===this._element[0]&&(this._element.off(e.type,this._callback),this._deliverResolved(),this._callback=null)},y.prototype._getPendingOperation=function(){return this._operation?this._operation:"none"},y.prototype.AddPromiseExecutor=function(e,t){this._resolvedQueue&&this._resolvedQueue.push(e)},y.prototype.isOperationPending=function(e,t,n,r){var o=!1,s=this._widgetName,a=this._getPendingOperation();if(t===a)i.info("An %s instance invoked a '%s' operation while pending animation of the same type of operation.  The second request will be ignored.",s,t),o=!0;else if("none"!==a){i.info("An %s instance invoked a '%s' operation while pending animation of a '%s' operation. The second request will be invoked after the pending operation completes.",s,t,a),new Promise(this.AddPromiseExecutor.bind(this)).then(function(){this[n].apply(this,r)}.bind(e)),o=!0}return o};class E extends u.Component{constructor(){super(...arguments),this._setRootRef=e=>{this._rootRef=e}}render(e){return c.jsx("div",{style:{display:"none"},ref:this._setRootRef,children:e.children})}componentDidMount(){this._popup=n(this._rootRef.firstChild);const e={[p.OPTION.POPUP]:this._popup,[p.OPTION.EVENTS]:{[p.EVENT.POPUP_AUTODISMISS]:this.props.autoDismiss,[p.EVENT.POPUP_REFRESH]:function(){this._popup.position(this._getPosition())}.bind(this)},[p.OPTION.LAYER_SELECTORS]:this.props.layerSelectors,[p.OPTION.CUSTOM_ELEMENT]:!0,[p.OPTION.LAUNCHER]:n(this._rootRef),[p.OPTION.POSITION]:this._getPosition()};p.getInstance().open(e)}componentWillUnmount(){p.getInstance().close({[p.OPTION.POPUP]:this._popup})}componentDidUpdate(){this._popup.position(this._getPosition())}_getPosition(){return m.normalizeHorizontalAlignment(this.props.position,"rtl"===o.getReadingDirection())}}var b;E.defaultProps={autoDismiss:null,layerSelectors:"",position:{}};const S=d.ElementUtils.getUniqueId.bind(null,null),T=Symbol();class C{}b=C,C._getPopupServiceOptions=(e,n,r,i)=>{const o={},s=t.PopupService.OPTION;o[s.POPUP]=e,o[s.LAUNCHER]=n,o[s.LAYER_SELECTORS]="dialog"===i?"oj-dialog-layer":"messages"===i?"oj-messages-layer":"oj-popup-layer",o[s.LAYER_LEVEL]=r??t.PopupService.LAYER_LEVEL.NEAREST_ANCESTOR,o[s.CUSTOM_ELEMENT]=!1;const a=t.PopupService.EVENT;return o[s.EVENTS]={[a.POPUP_BEFORE_OPEN]:()=>{},[a.POPUP_AFTER_OPEN]:()=>{},[a.POPUP_BEFORE_CLOSE]:()=>{},[a.POPUP_AFTER_CLOSE]:()=>{},[a.POPUP_AUTODISMISS]:()=>{},[a.POPUP_REFRESH]:()=>{},[a.POPUP_CLOSE]:()=>{b._closeLayerHost(e,n)},[a.POPUP_REMOVE]:()=>{}},o},C.getLayerHost=(e,t,n)=>{const r=e.anchorRef;let i,o;return e[T]?i=document.getElementById(e[T]):e[T]=`__v_layer_host_${S()}`,i||(o=null!=r?r.current:e,b._openLayerHost(e[T],o,t,n))},C._openLayerHost=(e,n,r,i)=>{if(!e)return;let o=document.getElementById(e);o||(o=document.createElement("div"),o.setAttribute("id",e),o.setAttribute("data-oj-binding-provider","preact"),document.body.appendChild(o));const s=t.PopupService.getInstance(),a=b._getPopupServiceOptions(o,n,r,i);return s.open(a),o},C._closeLayerHost=(e,n)=>{if(!e)return;const r=t.PopupService.getInstance(),i=b._getPopupServiceOptions(e,n);r.close(i),e.remove()},C.onLayerUnmount=(e,n)=>{if(!e)return;const r=document.getElementById(e[T]);if(r&&0===r.children.length){delete e[T];const n=t.PopupService.getInstance(),i=b._getPopupServiceOptions(r,null);n.close(i),r.remove()}},t._registerLegacyNamespaceProp("VLayerUtils",C),e.PopupLiveRegion=g,e.PopupService=p,e.PopupSkipLink=v,e.PopupWhenReadyMediator=y,e.PositionUtils=m,e.VLayerUtils=C,e.VPopup=E,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojkeyboardfocus-utils",["exports","jquery","ojs/ojcore-base","ojs/ojpopupcore","ojs/ojdomutils"],function(e,t,n,r,i){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;const o="aria-readonly",s="data-oj-tabmod",a="data-oj-ariareadonlymod",l='input, select, button, a[href], textarea, object, [tabIndex]:not([tabIndex="-1"]), [tabindex]:not([tabindex="-1"])',c="["+s+"], "+l,u=function(e){return!(0===e.offsetHeight||0===e.offsetWidth||"hidden"===window.getComputedStyle(e).visibility)},d=function(e){var t=[];let n=e.querySelectorAll(c);for(var r=0;r<n.length;r++){var i=n[r];!i.disabled&&u(i)&&t.push(i)}return t},h=function(e,t){var r=[],i=n.AgentUtils.getAgentInfo(),o=!0;if(n.AgentUtils.BROWSER.IE===i.browser&&null==e.parentNode&&(o=!1),o)for(var s=e.querySelectorAll(l),a=s.length,c=0;c<a;c++){var d=s[c];if(!d.disabled&&(t||u(d)))d.tabIndex>=0&&r.push(d)}return r},p=function(e){var t=e.getAttribute(o);e.setAttribute(a,t),e.removeAttribute(o)},f=function(e){var t=e.tabIndex;e.setAttribute(s,t),e.tabIndex=-1};e.checkVisibility=u,e.disableAllFocusableElements=function(e,t,n){for(var r=[],i=h(e,!0),s=0;s<i.length;s++)t&&i[s]===document.activeElement||(f(i[s]),r.push(i[s])),n&&i[s].hasAttribute(o)&&p(i[s]);return r},e.disableElement=f,e.enableAllFocusableElements=function(e){for(var t=e.querySelectorAll("["+s+"]"),n=0;n<t.length;n++){var r=parseInt(t[n].getAttribute(s),10);if(t[n].removeAttribute(s),t[n].tabIndex=r,t[n].hasAttribute(a)){var i=t[n].getAttribute(a);t[n].removeAttribute(a),t[n].setAttribute(o,i)}}return t},e.getActionableElementsInNode=d,e.getAllLogicalChildPopups=function(e){for(var r,o={popups:n.ZOrderUtils.findOpenPopups()},s=function(e){var r,s=[];for(r=0;r<o.popups.length;r++){var a=o.popups[r].firstElementChild,l=i.getLogicalParent(t(a));null!=l&&t(e).has(l.get(0)).length>0&&n.ZOrderUtils.getStatus(a)===n.ZOrderUtils.STATUS.OPEN&&s.push(a)}return{popups:s}},a=s(e),l=function(e){var t=s(e);for(let e=0;e<t.popups.length;e++)-1===a.popups.indexOf(t.popups[e])&&a.popups.push(t.popups[e])},c=0;c<a.popups.length;){for(r=c;r<a.popups.length;r++)l(a.popups[r]);c=r}return a.popups},e.getFocusableElementsInNode=h,e.getLogicalChildPopup=function(e){for(var r=n.ZOrderUtils.findOpenPopups(),o=0;o<r.length;o++){var s=r[o].firstElementChild,a=i.getLogicalParent(t(s));if(null!=a&&t(e).has(a.get(0)).length>0&&n.ZOrderUtils.getStatus(s)===n.ZOrderUtils.STATUS.OPEN)return s}return null},e.isActionableElement=function(e){var t=e.parentNode;if(null!=t)for(var n=d(t),r=0;r<n.length;r++)if(n[0]===e)return!0;return!1},Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojpreact-managetabstops",["exports","preact/jsx-runtime","preact","preact/hooks","@oracle/oraclejet-preact/hooks/UNSAFE_useTabbableMode","ojs/ojkeyboardfocus-utils"],function(e,t,n,r,i,o){"use strict";e.ManageTabStops=function({children:e}){let s=r.useRef(null),a=r.useRef(!1);const{isTabbable:l}=i.useTabbableMode();r.useEffect(()=>{s.current&&(a.current&&l||(o.disableAllFocusableElements(s.current),a.current=!0),l&&o.enableAllFocusableElements(s.current))},[l]);const c=e;if(c.ref){const e=c.ref;c.ref=t=>{s.current=t,"function"==typeof e?e(t):e.current=t}}else c.ref=s;return t.jsx(n.Fragment,{children:e})},Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojvcomponent-binding",["exports"],function(e){"use strict";e.consumedBindings=function(e){return function(e){}},e.providedBindings=function(e){return function(e){}},Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojvcomponent-remounter",["exports","preact"],function(e,t){"use strict";class n extends t.Component{render(e){let n=t.toChildArray(e?.children),r=n[0];if(this._isVNode(r)&&"function"==typeof r.type&&r.type.__ojIsEnvironmentWrapper&&(n=t.toChildArray(r.props?.children),r=n[0]),1!==n.length||!this._isVNode(r)||"string"!=typeof r.type)throw new Error("The only child of the Remounter must be a custom element node");const i=this._getElementKey(r);return[t.cloneElement(r,{key:i})]}_getElementKey(e){const n=t.toChildArray(e.props?.children).map(e=>this._isVNode(e)?this._getSlotInfo(e):e);return JSON.stringify(n)}_getSlotInfo(e){let t=e.type;return t="string"==typeof t?t:t.name||String(t),{key:e.key,type:t,slot:e.props?.slot}}_isVNode(e){return"string"!=typeof e&&isNaN(e)}}e.Remounter=n,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojdataproviderhandler",["exports","preact/jsx-runtime","preact"],function(e,t,n){"use strict";class r{static async getUpdatedItemsFromMutationDetail(e,t,n){const{add:i,remove:o,update:s}=e??{},a=new Map;for(const[e,n]of t.entries())a.set(n.key,e);let l=[...t];return o&&(l=r._removeItemsFromDetail(o,l,a)),i&&(l=await r._addItemsFromDetail(i,l,a,n)),s&&(l=await r._updateItemsFromDetail(s,l,a,n)),l}static _addItemsAtEnd(e,t,n){const r=[...n];return e.forEach((e,n)=>{const i={data:e,key:t[n]?.key,metadata:t[n]};r.push(i)}),r}static _addItemsAtIndices(e,t,n,r){const i=[...r];return e.forEach((e,r)=>{const o={data:t[r],key:n[r]?.key,metadata:n[r]};e>=0?i.splice(e,0,o):i.push(o)}),i}static _addItemsBeforeKeys(e,t,n,i){const o=[],s=[];return e.forEach(e=>{o.push(r._getIndexByKey(i,e)),s.push({key:e})}),r._addItemsAtIndices(o,t,s,n)}static async _addItemsFromDetail(e,t,n,i){const{addBeforeKeys:o,afterKeys:s,data:a,indexes:l,keys:c,metadata:u}=e;let d=[...t],h=a||[],p=u||[];if(0===h.length&&c?.size){const e=await r._fetchDataByKeys(i,c)??[];h=e.map(e=>e.data),p=e.map(e=>e.metadata)}return 0===p.length&&c?.size&&(p=[...c].map(e=>({key:e}))),h.length&&(d=l?.length?r._addItemsAtIndices(l,h,p,d):o?.length?r._addItemsBeforeKeys(o,h,d,n):s?.size?r._addItemsBeforeKeys([...s],h,d,n):r._addItemsAtEnd(h,p,d)),d}static async _fetchDataByKeys(e,t){const n=[],r=(await e.fetchByKeys({keys:t})).results;for(const e of t)if(r.has(e)){const t=r.get(e);n.push({...t,key:e})}return n}static _getIndexByKey(e,t){return e.has(t)?e.get(t):-1}static _removeItemsAtIndices(e,t){const n=[...t];return e.sort((e,t)=>t-e),e.forEach(e=>{e<n.length&&n.splice(e,1)}),n}static _removeItemsAtKeys(e,t,n){const i=[];return e.forEach(e=>{const t=r._getIndexByKey(n,e);-1!==t&&i.push(t)}),r._removeItemsAtIndices(i,t)}static _removeItemsFromDetail(e,t,n){const{indexes:i,keys:o}=e;let s=[...t];return i?.length?s=r._removeItemsAtIndices(i,s):o?.size&&(s=r._removeItemsAtKeys(o,s,n)),s}static _updateItemsAtIndices(e,t,n,r){const i=[...r];return e.forEach((e,r)=>{if(i[e]){const o={data:t[r],key:n[r]?.key,metadata:n[r]};i.splice(e,1,o)}}),i}static _updateItemsAtKeys(e,t,n,r,i){const o=[...r];return e.forEach(e=>{const r=this._getIndexByKey(i,e),s={data:t[r],key:n[r]?.key,metadata:n[r]};r>=0&&o.splice(r,1,s)}),o}static async _updateItemsFromDetail(e,t,n,i){const{data:o,indexes:s,keys:a,metadata:l}=e;let c=[...t],u=o||[],d=l||[];if(0===u.length&&a?.size){const e=await r._fetchDataByKeys(i,a)??[];u=e.map(e=>e.data),d=e.map(e=>e.metadata)}return 0===d.length&&a?.size&&(d=[...a].map(e=>({key:e}))),u.length&&(s?.length?c=r._updateItemsAtIndices(s,u,d,c):a?.size&&(c=r._updateItemsAtKeys(a,u,d,c,n))),c}}class i{constructor(e,t,n){this._handleMutateEvent=async e=>{const{detail:t}=e,n=this._addBusyState("updating data from mutation event"),i=await r.getUpdatedItemsFromMutationDetail(t,this._currentData,this._dataProvider);n?.(),this._currentData=i,this._callback?.onDataUpdated?.(i)},this._handleRefreshEvent=e=>{this._fetchDataAndNotify()},this._addBusyState=t,this._callback=n,this._dataProvider=e,this._currentData=[],e.addEventListener("refresh",this._handleRefreshEvent),e.addEventListener("mutate",this._handleMutateEvent),this._fetchDataAndNotify()}destroy(){this._callback=void 0,this._currentData=[],this._dataProvider.removeEventListener("refresh",this._handleRefreshEvent),this._dataProvider.removeEventListener("mutate",this._handleMutateEvent)}async _fetchData(){const e=[],t=this._dataProvider.fetchFirst({size:-1});for await(const n of t){const t=n.data.map((e,t)=>({data:e,key:n.metadata[t].key,metadata:n.metadata[t]}));e.push(...t)}return this._currentData=e.slice(),e}async _fetchDataAndNotify(){const e=this._addBusyState("fetching data"),t=await this._fetchData();this._callback?.onDataUpdated?.(t),e()}}e.withDataProvider=function(e,r){var o;return(o=class extends n.Component{constructor(e){super(e),this._handleDataUpdate=e=>{this.setState({fetchedData:e})},this.state={fetchedData:[]}}componentDidMount(){this._initDataProviderHandler()}componentDidUpdate(e){this.props.data!==e.data&&this._resetDataProviderHandler()}componentWillUnmount(){this._releaseDataProviderHandler()}render(n,i){const{data:o,addBusyState:s,...a}=n,{fetchedData:l}=i,c={[r]:l,...a};return t.jsx(e,{...c})}_initDataProviderHandler(){const{data:e,addBusyState:t}=this.props;null!=e&&(this._dataProviderHandler=new i(e,t,{onDataUpdated:this._handleDataUpdate}))}_releaseDataProviderHandler(){this._dataProviderHandler?.destroy(),this._dataProviderHandler=void 0}_resetDataProviderHandler(){this._releaseDataProviderHandler(),this._initDataProviderHandler()}}).displayName=`WithDataProvider(${function(e){return e.displayName??e.name??"Component"}(e)})`,o},Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojexpparser",["exports"],function(e){"use strict";
/**
   * @license
   * Copyright (c) 2019 2024, Oracle and/or its affiliates.
   * Licensed under The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   *
   * Portions of this code are based on on JSEP Parser
   * @license
   * JavaScript Expression Parser (JSEP) 1.3.8
   * https://github.com/EricSmekens/jsep
   */const t=function(e){return e.type===r?e.name:e.value},n="Compound",r="Identifier",i="MemberExpression",o="Literal",s="CallExpression",a="UnaryExpression",l="BinaryExpression",c="LogicalExpression",u="ConditionalExpression",d="ArrayExpression",h="ObjectExpression",p="FunctionExpression",f="NewExpression",_="Property",m="TemplateLiteral",g="TemplateElement";e.ARRAY_EXP=d,e.BINARY_EXP=l,e.CALL_EXP=s,e.COMPOUND=n,e.CONDITIONAL_EXP=u,e.ExpParser=function(){function e(e,t){const n=e.expr,r=n.length,i=[];for(;e.index<r;){v(e);const o=n.charCodeAt(e.index);if(o===t)break;if(o===L||o===A)e.index++;else{const t=y(e);t?i.push(t):e.index<r&&Z('Unexpected "'+n.charAt(e.index)+'"',e.index)}}return i}function v(e){for(var t=e.expr,n=t.charCodeAt(e.index);32===n||9===n||10===n||13===n;)n=t.charCodeAt(++e.index)}function y(e){var t,n,r=e.expr,i=function(e){var t,n,r,i,o,s,a,l,c,u;if(s=b(e),n=E(e),!n)return s;o={value:n,prec:Y(n)},a=b(e),a||Z("Expected expression after "+n,e.index);i=[s,o,a],c=n,u=o.prec;for(;(n=E(e))&&0!==(r=Y(n,c,u));){for(o={value:n,prec:r},c=n,u=r;i.length>2&&r<=i[i.length-2].prec;)a=i.pop(),t=$(n=i.pop().value,s=i.pop(),a,e),i.push(t);(t=b(e))||Z("Expected expression after "+c,e.index),i.push(o,t)}l=i.length-1,t=i[l];for(;l>1;)t=$(i[l-1].value,i[l-2],t,e),l-=2;return t}(e);return v(e),r.charCodeAt(e.index)!==D?i:(e.index++,(t=y(e))||Z("Expected expression",e.index),v(e),r.charCodeAt(e.index)===M?(e.index++,(n=y(e))||Z("Expected expression",e.index),{type:u,test:i,consequent:t,alternate:n}):void Z("Expected :",e.index))}function E(e){var t=e.expr;v(e);for(var n=t.substr(e.index,z),r=n.length;r>0;){if(G[n]&&(!J(t.charCodeAt(e.index))||e.index+n.length<t.length&&!Q(t.charCodeAt(e.index+n.length))))return e.index+=r,n;n=n.substr(0,--r)}return!1}function b(n){var i,s,l,c=n.expr;if(v(n),X(i=c.charCodeAt(n.index))||i===O)return function(e){var t,n,r=e.expr,i="";for(;X(r.charCodeAt(e.index));)i+=r.charAt(e.index++);if(r.charCodeAt(e.index)===O)for(i+=r.charAt(e.index++);X(r.charCodeAt(e.index));)i+=r.charAt(e.index++);if(t=r.charAt(e.index),"e"===t||"E"===t){for(i+=r.charAt(e.index++),"+"!==(t=r.charAt(e.index))&&"-"!==t||(i+=r.charAt(e.index++));X(r.charCodeAt(e.index));)i+=r.charAt(e.index++);X(r.charCodeAt(e.index-1))||Z("Expected exponent ("+i+r.charAt(e.index)+")",e.index)}n=r.charCodeAt(e.index),J(n)?Z("Variable names cannot start with a number ("+i+r.charAt(e.index)+")",e.index):n===O&&Z("Unexpected period",e.index);return{type:o,value:parseFloat(i),raw:i}}(n);if(i===I||i===R||i===j)return P(n);if(i===F)return function(e){var n=e.expr;e.index++;var i,o=[],s=0,a=n.length;for(;e.index<a&&!i;){v(e);var l=n.charCodeAt(e.index);if(l===B)i=!0,e.index++;else if(l===A)e.index++,++s!==o.length&&Z("Unexpected token ,",e.index);else{var c=l===I||l===R?S(e):T(e);if(v(e),l=n.charCodeAt(e.index),c.type!==r||l!==A&&l!==B)if(l===M){e.index++;var u=e.writer;"_ko_property_writers"===t(c)&&(e.writer=1);try{o.push({type:_,key:c,value:y(e),shorthand:!1})}finally{e.writer=u}}else Z("Expected ':'. Found "+String.fromCharCode(l),e.index);else o.push({type:_,key:c,value:c,shorthand:!0})}}i||Z("Expected "+String.fromCharCode(B),e.index);return{type:h,properties:o}}(n);if(i===k)return function(t){const n=t.expr;let r=n.charCodeAt(t.index);if(r===k){const i={type:m,quasis:[],expressions:[]};let o="",s="",a=!1;const l=n.length,c=()=>i.quasis.push({type:g,value:{raw:s,cooked:o},tail:a});for(;t.index<l;){let l=n.charAt(++t.index);if("`"===l)return t.index+=1,a=!0,c(),i;if("$"===l&&"{"===n.charAt(t.index+1)){t.index+=2,c(),s="",o="";try{i.expressions.push(...e(t,B))}finally{r=n.charCodeAt(t.index),r!==B&&Z("Unclosed ${ in template literal",n)}}else if("\\"===l)switch(s+=l,l=n.charAt(++t.index),s+=l,l){case"n":o+="\n";break;case"r":o+="\r";break;case"t":o+="\t";break;case"b":o+="\b";break;case"f":o+="\f";break;case"v":o+="\v";break;default:o+=l}else o+=l,s+=l}t.index===l&&Z("Unclosed backtick ` in template literal",n)}return!1}(n);for(l=(s=c.substr(n.index,K)).length;l>0;){if(s in H&&(!J(c.charCodeAt(n.index))||n.index+s.length<c.length&&!Q(c.charCodeAt(n.index+s.length))))return n.index+=l,{type:a,operator:s,argument:b(n),prefix:!0};s=s.substr(0,--l)}var u=n.index,d=n.index+8;return"function"!==c.substring(u,d)||Q(c.charCodeAt(d))?!(!J(i)&&i!==w)&&P(n):(n.index=d,function(e){var t=e.expr;v(e);var n=t.charCodeAt(e.index);n!==w&&Z("Expected (,",e.index);e.index++;var r=C(e,N,!0);v(e),n=t.charCodeAt(e.index),n!==F&&Z("Expected {,",e.index);e.index++,v(e);var i,o=e.index,s=e.index;"return"===t.substring(s,s+6)&&(i=!0,e.index+=6);v(e);var a=y(e);v(e),n=t.charCodeAt(e.index),n===L&&(e.index++,v(e));n=t.charCodeAt(e.index),n!==B&&Z("Expected },",e.index);return e.index++,{type:p,arguments:r,body:a,expr:t.substring(o,e.index-1),return:i}}(n))}function S(e){for(var t,n=e.expr,r="",i=n.charAt(e.index++),s=!1,a=n.length;e.index<a;){if((t=n.charAt(e.index++))===i){s=!0;break}if("\\"===t)switch(t=n.charAt(e.index++)){case"n":r+="\n";break;case"r":r+="\r";break;case"t":r+="\t";break;case"b":r+="\b";break;case"f":r+="\f";break;case"v":r+="\v";break;default:r+=t}else r+=t}return s||Z('Unclosed quote after "'+r+'"',e.index),{type:o,value:r,raw:i+r+i}}function T(e,t){var n,i=e.expr,a=i.charCodeAt(e.index),l=e.index;J(a)?e.index++:Z("Unexpected "+i.charAt(e.index),e.index);for(var c=i.length;e.index<c&&Q(a=i.charCodeAt(e.index));)e.index++;if("new"===(n=i.slice(l,e.index))&&!t){v(e);var u=P(e,s);return u.type!==s&&Z("Expression of type: "+u.type+" not supported for constructor expression"),{type:f,callee:u.callee,arguments:u.arguments}}return W.has(n)?{type:o,value:W.get(n),raw:n}:{type:r,name:n}}function C(e,t,n){for(var r,i,o=e.expr,s=o.length,a=[],l=!1,c=0;e.index<s;){if(v(e),(r=o.charCodeAt(e.index))===t){l=!0,e.index++,t===N&&c&&c>=a.length&&Z("Unexpected token "+String.fromCharCode(t),e.index);break}if(r===A){if(e.index++,++c!==a.length)if(t===N)Z("Unexpected token ,",e.index);else if(t===x)for(var u=a.length;u<c;u++)a.push(null)}else(!(i=n?T(e):y(e))||a.length>c)&&Z("Expected comma",e.index),a.push(i)}return l||Z("Expected "+String.fromCharCode(t),e.index),a}function P(e,t){var n,r,o=e.expr;for(r=(n=o.charCodeAt(e.index))===w?function(e){e.index++;var t=y(e);if(v(e),e.expr.charCodeAt(e.index)===N)return e.index++,t;Z("Unclosed (",e.index)}(e):n===I||n===R?S(e):n===j?function(e){return e.index++,{type:d,elements:C(e,x)}}(e):T(e),v(e),n=o.charCodeAt(e.index);n===O||n===j||n===w||q(e);){if(e.index++,n===O?(v(e),r={type:i,computed:!1,object:r,property:T(e,!0)}):n===D?(e.index++,v(e),r={type:i,computed:!1,optional:!0,object:r,property:T(e,!0)}):n===j?(r={type:i,computed:!0,object:r,property:y(e)},v(e),(n=o.charCodeAt(e.index))!==x&&Z("Unclosed [",e.index),e.index++):n===w&&(r={type:s,arguments:C(e,N),callee:r}),t===r.type)return r;v(e),n=o.charCodeAt(e.index)}return r}this.parse=function(t){var r=e({index:0,expr:t});return 1===r.length?r[0]:{type:n,body:r}};var O=46,A=44,I=39,R=34,w=40,N=41,j=91,x=93,D=63,L=59,M=58,k=96,F=123,B=125;function U(e){return Object.keys(e).reduce(function(e,t){return Math.max(e,t.length)},0)}var V=!0,H={"-":V,"!":V,"~":V,"+":V,typeof:V},G={"=":1,"||":2,"??":2,"&&":3,"|":4,"^":5,"&":6,"==":7,"!=":7,"===":7,"!==":7,"<":8,">":8,"<=":8,">=":8,instanceof:8,"<<":9,">>":9,">>>":9,"+":10,"-":10,"*":11,"/":11,"%":11,"**":12},K=U(H),z=U(G),W=new Map;function Y(e,t,n){const r=G[e]||0;return 12!==r||void 0===t||e!==t?r:.5*(n+13)}function $(e,t,n,r){return"="!==e||r.writer||Z("Unexpected operator '='",r.index),{type:"||"===e||"&&"===e||"??"===e?c:l,operator:e,left:t,right:n}}function q(e){var t=e.expr;return t.charCodeAt(e.index)===D&&t.charCodeAt(e.index+1)===O&&!X(t.charCodeAt(e.index+2))}function X(e){return e>=48&&e<=57}function J(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=128&&!G[String.fromCharCode(e)]}function Q(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e>=128&&!G[String.fromCharCode(e)]}function Z(e,t){var n=new Error(e+" at character "+t);throw n.index=t,n.description=e,n}W.set("true",!0),W.set("false",!1),W.set("null",null),W.set("undefined",void 0)},e.FUNCTION_EXP=p,e.IDENTIFIER=r,e.LITERAL=o,e.LOGICAL_EXP=c,e.MEMBER_EXP=i,e.NEW_EXP=f,e.OBJECT_EXP=h,e.PROPERTY=_,e.TEMPLATE_ELEMENT=g,e.TEMPLATE_LITERAL=m,e.UNARY_EXP=a,e.getKeyValue=t,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojcspexpressionevaluator-internal",["exports","ojs/ojexpparser"],function(e,t){"use strict";
/**
   * @license
   * Copyright (c) 2019 2024, Oracle and/or its affiliates.
   * Licensed under The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   *
   * @license
   * Based on the Expression Evaluator 2.0.0
   * https://github.com/donmccurdy/expression-eval
   * under MIT License
   * @ignore
   */e.CspExpressionEvaluatorInternal=function(e){var n=new t.ExpParser,r=Object.assign({},e);r.globalScope&&r.globalScope.Object||(r.globalScope=Object.assign({Object:Object},r.globalScope)),this.createEvaluator=function(e){var t;try{t=n.parse(e)}catch(t){h(t,e)}var i=r.globalScope;return{evaluate:function(n){var r,o=n;i&&(o=n.concat([i]));try{r=a(t,o)}catch(t){h(t,e)}return r}}},this.evaluate=function(e,t){return a(e,[t])};var i={"||":function(e,t){return e||t()},"??":function(e,t){return e??t()},"&&":function(e,t){return e&&t()},"|":function(e,t){return e|t},"^":function(e,t){return e^t},"&":function(e,t){return e&t},"==":function(e,t){return e==t},"!=":function(e,t){return e!=t},"===":function(e,t){return e===t},"!==":function(e,t){return e!==t},"<":function(e,t){return e<t},">":function(e,t){return e>t},"<=":function(e,t){return e<=t},">=":function(e,t){return e>=t},"<<":function(e,t){return e<<t},">>":function(e,t){return e>>t},">>>":function(e,t){return e>>>t},"+":function(e,t){return e+t},"-":function(e,t){return e-t},"*":function(e,t){return e*t},"/":function(e,t){return e/t},"%":function(e,t){return e%t},"**":function(e,t){return e**t},instanceof:function(e,t){return e instanceof t}},o={"-":function(e){return-e},"+":function(e){return e},"~":function(e){return~e},"!":function(e){return!e},"...":function(e){return new s(e)},typeof:function(e){return typeof e}};function s(e){this.items=function(){return e}}function a(e,n){switch(e.type){case t.IDENTIFIER:return function(e,t){var n=u(e,t);if(n)return n[t];throw new Error("Variable "+t+" is undefined")}(n,e.name);case t.MEMBER_EXP:return c(e,n)[1];case t.LITERAL:return e.value;case t.CALL_EXP:var r,s,p;switch(e.callee.type){case t.IDENTIFIER:p=function(e,t){var n=u(e,t);if(n)return[n,n[t]];throw new Error("Variable "+t+" is undefined")}(n,e.callee.name);break;case t.MEMBER_EXP:p=c(e.callee,n);break;default:s=a(e.callee,n)}return!s&&Array.isArray(p)&&(r=p[0],s=p[1]),"function"!=typeof s&&d("Expression is not a function"),s.apply(r,l(e.arguments,n));case t.UNARY_EXP:var f;try{f=a(e.argument,n)}catch(n){if(e.argument.type!==t.IDENTIFIER)throw n}return o[e.operator](f);case t.BINARY_EXP:return"="===e.operator?function(e,n,r){switch(e.type){case t.IDENTIFIER:var i=e.name,o=u(n,i);o||d("Cannot assign value to undefined variable "+i),o[i]=r;break;case t.MEMBER_EXP:var s=e.computed?a(e.property,n):e.property.name;c(e,n)[0][s]=r;break;default:d("Expression of type: "+e.type+" not supported for assignment")}return r}(e.left,n,a(e.right,n)):i[e.operator](a(e.left,n),a(e.right,n));case t.LOGICAL_EXP:return i[e.operator](a(e.left,n),function(){return a(e.right,n)});case t.CONDITIONAL_EXP:return a(e.test,n)?a(e.consequent,n):a(e.alternate,n);case t.ARRAY_EXP:return l(e.elements,n);case t.OBJECT_EXP:return function(e,n){return e.properties.reduce(function(e,r){return e[t.getKeyValue(r.key)]=a(r.value,n),e},{})}(e,n);case t.FUNCTION_EXP:return function(e,t){return function(){var n=arguments,r=e.arguments.reduce(function(e,t,r){return e[t.name]=n[r],e},{});r.this=this;try{var i=a(e.body,[r].concat(t));if(e.return)return i}catch(t){h(t,e.expr)}}}(e,n);case t.NEW_EXP:return function(e,t){var n=a(e.callee,t);n instanceof Function||d("Node of type "+e.callee.type+" is not evaluated into a constructor");return new(Function.prototype.bind.apply(n,[null].concat(l(e.arguments,t))))}(e,n);case t.TEMPLATE_LITERAL:return function(e,t){const n=e.expressions.map(e=>a(e,t)),r=e.quasis.reduce((e,r,i)=>(e.push(a(r,t)),i<n.length&&e.push(n[i]),e),[]);return r.join("")}(e,n);case t.TEMPLATE_ELEMENT:return e.value.cooked;default:throw new Error("Unsupported expression type: "+e.type)}}function l(e,t){return e.reduce((e,n)=>{const r=a(n,t);return r instanceof s?e.push(...r.items()):e.push(r),e},[])}function c(e,t){var n=a(e.object,t);return!n&&e.optional?[]:e.computed?[n,n[a(e.property,t)]]:[n,n[e.property.name]]}function u(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r instanceof Object&&t in r)return r}return null}function d(e){throw new Error(e)}function h(e,t){throw new Error(e.message+' in expression "'+t+'"')}},Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojvcomponent-template",["exports","ojs/ojlogger","ojs/ojhtmlutils","ojs/ojcustomelement-utils","ojs/ojcustomelement-registry","preact","preact/jsx-runtime","ojs/ojcontext","ojs/ojdataproviderhandler","ojs/ojpreact-managetabstops","ojs/ojbindpropagation","ojs/ojconfig","ojs/ojmetadatautils","ojs/ojcspexpressionevaluator-internal","ojs/ojmonitoring","ojs/ojexpparser"],function(e,t,n,r,i,o,s,a,l,c,u,d,h,p,f,_){"use strict";a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a;class m extends o.Component{constructor(e){super(e),this._resolveConfig=e=>{e.then(t=>{e===this.props.config&&this.setState({view:this._getFragment(t.view),data:t.data})})},this._getFragment=e=>{const t=new DocumentFragment;return e.forEach(e=>{t.appendChild(e.cloneNode(this))}),t},this.state={view:null,data:null}}componentDidMount(){this._resolveConfig(this.props.config)}componentDidUpdate(e,t){this.props.config!==e.config&&this._resolveConfig(this.props.config)}render(){return s.jsx(o.Fragment,{children:this.state.view&&this.props.executeFragment?this.props.executeFragment(null,this.state.view,this.state.data,this.forceUpdate.bind(this),this.props.bindingProvider):null})}}class g extends o.Component{constructor(e){super(e),this._addBusyState=e=>a.getContext(this.props.componentElement).getBusyContext().addBusyState({description:e}),this.BindForEachWithDP=l.withDataProvider(v,"data")}render(e){return Array.isArray(e.data)?s.jsx(y,{data:e.data,itemRenderer:e.itemRenderer}):s.jsx(this.BindForEachWithDP,{addBusyState:this._addBusyState,data:e.data,itemRenderer:e.itemRenderer})}}class v extends o.Component{render(e){const t=e.data.map(e=>e.data);return s.jsx(y,{data:t,itemRenderer:e.itemRenderer})}}class y extends o.Component{render(){const e=this.props.data;return s.jsx(o.Fragment,{children:e?e.map((e,t)=>this.props.itemRenderer({data:e,index:t,observableIndex:()=>t})):[]})}}const E=Symbol(),b=Symbol(),S=Symbol(),T=Symbol(),C=function(e){return e},P="$provided",O=[{type:_.IDENTIFIER,name:"$context"}];class A{constructor(){this._templateAstCache=new WeakMap,this._cspEvaluator=d.getExpressionEvaluator()??new p.CspExpressionEvaluatorInternal}static cleanupTemplateCache(e){e&&e._cachedRows&&(e._cachedRows.forEach(e=>e.dispose()),e._cachedRows=[])}executeFragment(e,t,n,i,o){let s=o;return s||(s=e?r.CustomElementUtils.getElementState(e)?.getBindingProvider():null),!n?.$provided||n.$provided instanceof Map||(n.$provided=new Map(Object.entries(n.$provided))),this._execute({[E]:s,[b]:e,[T]:n},t,n,i)}execute(e,t,n,r,i){const o=t.getAttribute("data-oj-as"),s=this._getContext(r,e,t,n,null,o);return this._execute({[E]:r,[b]:e,[T]:s},t,s,i)}_execute(e,t,n,r){const i=this._getAstViaCache(e,t),s=e[E];if(s){t._cachedRows||Object.defineProperties(t,{_cachedRows:{writable:!0,value:[]}});const e=s.__KoComputed(()=>{if(s.__KoIsInitial())return this._cspEvaluator.evaluate(i,{$context:n,$h:o.h,BindDom:m});A.cleanupTemplateCache(t),r()});return t._cachedRows.push(e),e()}return this._cspEvaluator.evaluate(i,{$context:n,$h:o.h,BindDom:m})}_getContext(e,n,r,i,o,s){if(e){let a=e.__ContextFor(r);return a||(t.info(`Binding context not found when processing template for element with id: ${n.id}. Using binding context for element instead.`),a=e.__ContextFor(n)),e.__ExtendBindingContext(a,i,o,s,n)}const a={$current:i};return s&&(a[s]=i),a}_getAstViaCache(e,t){let r=this._templateAstCache.get(t);if(!r){if(11===t.nodeType)r=this._createAst(e,Array.from(t.childNodes));else{const i=n.getTemplateContent(t)[0];r=this._createAst(e,Array.from(i.childNodes))}this._templateAstCache.set(t,r)}return r}_createAst(e,t){const n={type:_.ARRAY_EXP,elements:[]};return n.elements=Array.prototype.reduce.call(t,(t,n)=>{const r=this._processSpecialNodes(e,n);return r?t.push(r):3===n.nodeType?t.push({type:_.LITERAL,value:n.nodeValue}):1===n.nodeType&&t.push(this._createElementNode(e,n)),t},[]),n}_processSpecialNodes(e,t){if(1===t.nodeType)switch(t.tagName.toLowerCase()){case"oj-bind-text":return this._createExpressionNode(e,t.getAttribute("value"));case"oj-bind-if":return this._createIfExpressionNode(e,t);case"oj-bind-for-each":return this._createBindForEachExpressionNode(e,t);case"oj-bind-dom":return this._createBindDomExpressionNode(e,t);case"oj-bind-template-slot":return this._createBindTemplateNode(e,t);case"oj-defer":return this._createDeferNode(e,t);case"oj-if":return this._createIfNode(e,t);case"template":return this._createTemplateWithRenderCallback(e,t)}return null}_createBindTemplateNode(e,t){const n={type:_.OBJECT_EXP,properties:[]},r=t.getAttribute("name")||"";n.properties.push(this._getAttribute(e,"name",r));const i=t.getAttribute("data");i&&n.properties.push(this._getAttribute(e,"data",i));const s=t.getAttribute("as");return this._createCallNodeWithContext((n,r)=>{const i=r.data,a=r.name,l=e[T].__oj_slots[a];let c=l&&l[l.length-1],u=!1;if(!c)for(let e in t.childNodes)if("TEMPLATE"===t.childNodes[e].nodeName){c=t.childNodes[e],u=!0;break}if(c&&c.render)return c.render(i);if(c){const t=this._getAstViaCache(e,c),n=c.getAttribute("data-oj-as"),r=this._getContext(e[E],u?e[b]:e[T].__oj_composite,c,i,u?s:null,n);return this._cspEvaluator.evaluate(t,{$context:r,$h:o.h,BindDom:m})}},[n])}_createTemplateWithRenderCallback(e,t){const n=t.getAttribute("data-oj-as"),r=this._getAstViaCache.bind(this),i=this._cspEvaluator,s={type:_.PROPERTY,key:{type:_.LITERAL,value:"render"},value:{type:_.LITERAL,value:(s,a)=>{const l=Object.assign({},e[T],{$current:s});if(n&&(l[n]=s),l.$provided&&a){const e=new Map([...l.$provided,...a]);l.$provided=e}else a&&(l.$provided=a);const c={[T]:l,[E]:e[E],[b]:e[b],[S]:e[S]},u=r(c,t);return i.evaluate(u,{$context:l,$h:o.h})}}};let a=this._getElementProps(e,t);return a.push(s),e[E]&&a.push({type:_.PROPERTY,key:{type:_.LITERAL,value:"data-oj-use-ko"},value:{type:_.LITERAL,value:""}}),this._createHFunctionCallNode("template",[{type:_.OBJECT_EXP,properties:a}])}_createDeferContent(e,t,n){const r={view:t,data:n},i={config:Promise.resolve(r),bindingProvider:e[E],executeFragment:this.executeFragment.bind(this)};return o.h(m,i)}_createDeferNode(e,t){let n,r=this._createDeferContent(e,[],{});const i=[{type:_.PROPERTY,key:{type:_.LITERAL,value:"ref"},value:{type:_.LITERAL,value:e=>{e?(n=e,o.render(r,n)):o.render(null,n)}}},{type:_.PROPERTY,key:{type:_.LITERAL,value:"_activateSubtree"},value:this._createCallNodeWithContext(n=>i=>{r=this._createDeferContent(e,Array.from(t.childNodes),n),o.render(r,i)})}];let s=this._getElementProps(e,t);return s=s.concat(i),this._createHFunctionCallNode("oj-defer",[{type:_.OBJECT_EXP,properties:s}])}_createIfExpressionNode(e,t){if(!t.hasAttribute("test"))throw new Error("Missing the required 'test' attribute on <oj-bind-if>");return{type:_.UNARY_EXP,operator:"...",argument:this._createIfTestNode(e,t)}}_createIfNode(e,t){if(!t.hasAttribute("test"))throw new Error("Missing the required 'test' attribute on <oj-if>");const n=this._getElementProps(e,t);return n.push(this._createPropertyNode(e,"style","display:contents;")),this._createHFunctionCallNode("oj-if",[{type:_.OBJECT_EXP,properties:n},this._createIfTestNode(e,t)])}_createIfTestNode(e,t){return{type:_.CONDITIONAL_EXP,test:this._createExpressionNode(e,t.getAttribute("test")),consequent:this._createAst(e,Array.from(t.childNodes)),alternate:{type:_.LITERAL,value:[]}}}_createBindForEachExpressionNode(e,t){const n=t.getElementsByTagName("template")[0];if(!n)throw new Error("Template not found: oj-bind-for-each requires a single template element as its direct child");return this._createComponentNode(e,t,g,[{type:_.PROPERTY,key:{type:_.LITERAL,value:"itemRenderer"},value:this._createNestedTemplateRendererNode(e,n)},{type:_.PROPERTY,key:{type:_.LITERAL,value:"componentElement"},value:{type:_.LITERAL,value:e[b]}}])}_createNestedTemplateRendererNode(e,t){const n=t.getAttribute("data-oj-as"),r={[E]:e[E],[T]:e[T],[b]:e[b],[S]:(e,t)=>"function"!=typeof t||"$current.observableIndex"!==e&&e!==`${n}.observableIndex`?t:t()},i=this._getAstViaCache(r,t);return this._createCallNodeWithContext(e=>t=>{const r={$current:t};null!=n&&(r[n]=t);const s=Object.assign({},e,r);return this._cspEvaluator.evaluate(i,{$context:s,$h:o.h})})}_createElementNode(e,t){const n=this._getElementProps(e,t),r=t.tagName,o=r.toLowerCase(),s=i.getMetadata(r),a=this._createHFunctionCallNode(o,[this._createPossiblyProvidedAndConsumedProperties(o,e,s,n),this._createAst(e,Array.from(t.childNodes))]);return t.hasAttribute("data-oj-manage-tabs")?this._createComponentNode(e,null,c.ManageTabStops,[{type:_.PROPERTY,key:{type:_.LITERAL,value:"children"},value:a}]):a}_createPossiblyProvidedAndConsumedProperties(e,t,n,i){const o={type:_.OBJECT_EXP,properties:i},s=u.getPropagationMetadataViaCache(e,n);if(!s)return o;const a=new Set;i.reduce((e,t)=>e.add(t.key.value),a);const l=[],c=this._getUnwrapObservable(t);for(const[e,t]of s){const n=t[1];n&&(e===u.CONSUMED_CONTEXT?l.push({type:_.PROPERTY,key:{type:_.LITERAL,value:"__oj_private_contexts"},value:this._createCallNodeWithContext(e=>{const t=new Map,r=c(e)?.[P];return n.forEach(e=>{r?.has(e)&&t.set(e,c(r.get(e)))}),t})}):a.has(e)||a.has(r.AttributeUtils.propertyNameToAttribute(e).toUpperCase())||l.push({type:_.PROPERTY,key:{type:_.LITERAL,value:e},value:this._createCallNodeWithContext(e=>{const t=c(e)?.[P];if(t)return c(t.get(n.name))})}))}const d=0===l.length?o:{type:_.OBJECT_EXP,properties:o.properties.concat(l)},h=n.properties;return this._createCallNodeWithContext((t,n)=>{let i,o=new Map;for(const[t,[a]]of s)a&&a.forEach(s=>{let a,l=!0;if(t===u.STATIC_PROPAGATION)l=!1;else if(n.hasOwnProperty(t))a=n[t];else{const i=r.AttributeUtils.propertyNameToAttribute(t),o=i.toUpperCase();if(n.hasOwnProperty(o)){a=n[o];const s=h?.[t]?.type;s&&null!=a&&(a=r.AttributeUtils.parseAttributeValue(e,i,a,s))}else l=!1}const c="default";if(l){const e=s.transform;a=e&&e.hasOwnProperty(a)?e[a]:a}else s.hasOwnProperty(c)&&(a=s[c],l=!0);l&&(i=!0,o.set(s.name,a))});if(i){const e=t[P];void 0!==e&&(o=new Map([...e,...o])),t[P]=o}return n},[d])}_createBindDomExpressionNode(e,t){if(!t.hasAttribute("config"))throw new Error("Missing the required 'config' attribute on <oj-bind-dom>");const n=t.attributes.config.value;return this._createComponentNode(e,t,m,[this._createPropertyNode(e,"config",n,e=>Promise.resolve(e)),{type:_.PROPERTY,key:{type:_.LITERAL,value:"bindingProvider"},value:{type:_.LITERAL,value:e[E]}},{type:_.PROPERTY,key:{type:_.LITERAL,value:"executeFragment"},value:{type:_.LITERAL,value:this.executeFragment.bind(this)}}])}_createComponentNode(e,t,n,r){let i=t?this._getElementProps(e,t):[];return i=r?i.concat(r):i,this._createHFunctionCallNode(n,[{type:_.OBJECT_EXP,properties:i}])}_createPropertyNode(e,t,n,r){return{type:_.PROPERTY,key:{type:_.LITERAL,value:t},value:this._createExpressionNode(e,n,r)}}_postprocessClassNameValue(e){let t;return t=Array.isArray(e)?e.join(" "):"string"!=typeof e?Object.keys(e).reduce((t,n)=>(e[n]&&t.push(n),t),[]).join(" "):e,t}_getElementProps(e,t){let n;const o=[],s=[],a=new Map,l=new Map,c=Array.prototype.reduce.call(t.attributes,(c,u)=>{let d=u.name;const p=u.value;if(d.startsWith(":")){d=d.substring(1);const t=d.split(".");2===t.length&&"style"===t[0]?o.push({k:t[1],v:p}):"style"===d?n=p:"class"===d?c.push(this._createPropertyNode(e,"className",p,this._postprocessClassNameValue)):(d=r.AttributeUtils.isGlobalOrData(d)?r.AttributeUtils.getGlobalPropForAttr(d):r.AttributeUtils.attributeToPropertyName(d),c.push(this._createPropertyNode(e,d,p)))}else{const n=r.AttributeUtils.getExpressionInfo(p);if(r.AttributeUtils.isEventListenerAttr(d))d=r.AttributeUtils.eventAttrToPreactPropertyName(d),l.set(d,p);else if(r.AttributeUtils.isGlobalOrData(d))c.push(this._createPropertyNode(e,r.AttributeUtils.getGlobalPropForAttr(d),p));else{const o=r.AttributeUtils.attributeToPropertyName(d),l=o.split(".");if(n.expr){const r=h.getPropertyMetadata(l[0],i.getPropertiesForElementTag(t.tagName));if(r?.readOnly||(l.length>1?s.push({subProps:o,expr:n.expr}):c.push({type:_.PROPERTY,key:{type:_.LITERAL,value:o},value:this._createExpressionEvaluator(e,n.expr)})),!n.downstreamOnly&&r?.writeback){let e=l;const t=e.shift();let r=a.get(t);if(r){r=[...r,{expr:n.expr,subProps:e}]}else r=[{expr:n.expr,subProps:e}];a.set(t,r)}}else if("o"===d[0]&&"n"===d[1])c.push({type:_.PROPERTY,key:{type:_.LITERAL,value:d.toUpperCase()},value:{type:_.LITERAL,value:p}});else{const e=h.getPropertyMetadata(o,i.getPropertiesForElementTag(t.tagName)),n=e?r.CustomElementUtils.parseAttrValue(t,d,o,p,e):p;l.length>1?s.push({subProps:o,expr:{type:_.LITERAL,value:n}}):c.push({type:_.PROPERTY,key:{type:_.LITERAL,value:o},value:{type:_.LITERAL,value:n}})}}}return c},[]);if(null!=n){if(o.length>0)throw new Error("Binding the entire style attribute as well as the individual style properties on the same element is not supported");c.push(this._createPropertyNode(e,"style",n))}else o.length>0&&c.push({type:_.PROPERTY,key:{type:_.LITERAL,value:"style"},value:{type:_.OBJECT_EXP,properties:o.map(t=>this._createPropertyNode(e,r.AttributeUtils.attributeToPropertyName(t.k),t.v))}});return s.length>0&&c.push(this._createRefPropertyNodeForNestedProps(e,s)),a.forEach((t,n)=>{const i=`on${n}Changed`,o=l.get(i);o&&l.delete(i),c.push(this._createWritebackPropertyNode(e,n,i,t,r.AttributeUtils.getExpressionInfo(o)?.expr))}),l.forEach((e,t)=>{const n=r.AttributeUtils.getExpressionInfo(e);n.expr&&c.push(this._createEventListenerPropertyNode(t,n.expr))}),c}_createRefPropertyNodeForNestedProps(e,t){const n=t.map(({subProps:t,expr:n})=>({type:_.OBJECT_EXP,properties:[{type:_.PROPERTY,key:{type:_.LITERAL,value:t},value:n.type===_.LITERAL?{type:_.LITERAL,value:n.value}:this._createExpressionEvaluator(e,n)}]})),r={type:_.ARRAY_EXP,elements:n},i=A._nestedPropsRefCallback;return{type:_.PROPERTY,key:{type:_.LITERAL,value:"ref"},value:this._createCallNodeWithContext(Function.prototype.bind.bind(i,e[E]),[r])}}static _nestedPropsRefCallback(e,t,n){if(n&&n.setProperties){const e=Object.assign({},...t);n.setProperties(e)}}_createWritebackPropertyNode(e,t,n,r,i){const o=[];let s;return{type:_.PROPERTY,key:{type:_.LITERAL,value:n},value:this._createCallNodeWithContext(n=>a=>{r.forEach((r,i)=>{let s=a.detail.value;var l=r.subProps,c=r.expr;l.length>0&&"object"==typeof s&&(s=l.reduce((e,t)=>e[t],s));let u=o[i];u||(u=this._cspEvaluator.createEvaluator(c).evaluate,o.push(u));const d=u([n,n.$data]);let h;if(e[E]&&e[E].__IsObservable(d))h=d;else{const e=this._getPropertyWriterExpression(c);if(null!==e){const t=this._cspEvaluator.createEvaluator(e).evaluate;h=this._getWriter(t([n.$data||{},n]))}}f.performMonitoredWriteback(t,h,a,s)}),i&&!s&&(s=this._cspEvaluator.createEvaluator(i).evaluate);const l=s?s([n,n.$data]):null;l&&l(a,n.$current||n.$data,n)})}}_createEventListenerPropertyNode(e,t){let n;return{type:_.PROPERTY,key:{type:_.LITERAL,value:e},value:this._createCallNodeWithContext(e=>r=>{n||(n=this._cspEvaluator.createEvaluator(t).evaluate);const i=n([e,e.$data]);i&&i(r,e.$current||e.$data,e)})}}_createExpressionNode(e,t,n){const i=r.AttributeUtils.getExpressionInfo(t);return i.expr?this._createExpressionEvaluator(e,i.expr,n):{type:_.LITERAL,value:t}}_createExpressionEvaluator(e,t,n){const r=this._cspEvaluator.createEvaluator(t).evaluate;return this._createCallNodeWithContext(i=>{const o=this._getUnwrapObservable(e),s=o(i);let a=o(r([s,s.$data]));return e[S]&&(a=e[S](t,a)),n?n(a):a})}_getUnwrapObservable(e){const t=e[E];return t?t.__UnwrapObservable:C}_createCallNodeWithContext(e,t){return{type:_.CALL_EXP,callee:{type:_.LITERAL,value:e},arguments:t?O.concat(t):O}}_createHFunctionCallNode(e,t){return{type:_.CALL_EXP,callee:{type:_.IDENTIFIER,name:"$h"},arguments:[{type:_.LITERAL,value:e},...t]}}_getAttribute(e,t,n){const i=r.AttributeUtils.getExpressionInfo(n).expr;return{type:_.PROPERTY,key:{type:_.LITERAL,value:t},value:i?this._createExpressionEvaluator(e,i):{type:_.LITERAL,value:n}}}_getWriter(e){return e._ko_property_writers}_getPropertyWriterExpression(e){if(null==e||["true","false","null","undefined"].indexOf(e)>=0)return null;const t=(e=e.trim()).match(/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i);if(null===t)return null;return`{_ko_property_writers: function(v){${t[1]?`Object(${t[1]})${t[2]}`:e}=v;}}`}}const I=new A,R=I.executeFragment.bind(I),w=I.execute.bind(I),N=A.cleanupTemplateCache;e.cleanupTemplateCache=N,e.execute=w,e.executeFragment=R,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojexpressionutils",["exports","ojs/ojconfig","ojs/ojcustomelement-utils"],function(e,t,n){"use strict";const r=function(){},i=r.getExpressionInfo=function(e){return n.AttributeUtils.getExpressionInfo(e)},o=r.createGenericExpressionEvaluator=function(e){var n,r=t.getExpressionEvaluator();if(r){var i=r.createEvaluator(e).evaluate;return function(e){return i([e])}}try{n=new Function("context","with(context){return "+e+";}")}catch(t){throw new Error(t.message+' in expression "'+e+'"')}return n};e.createGenericExpressionEvaluator=o,e.getExpressionInfo=i,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojtreedataproviderview",["ojs/ojcore-base","ojs/ojlistdataproviderview"],function(e,t){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;
/**
     * @preserve Copyright 2013 jQuery Foundation and other contributors
     * Released under the MIT license.
     * http://jquery.org/license
     */
class n{constructor(e,n){this.dataProvider=e,this.options=n,this._listDataProviderView=new t(e,n)}getChildDataProvider(e,t){let r=this.dataProvider.getChildDataProvider(e);return r?new n(r,this.options):null}containsKeys(e){return this._listDataProviderView.containsKeys(e)}fetchByKeys(e){return this._listDataProviderView.fetchByKeys(e)}fetchByOffset(e){return this._listDataProviderView.fetchByOffset(e)}fetchFirst(e){return this._listDataProviderView.fetchFirst(e)}getCapability(e){return this._listDataProviderView.getCapability(e)}getTotalSize(){return this._listDataProviderView.getTotalSize()}isEmpty(){return this._listDataProviderView.isEmpty()}addEventListener(e,t){this._listDataProviderView.addEventListener(e,t)}removeEventListener(e,t){this._listDataProviderView.removeEventListener(e,t)}dispatchEvent(e){return this._listDataProviderView.dispatchEvent(e)}}return e._registerLegacyNamespaceProp("TreeDataProviderView",n),n}),define("ojs/ojcspexpressionevaluator",["ojs/ojcspexpressionevaluator-internal","ojs/ojkoshared"],function(e,t){"use strict";
/**
   * @license
   * Copyright (c) 2019 2024, Oracle and/or its affiliates.
   * Licensed under The Universal Permissive License (UPL), Version 1.0
   * as shown at https://oss.oracle.com/licenses/upl/
   *
   * @license
   * Based on the Expression Evaluator 2.0.0
   * https://github.com/donmccurdy/expression-eval
   * under MIT License
   * @ignore
   */return function(t){var n=new e.CspExpressionEvaluatorInternal(t);this.createEvaluator=function(e){return n.createEvaluator(e)},this.evaluate=function(e,t){return n.evaluate(e,t)}}}),define("ojs/ojtreedataprovideradapter",["ojs/ojcore-base","ojs/ojdataprovideradapter-base","ojs/ojdataprovider","ojs/ojmap"],function(e,t,n,r){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;class i extends t{constructor(e){super(e),this.treeDataSource=e,this._addTreeDataSourceEventListeners(),this._parentKey=null,this._parentInfoMap=new r}destroy(){this._removeTreeDataSourceEventListeners()}getChildDataProvider(e){if(this._parentInfoMap.has(e)){const t=new i(this.treeDataSource);return t._parentKey=e,t._parentInfoMap=this._parentInfoMap,t}return null}fetchFirst(e){return new this.AsyncIterable(new this.AsyncIterator(this._getFetchFunc(e),e))}getTotalSize(){return Promise.resolve(this.treeDataSource.getChildCount(this._parentKey))}isEmpty(){const e=this.treeDataSource.getChildCount();return-1===e?"unknown":e>0?"no":"yes"}getCapability(e){return e===i._SORT&&"full"===this.treeDataSource.getCapability(e)?{attributes:"multiple"}:"fetchByKeys"===e||"fetchByOffset"===e?{implementation:"iteration"}:null}_getFetchFunc(e){const t=this;if(null!=e&&null!=e[i._SORTCRITERIA]){return function(e,n){return function(r,o){if(o){const o={};return o[i._KEY]=e,o[i._DIRECTION]=n,new Promise(function(e,n){t.treeDataSource.sort(o,{success(){e(t._getTreeDataSourceFetch(r)(r))},error(e){n(e)}})})}return t._getTreeDataSourceFetch(r)(r)}}(e[i._SORTCRITERIA][0][i._ATTRIBUTE],e[i._SORTCRITERIA][0][i._DIRECTION])}return this._getTreeDataSourceFetch(e)}_getTreeDataSourceFetch(e){const t=this;return function(e){const n=t.treeDataSource.getSortCriteria();if(null!==n&&"none"!=n[i._DIRECTION]&&null==e[i._SORTCRITERIA]){e[i._SORTCRITERIA]=[];const r=new t.SortCriterion(t,n[i._KEY],n[i._DIRECTION]);e[i._SORTCRITERIA].push(r)}return t._isFetching=!0,new Promise(function(n,r){t.treeDataSource.fetchChildren(t._parentKey,{start:0,end:-1},{success(r){t._isFetching=!1;const o=[],s=[],a=r.getStart(),l=r.getCount();let c,u,d;for(c=0;c<l;c++)u=r.getData(a+c),o.push(u),d=r.getMetadata(a+c),d[i._LEAF]||t._parentInfoMap.set(d[i._KEY],d),s.push(new t.ItemMetadata(t,d[i._KEY]));n(new t.AsyncIteratorReturnResult(t,new t.FetchListResult(t,e,o,s)))},error(e){t._isFetching=!1,r(e)}})})}}_addTreeDataSourceEventListeners(){this.removeAllListeners(),this.addListener("change",this._handleChange),this.addListener("refresh",this._handleRefresh)}_removeTreeDataSourceEventListeners(){this.removeListener("change"),this.removeListener("refresh")}_handleChange(e){const t=e[i._OPERATION];"insert"===t?this._handleInsert(e):"delete"===t?this._handleDelete(e):"update"===t&&this._handleUpdate(e)}_handleInsert(e){const t=e[i._DATA],r=e[i._INDEX],o=e[i._KEY],s=e[i._PARENT],a=new this.ItemMetadata(this,o),l=new Set;l.add(o);const c=e[i._METADATA];null!=c&&c[i._LEAF]&&this._parentInfoMap.set(o,c);const u=new this.DataProviderAddOperationEventDetail(this,l,null,null,[s],[a],[t],[r]),d=new this.DataProviderMutationEventDetail(this,u,null,null);this.dispatchEvent(new n.DataProviderMutationEvent(d))}_handleDelete(e){const t=e[i._DATA],r=e[i._INDEX],o=e[i._KEY],s=new this.ItemMetadata(this,o),a=new Set;a.add(o),this._parentInfoMap.delete(o);const l=new this.DataProviderOperationEventDetail(this,a,[s],[t],[r]),c=new this.DataProviderMutationEventDetail(this,null,l,null);this.dispatchEvent(new n.DataProviderMutationEvent(c))}_handleUpdate(e){let t=e[i._DATA],r=e[i._INDEX],o=e[i._KEY],s=new this.ItemMetadata(this,o),a=new Set;a.add(o);let l=new this.DataProviderOperationEventDetail(this,a,[s],[t],[r]),c=new this.DataProviderMutationEventDetail(this,null,null,l);self.dispatchEvent(new n.DataProviderMutationEvent(c))}_handleRefresh(e){this._isFetching||(this._parentInfoMap.clear(),this.dispatchEvent(new n.DataProviderRefreshEvent))}}return i._SORTCRITERIA="sortCriteria",i._INDEX="index",i._PARENT="parent",i._LEAF="leaf",i._OPERATION="operation",e._registerLegacyNamespaceProp("TreeDataSourceAdapter",i),n.FetchByKeysMixin.applyMixin(i),n.FetchByOffsetMixin.applyMixin(i),i}),define("ojs/ojobservable",["exports"],function(e){"use strict";const t=function(e){this.observers=[],this._value=e};t.prototype.subscribe=function(e,t,r){let i=e;"function"==typeof i?i={next:e,error:t,complete:r}:"object"!=typeof i&&(i={}),this.observers.push(i);const o=new n(this,i);return o&&!o.closed&&i.next(this._value),o},t.prototype.next=function(e){this._value=e;const{observers:t}=this,n=t.length,r=t.slice();for(let t=0;t<n;t++)r[t].next(e)};const n=function(e,t){this.subject=e,this.subscriber=t,this.closed=!1};n.prototype.unsubscribe=function(){if(this.closed)return;this.closed=!0;const e=this.subject.observers;if(this.subject=null,!e||0===e.length)return;const t=e.indexOf(this.subscriber);-1!==t&&e.splice(t,1)},n.prototype.closed=function(){return this.closed},e.BehaviorSubject=t,e.SubjectSubscription=n,Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojurlpathadapter",[],function(){"use strict";function e(e){var t=e;return t&&!t.match(/\/$/)&&(t+="/"),t}function t(e){var t=[];return Object.keys(e).sort().forEach(function(n){var r=e[n];null!=r&&t.push(";"+n+"="+function(e){return encodeURIComponent(e)}(r))}),t.join("")}function n(e){var t=e.split(";"),n={path:r(t.shift()),params:{}};return t.forEach(function(e){if(e){var t=e.split("=");n.params[t[0]]=r(t[1])}}),n}function r(e){return decodeURIComponent(e)}function i(t){this._baseUrl=e(void 0!==t?t:document.location.pathname)}return i.prototype.getRoutesForUrl=function(e,t){var r=void 0!==t?t:document.location.pathname,i=this._baseUrl,o=r.substring(i.length).split("/"),s=[];return o.forEach(function(e){var t=n(e);s.push(t)}),s.length||s.push(n("")),s},i.prototype.getUrlForRoutes=function(n){var r=[];n.forEach(function(e){let n=t(e.params||{});r.push(e.path+n)});var i=this._baseUrl,o=r.join("/");return o&&(i=e(i)),i+o+document.location.search},i}),define("ojs/ojcorerouter",["ojs/ojlogger","ojs/ojobservable","ojs/ojurlpathadapter"],function(e,t,n){"use strict";let r,i;n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;let o=[];var s=function(){let e=r;const t=[];for(;e;){let n=e._activeState;if(!n){n=e._getPendingState({path:""}),n&&t.push(n);break}t.push({path:n.path||"",params:n.params,pathParams:n.pathParams}),e=e.childRouter}return t};const a=/^{(\w+)}$/;function l(e){const t=e.match(a);if(t)return t[1];throw Error(`no path parameter found for segment ${e}`)}function c(e,o,s){if(o=o||{},this._name="/",this._urlOffset=0,this.beforeStateChange=new t.BehaviorSubject({accept:function(){}}),this.currentState=new t.BehaviorSubject({complete:function(){}}),this._noHistory="skip"===o.history,this._noHistoryOffset=0,this._parentRouter=s,s)this._name=s._name+s._activeState.path+"/",this._urlOffset=s._urlOffset+s._activeState.pathParams.length+1,s._noHistory&&(this._noHistoryOffset=s._noHistoryOffset+s._activeState.pathParams.length+1);else{if(r)throw Error("Only one root CoreRouter instance may exist at a time");r=this,i=o.urlAdapter||new n,this._setupNavigationListener()}this.childRouter=void 0,this._configure(e)}return c.prototype.reconfigure=function(e,t){const n=this._routes;let r=t||this._getActiveRoutes();return r&&!Array.isArray(r)&&(r=[r]),this._configure(e),this.go(...r).catch(e=>{throw this._configure(n),e})},c.prototype._configure=function(e=[]){this._routes=e.map(function(e){let t=e.path,n=[];if("string"==typeof t){const e=t.split("/");t=e.shift(),n=e.map(l)}const r={path:t,detail:e.detail||{},pathParams:n,redirect:e.redirect};let i=t;if("string"==typeof t)i=new RegExp("^"+t+"$");else if(!(t instanceof RegExp))throw Error("Router path must be a string or RegExp");return r._match=i,Object.freeze(r),r},this)},c.prototype.sync=function(){return this._execute(this._getRouteSegment()||{path:"",params:{}}).then(e=>{var t=e,n=this.childRouter;return n&&(t=n.sync()),t})},c.prototype._getRouteSegment=function(){let e;if(this._noHistory)e=o[this._noHistoryOffset];else{let t=i.getRoutesForUrl();e=t[this._urlOffset];const n=this._getRoutePathParams(e&&e.path);t=i.getRoutesForUrl({offset:this._urlOffset,pathParams:n}),e=t[this._urlOffset]}return e},c.prototype.go=function(...t){let n;if(t.forEach(function(e){var t=e.params;t&&Object.keys(t).forEach(function(e){"object"==typeof t[e]&&(n=Promise.reject('"params" object may only contain scalar values'))})}),!n){const r=t.map(e=>e.path).join("/");e.info(`Navigating router(${this._name}) to ${r}`);const a=i.getUrlForRoutes(s()),l=o;if(this._noHistory)e.info(`Navigating non-history tracking router(${this._name}) to ${r}`),o=o.slice(0,this._noHistoryOffset).concat(t);else{o=[];const e=this._getParentRoutes().concat(this._getPendingState(t[0]),t.slice(1)),n=i.getUrlForRoutes(e);a!==n&&window.history.pushState(null,"path",n)}n=this.sync().catch(e=>{throw this._noHistory?o=l:window.history.replaceState(null,"path",a),e})}return n},c.prototype._execute=function(e){const t=this._getPendingState(e);let n;return t?(n=this._prepublish(t),this._isCurrentState(t)||(n=n.then(()=>this._publish(t)))):n=Promise.reject(`Router(${this._name}) has no state matching "${e.path}"`),n},c.prototype._prepublish=function(e){if(!this.beforeStateChange)throw Error(`Router(${this._name}) has already been destroyed`);let t=[];this.beforeStateChange.next({state:e,accept:function(e){t.push(e)}});let n=Promise.all(t).then(()=>e);return this.childRouter&&(n=n.then(()=>this.childRouter._prepublish(e))),n=n.then(e=>n!==this._activeSync?Promise.reject("sync overridden"):e),this._activeSync=n,n},c.prototype._publish=function(e){var t=[];return this.childRouter=null,this._activeState=e,this.currentState.next({state:e,complete:function(e){t.push(e)}}),Promise.all(t).then(()=>e)},c.prototype._setupNavigationListener=function(){this===r&&(this._popstateHandler=()=>this.sync(),window.addEventListener("popstate",this._popstateHandler,!1))},c.prototype._isCurrentState=function(e){var t,n,r=this._activeState;return!!r&&(t=r,n=e,i.getUrlForRoutes([t])===i.getUrlForRoutes([n]))},c.prototype._getPendingState=function(e){var t,n=e.path,r=e.params||{};let i=this._routes.find(e=>e._match.test(n));return i&&i.redirect&&(n=i.redirect,i=this._getPendingState({path:n,params:r})),i&&(t={path:n,params:r,detail:i.detail,pathParams:i.pathParams,redirect:i.redirect,_match:i._match},Object.freeze(t)),t},c.prototype._getRoutePathParams=function(e=""){const t=this._getPendingState({path:e});return t?t.pathParams:[]},c.prototype._getParentRoutes=function(){return s().slice(0,this._urlOffset)},c.prototype._getActiveRoutes=function(){return s().slice(this._urlOffset)},c.prototype.createChildRouter=function(e,t={}){this._noHistory&&(t.history="skip");const n=this._activeState;if(!n)throw Error(`Router(${this._name}) has no current state. Call sync() on the router first.`);if(this.childRouter&&"skip"!==t.history)throw Error(`Router(${this._name}) state(${n.path}) already has a child router`);const r=new c(e,t,this);return this.childRouter=r,r},c.prototype.destroy=function(){this.childRouter&&this.childRouter.destroy(),console.debug(`destroying Router(${this._name})`),this.beforeStateChange=null,this.currentState=null,this._parentRouter.childRouter=null,this===r&&(window.removeEventListener("popstate",this._popstateHandler,!1),r=null)},c}),define("ojs/ojurlparamadapter",["ojs/ojurlpathadapter"],function(e){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;var t="ojr",n="_ojCoreRouter";function r(){var e=document.location.search?document.location.search.substring(1):"",t=[];return e&&e.split("&").forEach(function(e){var n=e.split("=");t.push(n)}),t}function i(){var e,t=r().find(function(e){return e[0]===n});return t&&(e=t[1],decodeURIComponent(e))}function o(e){var t=encodeURIComponent(e),i=r(),o=i.find(function(e){return e[0]===n});return o?o[1]=t:i.push([n,t]),i.map(function(e){return e[0]+"="+e[1]}).join("&")}function s(r){this._pathAdapter=r||new e(""),void 0===i()&&(n=t)}return s.prototype.getRoutesForUrl=function(e){const t=i()||"";return this._pathAdapter.getRoutesForUrl(e,t)},s.prototype.getUrlForRoutes=function(e){var t=this._pathAdapter.getUrlForRoutes(e);return t.indexOf("?")>-1&&(t=t.substring(0,t.indexOf("?"))),`${document.location.pathname}?${o(t)}`},s}),define("ojs/ojmodulerouter-adapter",["ojs/ojlogger","ojs/ojmodule-element-utils","ojs/ojmoduleanimations","knockout"],function(e,t,n,r){"use strict";return function(i,o){var s=i,a=o||{},l=null,c=null,u=null,d=r.observable({view:[],viewModel:null});function h(e){return e?a.pathKey?e.detail[a.pathKey]:e.path:null}var p,f=a.animationCallback?(p=function(e){var t={node:e.node,previousViewModel:e.oldViewModel,viewModel:e.newViewModel,previousState:l,state:c};return a.animationCallback(t)},new function(){var e,t="canAnimate";function r(t){return function(n){return e[t].call(e,n)}}this[t]=function(i){var o=p(i);return!!(e="string"==typeof o?n[o]:o)&&(["prepareAnimation","animate"].forEach(function(e){this[e]=r(e)}.bind(this)),r(t)(i))}.bind(this)}):null;s.beforeStateChange.subscribe(function(e){var t=d().viewModel,n=t&&t.canExit?t.canExit():Promise.resolve();e.accept(n)}),s.currentState.subscribe(function(n){var r,i=h(n?n.state:null);if(i){if(i===h(c)&&d().viewModel&&d().viewModel.parametersChanged)return d().viewModel.parametersChanged(n.state.params),void(c=n.state);var o=a.viewPath||"views/",p=a.viewModelPath||"viewModels/";r=t.createConfig({require:a.require,viewPath:o+i+".html",viewModelPath:p+i,params:{parentRouter:s,params:n.state.params,router:s,routerState:n.state}})}else r=Promise.resolve({view:[],viewModel:null});n.complete(r),u=r,r.then(function(e){if(u===r){l=c,c=n.state;var t={viewModel:e.viewModel};Object.defineProperty(t,"view",{enumerable:!0,get:()=>e.view.map(e=>e.cloneNode(!0))}),d(t)}},function(t){e.error("Error creating oj-module config : ",t)})});var _={};return Object.defineProperties(_,{koObservableConfig:{get:function(){return d}},animation:{get:function(){return f}}}),_}}),define("ojs/ojknockoutrouteradapter",["knockout","ojs/ojlogger"],function(e,t){"use strict";return class{constructor(n){var r=e.observable();this._observableState=e.pureComputed({read:()=>r(),write:()=>{throw Error('"state" observable cannot be written to')}}),this._observablePath=e.pureComputed({read:()=>r()&&r().path,write:e=>{n.go({path:e||""}).catch(function(e){t.info("KnockoutRouterAdapter router.go() failed with: "+e),r.valueHasMutated()})}}),this._observablePath.equalityComparer=null,this._stateSubscription=n.currentState.subscribe(e=>{r(e.state)})}destroy(){this._stateSubscription.unsubscribe()}get state(){return this._observableState}get path(){return this._observablePath}}}),define("ojs/ojbinddom",["ojs/ojkoshared","ojs/ojcustomelement-utils","knockout","ojs/ojcore-base","ojs/ojlogger","ojs/ojcontext"],function(e,t,n,r,i,o){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,o=o&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o,e.registerPreprocessor("oj-bind-dom",function(e){var n,r="ko _ojBindDom_:",i=function(e){if(null!=e){var n=t.AttributeUtils.getExpressionInfo(e).expr;return null==n&&(n="'"+e+"'"),n}return null}(e.getAttribute("config"));i&&(r+=i);var o=document.createComment(r),s=document.createComment("/ko");n=[o];var a=e.parentNode;for(a.insertBefore(o,e),e[t.OJ_BIND_CONVERTED_NODE]=o;e.childNodes.length>0;){var l=e.childNodes[0];a.insertBefore(l,e),n.push(l)}return n.push(s),a.replaceChild(s,e),n}),n.bindingHandlers._ojBindDom_={init:function(e,s,a,l,c){var u,d,h;function p(s){d||(d=o.getContext(e.parentNode).getBusyContext().addBusyState({description:"oj-bind-dom is waiting on config Promise resolution"})),function(){if(!h){var n=function(n){var r=e.parentNode;for(;r&&!t.ElementUtils.isValidCustomElementName(r.localName);)r=r.parentNode;r||(r=n?n._nearestCustomParent:null);return r}(c.$current),i=function(t,n){var r=!1,i=n&&Object.prototype.hasOwnProperty.call(n,"_immediate");e.parentNode===t?r=!0:i&&!e.parentNode.parentNode&&(r=n._immediate);return r}(n,c.$current);h=r._KnockoutBindingProvider.getInstance().__RegisterBindingAppliedPromiseForChildren(n,i)}}(),s.then(function(t){if(s===u)try{var r=t?t.view:[],o=t?t.data:null;n.virtualElements.setDomNodeChildren(e,r||[]);var a=c.createChildContext(o,void 0,function(e){e.$parent=null,e.$parentContext=null,e.$parents=null});n.applyBindingsToDescendants(a,e)}catch(e){i.error("An error %o occurred during view insertion and apply bindings for oj-bind-dom.",e)}finally{_(),f()}},function(e){_(),f(),i.error("An error %o occurred during view insertion and apply bindings for oj-bind-dom.",e)})}function f(){h&&(h(),h=null)}function _(){d&&(d(),d=null)}return n.computed(function(){p(u=Promise.resolve(n.utils.unwrapObservable(s())))},null,{disposeWhenNodeIsRemoved:e}),{controlsDescendantBindings:!0}}},n.virtualElements.allowedBindings._ojBindDom_=!0}),define("ojs/ojdeferreddataprovider",["ojs/ojcore-base","ojs/ojdataprovider","ojs/ojcomponentcore"],function(e,t,n){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;
/**
     * @preserve Copyright 2013 jQuery Foundation and other contributors
     * Released under the MIT license.
     * http://jquery.org/license
     */
class r{constructor(e,n){var r;this._dataProvider=e,this._capabilityFunc=n,this._DATAPROVIDER="dataProvider",this.AsyncIterable=(r=class{constructor(e){this._asyncIterator=e,this[Symbol.asyncIterator]=()=>this._asyncIterator}},Symbol.asyncIterator,r),this.AsyncIterator=class{constructor(e,t){this._asyncIteratorPromise=e,this._params=t}next(){const e=this._params?.signal;return t.wrapWithAbortHandling(e,e=>e(this._asyncIteratorPromise.then(e=>e.next())),!1)}}}fetchFirst(e){const t=this._getDataProvider().then(t=>t.fetchFirst(e)[Symbol.asyncIterator]());return new this.AsyncIterable(new this.AsyncIterator(t))}fetchByKeys(e){const n=e?.signal;return t.wrapWithAbortHandling(n,t=>t(this._getDataProvider().then(t=>t.fetchByKeys(e))),!1)}containsKeys(e){const n=e?.signal;return t.wrapWithAbortHandling(n,t=>t(this._getDataProvider().then(t=>t.containsKeys(e))),!1)}fetchByOffset(e){return this._getDataProvider().then(t=>t.fetchByOffset(e))}getTotalSize(){return this._getDataProvider().then(e=>e.getTotalSize())}isEmpty(){return this[this._DATAPROVIDER]?this[this._DATAPROVIDER].isEmpty():"unknown"}getCapability(e){return this._capabilityFunc?this._capabilityFunc(e):null}addEventListener(e,t){this._getDataProvider().then(n=>{n.addEventListener(e,t)})}removeEventListener(e,t){this._getDataProvider().then(n=>{n.removeEventListener(e,t)})}dispatchEvent(e){return!!this[this._DATAPROVIDER]&&this[this._DATAPROVIDER].dispatchEvent(e)}_getDataProvider(){return this._dataProvider.then(e=>{if(n.DataProviderFeatureChecker.isDataProvider(e))return this[this._DATAPROVIDER]||(this[this._DATAPROVIDER]=e),e;throw new Error("Invalid data type. DeferredDataProvider takes a Promise<DataProvider>")})}}return e._registerLegacyNamespaceProp("DeferredDataProvider",r),r}),define("ojs/ojtracer",["exports","ojs/ojcustomelement-utils"],function(e,t){"use strict";class n{spanContext(){return{traceId:"",spanId:"",traceFlags:0}}setAttribute(e,t){return this}setAttributes(e){return this}addEvent(e,t,n){return this}setStatus(e){return this}updateName(e){return this}end(e){}isRecording(){return!1}recordException(e,t){}}class r{startSpan(e,t,r){return new n}startActiveSpan(e,t,r,i){let o;if(!(arguments.length<2))return o=2===arguments.length?t:3===arguments.length?r:i,o(new n)}}class i{getTracer(e,t){return new r}}let o;e.getDescriptiveText=function(e){const n=t.CustomElementUtils.getElementState(e);return n?.getDescriptiveText()??""},e.getTracerProvider=function(){return o||(o=new i),o},e.setTracerProvider=function(e){o=e},Object.defineProperty(e,"__esModule",{value:!0})}),define("ojs/ojcachediteratorresultsdataprovider",["ojs/ojcore-base","ojs/ojdataprovider","ojs/ojeventtarget","ojs/ojcomponentcore"],function(e,t,n,r){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;
/**
     * @preserve Copyright 2013 jQuery Foundation and other contributors
     * Released under the MIT license.
     * http://jquery.org/license
     */
class i{constructor(n,r){var o,s;this.dataProvider=n,this.options=r,this.CacheAsyncIterable=(s=class{constructor(e,t,n,r){this._parent=e,this.dataProviderAsyncIterator=t,this.params=n,this.cache=r,this[o]=()=>new this._parent.CacheAsyncIterator(this._parent,this.dataProviderAsyncIterator,this.params,this.cache)}},o=Symbol.asyncIterator,s),this.CacheAsyncIterator=class{constructor(e,t,n,r){this._parent=e,this.asyncIterator=t,this.params=n,this.cache=r,this._cachedOffset=0,this._needLocalRowCount="enabled"===e.options?.includeFilteredRowCount&&"enabled"===n?.includeFilteredRowCount&&"exact"!==e._baseFetchFirstCapability?.totalFilteredRowCount}_getStaleResult(e){return null!=e?e.value.data?.length>0?new this._parent.CacheAsyncIteratorYieldResult(e.value,-1):new this._parent.CacheAsyncIteratorReturnResult(e.value,-1):{value:{data:[],metadata:[],fetchParameters:this.params,totalFilteredRowCount:-1},done:!0}}next(){const e=this.params||{},n=e.size||-1,r=e?.signal;return t.wrapWithAbortHandling(r,t=>this.asyncIterator!==this._parent._currentAsyncIterator?t(this._getStaleResult()):this._needLocalRowCount&&0===this._cachedOffset?t(this._checkCachedParamsAndIterate(e,-1).then(t=>this.asyncIterator!==this._parent._currentAsyncIterator?this._getStaleResult(t):this._getResult(e,n,this._parent.cache.getSize()))):t(this._getResult(e,n,this._needLocalRowCount?this._parent.cache.getSize():void 0)),!1)}_getResult(e,t,n){let r;if(-1===t){if(this.cache.isDone())return r=this.cache.getDataList(e,this._cachedOffset),this._cachedOffset=this._cachedOffset+r.data.length,Promise.resolve(this._getFinalResult(r,n))}else{if(this.cache.getSize()>=this._cachedOffset+t||this.cache.isDone())return r=this.cache.getDataList(e,this._cachedOffset),this._cachedOffset=this._cachedOffset+r.data.length,Promise.resolve(this._getFinalResult(r,n));if(this._cachedOffset>0)return new Promise((n,r)=>{if(this._parent._getSharedIteratorState().fetchOffset<this._cachedOffset){const r=()=>this._checkCachedParamsAndIterate(e,t).then(e=>{if(this.asyncIterator!==this._parent._currentAsyncIterator)n();else{if(!(this._parent._getSharedIteratorState().fetchOffset>=this._cachedOffset||e.done))return r();n()}});return r()}n()}).then(()=>this.asyncIterator!==this._parent._currentAsyncIterator?this._getStaleResult():this._checkCachedParamsAndIterate(e,t).then(e=>this.asyncIterator!==this._parent._currentAsyncIterator?this._getStaleResult(e):(this._cachedOffset=this._parent._getSharedIteratorState().fetchOffset,Promise.resolve(this._getFinalResult(e.value,n)))))}return this._checkCachedParamsAndIterate(e,t).then(e=>this.asyncIterator!==this._parent._currentAsyncIterator?this._getStaleResult(e):(this._cachedOffset=this._parent._getSharedIteratorState().fetchOffset,Promise.resolve(this._getFinalResult(e.value,n))))}_getFinalResult(e,t){return!this._parent._getSharedIteratorState().cachedFetchParams.sortCriteria||e.fetchParameters&&e.fetchParameters.sortCriteria||(e.fetchParameters.sortCriteria=this._parent._getSharedIteratorState().cachedFetchParams.sortCriteria),e?.data?.length>0?new this._parent.CacheAsyncIteratorYieldResult(e,t):new this._parent.CacheAsyncIteratorReturnResult(e,t)}_checkCachedParamsAndIterate(e,t){let n,r=this._parent._getSharedIteratorState().cachedFetchParams,o=this._parent._getSharedIteratorState().fetchOffset,s=this._parent._getSharedIteratorState().fetchPromise;return s&&this._cachedOffset===o&&i._compareCachedFetchParameters(e,r)?n=s:(this._parent._getSharedIteratorState().cachedFetchParams=i._createCachedFetchParams(e),this._parent._getSharedIteratorState().fetchPromise=this.asyncIterator.next().then(e=>this.asyncIterator!==this._parent._currentAsyncIterator?this._getStaleResult(e):(e.value.fetchParameters?.sortCriteria&&(this._parent._getSharedIteratorState().cachedFetchParams.sortCriteria=e.value.fetchParameters?.sortCriteria),this._parent._getSharedIteratorState().fetchOffset=this._parent._getSharedIteratorState().fetchOffset+e.value.data.length,this._parent._getSharedIteratorState().fetchPromise=null,this.cache.addListResult(e),-1===t&&!this.cache.isDone()||t>0&&!this.cache.isDone()&&e.value.data.length<t?this.asyncIterator.next().then(t=>this.asyncIterator!==this._parent._currentAsyncIterator?this._getStaleResult(e):(this.cache.addListResult(t),e)):e)),n=this._parent._getSharedIteratorState().fetchPromise),n}},this.CacheAsyncIteratorYieldResult=class{constructor(e,t){this.value=e,this[i._VALUE]=void 0!==t?Object.assign({totalFilteredRowCount:t},e):e,this[i._DONE]=!1}},this.CacheAsyncIteratorReturnResult=class{constructor(e,t){this.value=e,this[i._VALUE]=void 0!==t?Object.assign({totalFilteredRowCount:t},e):e,this[i._DONE]=!0}},this.cache=new e.DataCache,this._lastFetchParams=null,n.createOptimizedKeyMap&&(this.createOptimizedKeyMap=e=>n.createOptimizedKeyMap(e)),n.createOptimizedKeySet&&(this.createOptimizedKeySet=e=>n.createOptimizedKeySet(e)),n.addEventListener(i._MUTATE,e=>{this.cache.processMutations(e.detail),this.dispatchEvent(e)}),n.addEventListener(i._REFRESH,e=>{this.cache.reset(),this._lastFetchParams=null,this._firstIteratorState=null,this.dispatchEvent(e)}),this._baseFetchFirstCapability=n.getCapability("fetchFirst")}containsKeys(e){const t=new Set,n=new Set,r=this.cache.getDataByKeys(e);if(e.keys.forEach(e=>{r.results.get(e)?t.add(e):n.add(e)}),0===n.size)return Promise.resolve({containsParameters:e,results:t});{const r={attributes:e.attributes,keys:n,scope:e.scope};return this.dataProvider.containsKeys(r).then(n=>(n.results.forEach(e=>{t.add(e)}),{containsParameters:e,results:t}))}}fetchByKeys(e){const n=new Map,r=new Set,i=e?.signal;return t.wrapWithAbortHandling(i,t=>{const i=this.cache.getDataByKeys(e);if(e.keys.forEach(e=>{const t=i.results.get(e);t?n.set(e,t):r.add(e)}),0===r.size)return t({fetchParameters:e,results:n});{const i={attributes:e.attributes,keys:r,scope:e.scope};return t(this.dataProvider.fetchByKeys(i).then(t=>(t.results.forEach((e,t)=>{n.set(t,e)}),{fetchParameters:e,results:n})))}},!1)}fetchByOffset(e){const n=e.size?e.size:i._DEFAULT_SIZE,r=e?.signal;return t.wrapWithAbortHandling(r,t=>{if(i._compareCachedFetchParameters(e,this._lastFetchParams)&&e.offset+n<=this.cache.getSize()){const r=JSON.parse(JSON.stringify(e,(e,t)=>{if(!e.startsWith("_"))return t}));r.size=n;const i=this.cache.getDataByOffset(r);if(i)return t(i)}return t(this.dataProvider.fetchByOffset(e))},!1)}fetchFirst(e){if(e?.signal?.aborted){const t=this.dataProvider.fetchFirst(e)[Symbol.asyncIterator]();return this._currentAsyncIterator=t,new this.CacheAsyncIterable(this,t,null,null)}if(!this._getSharedIteratorState()||!i._compareCachedFetchParameters(e,e&&this._getSharedIteratorState()?this._getSharedIteratorState().cachedFetchParams:this._lastFetchParams)){this.cache.reset(),this._lastFetchParams=i._createCachedFetchParams(e);const t=this.dataProvider.fetchFirst(e)[Symbol.asyncIterator]();this._firstIteratorState={cachedFetchParams:this._lastFetchParams,fetchOffset:0,fetchPromise:null,asyncIterator:t}}return this._currentAsyncIterator=this._getSharedIteratorState().asyncIterator,new this.CacheAsyncIterable(this,this._getSharedIteratorState().asyncIterator,e,this.cache)}getCapability(e){const t=this.dataProvider.getCapability(e);return"fetchCapability"===e?{attributeFilter:t?.attributeFilter,caching:"visitedByCurrentIterator"}:t}getTotalSize(){return null!=this._lastFetchParams&&!this._lastFetchParams.filterDef&&this.cache.isDone()?Promise.resolve(this.cache.getSize()):this.dataProvider.getTotalSize()}isEmpty(){return null!=this._lastFetchParams&&!this._lastFetchParams.filterDef&&this.cache.isDone()?0===this.cache.getSize()?"yes":"no":this.dataProvider.isEmpty()}_getSharedIteratorState(){return this._firstIteratorState}static _compareCachedFetchParameters(t,n){return t=t||{},!(null!=n&&n.signal?.aborted&&!t.signal?.aborted)&&(null!=n&&e.Object.compareValues(n.attributes,t.attributes||null)&&e.Object.compareValues(n.filterDef,i._getFilterDef(t.filterCriterion))&&e.Object.compareValues(n.sortCriteria,t.sortCriteria||null))}static _createCachedFetchParams(e){e=e||{};const t={};return t.size=e.size,t.attributes=e.attributes?JSON.parse(JSON.stringify(e.attributes)):null,t.filterDef=i._getFilterDef(e.filterCriterion),t.sortCriteria=e.sortCriteria?JSON.parse(JSON.stringify(e.sortCriteria)):null,t.signal=e.signal,t}static _getFilterDef(e){if(!e)return null;const t={};return Object.keys(e).forEach(n=>{"filter"!==n&&(t[n]=e[n])}),t}}return i._KEY="key",i._KEYS="keys",i._DATA="data",i._STARTINDEX="startIndex",i._SORT="sort",i._SORTCRITERIA="sortCriteria",i._FILTERCRITERION="filterCriterion",i._METADATA="metadata",i._ITEMS="items",i._FROM="from",i._OFFSET="offset",i._REFRESH="refresh",i._MUTATE="mutate",i._SIZE="size",i._FETCHPARAMETERS="fetchParameters",i._VALUE="value",i._DONE="done",i._RESULTS="results",i._CONTAINSPARAMETERS="containsParameters",i._DEFAULT_SIZE=25,i._CONTAINSKEYS="containsKeys",i._FETCHBYKEYS="fetchByKeys",i._FETCHBYOFFSET="fetchByOffset",i._FETCHFIRST="fetchFirst",i._ADDEVENTLISTENER="addEventListener",i._FETCHATTRIBUTES="attributes",n.EventTargetMixin.applyMixin(i),e._registerLegacyNamespaceProp("CachedIteratorResultsDataProvider",i),i}),define("ojs/ojdedupdataprovider",["ojs/ojcore-base","ojs/ojdataprovider","ojs/ojeventtarget","ojs/ojcachediteratorresultsdataprovider"],function(e,t,n,r){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;
/**
     * @preserve Copyright 2013 jQuery Foundation and other contributors
     * Released under the MIT license.
     * http://jquery.org/license
     */
class i{constructor(n){var o,s;this.dataProvider=n,this.DedupAsyncIterable=(s=class{constructor(e,t,n,r){this._parent=e,this.params=t,this.dataProviderAsyncIterator=n,this.cache=r,this[o]=()=>new this._parent.DedupAsyncIterator(this._parent,this.params,this.dataProviderAsyncIterator,this.cache)}},o=Symbol.asyncIterator,s),this.DedupAsyncIterator=class{constructor(e,t,n,r){this._parent=e,this.params=t,this.asyncIterator=n,this.cache=r,this._cachedOffset=0}next(){const e=new Set;if(this.params.size>0){this._parent.cache.getDataByOffset({offset:0,size:this._cachedOffset}).results.forEach(t=>{e.add(t.metadata.key)})}return this.asyncIterator.next().then(n=>{const o=n[i._VALUE],s=o.metadata.map(e=>e[i._KEY]);this._cachedOffset=this._cachedOffset+s.length;const a=new Set;s.forEach(e=>{a.add(e)});const l=[],c=[],u=[];if(a.forEach((t,n)=>{e.has(t)&&(l.push(t),c.push(o.data[n]),u.push(o.metadata[n]))}),l.length>0){const e=new Set;for(const t of l)e.add(t);const n=new this._parent.DataProviderOperationEventDetail(this._parent,e,u,c,[]),r=new this._parent.DataProviderMutationEventDetail(this._parent,null,n,null);this._parent.dispatchEvent(new t.DataProviderMutationEvent(r))}return this._parent.dataProvider instanceof r||this._parent.cache.addListResult(n),n})}},this.DataProviderMutationEventDetail=class{constructor(e,t,n,r){this._parent=e,this.add=t,this.remove=n,this.update=r,this[i._ADD]=t,this[i._REMOVE]=n,this[i._UPDATE]=r}},this.DataProviderOperationEventDetail=class{constructor(e,t,n,r,o){this._parent=e,this.keys=t,this.metadata=n,this.data=r,this.indexes=o,this[i._KEYS]=t,this[i._METADATA]=n,this[i._DATA]=r,this[i._INDEXES]=o}},this.cache=n instanceof r?n.cache:new e.DataCache,n.createOptimizedKeyMap&&(this.createOptimizedKeyMap=e=>n.createOptimizedKeyMap(e)),n.createOptimizedKeySet&&(this.createOptimizedKeySet=e=>n.createOptimizedKeySet(e)),n.addEventListener(i._MUTATE,e=>{e.detail&&e.detail.add&&this._processAddMutations(e.detail.add),this.dispatchEvent(e)}),n.addEventListener(i._REFRESH,e=>{this.cache.reset(),this.dispatchEvent(e)})}containsKeys(e){return this.dataProvider.containsKeys(e)}fetchByKeys(e){return this.dataProvider.fetchByKeys(e)}fetchByOffset(e){return this.dataProvider.fetchByOffset(e)}fetchFirst(e){const t=this.dataProvider.fetchFirst(e);return new this.DedupAsyncIterable(this,e,t[Symbol.asyncIterator](),this.cache)}getCapability(e){const t=this.dataProvider.getCapability(e);return"dedup"===e?{type:"iterator"}:t}getTotalSize(){return this.dataProvider.getTotalSize()}isEmpty(){return this.dataProvider.isEmpty()}_processAddMutations(e){const n=e[i._KEYS];if(n&&n.size>0){const e=new Set,r=[],i=[];if(this.cache.getDataByKeys({keys:n}).results.forEach((t,n)=>{e.add(n),r.push(t.data),i.push(t.metadata)}),e.size>0){const n=new this.DataProviderOperationEventDetail(this,e,i,r,[]),o=new this.DataProviderMutationEventDetail(this,null,n,null);this.dispatchEvent(new t.DataProviderMutationEvent(o))}}}}return i._KEY="key",i._KEYS="keys",i._DATA="data",i._METADATA="metadata",i._ITEMS="items",i._FROM="from",i._OFFSET="offset",i._REFRESH="refresh",i._MUTATE="mutate",i._SIZE="size",i._FETCHPARAMETERS="fetchParameters",i._VALUE="value",i._DONE="done",i._RESULTS="results",i._ADD="add",i._UPDATE="update",i._REMOVE="remove",i._INDEXES="indexes",n.EventTargetMixin.applyMixin(i),e._registerLegacyNamespaceProp("DedupDataProvider",i),i}),define("ojs/ojmutateeventfilteringdataprovider",["ojs/ojcore-base","ojs/ojdataprovider","ojs/ojcachediteratorresultsdataprovider","ojs/ojdedupdataprovider","ojs/ojcomponentcore","ojs/ojeventtarget"],function(e,t,n,r,i,o){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;
/**
     * @preserve Copyright 2013 jQuery Foundation and other contributors
     * Released under the MIT license.
     * http://jquery.org/license
     */
class s{constructor(i){var o,a;this.dataProvider=i,this.MutateEventFilteringAsyncIterable=(a=class{constructor(e,t,n,r){this._parent=e,this.params=t,this.dataProviderAsyncIterator=n,this.cache=r,this[o]=()=>new this._parent.MutateEventFilteringAsyncIterator(this._parent,this.params,this.dataProviderAsyncIterator,this.cache)}},o=Symbol.asyncIterator,a),this.MutateEventFilteringAsyncIterator=class{constructor(e,t,n,r){this._parent=e,this.params=t,this.asyncIterator=n,this.cache=r}next(){let e=this;const i=this.params?.signal;return t.wrapWithAbortHandling(i,t=>t(this.asyncIterator.next().then(t=>(e._parent.dataProvider instanceof n||e._parent.dataProvider instanceof r||e._parent.cache.addListResult(t),t))),!1)}},this.DataProviderMutationEventDetail=class{constructor(e,t,n){this.add=e,this.remove=t,this.update=n,this[s._ADD]=e,this[s._REMOVE]=t,this[s._UPDATE]=n}};let l=this;this.cache=i instanceof n||i instanceof r?i.cache:new e.DataCache,i.createOptimizedKeyMap&&(this.createOptimizedKeyMap=e=>i.createOptimizedKeyMap(e)),i.createOptimizedKeySet&&(this.createOptimizedKeySet=e=>i.createOptimizedKeySet(e)),i.addEventListener(s._MUTATE,e=>{if(e.detail){let t=l._processMutations(e.detail.remove),n=l._processMutations(e.detail.update);if(t&&t.keys&&t.keys.size>0||n&&n.keys&&n.keys.size>0||e.detail.add&&e.detail.add.keys&&e.detail.add.keys.size>0){let r=new l.DataProviderMutationEventDetail(e.detail.add,t,n),i=Object.assign({},e);i.detail=r,l.dispatchEvent(i)}}else l.dispatchEvent(e)}),i.addEventListener(s._REFRESH,e=>{l.cache.reset(),l.dispatchEvent(e)})}containsKeys(e){return this.dataProvider.containsKeys(e)}fetchByKeys(e){const n=e?.signal;return t.wrapWithAbortHandling(n,t=>t(this.dataProvider.fetchByKeys(e)),!1)}fetchByOffset(e){const n=e?.signal;return t.wrapWithAbortHandling(n,t=>t(this.dataProvider.fetchByOffset(e)),!1)}fetchFirst(e){const t=this.dataProvider.fetchFirst(e);return new this.MutateEventFilteringAsyncIterable(this,e,t[Symbol.asyncIterator](),this.cache)}getCapability(e){let t=this.dataProvider.getCapability(e);return"eventFiltering"===e?{type:"iterator"}:t}getTotalSize(){return this.dataProvider.getTotalSize()}isEmpty(){return this.dataProvider.isEmpty()}_processMutations(e){if(e){let t=e[s._KEYS];if(t&&t.size>0){let n=new Set,r=this.cache.getDataByKeys({keys:t});t.forEach(function(e){r.results.has(e)||n.add(e)});let i=Object.assign({},e);return n.forEach(function(e){let t=[];i.keys.forEach(function(e){t.push(e)});let n=t.indexOf(e);i.keys.delete(e),t.splice(n,1),i.data&&i.data.splice(n,1),i.indexes&&i.indexes.splice(n,1),i.metadata&&i.metadata.splice(n,1)}),i}}return e}}return s._KEY="key",s._KEYS="keys",s._DATA="data",s._METADATA="metadata",s._ITEMS="items",s._FROM="from",s._OFFSET="offset",s._REFRESH="refresh",s._MUTATE="mutate",s._SIZE="size",s._FETCHPARAMETERS="fetchParameters",s._VALUE="value",s._DONE="done",s._RESULTS="results",s._ADD="add",s._UPDATE="update",s._REMOVE="remove",s._INDEXES="indexes",o.EventTargetMixin.applyMixin(s),e._registerLegacyNamespaceProp("MutateEventFilteringDataProvider",s),s}),define("ojs/ojdataproviderfactory",["exports","ojs/ojeventtarget","ojs/ojcachediteratorresultsdataprovider","ojs/ojdedupdataprovider","ojs/ojmutateeventfilteringdataprovider"],function(e,t,n,r,i){"use strict";function o(e,t){const o=t?.fetchFirst,a=t?.dedup,l=t?.eventFiltering,c=e.getCapability("fetchFirst")||e.getCapability("fetchCapability"),u=e.getCapability("dedup"),d=e.getCapability("eventFiltering");let h=!1,p=!1,f=!1,_=!1;const m=c?.caching;"visitedByCurrentIterator"===o?.caching&&"all"!==m&&"visitedByCurrentIterator"!==m&&(h=!0);const g=c?.totalFilteredRowCount;"exact"===o?.totalFilteredRowCount&&"exact"!==g&&(p=!0);const v=u?.type;"iterator"===a?.type&&"global"!==v&&"iterator"!==v&&(f=!0);const y=d?.type;"iterator"===l?.type&&"global"!==y&&"iterator"!==y&&(_=!0);let E=e;return(h||p)&&(E=new n(E,p?{includeFilteredRowCount:"enabled"}:void 0)),f&&(E=new r(E)),_&&(E=new i(E)),e.getChildDataProvider&&(E=new s(e,E,t)),E}n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;class s{constructor(e,t,n){this.treeDataProvider=e,this.enhancedDataProvider=t,this.capabilityConfigurations=n,t.addEventListener(s._MUTATE,e=>{this.updateCache(e),this.dispatchEvent(e)}),t.addEventListener(s._REFRESH,e=>{this.flushCache(),this.dispatchEvent(e)}),t.createOptimizedKeyMap&&(this.createOptimizedKeyMap=e=>t.createOptimizedKeyMap(e)),t.createOptimizedKeySet&&(this.createOptimizedKeySet=e=>t.createOptimizedKeySet(e)),this._mapKeyToChild=new Map}getChildDataProvider(e){const t=this._mapKeyToChild.get(e);return t||this.cacheEnhancedDataProvider(e)}containsKeys(e){return this.enhancedDataProvider.containsKeys(e)}fetchByKeys(e){return this.enhancedDataProvider.fetchByKeys(e)}fetchByOffset(e){return this.enhancedDataProvider.fetchByOffset(e)}fetchFirst(e){return this.enhancedDataProvider.fetchFirst(e)}getCapability(e){return this.enhancedDataProvider.getCapability(e)}getTotalSize(){return this.enhancedDataProvider.getTotalSize()}isEmpty(){return this.enhancedDataProvider.isEmpty()}cacheEnhancedDataProvider(e){const t=this.treeDataProvider.getChildDataProvider(e);if(t){const n=o(t,this.capabilityConfigurations);return this._mapKeyToChild.set(e,n),n}return null}updateCache(e){const t=e.detail.remove,n=e.detail.update;let r;t&&(r=t.keys,r&&r.forEach(e=>{this._mapKeyToChild.delete(e)})),n&&(r=n.keys,r&&r.forEach(e=>{this._mapKeyToChild.delete(e)}))}flushCache(){this._mapKeyToChild.clear()}}s._REFRESH="refresh",s._MUTATE="mutate",t.EventTargetMixin.applyMixin(s),e.getEnhancedDataProvider=o,Object.defineProperty(e,"__esModule",{value:!0})}),define("bundles/ojcorebundle",function(){});
//# sourceMappingURL=ojcorebundle.js.map